{
  "version": 3,
  "sources": ["../src/subscription_2.js", "../src/mutation.js", "../node_modules/graphql/jsutils/isObjectLike.mjs", "../node_modules/graphql/polyfills/symbols.mjs", "../node_modules/graphql/language/location.mjs", "../node_modules/graphql/language/printLocation.mjs", "../node_modules/graphql/error/GraphQLError.mjs", "../node_modules/graphql/error/syntaxError.mjs", "../node_modules/graphql/language/kinds.mjs", "../node_modules/graphql/jsutils/invariant.mjs", "../node_modules/graphql/jsutils/nodejsCustomInspectSymbol.mjs", "../node_modules/graphql/jsutils/defineInspect.mjs", "../node_modules/graphql/language/ast.mjs", "../node_modules/graphql/language/tokenKind.mjs", "../node_modules/graphql/jsutils/inspect.mjs", "../node_modules/graphql/jsutils/devAssert.mjs", "../node_modules/graphql/jsutils/instanceOf.mjs", "../node_modules/graphql/language/source.mjs", "../node_modules/graphql/language/directiveLocation.mjs", "../node_modules/graphql/language/blockString.mjs", "../node_modules/graphql/language/lexer.mjs", "../node_modules/graphql/language/parser.mjs", "../node_modules/graphql/language/visitor.mjs", "../node_modules/graphql/language/printer.mjs", "../node_modules/tslib/tslib.es6.mjs", "../node_modules/rxjs/src/internal/util/isFunction.ts", "../node_modules/rxjs/src/internal/util/createErrorClass.ts", "../node_modules/rxjs/src/internal/util/UnsubscriptionError.ts", "../node_modules/rxjs/src/internal/util/arrRemove.ts", "../node_modules/rxjs/src/internal/Subscription.ts", "../node_modules/rxjs/src/internal/config.ts", "../node_modules/rxjs/src/internal/scheduler/timeoutProvider.ts", "../node_modules/rxjs/src/internal/util/reportUnhandledError.ts", "../node_modules/rxjs/src/internal/util/noop.ts", "../node_modules/rxjs/src/internal/NotificationFactories.ts", "../node_modules/rxjs/src/internal/util/errorContext.ts", "../node_modules/rxjs/src/internal/Subscriber.ts", "../node_modules/rxjs/src/internal/symbol/observable.ts", "../node_modules/rxjs/src/internal/util/identity.ts", "../node_modules/rxjs/src/internal/util/pipe.ts", "../node_modules/rxjs/src/internal/Observable.ts", "../node_modules/rxjs/src/internal/util/lift.ts", "../node_modules/rxjs/src/internal/operators/OperatorSubscriber.ts", "../node_modules/rxjs/src/internal/util/isArrayLike.ts", "../node_modules/rxjs/src/internal/util/isPromise.ts", "../node_modules/rxjs/src/internal/util/isInteropObservable.ts", "../node_modules/rxjs/src/internal/util/isAsyncIterable.ts", "../node_modules/rxjs/src/internal/util/throwUnobservableError.ts", "../node_modules/rxjs/src/internal/symbol/iterator.ts", "../node_modules/rxjs/src/internal/util/isIterable.ts", "../node_modules/rxjs/src/internal/util/isReadableStreamLike.ts", "../node_modules/rxjs/src/internal/observable/innerFrom.ts", "../node_modules/rxjs/src/internal/util/executeSchedule.ts", "../node_modules/rxjs/src/internal/operators/observeOn.ts", "../node_modules/rxjs/src/internal/operators/subscribeOn.ts", "../node_modules/rxjs/src/internal/scheduled/scheduleObservable.ts", "../node_modules/rxjs/src/internal/scheduled/schedulePromise.ts", "../node_modules/rxjs/src/internal/scheduled/scheduleArray.ts", "../node_modules/rxjs/src/internal/scheduled/scheduleIterable.ts", "../node_modules/rxjs/src/internal/scheduled/scheduleAsyncIterable.ts", "../node_modules/rxjs/src/internal/scheduled/scheduleReadableStreamLike.ts", "../node_modules/rxjs/src/internal/scheduled/scheduled.ts", "../node_modules/rxjs/src/internal/observable/from.ts", "../node_modules/rxjs/src/internal/operators/map.ts", "../node_modules/rxjs/src/internal/operators/filter.ts", "../node_modules/rxjs/src/internal/operators/catchError.ts", "../node_modules/@aws-amplify/core/src/errors/AmplifyError.ts", "../node_modules/@aws-amplify/core/src/types/errors.ts", "../node_modules/@aws-amplify/core/src/errors/createAssertionFunction.ts", "../node_modules/@aws-amplify/core/src/utils/globalHelpers/index.ts", "../node_modules/@aws-amplify/core/src/constants.ts", "../node_modules/@aws-amplify/core/src/Logger/types.ts", "../node_modules/@aws-amplify/core/src/Logger/ConsoleLogger.ts", "../node_modules/@aws-amplify/core/src/utils/isBrowser.ts", "../node_modules/@aws-amplify/core/src/utils/isWebWorker.ts", "../node_modules/@aws-amplify/core/src/utils/retry/NonRetryableError.ts", "../node_modules/@aws-amplify/core/src/utils/retry/isNonRetryableError.ts", "../node_modules/@aws-amplify/core/src/utils/retry/constants.ts", "../node_modules/@aws-amplify/core/src/utils/retry/jitteredBackoff.ts", "../node_modules/@aws-amplify/core/src/utils/retry/retry.ts", "../node_modules/@aws-amplify/core/src/utils/retry/jitteredExponentialRetry.ts", "../node_modules/@aws-amplify/core/src/utils/urlSafeDecode.ts", "../node_modules/@aws-amplify/core/src/utils/deDupeAsyncFunction.ts", "../node_modules/@aws-amplify/core/src/utils/isTokenExpired.ts", "../node_modules/@aws-amplify/core/src/parseAWSExports.ts", "../node_modules/@aws-amplify/core/src/parseAmplifyOutputs.ts", "../node_modules/@aws-amplify/core/src/singleton/constants.ts", "../node_modules/uuid/dist/esm-browser/rng.js", "../node_modules/uuid/dist/esm-browser/stringify.js", "../node_modules/uuid/dist/esm-browser/native.js", "../node_modules/uuid/dist/esm-browser/v4.js", "../node_modules/@aws-amplify/core/src/utils/amplifyUuid/index.ts", "../node_modules/@aws-amplify/core/src/utils/amplifyUrl/index.ts", "../node_modules/@aws-amplify/core/src/utils/parseAmplifyConfig.ts", "../node_modules/@aws-amplify/core/src/utils/convert/base64/base64Decoder.ts", "../node_modules/@aws-amplify/core/src/singleton/Auth/utils/errorHelpers.ts", "../node_modules/@aws-amplify/core/src/singleton/Auth/utils/index.ts", "../node_modules/@aws-amplify/core/src/clients/middleware/signing/signer/signatureV4/utils/getSignedHeaders.ts", "../node_modules/@aws-amplify/core/src/clients/middleware/signing/signer/signatureV4/constants.ts", "../node_modules/@aws-amplify/core/src/clients/middleware/signing/signer/signatureV4/utils/getCredentialScope.ts", "../node_modules/@aws-amplify/core/src/clients/middleware/signing/signer/signatureV4/utils/getFormattedDates.ts", "../node_modules/@aws-amplify/core/src/clients/middleware/signing/signer/signatureV4/utils/getSigningValues.ts", "../node_modules/@aws-crypto/sha256-js/src/constants.ts", "../node_modules/@aws-crypto/sha256-js/src/RawSha256.ts", "../node_modules/@smithy/util-utf8/dist-es/fromUtf8.browser.js", "../node_modules/@aws-crypto/util/src/convertToBuffer.ts", "../node_modules/@aws-crypto/util/src/isEmptyData.ts", "../node_modules/@aws-crypto/sha256-js/src/jsSha256.ts", "../node_modules/@smithy/util-hex-encoding/dist-es/index.js", "../node_modules/@aws-amplify/core/src/clients/middleware/signing/signer/signatureV4/utils/dataHashHelpers.ts", "../node_modules/@aws-amplify/core/src/clients/middleware/signing/signer/signatureV4/utils/getCanonicalHeaders.ts", "../node_modules/@aws-amplify/core/src/clients/middleware/signing/signer/signatureV4/utils/getCanonicalQueryString.ts", "../node_modules/@aws-amplify/core/src/clients/middleware/signing/signer/signatureV4/utils/getCanonicalUri.ts", "../node_modules/@aws-amplify/core/src/clients/middleware/signing/signer/signatureV4/utils/getHashedPayload.ts", "../node_modules/@aws-amplify/core/src/clients/middleware/signing/signer/signatureV4/utils/getCanonicalRequest.ts", "../node_modules/@aws-amplify/core/src/clients/middleware/signing/signer/signatureV4/utils/getSigningKey.ts", "../node_modules/@aws-amplify/core/src/clients/middleware/signing/signer/signatureV4/utils/getStringToSign.ts", "../node_modules/@aws-amplify/core/src/clients/middleware/signing/signer/signatureV4/utils/getSignature.ts", "../node_modules/@aws-amplify/core/src/clients/middleware/signing/signer/signatureV4/signRequest.ts", "../node_modules/@aws-amplify/core/src/Platform/types.ts", "../node_modules/@aws-amplify/core/src/Platform/version.ts", "../node_modules/@aws-amplify/core/src/Platform/detection/helpers.ts", "../node_modules/@aws-amplify/core/src/Platform/detection/React.ts", "../node_modules/@aws-amplify/core/src/Platform/detection/Vue.ts", "../node_modules/@aws-amplify/core/src/Platform/detection/Svelte.ts", "../node_modules/@aws-amplify/core/src/Platform/detection/Next.ts", "../node_modules/@aws-amplify/core/src/Platform/detection/Nuxt.ts", "../node_modules/@aws-amplify/core/src/Platform/detection/Angular.ts", "../node_modules/@aws-amplify/core/src/Platform/detection/ReactNative.ts", "../node_modules/@aws-amplify/core/src/Platform/detection/Expo.ts", "../node_modules/@aws-amplify/core/src/Platform/detection/Web.ts", "../node_modules/@aws-amplify/core/src/Platform/detection/index.ts", "../node_modules/@aws-amplify/core/src/Platform/detectFramework.ts", "../node_modules/@aws-amplify/core/src/Platform/customUserAgent.ts", "../node_modules/@aws-amplify/core/src/Platform/index.ts", "../node_modules/@aws-amplify/core/src/errors/APIError.ts", "../node_modules/@aws-amplify/core/src/errors/PlatformNotSupportedError.ts", "../node_modules/@aws-amplify/core/src/Reachability/Reachability.ts", "../node_modules/@aws-amplify/core/src/singleton/apis/internal/fetchAuthSession.ts", "../node_modules/@aws-amplify/core/src/Hub/index.ts", "../node_modules/@aws-amplify/core/src/utils/convert/base64/bytesToString.ts", "../node_modules/@aws-amplify/core/src/utils/convert/base64/base64Encoder.ts", "../node_modules/@aws-amplify/api-rest/src/errors/RestApiError.ts", "../node_modules/@aws-amplify/api-rest/src/errors/CanceledError.ts", "../node_modules/@aws-amplify/core/src/utils/deepFreeze.ts", "../node_modules/@aws-amplify/core/src/singleton/Auth/index.ts", "../node_modules/@aws-amplify/core/src/singleton/Amplify.ts", "../node_modules/@aws-amplify/core/src/singleton/apis/fetchAuthSession.ts", "../node_modules/@aws-amplify/core/src/clients/serde/responseInfo.ts", "../node_modules/@aws-amplify/core/src/clients/serde/json.ts", "../node_modules/@aws-amplify/core/src/clients/internal/composeServiceApi.ts", "../node_modules/@aws-amplify/core/src/clients/endpoints/partitions.ts", "../node_modules/@aws-amplify/core/src/clients/endpoints/getDnsSuffix.ts", "../node_modules/@aws-amplify/core/src/clients/middleware/retry/constants.ts", "../node_modules/@aws-amplify/core/src/clients/middleware/retry/retryMiddleware.ts", "../node_modules/@aws-amplify/core/src/clients/middleware/retry/amzSdkInvocationIdHeaderMiddleware.ts", "../node_modules/@aws-amplify/core/src/clients/middleware/retry/amzSdkRequestHeaderMiddleware.ts", "../node_modules/@aws-amplify/core/src/clients/middleware/userAgent/middleware.ts", "../node_modules/@aws-amplify/core/src/clients/internal/composeTransferHandler.ts", "../node_modules/@aws-amplify/core/src/clients/utils/memoization.ts", "../node_modules/@aws-amplify/core/src/clients/handlers/fetch.ts", "../node_modules/@aws-amplify/core/src/clients/handlers/aws/unauthenticated.ts", "../node_modules/@aws-amplify/core/src/clients/middleware/retry/jitteredBackoff.ts", "../node_modules/@aws-amplify/core/src/clients/middleware/retry/isClockSkewError.ts", "../node_modules/@aws-amplify/core/src/clients/middleware/retry/defaultRetryDecider.ts", "../node_modules/@aws-amplify/core/src/awsClients/cognitoIdentity/base.ts", "../node_modules/@aws-amplify/core/src/awsClients/cognitoIdentity/getId.ts", "../node_modules/@aws-amplify/core/src/awsClients/cognitoIdentity/getCredentialsForIdentity.ts", "../node_modules/@aws-amplify/core/src/storage/KeyValueStorage.ts", "../node_modules/@aws-amplify/core/src/storage/InMemoryStorage.ts", "../node_modules/@aws-amplify/core/src/storage/utils.ts", "../node_modules/@aws-amplify/core/src/storage/DefaultStorage.ts", "../node_modules/@aws-amplify/core/src/storage/SessionStorage.ts", "../node_modules/@aws-amplify/core/src/storage/SyncKeyValueStorage.ts", "../node_modules/@aws-amplify/core/src/storage/SyncSessionStorage.ts", "../node_modules/js-cookie/dist/js.cookie.mjs", "../node_modules/@aws-amplify/core/src/storage/CookieStorage.ts", "../node_modules/@aws-amplify/core/src/storage/index.ts", "../node_modules/@aws-amplify/core/src/Cache/constants.ts", "../node_modules/@aws-amplify/core/src/Cache/utils/cacheHelpers.ts", "../node_modules/@aws-amplify/core/src/Cache/utils/errorHelpers.ts", "../node_modules/@aws-amplify/core/src/Cache/StorageCacheCommon.ts", "../node_modules/@aws-amplify/core/src/Cache/StorageCache.ts", "../node_modules/@aws-amplify/core/src/Cache/index.ts", "../node_modules/@aws-amplify/core/src/I18n/I18n.ts", "../node_modules/@aws-amplify/core/src/I18n/errorHelpers.ts", "../node_modules/@aws-amplify/core/src/I18n/index.ts", "../node_modules/@aws-amplify/core/src/clients/middleware/signing/utils/getSkewCorrectedDate.ts", "../node_modules/@aws-amplify/core/src/clients/middleware/signing/utils/isClockSkewed.ts", "../node_modules/@aws-amplify/core/src/clients/middleware/signing/utils/getUpdatedSystemClockOffset.ts", "../node_modules/@aws-amplify/core/src/clients/middleware/signing/middleware.ts", "../node_modules/@aws-amplify/api-rest/src/errors/validation.ts", "../node_modules/@aws-amplify/api-rest/src/utils/serviceError.ts", "../node_modules/@aws-amplify/api-rest/src/utils/logger.ts", "../node_modules/@aws-amplify/api-rest/src/utils/createCancellableOperation.ts", "../node_modules/@aws-amplify/api-rest/src/utils/constants.ts", "../node_modules/@aws-amplify/api-rest/src/utils/parseSigningInfo.ts", "../node_modules/@aws-amplify/api-rest/src/utils/isIamAuthApplicable.ts", "../node_modules/@aws-amplify/api-rest/src/utils/resolveHeaders.ts", "../node_modules/@aws-amplify/api-rest/src/apis/common/baseHandlers/authenticatedHandler.ts", "../node_modules/@aws-amplify/api-rest/src/apis/common/baseHandlers/unauthenticatedHandler.ts", "../node_modules/@aws-amplify/api-rest/src/apis/common/transferHandler.ts", "../node_modules/@aws-amplify/api-rest/src/apis/common/internalPost.ts", "../node_modules/@aws-amplify/api-graphql/src/Providers/constants.ts", "../node_modules/@aws-amplify/api-graphql/src/types/PubSub.ts", "../node_modules/@aws-amplify/api-graphql/src/utils/ReachabilityMonitor/index.ts", "../node_modules/@aws-amplify/api-graphql/src/utils/ConnectionStateMonitor.ts", "../node_modules/@aws-amplify/api-graphql/src/utils/ReconnectionMonitor.ts", "../node_modules/@aws-amplify/api-graphql/src/Providers/AWSWebSocketProvider/appsyncUrl.ts", "../node_modules/@aws-amplify/api-graphql/src/Providers/AWSWebSocketProvider/authHeaders.ts", "../node_modules/@aws-amplify/api-graphql/src/Providers/AWSWebSocketProvider/index.ts", "../node_modules/@aws-amplify/api-graphql/src/Providers/AWSAppSyncRealTimeProvider/index.ts", "../node_modules/@aws-amplify/api-graphql/src/utils/errors/GraphQLApiError.ts", "../node_modules/@aws-amplify/api-graphql/src/utils/errors/validation.ts", "../node_modules/@aws-amplify/api-graphql/src/utils/errors/assertValidationError.ts", "../node_modules/@aws-amplify/api-graphql/src/utils/resolveConfig.ts", "../node_modules/@aws-amplify/api-graphql/src/utils/resolveLibraryOptions.ts", "../node_modules/@aws-amplify/api-graphql/src/utils/errors/repackageAuthError.ts", "../node_modules/@aws-amplify/api-graphql/src/types/index.ts", "../node_modules/@aws-amplify/api-graphql/src/utils/errors/constants.ts", "../node_modules/@aws-amplify/api-graphql/src/utils/errors/createGraphQLResultWithError.ts", "../node_modules/@aws-amplify/api-graphql/src/internals/utils/runtimeTypeGuards/isGraphQLResponseWithErrors.ts", "../node_modules/@aws-amplify/api-graphql/src/internals/graphqlAuth.ts", "../node_modules/@aws-amplify/api-graphql/src/internals/InternalGraphQLAPI.ts", "../node_modules/@aws-amplify/data-schema-types/src/client/symbol.ts", "../node_modules/@aws-amplify/data-schema/src/runtime/utils/resolveOwnerFields.ts", "../node_modules/@aws-amplify/data-schema/src/runtime/utils/stringTransformation.ts", "../node_modules/@aws-amplify/data-schema/src/runtime/utils/selfAwareAsync.ts", "../node_modules/@aws-amplify/data-schema/src/runtime/internals/cancellation.ts", "../node_modules/@aws-amplify/data-schema/src/runtime/internals/APIClient.ts", "../node_modules/@aws-amplify/data-schema/src/runtime/internals/operations/utils.ts", "../node_modules/@aws-amplify/data-schema/src/runtime/internals/ai/getCustomUserAgentDetails.ts", "../node_modules/@aws-amplify/data-schema/src/runtime/internals/operations/custom.ts", "../node_modules/@aws-amplify/data-schema/src/runtime/internals/generateCustomOperationsProperty.ts", "../node_modules/@aws-amplify/data-schema/src/runtime/internals/operations/get.ts", "../node_modules/@aws-amplify/data-schema/src/runtime/internals/operations/list.ts", "../node_modules/@smithy/util-base64/dist-es/constants.browser.js", "../node_modules/@smithy/util-base64/dist-es/fromBase64.browser.js", "../node_modules/@smithy/util-base64/node_modules/@smithy/util-utf8/dist-es/fromUtf8.browser.js", "../node_modules/@smithy/util-base64/dist-es/toBase64.browser.js", "../node_modules/@aws-amplify/data-schema/src/runtime/internals/ai/conversationMessageDeserializers.ts", "../node_modules/@aws-amplify/data-schema/src/runtime/internals/ai/convertItemToConversationMessage.ts", "../node_modules/@aws-amplify/data-schema/src/runtime/internals/ai/createListMessagesFunction.ts", "../node_modules/@aws-amplify/data-schema/src/runtime/internals/ai/conversationStreamEventDeserializers.ts", "../node_modules/@aws-amplify/data-schema/src/runtime/internals/ai/createOnStreamEventFunction.ts", "../node_modules/@aws-amplify/data-schema/src/runtime/internals/ai/conversationMessageSerializers.ts", "../node_modules/@aws-amplify/data-schema/src/runtime/internals/ai/createSendMessageFunction.ts", "../node_modules/@aws-amplify/data-schema/src/runtime/internals/ai/convertItemToConversation.ts", "../node_modules/@aws-amplify/data-schema/src/runtime/internals/ai/createCreateConversationFunction.ts", "../node_modules/@aws-amplify/data-schema/src/runtime/internals/ai/createGetConversationFunction.ts", "../node_modules/@aws-amplify/data-schema/src/runtime/internals/ai/createListConversationsFunction.ts", "../node_modules/@aws-amplify/data-schema/src/runtime/internals/ai/createDeleteConversationFunction.ts", "../node_modules/@aws-amplify/data-schema/src/runtime/internals/ai/createUpdateConversationFunction.ts", "../node_modules/@aws-amplify/data-schema/src/runtime/internals/utils/clientProperties/generateConversationsProperty.ts", "../node_modules/@aws-amplify/data-schema/src/runtime/internals/utils/clientProperties/generateGenerationsProperty.ts", "../node_modules/@aws-amplify/data-schema/src/runtime/internals/utils/clientProperties/generateEnumsProperty.ts", "../node_modules/@aws-amplify/data-schema/src/runtime/internals/operations/indexQuery.ts", "../node_modules/@aws-amplify/data-schema/src/runtime/internals/operations/subscription.ts", "../node_modules/@aws-amplify/data-schema/src/runtime/utils/resolvePKFields.ts", "../node_modules/@aws-amplify/data-schema/src/runtime/utils/findIndexByFields.ts", "../node_modules/@aws-amplify/data-schema/src/runtime/internals/operations/observeQuery.ts", "../node_modules/@aws-amplify/data-schema/src/runtime/internals/clientUtils.ts", "../node_modules/@aws-amplify/data-schema/src/runtime/internals/utils/clientProperties/generateModelsProperty.ts", "../node_modules/@aws-amplify/data-schema/src/runtime/addSchemaToClient.ts", "../node_modules/@aws-amplify/api-graphql/src/GraphQLAPI.ts", "../node_modules/@aws-amplify/api-graphql/src/internals/v6.ts", "../node_modules/@aws-amplify/api-graphql/src/internals/utils/runtimeTypeGuards/isApiGraphQLProviderConfig.ts", "../node_modules/@aws-amplify/api-graphql/src/internals/utils/runtimeTypeGuards/isConfigureEventWithResourceConfig.ts", "../node_modules/@aws-amplify/api-graphql/src/internals/generateClient.ts", "../node_modules/@aws-amplify/api/src/API.ts", "../src/aws-exports.js", "../node_modules/@aws-amplify/auth/src/errors/types/validation.ts", "../node_modules/@aws-amplify/auth/src/common/AuthErrorStrings.ts", "../node_modules/@aws-amplify/auth/src/errors/AuthError.ts", "../node_modules/@aws-amplify/auth/src/foundation/parsers/regionParsers.ts", "../node_modules/@aws-amplify/auth/src/errors/constants.ts", "../node_modules/@aws-amplify/auth/src/providers/cognito/utils/types.ts", "../node_modules/@aws-amplify/auth/src/providers/cognito/apis/internal/getCurrentUser.ts", "../node_modules/@aws-amplify/auth/src/providers/cognito/apis/getCurrentUser.ts", "../node_modules/@aws-amplify/auth/src/utils/getAuthUserAgentValue.ts", "../node_modules/@aws-amplify/auth/src/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolSerializer.ts", "../node_modules/@aws-amplify/auth/src/errors/utils/assertServiceError.ts", "../node_modules/@aws-amplify/auth/src/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolDeserializer.ts", "../node_modules/@aws-amplify/auth/src/foundation/factories/serviceClients/cognitoIdentityProvider/shared/handler/cognitoUserPoolTransferHandler.ts", "../node_modules/@aws-amplify/auth/src/foundation/constants.ts", "../node_modules/@aws-amplify/auth/src/foundation/factories/serviceClients/cognitoIdentityProvider/constants.ts", "../node_modules/@aws-amplify/auth/src/foundation/factories/serviceClients/cognitoIdentityProvider/createInitiateAuthClient.ts", "../node_modules/@aws-amplify/auth/src/foundation/cognitoUserPoolEndpointResolver.ts", "../node_modules/@aws-amplify/auth/src/providers/cognito/factories/createCognitoUserPoolEndpointResolver.ts", "../node_modules/@aws-amplify/auth/src/providers/cognito/utils/userContextData.ts", "../node_modules/@aws-amplify/auth/src/providers/cognito/utils/refreshAuthTokens.ts", "../node_modules/@aws-amplify/auth/src/providers/cognito/tokenProvider/types.ts", "../node_modules/@aws-amplify/auth/src/providers/cognito/tokenProvider/errorHelpers.ts", "../node_modules/@aws-amplify/auth/src/providers/cognito/tokenProvider/constants.ts", "../node_modules/@aws-amplify/auth/src/providers/cognito/tokenProvider/TokenStore.ts", "../node_modules/@aws-amplify/auth/src/providers/cognito/utils/signInWithRedirectStore.ts", "../node_modules/@aws-amplify/auth/src/providers/cognito/utils/oauth/oAuthStore.ts", "../node_modules/@aws-amplify/auth/src/providers/cognito/utils/oauth/inflightPromise.ts", "../node_modules/@aws-amplify/auth/src/providers/cognito/tokenProvider/TokenOrchestrator.ts", "../node_modules/@aws-amplify/auth/src/providers/cognito/tokenProvider/CognitoUserPoolsTokenProvider.ts", "../node_modules/@aws-amplify/auth/src/providers/cognito/tokenProvider/tokenProvider.ts", "../node_modules/@aws-amplify/auth/src/providers/cognito/tokenProvider/cacheTokens.ts", "../node_modules/@aws-amplify/auth/src/providers/cognito/utils/dispatchSignedInHubEvent.ts", "../node_modules/@aws-amplify/auth/src/Errors.ts", "../node_modules/@aws-amplify/auth/src/providers/cognito/utils/oauth/createOAuthError.ts", "../node_modules/@aws-amplify/auth/src/types/Auth.ts", "../node_modules/@aws-amplify/auth/src/providers/cognito/utils/oauth/validateState.ts", "../node_modules/@aws-amplify/auth/src/providers/cognito/utils/oauth/completeOAuthFlow.ts", "../node_modules/@aws-amplify/auth/src/providers/cognito/utils/oauth/getRedirectUrl.ts", "../node_modules/@aws-amplify/auth/src/providers/cognito/utils/oauth/handleFailure.ts", "../node_modules/@aws-amplify/auth/src/providers/cognito/utils/oauth/attemptCompleteOAuthFlow.ts", "../node_modules/@aws-amplify/auth/src/providers/cognito/utils/oauth/enableOAuthListener.ts", "../node_modules/@aws-amplify/auth/src/providers/cognito/credentialsProvider/types.ts", "../node_modules/@aws-amplify/auth/src/providers/cognito/credentialsProvider/IdentityIdStore.ts", "../node_modules/@aws-amplify/auth/src/providers/cognito/credentialsProvider/utils.ts", "../node_modules/@aws-amplify/auth/src/providers/cognito/credentialsProvider/IdentityIdProvider.ts", "../node_modules/@aws-amplify/auth/src/providers/cognito/credentialsProvider/credentialsProvider.ts", "../node_modules/@aws-amplify/auth/src/providers/cognito/credentialsProvider/index.ts", "../node_modules/aws-amplify/src/initSingleton.ts", "../src/index.js"],
  "sourcesContent": ["const subscription = /* GraphQL Subscription Query */ `\r\nsubscription OnGameStarted {\r\n  onGameStarted {\r\n    id\r\n    players {\r\n      id\r\n      name\r\n      rank\r\n    }\r\n    currentPlayerID\r\n    gameStatus\r\n    actions {\r\n      playerID\r\n      guessID\r\n      timestamp\r\n    }\r\n  }\r\n}\r\n`;\r\n\r\n\r\nexport function subscribeOnGameStarted(client) {\r\n    client\r\n    .graphql({\r\n        query: subscription\r\n    })\r\n    .subscribe({\r\n        next: ({ data }) => {\r\n            console.log(`Subscription: ${data}`);\r\n        },\r\n        error: (error) => console.warn(error)\r\n    });\r\n\r\n\r\n    // const subscriptionObservable = GraphQLSubscriptions.subscribe(client, { query: subscription });\r\n\r\n    // const subscriptionInstance = subscriptionObservable.subscribe({\r\n    //     next: (response) => {\r\n    //         const gameStartedData = response.data.onGameStarted;\r\n    //         console.log('Received data:', gameStartedData);\r\n    //         // Handle the data (e.g., update the UI)\r\n    //     },\r\n    //     error: (error) => {\r\n    //         console.error('Subscription error:', error);\r\n    //     },\r\n    //     complete: () => {\r\n    //         console.log('Subscription completed');\r\n    //     },\r\n    // });\r\n\r\n    // return subscriptionInstance;\r\n}\r\n\r\n\r\n// To unsubscribe later (VERY important to prevent memory leaks):\r\n// subscriptionInstance.unsubscribe();\r\n// Call the function to set up the subscription\r\n// const unsubscribe = setupSubscription();\r\n\r\n// Optional:  If you have a mechanism to \"stop\" the subscription (e.g., a button)\r\n// you can call the unsubscribe function.  For example:\r\n// document.getElementById('stop-subscription-button').addEventListener('click', () => {\r\n//     unsubscribe();  // Call the unsubscribe function\r\n// });\r\n", "// 1. Define your GraphQL mutation\r\nconst takeAction = /* GraphQL */ `\r\n  mutation TakeAction($gameID: ID!, $playerID: ID!, $guessID: ID!) {\r\n    takeAction(gameID: $gameID, playerID: $playerID, guessID: $guessID) {\r\n      id\r\n      // Include other fields from the Game type that you need in the response\r\n      name\r\n      status\r\n      guesses {\r\n        id\r\n        playerId\r\n        guess\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\n// 3. Execute the mutation using Amplify's API client\r\nexport async function performAction(client, _gameID, _playerID, _guessID) {\r\n  try {\r\n    const response = await client.graphql({\r\n      query: takeAction,\r\n      variables: {\r\n        gameID: _gameID,\r\n        playerID: _playerID,\r\n        guessID: _guessID,\r\n      },\r\n    });\r\n\r\n    if (response.errors) {\r\n      console.error('Mutation error:', response.errors);\r\n      return; // Stop processing if there's an error\r\n    }\r\n\r\n    const updatedGame = response.data?.takeAction;\r\n    if (updatedGame) {\r\n      console.log('Successfully took action:', updatedGame);\r\n      // Handle the updated game data (e.g., update UI)\r\n    }\r\n  } catch (error) {\r\n    console.error('Failed to take action:', error);\r\n  }\r\n}\r\n\r\nconst lookforGame = `\r\nmutation LookForGameMutation($player: ID!, $playerName: String!, $rank: Int!) {\r\n  lookForGame(player: $player, playerName: $playerName, rank: $rank) {\r\n    statusCode\r\n    body\r\n  }\r\n}\r\n`;\r\n\r\nexport async function joinQueue(client, playerId, name, playerRank) {\r\n    try {\r\n\r\n        console.log(`${playerId} | ${name} | ${playerRank}`);\r\n\r\n\r\n        console.log(\"TRYING TO RUN A MUTATION\");\r\n        const response = await client.graphql({\r\n            query: lookforGame,\r\n            variables: {\r\n                player: playerId,\r\n                playerName: name,\r\n                rank: playerRank\r\n            }\r\n        });\r\n\r\n        if (response.errors) {\r\n            console.error('Mutation error:', response.errors);\r\n            return; // Stop processing if there's an error\r\n        }\r\n\r\n        console.dir(response);\r\n\r\n        const updatedGame = response.data?.lookforGame;\r\n        if (updatedGame) {\r\n        console.log('Successfully took action:', updatedGame);\r\n        // Handle the updated game data (e.g., update UI)\r\n        }\r\n\r\n\r\n    } catch (error) {\r\n        console.error('Failed to take action:', error);\r\n    }\r\n}\r\n\r\n// 4. Call the function to execute the mutation\r\n// performAction();", "function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\r\n\r\n/**\r\n * Return true if `value` is object-like. A value is object-like if it's not\r\n * `null` and has a `typeof` result of \"object\".\r\n */\r\nexport default function isObjectLike(value) {\r\n  return _typeof(value) == 'object' && value !== null;\r\n}\r\n", "// In ES2015 (or a polyfilled) environment, this will be Symbol.iterator\r\n// istanbul ignore next (See: 'https://github.com/graphql/graphql-js/issues/2317')\r\nexport var SYMBOL_ITERATOR = typeof Symbol === 'function' && Symbol.iterator != null ? Symbol.iterator : '@@iterator'; // In ES2017 (or a polyfilled) environment, this will be Symbol.asyncIterator\r\n// istanbul ignore next (See: 'https://github.com/graphql/graphql-js/issues/2317')\r\n\r\nexport var SYMBOL_ASYNC_ITERATOR = typeof Symbol === 'function' && Symbol.asyncIterator != null ? Symbol.asyncIterator : '@@asyncIterator'; // istanbul ignore next (See: 'https://github.com/graphql/graphql-js/issues/2317')\r\n\r\nexport var SYMBOL_TO_STRING_TAG = typeof Symbol === 'function' && Symbol.toStringTag != null ? Symbol.toStringTag : '@@toStringTag';\r\n", "/**\r\n * Represents a location in a Source.\r\n */\r\n\r\n/**\r\n * Takes a Source and a UTF-8 character offset, and returns the corresponding\r\n * line and column as a SourceLocation.\r\n */\r\nexport function getLocation(source, position) {\r\n  var lineRegexp = /\\r\\n|[\\n\\r]/g;\r\n  var line = 1;\r\n  var column = position + 1;\r\n  var match;\r\n\r\n  while ((match = lineRegexp.exec(source.body)) && match.index < position) {\r\n    line += 1;\r\n    column = position + 1 - (match.index + match[0].length);\r\n  }\r\n\r\n  return {\r\n    line: line,\r\n    column: column\r\n  };\r\n}\r\n", "import { getLocation } from \"./location.mjs\";\r\n/**\r\n * Render a helpful description of the location in the GraphQL Source document.\r\n */\r\n\r\nexport function printLocation(location) {\r\n  return printSourceLocation(location.source, getLocation(location.source, location.start));\r\n}\r\n/**\r\n * Render a helpful description of the location in the GraphQL Source document.\r\n */\r\n\r\nexport function printSourceLocation(source, sourceLocation) {\r\n  var firstLineColumnOffset = source.locationOffset.column - 1;\r\n  var body = whitespace(firstLineColumnOffset) + source.body;\r\n  var lineIndex = sourceLocation.line - 1;\r\n  var lineOffset = source.locationOffset.line - 1;\r\n  var lineNum = sourceLocation.line + lineOffset;\r\n  var columnOffset = sourceLocation.line === 1 ? firstLineColumnOffset : 0;\r\n  var columnNum = sourceLocation.column + columnOffset;\r\n  var locationStr = \"\".concat(source.name, \":\").concat(lineNum, \":\").concat(columnNum, \"\\n\");\r\n  var lines = body.split(/\\r\\n|[\\n\\r]/g);\r\n  var locationLine = lines[lineIndex]; // Special case for minified documents\r\n\r\n  if (locationLine.length > 120) {\r\n    var subLineIndex = Math.floor(columnNum / 80);\r\n    var subLineColumnNum = columnNum % 80;\r\n    var subLines = [];\r\n\r\n    for (var i = 0; i < locationLine.length; i += 80) {\r\n      subLines.push(locationLine.slice(i, i + 80));\r\n    }\r\n\r\n    return locationStr + printPrefixedLines([[\"\".concat(lineNum), subLines[0]]].concat(subLines.slice(1, subLineIndex + 1).map(function (subLine) {\r\n      return ['', subLine];\r\n    }), [[' ', whitespace(subLineColumnNum - 1) + '^'], ['', subLines[subLineIndex + 1]]]));\r\n  }\r\n\r\n  return locationStr + printPrefixedLines([// Lines specified like this: [\"prefix\", \"string\"],\r\n  [\"\".concat(lineNum - 1), lines[lineIndex - 1]], [\"\".concat(lineNum), locationLine], ['', whitespace(columnNum - 1) + '^'], [\"\".concat(lineNum + 1), lines[lineIndex + 1]]]);\r\n}\r\n\r\nfunction printPrefixedLines(lines) {\r\n  var existingLines = lines.filter(function (_ref) {\r\n    var _ = _ref[0],\r\n        line = _ref[1];\r\n    return line !== undefined;\r\n  });\r\n  var padLen = Math.max.apply(Math, existingLines.map(function (_ref2) {\r\n    var prefix = _ref2[0];\r\n    return prefix.length;\r\n  }));\r\n  return existingLines.map(function (_ref3) {\r\n    var prefix = _ref3[0],\r\n        line = _ref3[1];\r\n    return leftPad(padLen, prefix) + (line ? ' | ' + line : ' |');\r\n  }).join('\\n');\r\n}\r\n\r\nfunction whitespace(len) {\r\n  return Array(len + 1).join(' ');\r\n}\r\n\r\nfunction leftPad(len, str) {\r\n  return whitespace(len - str.length) + str;\r\n}\r\n", "function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\r\n\r\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\r\n\r\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\r\n\r\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\r\n\r\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\r\n\r\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\r\n\r\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\r\n\r\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\r\n\r\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\r\n\r\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\r\n\r\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\r\n\r\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\r\n\r\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\r\n\r\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\r\n\r\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\r\n\r\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\r\n\r\nimport isObjectLike from \"../jsutils/isObjectLike.mjs\";\r\nimport { SYMBOL_TO_STRING_TAG } from \"../polyfills/symbols.mjs\";\r\nimport { getLocation } from \"../language/location.mjs\";\r\nimport { printLocation, printSourceLocation } from \"../language/printLocation.mjs\";\r\n/**\r\n * A GraphQLError describes an Error found during the parse, validate, or\r\n * execute phases of performing a GraphQL operation. In addition to a message\r\n * and stack trace, it also includes information about the locations in a\r\n * GraphQL document and/or execution result that correspond to the Error.\r\n */\r\n\r\nexport var GraphQLError = /*#__PURE__*/function (_Error) {\r\n  _inherits(GraphQLError, _Error);\r\n\r\n  var _super = _createSuper(GraphQLError);\r\n\r\n  /**\r\n   * An array of { line, column } locations within the source GraphQL document\r\n   * which correspond to this error.\r\n   *\r\n   * Errors during validation often contain multiple locations, for example to\r\n   * point out two things with the same name. Errors during execution include a\r\n   * single location, the field which produced the error.\r\n   *\r\n   * Enumerable, and appears in the result of JSON.stringify().\r\n   */\r\n\r\n  /**\r\n   * An array describing the JSON-path into the execution response which\r\n   * corresponds to this error. Only included for errors during execution.\r\n   *\r\n   * Enumerable, and appears in the result of JSON.stringify().\r\n   */\r\n\r\n  /**\r\n   * An array of GraphQL AST Nodes corresponding to this error.\r\n   */\r\n\r\n  /**\r\n   * The source GraphQL document for the first location of this error.\r\n   *\r\n   * Note that if this Error represents more than one node, the source may not\r\n   * represent nodes after the first node.\r\n   */\r\n\r\n  /**\r\n   * An array of character offsets within the source GraphQL document\r\n   * which correspond to this error.\r\n   */\r\n\r\n  /**\r\n   * The original error thrown from a field resolver during execution.\r\n   */\r\n\r\n  /**\r\n   * Extension fields to add to the formatted error.\r\n   */\r\n  function GraphQLError(message, nodes, source, positions, path, originalError, extensions) {\r\n    var _nodeLocations, _nodeLocations2, _nodeLocations3;\r\n\r\n    var _this;\r\n\r\n    _classCallCheck(this, GraphQLError);\r\n\r\n    _this = _super.call(this, message);\r\n    _this.name = 'GraphQLError';\r\n    _this.originalError = originalError !== null && originalError !== void 0 ? originalError : undefined; // Compute list of blame nodes.\r\n\r\n    _this.nodes = undefinedIfEmpty(Array.isArray(nodes) ? nodes : nodes ? [nodes] : undefined);\r\n    var nodeLocations = [];\r\n\r\n    for (var _i2 = 0, _ref3 = (_this$nodes = _this.nodes) !== null && _this$nodes !== void 0 ? _this$nodes : []; _i2 < _ref3.length; _i2++) {\r\n      var _this$nodes;\r\n\r\n      var _ref4 = _ref3[_i2];\r\n      var loc = _ref4.loc;\r\n\r\n      if (loc != null) {\r\n        nodeLocations.push(loc);\r\n      }\r\n    }\r\n\r\n    nodeLocations = undefinedIfEmpty(nodeLocations); // Compute locations in the source for the given nodes/positions.\r\n\r\n    _this.source = source !== null && source !== void 0 ? source : (_nodeLocations = nodeLocations) === null || _nodeLocations === void 0 ? void 0 : _nodeLocations[0].source;\r\n    _this.positions = positions !== null && positions !== void 0 ? positions : (_nodeLocations2 = nodeLocations) === null || _nodeLocations2 === void 0 ? void 0 : _nodeLocations2.map(function (loc) {\r\n      return loc.start;\r\n    });\r\n    _this.locations = positions && source ? positions.map(function (pos) {\r\n      return getLocation(source, pos);\r\n    }) : (_nodeLocations3 = nodeLocations) === null || _nodeLocations3 === void 0 ? void 0 : _nodeLocations3.map(function (loc) {\r\n      return getLocation(loc.source, loc.start);\r\n    });\r\n    _this.path = path !== null && path !== void 0 ? path : undefined;\r\n    var originalExtensions = originalError === null || originalError === void 0 ? void 0 : originalError.extensions;\r\n\r\n    if (extensions == null && isObjectLike(originalExtensions)) {\r\n      _this.extensions = _objectSpread({}, originalExtensions);\r\n    } else {\r\n      _this.extensions = extensions !== null && extensions !== void 0 ? extensions : {};\r\n    } // By being enumerable, JSON.stringify will include bellow properties in the resulting output.\r\n    // This ensures that the simplest possible GraphQL service adheres to the spec.\r\n\r\n\r\n    Object.defineProperties(_assertThisInitialized(_this), {\r\n      message: {\r\n        enumerable: true\r\n      },\r\n      locations: {\r\n        enumerable: _this.locations != null\r\n      },\r\n      path: {\r\n        enumerable: _this.path != null\r\n      },\r\n      extensions: {\r\n        enumerable: _this.extensions != null && Object.keys(_this.extensions).length > 0\r\n      },\r\n      name: {\r\n        enumerable: false\r\n      },\r\n      nodes: {\r\n        enumerable: false\r\n      },\r\n      source: {\r\n        enumerable: false\r\n      },\r\n      positions: {\r\n        enumerable: false\r\n      },\r\n      originalError: {\r\n        enumerable: false\r\n      }\r\n    }); // Include (non-enumerable) stack trace.\r\n\r\n    if (originalError !== null && originalError !== void 0 && originalError.stack) {\r\n      Object.defineProperty(_assertThisInitialized(_this), 'stack', {\r\n        value: originalError.stack,\r\n        writable: true,\r\n        configurable: true\r\n      });\r\n      return _possibleConstructorReturn(_this);\r\n    } // istanbul ignore next (See: 'https://github.com/graphql/graphql-js/issues/2317')\r\n\r\n\r\n    if (Error.captureStackTrace) {\r\n      Error.captureStackTrace(_assertThisInitialized(_this), GraphQLError);\r\n    } else {\r\n      Object.defineProperty(_assertThisInitialized(_this), 'stack', {\r\n        value: Error().stack,\r\n        writable: true,\r\n        configurable: true\r\n      });\r\n    }\r\n\r\n    return _this;\r\n  }\r\n\r\n  _createClass(GraphQLError, [{\r\n    key: \"toString\",\r\n    value: function toString() {\r\n      return printError(this);\r\n    } // FIXME: workaround to not break chai comparisons, should be remove in v16\r\n    // $FlowFixMe[unsupported-syntax] Flow doesn't support computed properties yet\r\n\r\n  }, {\r\n    key: SYMBOL_TO_STRING_TAG,\r\n    get: function get() {\r\n      return 'Object';\r\n    }\r\n  }]);\r\n\r\n  return GraphQLError;\r\n}( /*#__PURE__*/_wrapNativeSuper(Error));\r\n\r\nfunction undefinedIfEmpty(array) {\r\n  return array === undefined || array.length === 0 ? undefined : array;\r\n}\r\n/**\r\n * Prints a GraphQLError to a string, representing useful location information\r\n * about the error's position in the source.\r\n */\r\n\r\n\r\nexport function printError(error) {\r\n  var output = error.message;\r\n\r\n  if (error.nodes) {\r\n    for (var _i4 = 0, _error$nodes2 = error.nodes; _i4 < _error$nodes2.length; _i4++) {\r\n      var node = _error$nodes2[_i4];\r\n\r\n      if (node.loc) {\r\n        output += '\\n\\n' + printLocation(node.loc);\r\n      }\r\n    }\r\n  } else if (error.source && error.locations) {\r\n    for (var _i6 = 0, _error$locations2 = error.locations; _i6 < _error$locations2.length; _i6++) {\r\n      var location = _error$locations2[_i6];\r\n      output += '\\n\\n' + printSourceLocation(error.source, location);\r\n    }\r\n  }\r\n\r\n  return output;\r\n}\r\n", "import { GraphQLError } from \"./GraphQLError.mjs\";\r\n/**\r\n * Produces a GraphQLError representing a syntax error, containing useful\r\n * descriptive information about the syntax error's position in the source.\r\n */\r\n\r\nexport function syntaxError(source, position, description) {\r\n  return new GraphQLError(\"Syntax Error: \".concat(description), undefined, source, [position]);\r\n}\r\n", "/**\r\n * The set of allowed kind values for AST nodes.\r\n */\r\nexport var Kind = Object.freeze({\r\n  // Name\r\n  NAME: 'Name',\r\n  // Document\r\n  DOCUMENT: 'Document',\r\n  OPERATION_DEFINITION: 'OperationDefinition',\r\n  VARIABLE_DEFINITION: 'VariableDefinition',\r\n  SELECTION_SET: 'SelectionSet',\r\n  FIELD: 'Field',\r\n  ARGUMENT: 'Argument',\r\n  // Fragments\r\n  FRAGMENT_SPREAD: 'FragmentSpread',\r\n  INLINE_FRAGMENT: 'InlineFragment',\r\n  FRAGMENT_DEFINITION: 'FragmentDefinition',\r\n  // Values\r\n  VARIABLE: 'Variable',\r\n  INT: 'IntValue',\r\n  FLOAT: 'FloatValue',\r\n  STRING: 'StringValue',\r\n  BOOLEAN: 'BooleanValue',\r\n  NULL: 'NullValue',\r\n  ENUM: 'EnumValue',\r\n  LIST: 'ListValue',\r\n  OBJECT: 'ObjectValue',\r\n  OBJECT_FIELD: 'ObjectField',\r\n  // Directives\r\n  DIRECTIVE: 'Directive',\r\n  // Types\r\n  NAMED_TYPE: 'NamedType',\r\n  LIST_TYPE: 'ListType',\r\n  NON_NULL_TYPE: 'NonNullType',\r\n  // Type System Definitions\r\n  SCHEMA_DEFINITION: 'SchemaDefinition',\r\n  OPERATION_TYPE_DEFINITION: 'OperationTypeDefinition',\r\n  // Type Definitions\r\n  SCALAR_TYPE_DEFINITION: 'ScalarTypeDefinition',\r\n  OBJECT_TYPE_DEFINITION: 'ObjectTypeDefinition',\r\n  FIELD_DEFINITION: 'FieldDefinition',\r\n  INPUT_VALUE_DEFINITION: 'InputValueDefinition',\r\n  INTERFACE_TYPE_DEFINITION: 'InterfaceTypeDefinition',\r\n  UNION_TYPE_DEFINITION: 'UnionTypeDefinition',\r\n  ENUM_TYPE_DEFINITION: 'EnumTypeDefinition',\r\n  ENUM_VALUE_DEFINITION: 'EnumValueDefinition',\r\n  INPUT_OBJECT_TYPE_DEFINITION: 'InputObjectTypeDefinition',\r\n  // Directive Definitions\r\n  DIRECTIVE_DEFINITION: 'DirectiveDefinition',\r\n  // Type System Extensions\r\n  SCHEMA_EXTENSION: 'SchemaExtension',\r\n  // Type Extensions\r\n  SCALAR_TYPE_EXTENSION: 'ScalarTypeExtension',\r\n  OBJECT_TYPE_EXTENSION: 'ObjectTypeExtension',\r\n  INTERFACE_TYPE_EXTENSION: 'InterfaceTypeExtension',\r\n  UNION_TYPE_EXTENSION: 'UnionTypeExtension',\r\n  ENUM_TYPE_EXTENSION: 'EnumTypeExtension',\r\n  INPUT_OBJECT_TYPE_EXTENSION: 'InputObjectTypeExtension'\r\n});\r\n/**\r\n * The enum type representing the possible kind values of AST nodes.\r\n */\r\n", "export default function invariant(condition, message) {\r\n  var booleanCondition = Boolean(condition); // istanbul ignore else (See transformation done in './resources/inlineInvariant.js')\r\n\r\n  if (!booleanCondition) {\r\n    throw new Error(message != null ? message : 'Unexpected invariant triggered.');\r\n  }\r\n}\r\n", "// istanbul ignore next (See: 'https://github.com/graphql/graphql-js/issues/2317')\r\nvar nodejsCustomInspectSymbol = typeof Symbol === 'function' && typeof Symbol.for === 'function' ? Symbol.for('nodejs.util.inspect.custom') : undefined;\r\nexport default nodejsCustomInspectSymbol;\r\n", "import invariant from \"./invariant.mjs\";\r\nimport nodejsCustomInspectSymbol from \"./nodejsCustomInspectSymbol.mjs\";\r\n/**\r\n * The `defineInspect()` function defines `inspect()` prototype method as alias of `toJSON`\r\n */\r\n\r\nexport default function defineInspect(classObject) {\r\n  var fn = classObject.prototype.toJSON;\r\n  typeof fn === 'function' || invariant(0);\r\n  classObject.prototype.inspect = fn; // istanbul ignore else (See: 'https://github.com/graphql/graphql-js/issues/2317')\r\n\r\n  if (nodejsCustomInspectSymbol) {\r\n    classObject.prototype[nodejsCustomInspectSymbol] = fn;\r\n  }\r\n}\r\n", "import defineInspect from \"../jsutils/defineInspect.mjs\";\r\n\r\n/**\r\n * Contains a range of UTF-8 character offsets and token references that\r\n * identify the region of the source from which the AST derived.\r\n */\r\nexport var Location = /*#__PURE__*/function () {\r\n  /**\r\n   * The character offset at which this Node begins.\r\n   */\r\n\r\n  /**\r\n   * The character offset at which this Node ends.\r\n   */\r\n\r\n  /**\r\n   * The Token at which this Node begins.\r\n   */\r\n\r\n  /**\r\n   * The Token at which this Node ends.\r\n   */\r\n\r\n  /**\r\n   * The Source document the AST represents.\r\n   */\r\n  function Location(startToken, endToken, source) {\r\n    this.start = startToken.start;\r\n    this.end = endToken.end;\r\n    this.startToken = startToken;\r\n    this.endToken = endToken;\r\n    this.source = source;\r\n  }\r\n\r\n  var _proto = Location.prototype;\r\n\r\n  _proto.toJSON = function toJSON() {\r\n    return {\r\n      start: this.start,\r\n      end: this.end\r\n    };\r\n  };\r\n\r\n  return Location;\r\n}(); // Print a simplified form when appearing in `inspect` and `util.inspect`.\r\n\r\ndefineInspect(Location);\r\n/**\r\n * Represents a range of characters represented by a lexical token\r\n * within a Source.\r\n */\r\n\r\nexport var Token = /*#__PURE__*/function () {\r\n  /**\r\n   * The kind of Token.\r\n   */\r\n\r\n  /**\r\n   * The character offset at which this Node begins.\r\n   */\r\n\r\n  /**\r\n   * The character offset at which this Node ends.\r\n   */\r\n\r\n  /**\r\n   * The 1-indexed line number on which this Token appears.\r\n   */\r\n\r\n  /**\r\n   * The 1-indexed column number at which this Token begins.\r\n   */\r\n\r\n  /**\r\n   * For non-punctuation tokens, represents the interpreted value of the token.\r\n   */\r\n\r\n  /**\r\n   * Tokens exist as nodes in a double-linked-list amongst all tokens\r\n   * including ignored tokens. <SOF> is always the first node and <EOF>\r\n   * the last.\r\n   */\r\n  function Token(kind, start, end, line, column, prev, value) {\r\n    this.kind = kind;\r\n    this.start = start;\r\n    this.end = end;\r\n    this.line = line;\r\n    this.column = column;\r\n    this.value = value;\r\n    this.prev = prev;\r\n    this.next = null;\r\n  }\r\n\r\n  var _proto2 = Token.prototype;\r\n\r\n  _proto2.toJSON = function toJSON() {\r\n    return {\r\n      kind: this.kind,\r\n      value: this.value,\r\n      line: this.line,\r\n      column: this.column\r\n    };\r\n  };\r\n\r\n  return Token;\r\n}(); // Print a simplified form when appearing in `inspect` and `util.inspect`.\r\n\r\ndefineInspect(Token);\r\n/**\r\n * @internal\r\n */\r\n\r\nexport function isNode(maybeNode) {\r\n  return maybeNode != null && typeof maybeNode.kind === 'string';\r\n}\r\n/**\r\n * The list of all possible AST node types.\r\n */\r\n", "/**\r\n * An exported enum describing the different kinds of tokens that the\r\n * lexer emits.\r\n */\r\nexport var TokenKind = Object.freeze({\r\n  SOF: '<SOF>',\r\n  EOF: '<EOF>',\r\n  BANG: '!',\r\n  DOLLAR: '$',\r\n  AMP: '&',\r\n  PAREN_L: '(',\r\n  PAREN_R: ')',\r\n  SPREAD: '...',\r\n  COLON: ':',\r\n  EQUALS: '=',\r\n  AT: '@',\r\n  BRACKET_L: '[',\r\n  BRACKET_R: ']',\r\n  BRACE_L: '{',\r\n  PIPE: '|',\r\n  BRACE_R: '}',\r\n  NAME: 'Name',\r\n  INT: 'Int',\r\n  FLOAT: 'Float',\r\n  STRING: 'String',\r\n  BLOCK_STRING: 'BlockString',\r\n  COMMENT: 'Comment'\r\n});\r\n/**\r\n * The enum type representing the token kinds values.\r\n */\r\n", "function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\r\n\r\n/* eslint-disable flowtype/no-weak-types */\r\nimport nodejsCustomInspectSymbol from \"./nodejsCustomInspectSymbol.mjs\";\r\nvar MAX_ARRAY_LENGTH = 10;\r\nvar MAX_RECURSIVE_DEPTH = 2;\r\n/**\r\n * Used to print values in error messages.\r\n */\r\n\r\nexport default function inspect(value) {\r\n  return formatValue(value, []);\r\n}\r\n\r\nfunction formatValue(value, seenValues) {\r\n  switch (_typeof(value)) {\r\n    case 'string':\r\n      return JSON.stringify(value);\r\n\r\n    case 'function':\r\n      return value.name ? \"[function \".concat(value.name, \"]\") : '[function]';\r\n\r\n    case 'object':\r\n      if (value === null) {\r\n        return 'null';\r\n      }\r\n\r\n      return formatObjectValue(value, seenValues);\r\n\r\n    default:\r\n      return String(value);\r\n  }\r\n}\r\n\r\nfunction formatObjectValue(value, previouslySeenValues) {\r\n  if (previouslySeenValues.indexOf(value) !== -1) {\r\n    return '[Circular]';\r\n  }\r\n\r\n  var seenValues = [].concat(previouslySeenValues, [value]);\r\n  var customInspectFn = getCustomFn(value);\r\n\r\n  if (customInspectFn !== undefined) {\r\n    var customValue = customInspectFn.call(value); // check for infinite recursion\r\n\r\n    if (customValue !== value) {\r\n      return typeof customValue === 'string' ? customValue : formatValue(customValue, seenValues);\r\n    }\r\n  } else if (Array.isArray(value)) {\r\n    return formatArray(value, seenValues);\r\n  }\r\n\r\n  return formatObject(value, seenValues);\r\n}\r\n\r\nfunction formatObject(object, seenValues) {\r\n  var keys = Object.keys(object);\r\n\r\n  if (keys.length === 0) {\r\n    return '{}';\r\n  }\r\n\r\n  if (seenValues.length > MAX_RECURSIVE_DEPTH) {\r\n    return '[' + getObjectTag(object) + ']';\r\n  }\r\n\r\n  var properties = keys.map(function (key) {\r\n    var value = formatValue(object[key], seenValues);\r\n    return key + ': ' + value;\r\n  });\r\n  return '{ ' + properties.join(', ') + ' }';\r\n}\r\n\r\nfunction formatArray(array, seenValues) {\r\n  if (array.length === 0) {\r\n    return '[]';\r\n  }\r\n\r\n  if (seenValues.length > MAX_RECURSIVE_DEPTH) {\r\n    return '[Array]';\r\n  }\r\n\r\n  var len = Math.min(MAX_ARRAY_LENGTH, array.length);\r\n  var remaining = array.length - len;\r\n  var items = [];\r\n\r\n  for (var i = 0; i < len; ++i) {\r\n    items.push(formatValue(array[i], seenValues));\r\n  }\r\n\r\n  if (remaining === 1) {\r\n    items.push('... 1 more item');\r\n  } else if (remaining > 1) {\r\n    items.push(\"... \".concat(remaining, \" more items\"));\r\n  }\r\n\r\n  return '[' + items.join(', ') + ']';\r\n}\r\n\r\nfunction getCustomFn(object) {\r\n  var customInspectFn = object[String(nodejsCustomInspectSymbol)];\r\n\r\n  if (typeof customInspectFn === 'function') {\r\n    return customInspectFn;\r\n  }\r\n\r\n  if (typeof object.inspect === 'function') {\r\n    return object.inspect;\r\n  }\r\n}\r\n\r\nfunction getObjectTag(object) {\r\n  var tag = Object.prototype.toString.call(object).replace(/^\\[object /, '').replace(/]$/, '');\r\n\r\n  if (tag === 'Object' && typeof object.constructor === 'function') {\r\n    var name = object.constructor.name;\r\n\r\n    if (typeof name === 'string' && name !== '') {\r\n      return name;\r\n    }\r\n  }\r\n\r\n  return tag;\r\n}\r\n", "export default function devAssert(condition, message) {\r\n  var booleanCondition = Boolean(condition); // istanbul ignore else (See transformation done in './resources/inlineInvariant.js')\r\n\r\n  if (!booleanCondition) {\r\n    throw new Error(message);\r\n  }\r\n}\r\n", "function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\r\n\r\nimport inspect from \"./inspect.mjs\";\r\n/**\r\n * A replacement for instanceof which includes an error warning when multi-realm\r\n * constructors are detected.\r\n */\r\n\r\n// See: https://expressjs.com/en/advanced/best-practice-performance.html#set-node_env-to-production\r\n// See: https://webpack.js.org/guides/production/\r\nexport default process.env.NODE_ENV === 'production' ? // istanbul ignore next (See: 'https://github.com/graphql/graphql-js/issues/2317')\r\n// eslint-disable-next-line no-shadow\r\nfunction instanceOf(value, constructor) {\r\n  return value instanceof constructor;\r\n} : // eslint-disable-next-line no-shadow\r\nfunction instanceOf(value, constructor) {\r\n  if (value instanceof constructor) {\r\n    return true;\r\n  }\r\n\r\n  if (_typeof(value) === 'object' && value !== null) {\r\n    var _value$constructor;\r\n\r\n    var className = constructor.prototype[Symbol.toStringTag];\r\n    var valueClassName = // We still need to support constructor's name to detect conflicts with older versions of this library.\r\n    Symbol.toStringTag in value ? value[Symbol.toStringTag] : (_value$constructor = value.constructor) === null || _value$constructor === void 0 ? void 0 : _value$constructor.name;\r\n\r\n    if (className === valueClassName) {\r\n      var stringifiedValue = inspect(value);\r\n      throw new Error(\"Cannot use \".concat(className, \" \\\"\").concat(stringifiedValue, \"\\\" from another module or realm.\\n\\nEnsure that there is only one instance of \\\"graphql\\\" in the node_modules\\ndirectory. If different versions of \\\"graphql\\\" are the dependencies of other\\nrelied on modules, use \\\"resolutions\\\" to ensure only one version is installed.\\n\\nhttps://yarnpkg.com/en/docs/selective-version-resolutions\\n\\nDuplicate \\\"graphql\\\" modules cannot be used at the same time since different\\nversions may have different capabilities and behavior. The data from one\\nversion used in the function from another could produce confusing and\\nspurious results.\"));\r\n    }\r\n  }\r\n\r\n  return false;\r\n};\r\n", "function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\r\n\r\nimport { SYMBOL_TO_STRING_TAG } from \"../polyfills/symbols.mjs\";\r\nimport inspect from \"../jsutils/inspect.mjs\";\r\nimport devAssert from \"../jsutils/devAssert.mjs\";\r\nimport instanceOf from \"../jsutils/instanceOf.mjs\";\r\n\r\n/**\r\n * A representation of source input to GraphQL. The `name` and `locationOffset` parameters are\r\n * optional, but they are useful for clients who store GraphQL documents in source files.\r\n * For example, if the GraphQL input starts at line 40 in a file named `Foo.graphql`, it might\r\n * be useful for `name` to be `\"Foo.graphql\"` and location to be `{ line: 40, column: 1 }`.\r\n * The `line` and `column` properties in `locationOffset` are 1-indexed.\r\n */\r\nexport var Source = /*#__PURE__*/function () {\r\n  function Source(body) {\r\n    var name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'GraphQL request';\r\n    var locationOffset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\r\n      line: 1,\r\n      column: 1\r\n    };\r\n    typeof body === 'string' || devAssert(0, \"Body must be a string. Received: \".concat(inspect(body), \".\"));\r\n    this.body = body;\r\n    this.name = name;\r\n    this.locationOffset = locationOffset;\r\n    this.locationOffset.line > 0 || devAssert(0, 'line in locationOffset is 1-indexed and must be positive.');\r\n    this.locationOffset.column > 0 || devAssert(0, 'column in locationOffset is 1-indexed and must be positive.');\r\n  } // $FlowFixMe[unsupported-syntax] Flow doesn't support computed properties yet\r\n\r\n\r\n  _createClass(Source, [{\r\n    key: SYMBOL_TO_STRING_TAG,\r\n    get: function get() {\r\n      return 'Source';\r\n    }\r\n  }]);\r\n\r\n  return Source;\r\n}();\r\n/**\r\n * Test if the given value is a Source object.\r\n *\r\n * @internal\r\n */\r\n\r\n// eslint-disable-next-line no-redeclare\r\nexport function isSource(source) {\r\n  return instanceOf(source, Source);\r\n}\r\n", "/**\r\n * The set of allowed directive location values.\r\n */\r\nexport var DirectiveLocation = Object.freeze({\r\n  // Request Definitions\r\n  QUERY: 'QUERY',\r\n  MUTATION: 'MUTATION',\r\n  SUBSCRIPTION: 'SUBSCRIPTION',\r\n  FIELD: 'FIELD',\r\n  FRAGMENT_DEFINITION: 'FRAGMENT_DEFINITION',\r\n  FRAGMENT_SPREAD: 'FRAGMENT_SPREAD',\r\n  INLINE_FRAGMENT: 'INLINE_FRAGMENT',\r\n  VARIABLE_DEFINITION: 'VARIABLE_DEFINITION',\r\n  // Type System Definitions\r\n  SCHEMA: 'SCHEMA',\r\n  SCALAR: 'SCALAR',\r\n  OBJECT: 'OBJECT',\r\n  FIELD_DEFINITION: 'FIELD_DEFINITION',\r\n  ARGUMENT_DEFINITION: 'ARGUMENT_DEFINITION',\r\n  INTERFACE: 'INTERFACE',\r\n  UNION: 'UNION',\r\n  ENUM: 'ENUM',\r\n  ENUM_VALUE: 'ENUM_VALUE',\r\n  INPUT_OBJECT: 'INPUT_OBJECT',\r\n  INPUT_FIELD_DEFINITION: 'INPUT_FIELD_DEFINITION'\r\n});\r\n/**\r\n * The enum type representing the directive location values.\r\n */\r\n", "/**\r\n * Produces the value of a block string from its parsed raw value, similar to\r\n * CoffeeScript's block string, Python's docstring trim or Ruby's strip_heredoc.\r\n *\r\n * This implements the GraphQL spec's BlockStringValue() static algorithm.\r\n *\r\n * @internal\r\n */\r\nexport function dedentBlockStringValue(rawString) {\r\n  // Expand a block string's raw value into independent lines.\r\n  var lines = rawString.split(/\\r\\n|[\\n\\r]/g); // Remove common indentation from all lines but first.\r\n\r\n  var commonIndent = getBlockStringIndentation(rawString);\r\n\r\n  if (commonIndent !== 0) {\r\n    for (var i = 1; i < lines.length; i++) {\r\n      lines[i] = lines[i].slice(commonIndent);\r\n    }\r\n  } // Remove leading and trailing blank lines.\r\n\r\n\r\n  var startLine = 0;\r\n\r\n  while (startLine < lines.length && isBlank(lines[startLine])) {\r\n    ++startLine;\r\n  }\r\n\r\n  var endLine = lines.length;\r\n\r\n  while (endLine > startLine && isBlank(lines[endLine - 1])) {\r\n    --endLine;\r\n  } // Return a string of the lines joined with U+000A.\r\n\r\n\r\n  return lines.slice(startLine, endLine).join('\\n');\r\n}\r\n\r\nfunction isBlank(str) {\r\n  for (var i = 0; i < str.length; ++i) {\r\n    if (str[i] !== ' ' && str[i] !== '\\t') {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  return true;\r\n}\r\n/**\r\n * @internal\r\n */\r\n\r\n\r\nexport function getBlockStringIndentation(value) {\r\n  var _commonIndent;\r\n\r\n  var isFirstLine = true;\r\n  var isEmptyLine = true;\r\n  var indent = 0;\r\n  var commonIndent = null;\r\n\r\n  for (var i = 0; i < value.length; ++i) {\r\n    switch (value.charCodeAt(i)) {\r\n      case 13:\r\n        //  \\r\r\n        if (value.charCodeAt(i + 1) === 10) {\r\n          ++i; // skip \\r\\n as one symbol\r\n        }\r\n\r\n      // falls through\r\n\r\n      case 10:\r\n        //  \\n\r\n        isFirstLine = false;\r\n        isEmptyLine = true;\r\n        indent = 0;\r\n        break;\r\n\r\n      case 9: //   \\t\r\n\r\n      case 32:\r\n        //  <space>\r\n        ++indent;\r\n        break;\r\n\r\n      default:\r\n        if (isEmptyLine && !isFirstLine && (commonIndent === null || indent < commonIndent)) {\r\n          commonIndent = indent;\r\n        }\r\n\r\n        isEmptyLine = false;\r\n    }\r\n  }\r\n\r\n  return (_commonIndent = commonIndent) !== null && _commonIndent !== void 0 ? _commonIndent : 0;\r\n}\r\n/**\r\n * Print a block string in the indented block form by adding a leading and\r\n * trailing blank line. However, if a block string starts with whitespace and is\r\n * a single-line, adding a leading blank line would strip that whitespace.\r\n *\r\n * @internal\r\n */\r\n\r\nexport function printBlockString(value) {\r\n  var indentation = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\r\n  var preferMultipleLines = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\r\n  var isSingleLine = value.indexOf('\\n') === -1;\r\n  var hasLeadingSpace = value[0] === ' ' || value[0] === '\\t';\r\n  var hasTrailingQuote = value[value.length - 1] === '\"';\r\n  var hasTrailingSlash = value[value.length - 1] === '\\\\';\r\n  var printAsMultipleLines = !isSingleLine || hasTrailingQuote || hasTrailingSlash || preferMultipleLines;\r\n  var result = ''; // Format a multi-line block quote to account for leading space.\r\n\r\n  if (printAsMultipleLines && !(isSingleLine && hasLeadingSpace)) {\r\n    result += '\\n' + indentation;\r\n  }\r\n\r\n  result += indentation ? value.replace(/\\n/g, '\\n' + indentation) : value;\r\n\r\n  if (printAsMultipleLines) {\r\n    result += '\\n';\r\n  }\r\n\r\n  return '\"\"\"' + result.replace(/\"\"\"/g, '\\\\\"\"\"') + '\"\"\"';\r\n}\r\n", "import { syntaxError } from \"../error/syntaxError.mjs\";\r\nimport { Token } from \"./ast.mjs\";\r\nimport { TokenKind } from \"./tokenKind.mjs\";\r\nimport { dedentBlockStringValue } from \"./blockString.mjs\";\r\n/**\r\n * Given a Source object, creates a Lexer for that source.\r\n * A Lexer is a stateful stream generator in that every time\r\n * it is advanced, it returns the next token in the Source. Assuming the\r\n * source lexes, the final Token emitted by the lexer will be of kind\r\n * EOF, after which the lexer will repeatedly return the same EOF token\r\n * whenever called.\r\n */\r\n\r\nexport var Lexer = /*#__PURE__*/function () {\r\n  /**\r\n   * The previously focused non-ignored token.\r\n   */\r\n\r\n  /**\r\n   * The currently focused non-ignored token.\r\n   */\r\n\r\n  /**\r\n   * The (1-indexed) line containing the current token.\r\n   */\r\n\r\n  /**\r\n   * The character offset at which the current line begins.\r\n   */\r\n  function Lexer(source) {\r\n    var startOfFileToken = new Token(TokenKind.SOF, 0, 0, 0, 0, null);\r\n    this.source = source;\r\n    this.lastToken = startOfFileToken;\r\n    this.token = startOfFileToken;\r\n    this.line = 1;\r\n    this.lineStart = 0;\r\n  }\r\n  /**\r\n   * Advances the token stream to the next non-ignored token.\r\n   */\r\n\r\n\r\n  var _proto = Lexer.prototype;\r\n\r\n  _proto.advance = function advance() {\r\n    this.lastToken = this.token;\r\n    var token = this.token = this.lookahead();\r\n    return token;\r\n  }\r\n  /**\r\n   * Looks ahead and returns the next non-ignored token, but does not change\r\n   * the state of Lexer.\r\n   */\r\n  ;\r\n\r\n  _proto.lookahead = function lookahead() {\r\n    var token = this.token;\r\n\r\n    if (token.kind !== TokenKind.EOF) {\r\n      do {\r\n        var _token$next;\r\n\r\n        // Note: next is only mutable during parsing, so we cast to allow this.\r\n        token = (_token$next = token.next) !== null && _token$next !== void 0 ? _token$next : token.next = readToken(this, token);\r\n      } while (token.kind === TokenKind.COMMENT);\r\n    }\r\n\r\n    return token;\r\n  };\r\n\r\n  return Lexer;\r\n}();\r\n/**\r\n * @internal\r\n */\r\n\r\nexport function isPunctuatorTokenKind(kind) {\r\n  return kind === TokenKind.BANG || kind === TokenKind.DOLLAR || kind === TokenKind.AMP || kind === TokenKind.PAREN_L || kind === TokenKind.PAREN_R || kind === TokenKind.SPREAD || kind === TokenKind.COLON || kind === TokenKind.EQUALS || kind === TokenKind.AT || kind === TokenKind.BRACKET_L || kind === TokenKind.BRACKET_R || kind === TokenKind.BRACE_L || kind === TokenKind.PIPE || kind === TokenKind.BRACE_R;\r\n}\r\n\r\nfunction printCharCode(code) {\r\n  return (// NaN/undefined represents access beyond the end of the file.\r\n    isNaN(code) ? TokenKind.EOF : // Trust JSON for ASCII.\r\n    code < 0x007f ? JSON.stringify(String.fromCharCode(code)) : // Otherwise print the escaped form.\r\n    \"\\\"\\\\u\".concat(('00' + code.toString(16).toUpperCase()).slice(-4), \"\\\"\")\r\n  );\r\n}\r\n/**\r\n * Gets the next token from the source starting at the given position.\r\n *\r\n * This skips over whitespace until it finds the next lexable token, then lexes\r\n * punctuators immediately or calls the appropriate helper function for more\r\n * complicated tokens.\r\n */\r\n\r\n\r\nfunction readToken(lexer, prev) {\r\n  var source = lexer.source;\r\n  var body = source.body;\r\n  var bodyLength = body.length;\r\n  var pos = prev.end;\r\n\r\n  while (pos < bodyLength) {\r\n    var code = body.charCodeAt(pos);\r\n    var _line = lexer.line;\r\n\r\n    var _col = 1 + pos - lexer.lineStart; // SourceCharacter\r\n\r\n\r\n    switch (code) {\r\n      case 0xfeff: // <BOM>\r\n\r\n      case 9: //   \\t\r\n\r\n      case 32: //  <space>\r\n\r\n      case 44:\r\n        //  ,\r\n        ++pos;\r\n        continue;\r\n\r\n      case 10:\r\n        //  \\n\r\n        ++pos;\r\n        ++lexer.line;\r\n        lexer.lineStart = pos;\r\n        continue;\r\n\r\n      case 13:\r\n        //  \\r\r\n        if (body.charCodeAt(pos + 1) === 10) {\r\n          pos += 2;\r\n        } else {\r\n          ++pos;\r\n        }\r\n\r\n        ++lexer.line;\r\n        lexer.lineStart = pos;\r\n        continue;\r\n\r\n      case 33:\r\n        //  !\r\n        return new Token(TokenKind.BANG, pos, pos + 1, _line, _col, prev);\r\n\r\n      case 35:\r\n        //  #\r\n        return readComment(source, pos, _line, _col, prev);\r\n\r\n      case 36:\r\n        //  $\r\n        return new Token(TokenKind.DOLLAR, pos, pos + 1, _line, _col, prev);\r\n\r\n      case 38:\r\n        //  &\r\n        return new Token(TokenKind.AMP, pos, pos + 1, _line, _col, prev);\r\n\r\n      case 40:\r\n        //  (\r\n        return new Token(TokenKind.PAREN_L, pos, pos + 1, _line, _col, prev);\r\n\r\n      case 41:\r\n        //  )\r\n        return new Token(TokenKind.PAREN_R, pos, pos + 1, _line, _col, prev);\r\n\r\n      case 46:\r\n        //  .\r\n        if (body.charCodeAt(pos + 1) === 46 && body.charCodeAt(pos + 2) === 46) {\r\n          return new Token(TokenKind.SPREAD, pos, pos + 3, _line, _col, prev);\r\n        }\r\n\r\n        break;\r\n\r\n      case 58:\r\n        //  :\r\n        return new Token(TokenKind.COLON, pos, pos + 1, _line, _col, prev);\r\n\r\n      case 61:\r\n        //  =\r\n        return new Token(TokenKind.EQUALS, pos, pos + 1, _line, _col, prev);\r\n\r\n      case 64:\r\n        //  @\r\n        return new Token(TokenKind.AT, pos, pos + 1, _line, _col, prev);\r\n\r\n      case 91:\r\n        //  [\r\n        return new Token(TokenKind.BRACKET_L, pos, pos + 1, _line, _col, prev);\r\n\r\n      case 93:\r\n        //  ]\r\n        return new Token(TokenKind.BRACKET_R, pos, pos + 1, _line, _col, prev);\r\n\r\n      case 123:\r\n        // {\r\n        return new Token(TokenKind.BRACE_L, pos, pos + 1, _line, _col, prev);\r\n\r\n      case 124:\r\n        // |\r\n        return new Token(TokenKind.PIPE, pos, pos + 1, _line, _col, prev);\r\n\r\n      case 125:\r\n        // }\r\n        return new Token(TokenKind.BRACE_R, pos, pos + 1, _line, _col, prev);\r\n\r\n      case 34:\r\n        //  \"\r\n        if (body.charCodeAt(pos + 1) === 34 && body.charCodeAt(pos + 2) === 34) {\r\n          return readBlockString(source, pos, _line, _col, prev, lexer);\r\n        }\r\n\r\n        return readString(source, pos, _line, _col, prev);\r\n\r\n      case 45: //  -\r\n\r\n      case 48: //  0\r\n\r\n      case 49: //  1\r\n\r\n      case 50: //  2\r\n\r\n      case 51: //  3\r\n\r\n      case 52: //  4\r\n\r\n      case 53: //  5\r\n\r\n      case 54: //  6\r\n\r\n      case 55: //  7\r\n\r\n      case 56: //  8\r\n\r\n      case 57:\r\n        //  9\r\n        return readNumber(source, pos, code, _line, _col, prev);\r\n\r\n      case 65: //  A\r\n\r\n      case 66: //  B\r\n\r\n      case 67: //  C\r\n\r\n      case 68: //  D\r\n\r\n      case 69: //  E\r\n\r\n      case 70: //  F\r\n\r\n      case 71: //  G\r\n\r\n      case 72: //  H\r\n\r\n      case 73: //  I\r\n\r\n      case 74: //  J\r\n\r\n      case 75: //  K\r\n\r\n      case 76: //  L\r\n\r\n      case 77: //  M\r\n\r\n      case 78: //  N\r\n\r\n      case 79: //  O\r\n\r\n      case 80: //  P\r\n\r\n      case 81: //  Q\r\n\r\n      case 82: //  R\r\n\r\n      case 83: //  S\r\n\r\n      case 84: //  T\r\n\r\n      case 85: //  U\r\n\r\n      case 86: //  V\r\n\r\n      case 87: //  W\r\n\r\n      case 88: //  X\r\n\r\n      case 89: //  Y\r\n\r\n      case 90: //  Z\r\n\r\n      case 95: //  _\r\n\r\n      case 97: //  a\r\n\r\n      case 98: //  b\r\n\r\n      case 99: //  c\r\n\r\n      case 100: // d\r\n\r\n      case 101: // e\r\n\r\n      case 102: // f\r\n\r\n      case 103: // g\r\n\r\n      case 104: // h\r\n\r\n      case 105: // i\r\n\r\n      case 106: // j\r\n\r\n      case 107: // k\r\n\r\n      case 108: // l\r\n\r\n      case 109: // m\r\n\r\n      case 110: // n\r\n\r\n      case 111: // o\r\n\r\n      case 112: // p\r\n\r\n      case 113: // q\r\n\r\n      case 114: // r\r\n\r\n      case 115: // s\r\n\r\n      case 116: // t\r\n\r\n      case 117: // u\r\n\r\n      case 118: // v\r\n\r\n      case 119: // w\r\n\r\n      case 120: // x\r\n\r\n      case 121: // y\r\n\r\n      case 122:\r\n        // z\r\n        return readName(source, pos, _line, _col, prev);\r\n    }\r\n\r\n    throw syntaxError(source, pos, unexpectedCharacterMessage(code));\r\n  }\r\n\r\n  var line = lexer.line;\r\n  var col = 1 + pos - lexer.lineStart;\r\n  return new Token(TokenKind.EOF, bodyLength, bodyLength, line, col, prev);\r\n}\r\n/**\r\n * Report a message that an unexpected character was encountered.\r\n */\r\n\r\n\r\nfunction unexpectedCharacterMessage(code) {\r\n  if (code < 0x0020 && code !== 0x0009 && code !== 0x000a && code !== 0x000d) {\r\n    return \"Cannot contain the invalid character \".concat(printCharCode(code), \".\");\r\n  }\r\n\r\n  if (code === 39) {\r\n    // '\r\n    return 'Unexpected single quote character (\\'), did you mean to use a double quote (\")?';\r\n  }\r\n\r\n  return \"Cannot parse the unexpected character \".concat(printCharCode(code), \".\");\r\n}\r\n/**\r\n * Reads a comment token from the source file.\r\n *\r\n * #[\\u0009\\u0020-\\uFFFF]*\r\n */\r\n\r\n\r\nfunction readComment(source, start, line, col, prev) {\r\n  var body = source.body;\r\n  var code;\r\n  var position = start;\r\n\r\n  do {\r\n    code = body.charCodeAt(++position);\r\n  } while (!isNaN(code) && ( // SourceCharacter but not LineTerminator\r\n  code > 0x001f || code === 0x0009));\r\n\r\n  return new Token(TokenKind.COMMENT, start, position, line, col, prev, body.slice(start + 1, position));\r\n}\r\n/**\r\n * Reads a number token from the source file, either a float\r\n * or an int depending on whether a decimal point appears.\r\n *\r\n * Int:   -?(0|[1-9][0-9]*)\r\n * Float: -?(0|[1-9][0-9]*)(\\.[0-9]+)?((E|e)(+|-)?[0-9]+)?\r\n */\r\n\r\n\r\nfunction readNumber(source, start, firstCode, line, col, prev) {\r\n  var body = source.body;\r\n  var code = firstCode;\r\n  var position = start;\r\n  var isFloat = false;\r\n\r\n  if (code === 45) {\r\n    // -\r\n    code = body.charCodeAt(++position);\r\n  }\r\n\r\n  if (code === 48) {\r\n    // 0\r\n    code = body.charCodeAt(++position);\r\n\r\n    if (code >= 48 && code <= 57) {\r\n      throw syntaxError(source, position, \"Invalid number, unexpected digit after 0: \".concat(printCharCode(code), \".\"));\r\n    }\r\n  } else {\r\n    position = readDigits(source, position, code);\r\n    code = body.charCodeAt(position);\r\n  }\r\n\r\n  if (code === 46) {\r\n    // .\r\n    isFloat = true;\r\n    code = body.charCodeAt(++position);\r\n    position = readDigits(source, position, code);\r\n    code = body.charCodeAt(position);\r\n  }\r\n\r\n  if (code === 69 || code === 101) {\r\n    // E e\r\n    isFloat = true;\r\n    code = body.charCodeAt(++position);\r\n\r\n    if (code === 43 || code === 45) {\r\n      // + -\r\n      code = body.charCodeAt(++position);\r\n    }\r\n\r\n    position = readDigits(source, position, code);\r\n    code = body.charCodeAt(position);\r\n  } // Numbers cannot be followed by . or NameStart\r\n\r\n\r\n  if (code === 46 || isNameStart(code)) {\r\n    throw syntaxError(source, position, \"Invalid number, expected digit but got: \".concat(printCharCode(code), \".\"));\r\n  }\r\n\r\n  return new Token(isFloat ? TokenKind.FLOAT : TokenKind.INT, start, position, line, col, prev, body.slice(start, position));\r\n}\r\n/**\r\n * Returns the new position in the source after reading digits.\r\n */\r\n\r\n\r\nfunction readDigits(source, start, firstCode) {\r\n  var body = source.body;\r\n  var position = start;\r\n  var code = firstCode;\r\n\r\n  if (code >= 48 && code <= 57) {\r\n    // 0 - 9\r\n    do {\r\n      code = body.charCodeAt(++position);\r\n    } while (code >= 48 && code <= 57); // 0 - 9\r\n\r\n\r\n    return position;\r\n  }\r\n\r\n  throw syntaxError(source, position, \"Invalid number, expected digit but got: \".concat(printCharCode(code), \".\"));\r\n}\r\n/**\r\n * Reads a string token from the source file.\r\n *\r\n * \"([^\"\\\\\\u000A\\u000D]|(\\\\(u[0-9a-fA-F]{4}|[\"\\\\/bfnrt])))*\"\r\n */\r\n\r\n\r\nfunction readString(source, start, line, col, prev) {\r\n  var body = source.body;\r\n  var position = start + 1;\r\n  var chunkStart = position;\r\n  var code = 0;\r\n  var value = '';\r\n\r\n  while (position < body.length && !isNaN(code = body.charCodeAt(position)) && // not LineTerminator\r\n  code !== 0x000a && code !== 0x000d) {\r\n    // Closing Quote (\")\r\n    if (code === 34) {\r\n      value += body.slice(chunkStart, position);\r\n      return new Token(TokenKind.STRING, start, position + 1, line, col, prev, value);\r\n    } // SourceCharacter\r\n\r\n\r\n    if (code < 0x0020 && code !== 0x0009) {\r\n      throw syntaxError(source, position, \"Invalid character within String: \".concat(printCharCode(code), \".\"));\r\n    }\r\n\r\n    ++position;\r\n\r\n    if (code === 92) {\r\n      // \\\r\n      value += body.slice(chunkStart, position - 1);\r\n      code = body.charCodeAt(position);\r\n\r\n      switch (code) {\r\n        case 34:\r\n          value += '\"';\r\n          break;\r\n\r\n        case 47:\r\n          value += '/';\r\n          break;\r\n\r\n        case 92:\r\n          value += '\\\\';\r\n          break;\r\n\r\n        case 98:\r\n          value += '\\b';\r\n          break;\r\n\r\n        case 102:\r\n          value += '\\f';\r\n          break;\r\n\r\n        case 110:\r\n          value += '\\n';\r\n          break;\r\n\r\n        case 114:\r\n          value += '\\r';\r\n          break;\r\n\r\n        case 116:\r\n          value += '\\t';\r\n          break;\r\n\r\n        case 117:\r\n          {\r\n            // uXXXX\r\n            var charCode = uniCharCode(body.charCodeAt(position + 1), body.charCodeAt(position + 2), body.charCodeAt(position + 3), body.charCodeAt(position + 4));\r\n\r\n            if (charCode < 0) {\r\n              var invalidSequence = body.slice(position + 1, position + 5);\r\n              throw syntaxError(source, position, \"Invalid character escape sequence: \\\\u\".concat(invalidSequence, \".\"));\r\n            }\r\n\r\n            value += String.fromCharCode(charCode);\r\n            position += 4;\r\n            break;\r\n          }\r\n\r\n        default:\r\n          throw syntaxError(source, position, \"Invalid character escape sequence: \\\\\".concat(String.fromCharCode(code), \".\"));\r\n      }\r\n\r\n      ++position;\r\n      chunkStart = position;\r\n    }\r\n  }\r\n\r\n  throw syntaxError(source, position, 'Unterminated string.');\r\n}\r\n/**\r\n * Reads a block string token from the source file.\r\n *\r\n * \"\"\"(\"?\"?(\\\\\"\"\"|\\\\(?!=\"\"\")|[^\"\\\\]))*\"\"\"\r\n */\r\n\r\n\r\nfunction readBlockString(source, start, line, col, prev, lexer) {\r\n  var body = source.body;\r\n  var position = start + 3;\r\n  var chunkStart = position;\r\n  var code = 0;\r\n  var rawValue = '';\r\n\r\n  while (position < body.length && !isNaN(code = body.charCodeAt(position))) {\r\n    // Closing Triple-Quote (\"\"\")\r\n    if (code === 34 && body.charCodeAt(position + 1) === 34 && body.charCodeAt(position + 2) === 34) {\r\n      rawValue += body.slice(chunkStart, position);\r\n      return new Token(TokenKind.BLOCK_STRING, start, position + 3, line, col, prev, dedentBlockStringValue(rawValue));\r\n    } // SourceCharacter\r\n\r\n\r\n    if (code < 0x0020 && code !== 0x0009 && code !== 0x000a && code !== 0x000d) {\r\n      throw syntaxError(source, position, \"Invalid character within String: \".concat(printCharCode(code), \".\"));\r\n    }\r\n\r\n    if (code === 10) {\r\n      // new line\r\n      ++position;\r\n      ++lexer.line;\r\n      lexer.lineStart = position;\r\n    } else if (code === 13) {\r\n      // carriage return\r\n      if (body.charCodeAt(position + 1) === 10) {\r\n        position += 2;\r\n      } else {\r\n        ++position;\r\n      }\r\n\r\n      ++lexer.line;\r\n      lexer.lineStart = position;\r\n    } else if ( // Escape Triple-Quote (\\\"\"\")\r\n    code === 92 && body.charCodeAt(position + 1) === 34 && body.charCodeAt(position + 2) === 34 && body.charCodeAt(position + 3) === 34) {\r\n      rawValue += body.slice(chunkStart, position) + '\"\"\"';\r\n      position += 4;\r\n      chunkStart = position;\r\n    } else {\r\n      ++position;\r\n    }\r\n  }\r\n\r\n  throw syntaxError(source, position, 'Unterminated string.');\r\n}\r\n/**\r\n * Converts four hexadecimal chars to the integer that the\r\n * string represents. For example, uniCharCode('0','0','0','f')\r\n * will return 15, and uniCharCode('0','0','f','f') returns 255.\r\n *\r\n * Returns a negative number on error, if a char was invalid.\r\n *\r\n * This is implemented by noting that char2hex() returns -1 on error,\r\n * which means the result of ORing the char2hex() will also be negative.\r\n */\r\n\r\n\r\nfunction uniCharCode(a, b, c, d) {\r\n  return char2hex(a) << 12 | char2hex(b) << 8 | char2hex(c) << 4 | char2hex(d);\r\n}\r\n/**\r\n * Converts a hex character to its integer value.\r\n * '0' becomes 0, '9' becomes 9\r\n * 'A' becomes 10, 'F' becomes 15\r\n * 'a' becomes 10, 'f' becomes 15\r\n *\r\n * Returns -1 on error.\r\n */\r\n\r\n\r\nfunction char2hex(a) {\r\n  return a >= 48 && a <= 57 ? a - 48 // 0-9\r\n  : a >= 65 && a <= 70 ? a - 55 // A-F\r\n  : a >= 97 && a <= 102 ? a - 87 // a-f\r\n  : -1;\r\n}\r\n/**\r\n * Reads an alphanumeric + underscore name from the source.\r\n *\r\n * [_A-Za-z][_0-9A-Za-z]*\r\n */\r\n\r\n\r\nfunction readName(source, start, line, col, prev) {\r\n  var body = source.body;\r\n  var bodyLength = body.length;\r\n  var position = start + 1;\r\n  var code = 0;\r\n\r\n  while (position !== bodyLength && !isNaN(code = body.charCodeAt(position)) && (code === 95 || // _\r\n  code >= 48 && code <= 57 || // 0-9\r\n  code >= 65 && code <= 90 || // A-Z\r\n  code >= 97 && code <= 122) // a-z\r\n  ) {\r\n    ++position;\r\n  }\r\n\r\n  return new Token(TokenKind.NAME, start, position, line, col, prev, body.slice(start, position));\r\n} // _ A-Z a-z\r\n\r\n\r\nfunction isNameStart(code) {\r\n  return code === 95 || code >= 65 && code <= 90 || code >= 97 && code <= 122;\r\n}\r\n", "import { syntaxError } from \"../error/syntaxError.mjs\";\r\nimport { Kind } from \"./kinds.mjs\";\r\nimport { Location } from \"./ast.mjs\";\r\nimport { TokenKind } from \"./tokenKind.mjs\";\r\nimport { Source, isSource } from \"./source.mjs\";\r\nimport { DirectiveLocation } from \"./directiveLocation.mjs\";\r\nimport { Lexer, isPunctuatorTokenKind } from \"./lexer.mjs\";\r\n/**\r\n * Configuration options to control parser behavior\r\n */\r\n\r\n/**\r\n * Given a GraphQL source, parses it into a Document.\r\n * Throws GraphQLError if a syntax error is encountered.\r\n */\r\nexport function parse(source, options) {\r\n  var parser = new Parser(source, options);\r\n  return parser.parseDocument();\r\n}\r\n/**\r\n * Given a string containing a GraphQL value (ex. `[42]`), parse the AST for\r\n * that value.\r\n * Throws GraphQLError if a syntax error is encountered.\r\n *\r\n * This is useful within tools that operate upon GraphQL Values directly and\r\n * in isolation of complete GraphQL documents.\r\n *\r\n * Consider providing the results to the utility function: valueFromAST().\r\n */\r\n\r\nexport function parseValue(source, options) {\r\n  var parser = new Parser(source, options);\r\n  parser.expectToken(TokenKind.SOF);\r\n  var value = parser.parseValueLiteral(false);\r\n  parser.expectToken(TokenKind.EOF);\r\n  return value;\r\n}\r\n/**\r\n * Given a string containing a GraphQL Type (ex. `[Int!]`), parse the AST for\r\n * that type.\r\n * Throws GraphQLError if a syntax error is encountered.\r\n *\r\n * This is useful within tools that operate upon GraphQL Types directly and\r\n * in isolation of complete GraphQL documents.\r\n *\r\n * Consider providing the results to the utility function: typeFromAST().\r\n */\r\n\r\nexport function parseType(source, options) {\r\n  var parser = new Parser(source, options);\r\n  parser.expectToken(TokenKind.SOF);\r\n  var type = parser.parseTypeReference();\r\n  parser.expectToken(TokenKind.EOF);\r\n  return type;\r\n}\r\n/**\r\n * This class is exported only to assist people in implementing their own parsers\r\n * without duplicating too much code and should be used only as last resort for cases\r\n * such as experimental syntax or if certain features could not be contributed upstream.\r\n *\r\n * It is still part of the internal API and is versioned, so any changes to it are never\r\n * considered breaking changes. If you still need to support multiple versions of the\r\n * library, please use the `versionInfo` variable for version detection.\r\n *\r\n * @internal\r\n */\r\n\r\nexport var Parser = /*#__PURE__*/function () {\r\n  function Parser(source, options) {\r\n    var sourceObj = isSource(source) ? source : new Source(source);\r\n    this._lexer = new Lexer(sourceObj);\r\n    this._options = options;\r\n  }\r\n  /**\r\n   * Converts a name lex token into a name parse node.\r\n   */\r\n\r\n\r\n  var _proto = Parser.prototype;\r\n\r\n  _proto.parseName = function parseName() {\r\n    var token = this.expectToken(TokenKind.NAME);\r\n    return {\r\n      kind: Kind.NAME,\r\n      value: token.value,\r\n      loc: this.loc(token)\r\n    };\r\n  } // Implements the parsing rules in the Document section.\r\n\r\n  /**\r\n   * Document : Definition+\r\n   */\r\n  ;\r\n\r\n  _proto.parseDocument = function parseDocument() {\r\n    var start = this._lexer.token;\r\n    return {\r\n      kind: Kind.DOCUMENT,\r\n      definitions: this.many(TokenKind.SOF, this.parseDefinition, TokenKind.EOF),\r\n      loc: this.loc(start)\r\n    };\r\n  }\r\n  /**\r\n   * Definition :\r\n   *   - ExecutableDefinition\r\n   *   - TypeSystemDefinition\r\n   *   - TypeSystemExtension\r\n   *\r\n   * ExecutableDefinition :\r\n   *   - OperationDefinition\r\n   *   - FragmentDefinition\r\n   */\r\n  ;\r\n\r\n  _proto.parseDefinition = function parseDefinition() {\r\n    if (this.peek(TokenKind.NAME)) {\r\n      switch (this._lexer.token.value) {\r\n        case 'query':\r\n        case 'mutation':\r\n        case 'subscription':\r\n          return this.parseOperationDefinition();\r\n\r\n        case 'fragment':\r\n          return this.parseFragmentDefinition();\r\n\r\n        case 'schema':\r\n        case 'scalar':\r\n        case 'type':\r\n        case 'interface':\r\n        case 'union':\r\n        case 'enum':\r\n        case 'input':\r\n        case 'directive':\r\n          return this.parseTypeSystemDefinition();\r\n\r\n        case 'extend':\r\n          return this.parseTypeSystemExtension();\r\n      }\r\n    } else if (this.peek(TokenKind.BRACE_L)) {\r\n      return this.parseOperationDefinition();\r\n    } else if (this.peekDescription()) {\r\n      return this.parseTypeSystemDefinition();\r\n    }\r\n\r\n    throw this.unexpected();\r\n  } // Implements the parsing rules in the Operations section.\r\n\r\n  /**\r\n   * OperationDefinition :\r\n   *  - SelectionSet\r\n   *  - OperationType Name? VariableDefinitions? Directives? SelectionSet\r\n   */\r\n  ;\r\n\r\n  _proto.parseOperationDefinition = function parseOperationDefinition() {\r\n    var start = this._lexer.token;\r\n\r\n    if (this.peek(TokenKind.BRACE_L)) {\r\n      return {\r\n        kind: Kind.OPERATION_DEFINITION,\r\n        operation: 'query',\r\n        name: undefined,\r\n        variableDefinitions: [],\r\n        directives: [],\r\n        selectionSet: this.parseSelectionSet(),\r\n        loc: this.loc(start)\r\n      };\r\n    }\r\n\r\n    var operation = this.parseOperationType();\r\n    var name;\r\n\r\n    if (this.peek(TokenKind.NAME)) {\r\n      name = this.parseName();\r\n    }\r\n\r\n    return {\r\n      kind: Kind.OPERATION_DEFINITION,\r\n      operation: operation,\r\n      name: name,\r\n      variableDefinitions: this.parseVariableDefinitions(),\r\n      directives: this.parseDirectives(false),\r\n      selectionSet: this.parseSelectionSet(),\r\n      loc: this.loc(start)\r\n    };\r\n  }\r\n  /**\r\n   * OperationType : one of query mutation subscription\r\n   */\r\n  ;\r\n\r\n  _proto.parseOperationType = function parseOperationType() {\r\n    var operationToken = this.expectToken(TokenKind.NAME);\r\n\r\n    switch (operationToken.value) {\r\n      case 'query':\r\n        return 'query';\r\n\r\n      case 'mutation':\r\n        return 'mutation';\r\n\r\n      case 'subscription':\r\n        return 'subscription';\r\n    }\r\n\r\n    throw this.unexpected(operationToken);\r\n  }\r\n  /**\r\n   * VariableDefinitions : ( VariableDefinition+ )\r\n   */\r\n  ;\r\n\r\n  _proto.parseVariableDefinitions = function parseVariableDefinitions() {\r\n    return this.optionalMany(TokenKind.PAREN_L, this.parseVariableDefinition, TokenKind.PAREN_R);\r\n  }\r\n  /**\r\n   * VariableDefinition : Variable : Type DefaultValue? Directives[Const]?\r\n   */\r\n  ;\r\n\r\n  _proto.parseVariableDefinition = function parseVariableDefinition() {\r\n    var start = this._lexer.token;\r\n    return {\r\n      kind: Kind.VARIABLE_DEFINITION,\r\n      variable: this.parseVariable(),\r\n      type: (this.expectToken(TokenKind.COLON), this.parseTypeReference()),\r\n      defaultValue: this.expectOptionalToken(TokenKind.EQUALS) ? this.parseValueLiteral(true) : undefined,\r\n      directives: this.parseDirectives(true),\r\n      loc: this.loc(start)\r\n    };\r\n  }\r\n  /**\r\n   * Variable : $ Name\r\n   */\r\n  ;\r\n\r\n  _proto.parseVariable = function parseVariable() {\r\n    var start = this._lexer.token;\r\n    this.expectToken(TokenKind.DOLLAR);\r\n    return {\r\n      kind: Kind.VARIABLE,\r\n      name: this.parseName(),\r\n      loc: this.loc(start)\r\n    };\r\n  }\r\n  /**\r\n   * SelectionSet : { Selection+ }\r\n   */\r\n  ;\r\n\r\n  _proto.parseSelectionSet = function parseSelectionSet() {\r\n    var start = this._lexer.token;\r\n    return {\r\n      kind: Kind.SELECTION_SET,\r\n      selections: this.many(TokenKind.BRACE_L, this.parseSelection, TokenKind.BRACE_R),\r\n      loc: this.loc(start)\r\n    };\r\n  }\r\n  /**\r\n   * Selection :\r\n   *   - Field\r\n   *   - FragmentSpread\r\n   *   - InlineFragment\r\n   */\r\n  ;\r\n\r\n  _proto.parseSelection = function parseSelection() {\r\n    return this.peek(TokenKind.SPREAD) ? this.parseFragment() : this.parseField();\r\n  }\r\n  /**\r\n   * Field : Alias? Name Arguments? Directives? SelectionSet?\r\n   *\r\n   * Alias : Name :\r\n   */\r\n  ;\r\n\r\n  _proto.parseField = function parseField() {\r\n    var start = this._lexer.token;\r\n    var nameOrAlias = this.parseName();\r\n    var alias;\r\n    var name;\r\n\r\n    if (this.expectOptionalToken(TokenKind.COLON)) {\r\n      alias = nameOrAlias;\r\n      name = this.parseName();\r\n    } else {\r\n      name = nameOrAlias;\r\n    }\r\n\r\n    return {\r\n      kind: Kind.FIELD,\r\n      alias: alias,\r\n      name: name,\r\n      arguments: this.parseArguments(false),\r\n      directives: this.parseDirectives(false),\r\n      selectionSet: this.peek(TokenKind.BRACE_L) ? this.parseSelectionSet() : undefined,\r\n      loc: this.loc(start)\r\n    };\r\n  }\r\n  /**\r\n   * Arguments[Const] : ( Argument[?Const]+ )\r\n   */\r\n  ;\r\n\r\n  _proto.parseArguments = function parseArguments(isConst) {\r\n    var item = isConst ? this.parseConstArgument : this.parseArgument;\r\n    return this.optionalMany(TokenKind.PAREN_L, item, TokenKind.PAREN_R);\r\n  }\r\n  /**\r\n   * Argument[Const] : Name : Value[?Const]\r\n   */\r\n  ;\r\n\r\n  _proto.parseArgument = function parseArgument() {\r\n    var start = this._lexer.token;\r\n    var name = this.parseName();\r\n    this.expectToken(TokenKind.COLON);\r\n    return {\r\n      kind: Kind.ARGUMENT,\r\n      name: name,\r\n      value: this.parseValueLiteral(false),\r\n      loc: this.loc(start)\r\n    };\r\n  };\r\n\r\n  _proto.parseConstArgument = function parseConstArgument() {\r\n    var start = this._lexer.token;\r\n    return {\r\n      kind: Kind.ARGUMENT,\r\n      name: this.parseName(),\r\n      value: (this.expectToken(TokenKind.COLON), this.parseValueLiteral(true)),\r\n      loc: this.loc(start)\r\n    };\r\n  } // Implements the parsing rules in the Fragments section.\r\n\r\n  /**\r\n   * Corresponds to both FragmentSpread and InlineFragment in the spec.\r\n   *\r\n   * FragmentSpread : ... FragmentName Directives?\r\n   *\r\n   * InlineFragment : ... TypeCondition? Directives? SelectionSet\r\n   */\r\n  ;\r\n\r\n  _proto.parseFragment = function parseFragment() {\r\n    var start = this._lexer.token;\r\n    this.expectToken(TokenKind.SPREAD);\r\n    var hasTypeCondition = this.expectOptionalKeyword('on');\r\n\r\n    if (!hasTypeCondition && this.peek(TokenKind.NAME)) {\r\n      return {\r\n        kind: Kind.FRAGMENT_SPREAD,\r\n        name: this.parseFragmentName(),\r\n        directives: this.parseDirectives(false),\r\n        loc: this.loc(start)\r\n      };\r\n    }\r\n\r\n    return {\r\n      kind: Kind.INLINE_FRAGMENT,\r\n      typeCondition: hasTypeCondition ? this.parseNamedType() : undefined,\r\n      directives: this.parseDirectives(false),\r\n      selectionSet: this.parseSelectionSet(),\r\n      loc: this.loc(start)\r\n    };\r\n  }\r\n  /**\r\n   * FragmentDefinition :\r\n   *   - fragment FragmentName on TypeCondition Directives? SelectionSet\r\n   *\r\n   * TypeCondition : NamedType\r\n   */\r\n  ;\r\n\r\n  _proto.parseFragmentDefinition = function parseFragmentDefinition() {\r\n    var _this$_options;\r\n\r\n    var start = this._lexer.token;\r\n    this.expectKeyword('fragment'); // Experimental support for defining variables within fragments changes\r\n    // the grammar of FragmentDefinition:\r\n    //   - fragment FragmentName VariableDefinitions? on TypeCondition Directives? SelectionSet\r\n\r\n    if (((_this$_options = this._options) === null || _this$_options === void 0 ? void 0 : _this$_options.experimentalFragmentVariables) === true) {\r\n      return {\r\n        kind: Kind.FRAGMENT_DEFINITION,\r\n        name: this.parseFragmentName(),\r\n        variableDefinitions: this.parseVariableDefinitions(),\r\n        typeCondition: (this.expectKeyword('on'), this.parseNamedType()),\r\n        directives: this.parseDirectives(false),\r\n        selectionSet: this.parseSelectionSet(),\r\n        loc: this.loc(start)\r\n      };\r\n    }\r\n\r\n    return {\r\n      kind: Kind.FRAGMENT_DEFINITION,\r\n      name: this.parseFragmentName(),\r\n      typeCondition: (this.expectKeyword('on'), this.parseNamedType()),\r\n      directives: this.parseDirectives(false),\r\n      selectionSet: this.parseSelectionSet(),\r\n      loc: this.loc(start)\r\n    };\r\n  }\r\n  /**\r\n   * FragmentName : Name but not `on`\r\n   */\r\n  ;\r\n\r\n  _proto.parseFragmentName = function parseFragmentName() {\r\n    if (this._lexer.token.value === 'on') {\r\n      throw this.unexpected();\r\n    }\r\n\r\n    return this.parseName();\r\n  } // Implements the parsing rules in the Values section.\r\n\r\n  /**\r\n   * Value[Const] :\r\n   *   - [~Const] Variable\r\n   *   - IntValue\r\n   *   - FloatValue\r\n   *   - StringValue\r\n   *   - BooleanValue\r\n   *   - NullValue\r\n   *   - EnumValue\r\n   *   - ListValue[?Const]\r\n   *   - ObjectValue[?Const]\r\n   *\r\n   * BooleanValue : one of `true` `false`\r\n   *\r\n   * NullValue : `null`\r\n   *\r\n   * EnumValue : Name but not `true`, `false` or `null`\r\n   */\r\n  ;\r\n\r\n  _proto.parseValueLiteral = function parseValueLiteral(isConst) {\r\n    var token = this._lexer.token;\r\n\r\n    switch (token.kind) {\r\n      case TokenKind.BRACKET_L:\r\n        return this.parseList(isConst);\r\n\r\n      case TokenKind.BRACE_L:\r\n        return this.parseObject(isConst);\r\n\r\n      case TokenKind.INT:\r\n        this._lexer.advance();\r\n\r\n        return {\r\n          kind: Kind.INT,\r\n          value: token.value,\r\n          loc: this.loc(token)\r\n        };\r\n\r\n      case TokenKind.FLOAT:\r\n        this._lexer.advance();\r\n\r\n        return {\r\n          kind: Kind.FLOAT,\r\n          value: token.value,\r\n          loc: this.loc(token)\r\n        };\r\n\r\n      case TokenKind.STRING:\r\n      case TokenKind.BLOCK_STRING:\r\n        return this.parseStringLiteral();\r\n\r\n      case TokenKind.NAME:\r\n        this._lexer.advance();\r\n\r\n        switch (token.value) {\r\n          case 'true':\r\n            return {\r\n              kind: Kind.BOOLEAN,\r\n              value: true,\r\n              loc: this.loc(token)\r\n            };\r\n\r\n          case 'false':\r\n            return {\r\n              kind: Kind.BOOLEAN,\r\n              value: false,\r\n              loc: this.loc(token)\r\n            };\r\n\r\n          case 'null':\r\n            return {\r\n              kind: Kind.NULL,\r\n              loc: this.loc(token)\r\n            };\r\n\r\n          default:\r\n            return {\r\n              kind: Kind.ENUM,\r\n              value: token.value,\r\n              loc: this.loc(token)\r\n            };\r\n        }\r\n\r\n      case TokenKind.DOLLAR:\r\n        if (!isConst) {\r\n          return this.parseVariable();\r\n        }\r\n\r\n        break;\r\n    }\r\n\r\n    throw this.unexpected();\r\n  };\r\n\r\n  _proto.parseStringLiteral = function parseStringLiteral() {\r\n    var token = this._lexer.token;\r\n\r\n    this._lexer.advance();\r\n\r\n    return {\r\n      kind: Kind.STRING,\r\n      value: token.value,\r\n      block: token.kind === TokenKind.BLOCK_STRING,\r\n      loc: this.loc(token)\r\n    };\r\n  }\r\n  /**\r\n   * ListValue[Const] :\r\n   *   - [ ]\r\n   *   - [ Value[?Const]+ ]\r\n   */\r\n  ;\r\n\r\n  _proto.parseList = function parseList(isConst) {\r\n    var _this = this;\r\n\r\n    var start = this._lexer.token;\r\n\r\n    var item = function item() {\r\n      return _this.parseValueLiteral(isConst);\r\n    };\r\n\r\n    return {\r\n      kind: Kind.LIST,\r\n      values: this.any(TokenKind.BRACKET_L, item, TokenKind.BRACKET_R),\r\n      loc: this.loc(start)\r\n    };\r\n  }\r\n  /**\r\n   * ObjectValue[Const] :\r\n   *   - { }\r\n   *   - { ObjectField[?Const]+ }\r\n   */\r\n  ;\r\n\r\n  _proto.parseObject = function parseObject(isConst) {\r\n    var _this2 = this;\r\n\r\n    var start = this._lexer.token;\r\n\r\n    var item = function item() {\r\n      return _this2.parseObjectField(isConst);\r\n    };\r\n\r\n    return {\r\n      kind: Kind.OBJECT,\r\n      fields: this.any(TokenKind.BRACE_L, item, TokenKind.BRACE_R),\r\n      loc: this.loc(start)\r\n    };\r\n  }\r\n  /**\r\n   * ObjectField[Const] : Name : Value[?Const]\r\n   */\r\n  ;\r\n\r\n  _proto.parseObjectField = function parseObjectField(isConst) {\r\n    var start = this._lexer.token;\r\n    var name = this.parseName();\r\n    this.expectToken(TokenKind.COLON);\r\n    return {\r\n      kind: Kind.OBJECT_FIELD,\r\n      name: name,\r\n      value: this.parseValueLiteral(isConst),\r\n      loc: this.loc(start)\r\n    };\r\n  } // Implements the parsing rules in the Directives section.\r\n\r\n  /**\r\n   * Directives[Const] : Directive[?Const]+\r\n   */\r\n  ;\r\n\r\n  _proto.parseDirectives = function parseDirectives(isConst) {\r\n    var directives = [];\r\n\r\n    while (this.peek(TokenKind.AT)) {\r\n      directives.push(this.parseDirective(isConst));\r\n    }\r\n\r\n    return directives;\r\n  }\r\n  /**\r\n   * Directive[Const] : @ Name Arguments[?Const]?\r\n   */\r\n  ;\r\n\r\n  _proto.parseDirective = function parseDirective(isConst) {\r\n    var start = this._lexer.token;\r\n    this.expectToken(TokenKind.AT);\r\n    return {\r\n      kind: Kind.DIRECTIVE,\r\n      name: this.parseName(),\r\n      arguments: this.parseArguments(isConst),\r\n      loc: this.loc(start)\r\n    };\r\n  } // Implements the parsing rules in the Types section.\r\n\r\n  /**\r\n   * Type :\r\n   *   - NamedType\r\n   *   - ListType\r\n   *   - NonNullType\r\n   */\r\n  ;\r\n\r\n  _proto.parseTypeReference = function parseTypeReference() {\r\n    var start = this._lexer.token;\r\n    var type;\r\n\r\n    if (this.expectOptionalToken(TokenKind.BRACKET_L)) {\r\n      type = this.parseTypeReference();\r\n      this.expectToken(TokenKind.BRACKET_R);\r\n      type = {\r\n        kind: Kind.LIST_TYPE,\r\n        type: type,\r\n        loc: this.loc(start)\r\n      };\r\n    } else {\r\n      type = this.parseNamedType();\r\n    }\r\n\r\n    if (this.expectOptionalToken(TokenKind.BANG)) {\r\n      return {\r\n        kind: Kind.NON_NULL_TYPE,\r\n        type: type,\r\n        loc: this.loc(start)\r\n      };\r\n    }\r\n\r\n    return type;\r\n  }\r\n  /**\r\n   * NamedType : Name\r\n   */\r\n  ;\r\n\r\n  _proto.parseNamedType = function parseNamedType() {\r\n    var start = this._lexer.token;\r\n    return {\r\n      kind: Kind.NAMED_TYPE,\r\n      name: this.parseName(),\r\n      loc: this.loc(start)\r\n    };\r\n  } // Implements the parsing rules in the Type Definition section.\r\n\r\n  /**\r\n   * TypeSystemDefinition :\r\n   *   - SchemaDefinition\r\n   *   - TypeDefinition\r\n   *   - DirectiveDefinition\r\n   *\r\n   * TypeDefinition :\r\n   *   - ScalarTypeDefinition\r\n   *   - ObjectTypeDefinition\r\n   *   - InterfaceTypeDefinition\r\n   *   - UnionTypeDefinition\r\n   *   - EnumTypeDefinition\r\n   *   - InputObjectTypeDefinition\r\n   */\r\n  ;\r\n\r\n  _proto.parseTypeSystemDefinition = function parseTypeSystemDefinition() {\r\n    // Many definitions begin with a description and require a lookahead.\r\n    var keywordToken = this.peekDescription() ? this._lexer.lookahead() : this._lexer.token;\r\n\r\n    if (keywordToken.kind === TokenKind.NAME) {\r\n      switch (keywordToken.value) {\r\n        case 'schema':\r\n          return this.parseSchemaDefinition();\r\n\r\n        case 'scalar':\r\n          return this.parseScalarTypeDefinition();\r\n\r\n        case 'type':\r\n          return this.parseObjectTypeDefinition();\r\n\r\n        case 'interface':\r\n          return this.parseInterfaceTypeDefinition();\r\n\r\n        case 'union':\r\n          return this.parseUnionTypeDefinition();\r\n\r\n        case 'enum':\r\n          return this.parseEnumTypeDefinition();\r\n\r\n        case 'input':\r\n          return this.parseInputObjectTypeDefinition();\r\n\r\n        case 'directive':\r\n          return this.parseDirectiveDefinition();\r\n      }\r\n    }\r\n\r\n    throw this.unexpected(keywordToken);\r\n  };\r\n\r\n  _proto.peekDescription = function peekDescription() {\r\n    return this.peek(TokenKind.STRING) || this.peek(TokenKind.BLOCK_STRING);\r\n  }\r\n  /**\r\n   * Description : StringValue\r\n   */\r\n  ;\r\n\r\n  _proto.parseDescription = function parseDescription() {\r\n    if (this.peekDescription()) {\r\n      return this.parseStringLiteral();\r\n    }\r\n  }\r\n  /**\r\n   * SchemaDefinition : Description? schema Directives[Const]? { OperationTypeDefinition+ }\r\n   */\r\n  ;\r\n\r\n  _proto.parseSchemaDefinition = function parseSchemaDefinition() {\r\n    var start = this._lexer.token;\r\n    var description = this.parseDescription();\r\n    this.expectKeyword('schema');\r\n    var directives = this.parseDirectives(true);\r\n    var operationTypes = this.many(TokenKind.BRACE_L, this.parseOperationTypeDefinition, TokenKind.BRACE_R);\r\n    return {\r\n      kind: Kind.SCHEMA_DEFINITION,\r\n      description: description,\r\n      directives: directives,\r\n      operationTypes: operationTypes,\r\n      loc: this.loc(start)\r\n    };\r\n  }\r\n  /**\r\n   * OperationTypeDefinition : OperationType : NamedType\r\n   */\r\n  ;\r\n\r\n  _proto.parseOperationTypeDefinition = function parseOperationTypeDefinition() {\r\n    var start = this._lexer.token;\r\n    var operation = this.parseOperationType();\r\n    this.expectToken(TokenKind.COLON);\r\n    var type = this.parseNamedType();\r\n    return {\r\n      kind: Kind.OPERATION_TYPE_DEFINITION,\r\n      operation: operation,\r\n      type: type,\r\n      loc: this.loc(start)\r\n    };\r\n  }\r\n  /**\r\n   * ScalarTypeDefinition : Description? scalar Name Directives[Const]?\r\n   */\r\n  ;\r\n\r\n  _proto.parseScalarTypeDefinition = function parseScalarTypeDefinition() {\r\n    var start = this._lexer.token;\r\n    var description = this.parseDescription();\r\n    this.expectKeyword('scalar');\r\n    var name = this.parseName();\r\n    var directives = this.parseDirectives(true);\r\n    return {\r\n      kind: Kind.SCALAR_TYPE_DEFINITION,\r\n      description: description,\r\n      name: name,\r\n      directives: directives,\r\n      loc: this.loc(start)\r\n    };\r\n  }\r\n  /**\r\n   * ObjectTypeDefinition :\r\n   *   Description?\r\n   *   type Name ImplementsInterfaces? Directives[Const]? FieldsDefinition?\r\n   */\r\n  ;\r\n\r\n  _proto.parseObjectTypeDefinition = function parseObjectTypeDefinition() {\r\n    var start = this._lexer.token;\r\n    var description = this.parseDescription();\r\n    this.expectKeyword('type');\r\n    var name = this.parseName();\r\n    var interfaces = this.parseImplementsInterfaces();\r\n    var directives = this.parseDirectives(true);\r\n    var fields = this.parseFieldsDefinition();\r\n    return {\r\n      kind: Kind.OBJECT_TYPE_DEFINITION,\r\n      description: description,\r\n      name: name,\r\n      interfaces: interfaces,\r\n      directives: directives,\r\n      fields: fields,\r\n      loc: this.loc(start)\r\n    };\r\n  }\r\n  /**\r\n   * ImplementsInterfaces :\r\n   *   - implements `&`? NamedType\r\n   *   - ImplementsInterfaces & NamedType\r\n   */\r\n  ;\r\n\r\n  _proto.parseImplementsInterfaces = function parseImplementsInterfaces() {\r\n    var _this$_options2;\r\n\r\n    if (!this.expectOptionalKeyword('implements')) {\r\n      return [];\r\n    }\r\n\r\n    if (((_this$_options2 = this._options) === null || _this$_options2 === void 0 ? void 0 : _this$_options2.allowLegacySDLImplementsInterfaces) === true) {\r\n      var types = []; // Optional leading ampersand\r\n\r\n      this.expectOptionalToken(TokenKind.AMP);\r\n\r\n      do {\r\n        types.push(this.parseNamedType());\r\n      } while (this.expectOptionalToken(TokenKind.AMP) || this.peek(TokenKind.NAME));\r\n\r\n      return types;\r\n    }\r\n\r\n    return this.delimitedMany(TokenKind.AMP, this.parseNamedType);\r\n  }\r\n  /**\r\n   * FieldsDefinition : { FieldDefinition+ }\r\n   */\r\n  ;\r\n\r\n  _proto.parseFieldsDefinition = function parseFieldsDefinition() {\r\n    var _this$_options3;\r\n\r\n    // Legacy support for the SDL?\r\n    if (((_this$_options3 = this._options) === null || _this$_options3 === void 0 ? void 0 : _this$_options3.allowLegacySDLEmptyFields) === true && this.peek(TokenKind.BRACE_L) && this._lexer.lookahead().kind === TokenKind.BRACE_R) {\r\n      this._lexer.advance();\r\n\r\n      this._lexer.advance();\r\n\r\n      return [];\r\n    }\r\n\r\n    return this.optionalMany(TokenKind.BRACE_L, this.parseFieldDefinition, TokenKind.BRACE_R);\r\n  }\r\n  /**\r\n   * FieldDefinition :\r\n   *   - Description? Name ArgumentsDefinition? : Type Directives[Const]?\r\n   */\r\n  ;\r\n\r\n  _proto.parseFieldDefinition = function parseFieldDefinition() {\r\n    var start = this._lexer.token;\r\n    var description = this.parseDescription();\r\n    var name = this.parseName();\r\n    var args = this.parseArgumentDefs();\r\n    this.expectToken(TokenKind.COLON);\r\n    var type = this.parseTypeReference();\r\n    var directives = this.parseDirectives(true);\r\n    return {\r\n      kind: Kind.FIELD_DEFINITION,\r\n      description: description,\r\n      name: name,\r\n      arguments: args,\r\n      type: type,\r\n      directives: directives,\r\n      loc: this.loc(start)\r\n    };\r\n  }\r\n  /**\r\n   * ArgumentsDefinition : ( InputValueDefinition+ )\r\n   */\r\n  ;\r\n\r\n  _proto.parseArgumentDefs = function parseArgumentDefs() {\r\n    return this.optionalMany(TokenKind.PAREN_L, this.parseInputValueDef, TokenKind.PAREN_R);\r\n  }\r\n  /**\r\n   * InputValueDefinition :\r\n   *   - Description? Name : Type DefaultValue? Directives[Const]?\r\n   */\r\n  ;\r\n\r\n  _proto.parseInputValueDef = function parseInputValueDef() {\r\n    var start = this._lexer.token;\r\n    var description = this.parseDescription();\r\n    var name = this.parseName();\r\n    this.expectToken(TokenKind.COLON);\r\n    var type = this.parseTypeReference();\r\n    var defaultValue;\r\n\r\n    if (this.expectOptionalToken(TokenKind.EQUALS)) {\r\n      defaultValue = this.parseValueLiteral(true);\r\n    }\r\n\r\n    var directives = this.parseDirectives(true);\r\n    return {\r\n      kind: Kind.INPUT_VALUE_DEFINITION,\r\n      description: description,\r\n      name: name,\r\n      type: type,\r\n      defaultValue: defaultValue,\r\n      directives: directives,\r\n      loc: this.loc(start)\r\n    };\r\n  }\r\n  /**\r\n   * InterfaceTypeDefinition :\r\n   *   - Description? interface Name Directives[Const]? FieldsDefinition?\r\n   */\r\n  ;\r\n\r\n  _proto.parseInterfaceTypeDefinition = function parseInterfaceTypeDefinition() {\r\n    var start = this._lexer.token;\r\n    var description = this.parseDescription();\r\n    this.expectKeyword('interface');\r\n    var name = this.parseName();\r\n    var interfaces = this.parseImplementsInterfaces();\r\n    var directives = this.parseDirectives(true);\r\n    var fields = this.parseFieldsDefinition();\r\n    return {\r\n      kind: Kind.INTERFACE_TYPE_DEFINITION,\r\n      description: description,\r\n      name: name,\r\n      interfaces: interfaces,\r\n      directives: directives,\r\n      fields: fields,\r\n      loc: this.loc(start)\r\n    };\r\n  }\r\n  /**\r\n   * UnionTypeDefinition :\r\n   *   - Description? union Name Directives[Const]? UnionMemberTypes?\r\n   */\r\n  ;\r\n\r\n  _proto.parseUnionTypeDefinition = function parseUnionTypeDefinition() {\r\n    var start = this._lexer.token;\r\n    var description = this.parseDescription();\r\n    this.expectKeyword('union');\r\n    var name = this.parseName();\r\n    var directives = this.parseDirectives(true);\r\n    var types = this.parseUnionMemberTypes();\r\n    return {\r\n      kind: Kind.UNION_TYPE_DEFINITION,\r\n      description: description,\r\n      name: name,\r\n      directives: directives,\r\n      types: types,\r\n      loc: this.loc(start)\r\n    };\r\n  }\r\n  /**\r\n   * UnionMemberTypes :\r\n   *   - = `|`? NamedType\r\n   *   - UnionMemberTypes | NamedType\r\n   */\r\n  ;\r\n\r\n  _proto.parseUnionMemberTypes = function parseUnionMemberTypes() {\r\n    return this.expectOptionalToken(TokenKind.EQUALS) ? this.delimitedMany(TokenKind.PIPE, this.parseNamedType) : [];\r\n  }\r\n  /**\r\n   * EnumTypeDefinition :\r\n   *   - Description? enum Name Directives[Const]? EnumValuesDefinition?\r\n   */\r\n  ;\r\n\r\n  _proto.parseEnumTypeDefinition = function parseEnumTypeDefinition() {\r\n    var start = this._lexer.token;\r\n    var description = this.parseDescription();\r\n    this.expectKeyword('enum');\r\n    var name = this.parseName();\r\n    var directives = this.parseDirectives(true);\r\n    var values = this.parseEnumValuesDefinition();\r\n    return {\r\n      kind: Kind.ENUM_TYPE_DEFINITION,\r\n      description: description,\r\n      name: name,\r\n      directives: directives,\r\n      values: values,\r\n      loc: this.loc(start)\r\n    };\r\n  }\r\n  /**\r\n   * EnumValuesDefinition : { EnumValueDefinition+ }\r\n   */\r\n  ;\r\n\r\n  _proto.parseEnumValuesDefinition = function parseEnumValuesDefinition() {\r\n    return this.optionalMany(TokenKind.BRACE_L, this.parseEnumValueDefinition, TokenKind.BRACE_R);\r\n  }\r\n  /**\r\n   * EnumValueDefinition : Description? EnumValue Directives[Const]?\r\n   *\r\n   * EnumValue : Name\r\n   */\r\n  ;\r\n\r\n  _proto.parseEnumValueDefinition = function parseEnumValueDefinition() {\r\n    var start = this._lexer.token;\r\n    var description = this.parseDescription();\r\n    var name = this.parseName();\r\n    var directives = this.parseDirectives(true);\r\n    return {\r\n      kind: Kind.ENUM_VALUE_DEFINITION,\r\n      description: description,\r\n      name: name,\r\n      directives: directives,\r\n      loc: this.loc(start)\r\n    };\r\n  }\r\n  /**\r\n   * InputObjectTypeDefinition :\r\n   *   - Description? input Name Directives[Const]? InputFieldsDefinition?\r\n   */\r\n  ;\r\n\r\n  _proto.parseInputObjectTypeDefinition = function parseInputObjectTypeDefinition() {\r\n    var start = this._lexer.token;\r\n    var description = this.parseDescription();\r\n    this.expectKeyword('input');\r\n    var name = this.parseName();\r\n    var directives = this.parseDirectives(true);\r\n    var fields = this.parseInputFieldsDefinition();\r\n    return {\r\n      kind: Kind.INPUT_OBJECT_TYPE_DEFINITION,\r\n      description: description,\r\n      name: name,\r\n      directives: directives,\r\n      fields: fields,\r\n      loc: this.loc(start)\r\n    };\r\n  }\r\n  /**\r\n   * InputFieldsDefinition : { InputValueDefinition+ }\r\n   */\r\n  ;\r\n\r\n  _proto.parseInputFieldsDefinition = function parseInputFieldsDefinition() {\r\n    return this.optionalMany(TokenKind.BRACE_L, this.parseInputValueDef, TokenKind.BRACE_R);\r\n  }\r\n  /**\r\n   * TypeSystemExtension :\r\n   *   - SchemaExtension\r\n   *   - TypeExtension\r\n   *\r\n   * TypeExtension :\r\n   *   - ScalarTypeExtension\r\n   *   - ObjectTypeExtension\r\n   *   - InterfaceTypeExtension\r\n   *   - UnionTypeExtension\r\n   *   - EnumTypeExtension\r\n   *   - InputObjectTypeDefinition\r\n   */\r\n  ;\r\n\r\n  _proto.parseTypeSystemExtension = function parseTypeSystemExtension() {\r\n    var keywordToken = this._lexer.lookahead();\r\n\r\n    if (keywordToken.kind === TokenKind.NAME) {\r\n      switch (keywordToken.value) {\r\n        case 'schema':\r\n          return this.parseSchemaExtension();\r\n\r\n        case 'scalar':\r\n          return this.parseScalarTypeExtension();\r\n\r\n        case 'type':\r\n          return this.parseObjectTypeExtension();\r\n\r\n        case 'interface':\r\n          return this.parseInterfaceTypeExtension();\r\n\r\n        case 'union':\r\n          return this.parseUnionTypeExtension();\r\n\r\n        case 'enum':\r\n          return this.parseEnumTypeExtension();\r\n\r\n        case 'input':\r\n          return this.parseInputObjectTypeExtension();\r\n      }\r\n    }\r\n\r\n    throw this.unexpected(keywordToken);\r\n  }\r\n  /**\r\n   * SchemaExtension :\r\n   *  - extend schema Directives[Const]? { OperationTypeDefinition+ }\r\n   *  - extend schema Directives[Const]\r\n   */\r\n  ;\r\n\r\n  _proto.parseSchemaExtension = function parseSchemaExtension() {\r\n    var start = this._lexer.token;\r\n    this.expectKeyword('extend');\r\n    this.expectKeyword('schema');\r\n    var directives = this.parseDirectives(true);\r\n    var operationTypes = this.optionalMany(TokenKind.BRACE_L, this.parseOperationTypeDefinition, TokenKind.BRACE_R);\r\n\r\n    if (directives.length === 0 && operationTypes.length === 0) {\r\n      throw this.unexpected();\r\n    }\r\n\r\n    return {\r\n      kind: Kind.SCHEMA_EXTENSION,\r\n      directives: directives,\r\n      operationTypes: operationTypes,\r\n      loc: this.loc(start)\r\n    };\r\n  }\r\n  /**\r\n   * ScalarTypeExtension :\r\n   *   - extend scalar Name Directives[Const]\r\n   */\r\n  ;\r\n\r\n  _proto.parseScalarTypeExtension = function parseScalarTypeExtension() {\r\n    var start = this._lexer.token;\r\n    this.expectKeyword('extend');\r\n    this.expectKeyword('scalar');\r\n    var name = this.parseName();\r\n    var directives = this.parseDirectives(true);\r\n\r\n    if (directives.length === 0) {\r\n      throw this.unexpected();\r\n    }\r\n\r\n    return {\r\n      kind: Kind.SCALAR_TYPE_EXTENSION,\r\n      name: name,\r\n      directives: directives,\r\n      loc: this.loc(start)\r\n    };\r\n  }\r\n  /**\r\n   * ObjectTypeExtension :\r\n   *  - extend type Name ImplementsInterfaces? Directives[Const]? FieldsDefinition\r\n   *  - extend type Name ImplementsInterfaces? Directives[Const]\r\n   *  - extend type Name ImplementsInterfaces\r\n   */\r\n  ;\r\n\r\n  _proto.parseObjectTypeExtension = function parseObjectTypeExtension() {\r\n    var start = this._lexer.token;\r\n    this.expectKeyword('extend');\r\n    this.expectKeyword('type');\r\n    var name = this.parseName();\r\n    var interfaces = this.parseImplementsInterfaces();\r\n    var directives = this.parseDirectives(true);\r\n    var fields = this.parseFieldsDefinition();\r\n\r\n    if (interfaces.length === 0 && directives.length === 0 && fields.length === 0) {\r\n      throw this.unexpected();\r\n    }\r\n\r\n    return {\r\n      kind: Kind.OBJECT_TYPE_EXTENSION,\r\n      name: name,\r\n      interfaces: interfaces,\r\n      directives: directives,\r\n      fields: fields,\r\n      loc: this.loc(start)\r\n    };\r\n  }\r\n  /**\r\n   * InterfaceTypeExtension :\r\n   *  - extend interface Name ImplementsInterfaces? Directives[Const]? FieldsDefinition\r\n   *  - extend interface Name ImplementsInterfaces? Directives[Const]\r\n   *  - extend interface Name ImplementsInterfaces\r\n   */\r\n  ;\r\n\r\n  _proto.parseInterfaceTypeExtension = function parseInterfaceTypeExtension() {\r\n    var start = this._lexer.token;\r\n    this.expectKeyword('extend');\r\n    this.expectKeyword('interface');\r\n    var name = this.parseName();\r\n    var interfaces = this.parseImplementsInterfaces();\r\n    var directives = this.parseDirectives(true);\r\n    var fields = this.parseFieldsDefinition();\r\n\r\n    if (interfaces.length === 0 && directives.length === 0 && fields.length === 0) {\r\n      throw this.unexpected();\r\n    }\r\n\r\n    return {\r\n      kind: Kind.INTERFACE_TYPE_EXTENSION,\r\n      name: name,\r\n      interfaces: interfaces,\r\n      directives: directives,\r\n      fields: fields,\r\n      loc: this.loc(start)\r\n    };\r\n  }\r\n  /**\r\n   * UnionTypeExtension :\r\n   *   - extend union Name Directives[Const]? UnionMemberTypes\r\n   *   - extend union Name Directives[Const]\r\n   */\r\n  ;\r\n\r\n  _proto.parseUnionTypeExtension = function parseUnionTypeExtension() {\r\n    var start = this._lexer.token;\r\n    this.expectKeyword('extend');\r\n    this.expectKeyword('union');\r\n    var name = this.parseName();\r\n    var directives = this.parseDirectives(true);\r\n    var types = this.parseUnionMemberTypes();\r\n\r\n    if (directives.length === 0 && types.length === 0) {\r\n      throw this.unexpected();\r\n    }\r\n\r\n    return {\r\n      kind: Kind.UNION_TYPE_EXTENSION,\r\n      name: name,\r\n      directives: directives,\r\n      types: types,\r\n      loc: this.loc(start)\r\n    };\r\n  }\r\n  /**\r\n   * EnumTypeExtension :\r\n   *   - extend enum Name Directives[Const]? EnumValuesDefinition\r\n   *   - extend enum Name Directives[Const]\r\n   */\r\n  ;\r\n\r\n  _proto.parseEnumTypeExtension = function parseEnumTypeExtension() {\r\n    var start = this._lexer.token;\r\n    this.expectKeyword('extend');\r\n    this.expectKeyword('enum');\r\n    var name = this.parseName();\r\n    var directives = this.parseDirectives(true);\r\n    var values = this.parseEnumValuesDefinition();\r\n\r\n    if (directives.length === 0 && values.length === 0) {\r\n      throw this.unexpected();\r\n    }\r\n\r\n    return {\r\n      kind: Kind.ENUM_TYPE_EXTENSION,\r\n      name: name,\r\n      directives: directives,\r\n      values: values,\r\n      loc: this.loc(start)\r\n    };\r\n  }\r\n  /**\r\n   * InputObjectTypeExtension :\r\n   *   - extend input Name Directives[Const]? InputFieldsDefinition\r\n   *   - extend input Name Directives[Const]\r\n   */\r\n  ;\r\n\r\n  _proto.parseInputObjectTypeExtension = function parseInputObjectTypeExtension() {\r\n    var start = this._lexer.token;\r\n    this.expectKeyword('extend');\r\n    this.expectKeyword('input');\r\n    var name = this.parseName();\r\n    var directives = this.parseDirectives(true);\r\n    var fields = this.parseInputFieldsDefinition();\r\n\r\n    if (directives.length === 0 && fields.length === 0) {\r\n      throw this.unexpected();\r\n    }\r\n\r\n    return {\r\n      kind: Kind.INPUT_OBJECT_TYPE_EXTENSION,\r\n      name: name,\r\n      directives: directives,\r\n      fields: fields,\r\n      loc: this.loc(start)\r\n    };\r\n  }\r\n  /**\r\n   * DirectiveDefinition :\r\n   *   - Description? directive @ Name ArgumentsDefinition? `repeatable`? on DirectiveLocations\r\n   */\r\n  ;\r\n\r\n  _proto.parseDirectiveDefinition = function parseDirectiveDefinition() {\r\n    var start = this._lexer.token;\r\n    var description = this.parseDescription();\r\n    this.expectKeyword('directive');\r\n    this.expectToken(TokenKind.AT);\r\n    var name = this.parseName();\r\n    var args = this.parseArgumentDefs();\r\n    var repeatable = this.expectOptionalKeyword('repeatable');\r\n    this.expectKeyword('on');\r\n    var locations = this.parseDirectiveLocations();\r\n    return {\r\n      kind: Kind.DIRECTIVE_DEFINITION,\r\n      description: description,\r\n      name: name,\r\n      arguments: args,\r\n      repeatable: repeatable,\r\n      locations: locations,\r\n      loc: this.loc(start)\r\n    };\r\n  }\r\n  /**\r\n   * DirectiveLocations :\r\n   *   - `|`? DirectiveLocation\r\n   *   - DirectiveLocations | DirectiveLocation\r\n   */\r\n  ;\r\n\r\n  _proto.parseDirectiveLocations = function parseDirectiveLocations() {\r\n    return this.delimitedMany(TokenKind.PIPE, this.parseDirectiveLocation);\r\n  }\r\n  /*\r\n   * DirectiveLocation :\r\n   *   - ExecutableDirectiveLocation\r\n   *   - TypeSystemDirectiveLocation\r\n   *\r\n   * ExecutableDirectiveLocation : one of\r\n   *   `QUERY`\r\n   *   `MUTATION`\r\n   *   `SUBSCRIPTION`\r\n   *   `FIELD`\r\n   *   `FRAGMENT_DEFINITION`\r\n   *   `FRAGMENT_SPREAD`\r\n   *   `INLINE_FRAGMENT`\r\n   *\r\n   * TypeSystemDirectiveLocation : one of\r\n   *   `SCHEMA`\r\n   *   `SCALAR`\r\n   *   `OBJECT`\r\n   *   `FIELD_DEFINITION`\r\n   *   `ARGUMENT_DEFINITION`\r\n   *   `INTERFACE`\r\n   *   `UNION`\r\n   *   `ENUM`\r\n   *   `ENUM_VALUE`\r\n   *   `INPUT_OBJECT`\r\n   *   `INPUT_FIELD_DEFINITION`\r\n   */\r\n  ;\r\n\r\n  _proto.parseDirectiveLocation = function parseDirectiveLocation() {\r\n    var start = this._lexer.token;\r\n    var name = this.parseName();\r\n\r\n    if (DirectiveLocation[name.value] !== undefined) {\r\n      return name;\r\n    }\r\n\r\n    throw this.unexpected(start);\r\n  } // Core parsing utility functions\r\n\r\n  /**\r\n   * Returns a location object, used to identify the place in the source that created a given parsed object.\r\n   */\r\n  ;\r\n\r\n  _proto.loc = function loc(startToken) {\r\n    var _this$_options4;\r\n\r\n    if (((_this$_options4 = this._options) === null || _this$_options4 === void 0 ? void 0 : _this$_options4.noLocation) !== true) {\r\n      return new Location(startToken, this._lexer.lastToken, this._lexer.source);\r\n    }\r\n  }\r\n  /**\r\n   * Determines if the next token is of a given kind\r\n   */\r\n  ;\r\n\r\n  _proto.peek = function peek(kind) {\r\n    return this._lexer.token.kind === kind;\r\n  }\r\n  /**\r\n   * If the next token is of the given kind, return that token after advancing the lexer.\r\n   * Otherwise, do not change the parser state and throw an error.\r\n   */\r\n  ;\r\n\r\n  _proto.expectToken = function expectToken(kind) {\r\n    var token = this._lexer.token;\r\n\r\n    if (token.kind === kind) {\r\n      this._lexer.advance();\r\n\r\n      return token;\r\n    }\r\n\r\n    throw syntaxError(this._lexer.source, token.start, \"Expected \".concat(getTokenKindDesc(kind), \", found \").concat(getTokenDesc(token), \".\"));\r\n  }\r\n  /**\r\n   * If the next token is of the given kind, return that token after advancing the lexer.\r\n   * Otherwise, do not change the parser state and return undefined.\r\n   */\r\n  ;\r\n\r\n  _proto.expectOptionalToken = function expectOptionalToken(kind) {\r\n    var token = this._lexer.token;\r\n\r\n    if (token.kind === kind) {\r\n      this._lexer.advance();\r\n\r\n      return token;\r\n    }\r\n\r\n    return undefined;\r\n  }\r\n  /**\r\n   * If the next token is a given keyword, advance the lexer.\r\n   * Otherwise, do not change the parser state and throw an error.\r\n   */\r\n  ;\r\n\r\n  _proto.expectKeyword = function expectKeyword(value) {\r\n    var token = this._lexer.token;\r\n\r\n    if (token.kind === TokenKind.NAME && token.value === value) {\r\n      this._lexer.advance();\r\n    } else {\r\n      throw syntaxError(this._lexer.source, token.start, \"Expected \\\"\".concat(value, \"\\\", found \").concat(getTokenDesc(token), \".\"));\r\n    }\r\n  }\r\n  /**\r\n   * If the next token is a given keyword, return \"true\" after advancing the lexer.\r\n   * Otherwise, do not change the parser state and return \"false\".\r\n   */\r\n  ;\r\n\r\n  _proto.expectOptionalKeyword = function expectOptionalKeyword(value) {\r\n    var token = this._lexer.token;\r\n\r\n    if (token.kind === TokenKind.NAME && token.value === value) {\r\n      this._lexer.advance();\r\n\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Helper function for creating an error when an unexpected lexed token is encountered.\r\n   */\r\n  ;\r\n\r\n  _proto.unexpected = function unexpected(atToken) {\r\n    var token = atToken !== null && atToken !== void 0 ? atToken : this._lexer.token;\r\n    return syntaxError(this._lexer.source, token.start, \"Unexpected \".concat(getTokenDesc(token), \".\"));\r\n  }\r\n  /**\r\n   * Returns a possibly empty list of parse nodes, determined by the parseFn.\r\n   * This list begins with a lex token of openKind and ends with a lex token of closeKind.\r\n   * Advances the parser to the next lex token after the closing token.\r\n   */\r\n  ;\r\n\r\n  _proto.any = function any(openKind, parseFn, closeKind) {\r\n    this.expectToken(openKind);\r\n    var nodes = [];\r\n\r\n    while (!this.expectOptionalToken(closeKind)) {\r\n      nodes.push(parseFn.call(this));\r\n    }\r\n\r\n    return nodes;\r\n  }\r\n  /**\r\n   * Returns a list of parse nodes, determined by the parseFn.\r\n   * It can be empty only if open token is missing otherwise it will always return non-empty list\r\n   * that begins with a lex token of openKind and ends with a lex token of closeKind.\r\n   * Advances the parser to the next lex token after the closing token.\r\n   */\r\n  ;\r\n\r\n  _proto.optionalMany = function optionalMany(openKind, parseFn, closeKind) {\r\n    if (this.expectOptionalToken(openKind)) {\r\n      var nodes = [];\r\n\r\n      do {\r\n        nodes.push(parseFn.call(this));\r\n      } while (!this.expectOptionalToken(closeKind));\r\n\r\n      return nodes;\r\n    }\r\n\r\n    return [];\r\n  }\r\n  /**\r\n   * Returns a non-empty list of parse nodes, determined by the parseFn.\r\n   * This list begins with a lex token of openKind and ends with a lex token of closeKind.\r\n   * Advances the parser to the next lex token after the closing token.\r\n   */\r\n  ;\r\n\r\n  _proto.many = function many(openKind, parseFn, closeKind) {\r\n    this.expectToken(openKind);\r\n    var nodes = [];\r\n\r\n    do {\r\n      nodes.push(parseFn.call(this));\r\n    } while (!this.expectOptionalToken(closeKind));\r\n\r\n    return nodes;\r\n  }\r\n  /**\r\n   * Returns a non-empty list of parse nodes, determined by the parseFn.\r\n   * This list may begin with a lex token of delimiterKind followed by items separated by lex tokens of tokenKind.\r\n   * Advances the parser to the next lex token after last item in the list.\r\n   */\r\n  ;\r\n\r\n  _proto.delimitedMany = function delimitedMany(delimiterKind, parseFn) {\r\n    this.expectOptionalToken(delimiterKind);\r\n    var nodes = [];\r\n\r\n    do {\r\n      nodes.push(parseFn.call(this));\r\n    } while (this.expectOptionalToken(delimiterKind));\r\n\r\n    return nodes;\r\n  };\r\n\r\n  return Parser;\r\n}();\r\n/**\r\n * A helper function to describe a token as a string for debugging.\r\n */\r\n\r\nfunction getTokenDesc(token) {\r\n  var value = token.value;\r\n  return getTokenKindDesc(token.kind) + (value != null ? \" \\\"\".concat(value, \"\\\"\") : '');\r\n}\r\n/**\r\n * A helper function to describe a token kind as a string for debugging.\r\n */\r\n\r\n\r\nfunction getTokenKindDesc(kind) {\r\n  return isPunctuatorTokenKind(kind) ? \"\\\"\".concat(kind, \"\\\"\") : kind;\r\n}\r\n", "import inspect from \"../jsutils/inspect.mjs\";\r\nimport { isNode } from \"./ast.mjs\";\r\n/**\r\n * A visitor is provided to visit, it contains the collection of\r\n * relevant functions to be called during the visitor's traversal.\r\n */\r\n\r\nexport var QueryDocumentKeys = {\r\n  Name: [],\r\n  Document: ['definitions'],\r\n  OperationDefinition: ['name', 'variableDefinitions', 'directives', 'selectionSet'],\r\n  VariableDefinition: ['variable', 'type', 'defaultValue', 'directives'],\r\n  Variable: ['name'],\r\n  SelectionSet: ['selections'],\r\n  Field: ['alias', 'name', 'arguments', 'directives', 'selectionSet'],\r\n  Argument: ['name', 'value'],\r\n  FragmentSpread: ['name', 'directives'],\r\n  InlineFragment: ['typeCondition', 'directives', 'selectionSet'],\r\n  FragmentDefinition: ['name', // Note: fragment variable definitions are experimental and may be changed\r\n  // or removed in the future.\r\n  'variableDefinitions', 'typeCondition', 'directives', 'selectionSet'],\r\n  IntValue: [],\r\n  FloatValue: [],\r\n  StringValue: [],\r\n  BooleanValue: [],\r\n  NullValue: [],\r\n  EnumValue: [],\r\n  ListValue: ['values'],\r\n  ObjectValue: ['fields'],\r\n  ObjectField: ['name', 'value'],\r\n  Directive: ['name', 'arguments'],\r\n  NamedType: ['name'],\r\n  ListType: ['type'],\r\n  NonNullType: ['type'],\r\n  SchemaDefinition: ['description', 'directives', 'operationTypes'],\r\n  OperationTypeDefinition: ['type'],\r\n  ScalarTypeDefinition: ['description', 'name', 'directives'],\r\n  ObjectTypeDefinition: ['description', 'name', 'interfaces', 'directives', 'fields'],\r\n  FieldDefinition: ['description', 'name', 'arguments', 'type', 'directives'],\r\n  InputValueDefinition: ['description', 'name', 'type', 'defaultValue', 'directives'],\r\n  InterfaceTypeDefinition: ['description', 'name', 'interfaces', 'directives', 'fields'],\r\n  UnionTypeDefinition: ['description', 'name', 'directives', 'types'],\r\n  EnumTypeDefinition: ['description', 'name', 'directives', 'values'],\r\n  EnumValueDefinition: ['description', 'name', 'directives'],\r\n  InputObjectTypeDefinition: ['description', 'name', 'directives', 'fields'],\r\n  DirectiveDefinition: ['description', 'name', 'arguments', 'locations'],\r\n  SchemaExtension: ['directives', 'operationTypes'],\r\n  ScalarTypeExtension: ['name', 'directives'],\r\n  ObjectTypeExtension: ['name', 'interfaces', 'directives', 'fields'],\r\n  InterfaceTypeExtension: ['name', 'interfaces', 'directives', 'fields'],\r\n  UnionTypeExtension: ['name', 'directives', 'types'],\r\n  EnumTypeExtension: ['name', 'directives', 'values'],\r\n  InputObjectTypeExtension: ['name', 'directives', 'fields']\r\n};\r\nexport var BREAK = Object.freeze({});\r\n/**\r\n * visit() will walk through an AST using a depth-first traversal, calling\r\n * the visitor's enter function at each node in the traversal, and calling the\r\n * leave function after visiting that node and all of its child nodes.\r\n *\r\n * By returning different values from the enter and leave functions, the\r\n * behavior of the visitor can be altered, including skipping over a sub-tree of\r\n * the AST (by returning false), editing the AST by returning a value or null\r\n * to remove the value, or to stop the whole traversal by returning BREAK.\r\n *\r\n * When using visit() to edit an AST, the original AST will not be modified, and\r\n * a new version of the AST with the changes applied will be returned from the\r\n * visit function.\r\n *\r\n *     const editedAST = visit(ast, {\r\n *       enter(node, key, parent, path, ancestors) {\r\n *         // @return\r\n *         //   undefined: no action\r\n *         //   false: skip visiting this node\r\n *         //   visitor.BREAK: stop visiting altogether\r\n *         //   null: delete this node\r\n *         //   any value: replace this node with the returned value\r\n *       },\r\n *       leave(node, key, parent, path, ancestors) {\r\n *         // @return\r\n *         //   undefined: no action\r\n *         //   false: no action\r\n *         //   visitor.BREAK: stop visiting altogether\r\n *         //   null: delete this node\r\n *         //   any value: replace this node with the returned value\r\n *       }\r\n *     });\r\n *\r\n * Alternatively to providing enter() and leave() functions, a visitor can\r\n * instead provide functions named the same as the kinds of AST nodes, or\r\n * enter/leave visitors at a named key, leading to four permutations of the\r\n * visitor API:\r\n *\r\n * 1) Named visitors triggered when entering a node of a specific kind.\r\n *\r\n *     visit(ast, {\r\n *       Kind(node) {\r\n *         // enter the \"Kind\" node\r\n *       }\r\n *     })\r\n *\r\n * 2) Named visitors that trigger upon entering and leaving a node of\r\n *    a specific kind.\r\n *\r\n *     visit(ast, {\r\n *       Kind: {\r\n *         enter(node) {\r\n *           // enter the \"Kind\" node\r\n *         }\r\n *         leave(node) {\r\n *           // leave the \"Kind\" node\r\n *         }\r\n *       }\r\n *     })\r\n *\r\n * 3) Generic visitors that trigger upon entering and leaving any node.\r\n *\r\n *     visit(ast, {\r\n *       enter(node) {\r\n *         // enter any node\r\n *       },\r\n *       leave(node) {\r\n *         // leave any node\r\n *       }\r\n *     })\r\n *\r\n * 4) Parallel visitors for entering and leaving nodes of a specific kind.\r\n *\r\n *     visit(ast, {\r\n *       enter: {\r\n *         Kind(node) {\r\n *           // enter the \"Kind\" node\r\n *         }\r\n *       },\r\n *       leave: {\r\n *         Kind(node) {\r\n *           // leave the \"Kind\" node\r\n *         }\r\n *       }\r\n *     })\r\n */\r\n\r\nexport function visit(root, visitor) {\r\n  var visitorKeys = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : QueryDocumentKeys;\r\n\r\n  /* eslint-disable no-undef-init */\r\n  var stack = undefined;\r\n  var inArray = Array.isArray(root);\r\n  var keys = [root];\r\n  var index = -1;\r\n  var edits = [];\r\n  var node = undefined;\r\n  var key = undefined;\r\n  var parent = undefined;\r\n  var path = [];\r\n  var ancestors = [];\r\n  var newRoot = root;\r\n  /* eslint-enable no-undef-init */\r\n\r\n  do {\r\n    index++;\r\n    var isLeaving = index === keys.length;\r\n    var isEdited = isLeaving && edits.length !== 0;\r\n\r\n    if (isLeaving) {\r\n      key = ancestors.length === 0 ? undefined : path[path.length - 1];\r\n      node = parent;\r\n      parent = ancestors.pop();\r\n\r\n      if (isEdited) {\r\n        if (inArray) {\r\n          node = node.slice();\r\n        } else {\r\n          var clone = {};\r\n\r\n          for (var _i2 = 0, _Object$keys2 = Object.keys(node); _i2 < _Object$keys2.length; _i2++) {\r\n            var k = _Object$keys2[_i2];\r\n            clone[k] = node[k];\r\n          }\r\n\r\n          node = clone;\r\n        }\r\n\r\n        var editOffset = 0;\r\n\r\n        for (var ii = 0; ii < edits.length; ii++) {\r\n          var editKey = edits[ii][0];\r\n          var editValue = edits[ii][1];\r\n\r\n          if (inArray) {\r\n            editKey -= editOffset;\r\n          }\r\n\r\n          if (inArray && editValue === null) {\r\n            node.splice(editKey, 1);\r\n            editOffset++;\r\n          } else {\r\n            node[editKey] = editValue;\r\n          }\r\n        }\r\n      }\r\n\r\n      index = stack.index;\r\n      keys = stack.keys;\r\n      edits = stack.edits;\r\n      inArray = stack.inArray;\r\n      stack = stack.prev;\r\n    } else {\r\n      key = parent ? inArray ? index : keys[index] : undefined;\r\n      node = parent ? parent[key] : newRoot;\r\n\r\n      if (node === null || node === undefined) {\r\n        continue;\r\n      }\r\n\r\n      if (parent) {\r\n        path.push(key);\r\n      }\r\n    }\r\n\r\n    var result = void 0;\r\n\r\n    if (!Array.isArray(node)) {\r\n      if (!isNode(node)) {\r\n        throw new Error(\"Invalid AST Node: \".concat(inspect(node), \".\"));\r\n      }\r\n\r\n      var visitFn = getVisitFn(visitor, node.kind, isLeaving);\r\n\r\n      if (visitFn) {\r\n        result = visitFn.call(visitor, node, key, parent, path, ancestors);\r\n\r\n        if (result === BREAK) {\r\n          break;\r\n        }\r\n\r\n        if (result === false) {\r\n          if (!isLeaving) {\r\n            path.pop();\r\n            continue;\r\n          }\r\n        } else if (result !== undefined) {\r\n          edits.push([key, result]);\r\n\r\n          if (!isLeaving) {\r\n            if (isNode(result)) {\r\n              node = result;\r\n            } else {\r\n              path.pop();\r\n              continue;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    if (result === undefined && isEdited) {\r\n      edits.push([key, node]);\r\n    }\r\n\r\n    if (isLeaving) {\r\n      path.pop();\r\n    } else {\r\n      var _visitorKeys$node$kin;\r\n\r\n      stack = {\r\n        inArray: inArray,\r\n        index: index,\r\n        keys: keys,\r\n        edits: edits,\r\n        prev: stack\r\n      };\r\n      inArray = Array.isArray(node);\r\n      keys = inArray ? node : (_visitorKeys$node$kin = visitorKeys[node.kind]) !== null && _visitorKeys$node$kin !== void 0 ? _visitorKeys$node$kin : [];\r\n      index = -1;\r\n      edits = [];\r\n\r\n      if (parent) {\r\n        ancestors.push(parent);\r\n      }\r\n\r\n      parent = node;\r\n    }\r\n  } while (stack !== undefined);\r\n\r\n  if (edits.length !== 0) {\r\n    newRoot = edits[edits.length - 1][1];\r\n  }\r\n\r\n  return newRoot;\r\n}\r\n/**\r\n * Creates a new visitor instance which delegates to many visitors to run in\r\n * parallel. Each visitor will be visited for each node before moving on.\r\n *\r\n * If a prior visitor edits a node, no following visitors will see that node.\r\n */\r\n\r\nexport function visitInParallel(visitors) {\r\n  var skipping = new Array(visitors.length);\r\n  return {\r\n    enter: function enter(node) {\r\n      for (var i = 0; i < visitors.length; i++) {\r\n        if (skipping[i] == null) {\r\n          var fn = getVisitFn(visitors[i], node.kind,\r\n          /* isLeaving */\r\n          false);\r\n\r\n          if (fn) {\r\n            var result = fn.apply(visitors[i], arguments);\r\n\r\n            if (result === false) {\r\n              skipping[i] = node;\r\n            } else if (result === BREAK) {\r\n              skipping[i] = BREAK;\r\n            } else if (result !== undefined) {\r\n              return result;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    leave: function leave(node) {\r\n      for (var i = 0; i < visitors.length; i++) {\r\n        if (skipping[i] == null) {\r\n          var fn = getVisitFn(visitors[i], node.kind,\r\n          /* isLeaving */\r\n          true);\r\n\r\n          if (fn) {\r\n            var result = fn.apply(visitors[i], arguments);\r\n\r\n            if (result === BREAK) {\r\n              skipping[i] = BREAK;\r\n            } else if (result !== undefined && result !== false) {\r\n              return result;\r\n            }\r\n          }\r\n        } else if (skipping[i] === node) {\r\n          skipping[i] = null;\r\n        }\r\n      }\r\n    }\r\n  };\r\n}\r\n/**\r\n * Given a visitor instance, if it is leaving or not, and a node kind, return\r\n * the function the visitor runtime should call.\r\n */\r\n\r\nexport function getVisitFn(visitor, kind, isLeaving) {\r\n  var kindVisitor = visitor[kind];\r\n\r\n  if (kindVisitor) {\r\n    if (!isLeaving && typeof kindVisitor === 'function') {\r\n      // { Kind() {} }\r\n      return kindVisitor;\r\n    }\r\n\r\n    var kindSpecificVisitor = isLeaving ? kindVisitor.leave : kindVisitor.enter;\r\n\r\n    if (typeof kindSpecificVisitor === 'function') {\r\n      // { Kind: { enter() {}, leave() {} } }\r\n      return kindSpecificVisitor;\r\n    }\r\n  } else {\r\n    var specificVisitor = isLeaving ? visitor.leave : visitor.enter;\r\n\r\n    if (specificVisitor) {\r\n      if (typeof specificVisitor === 'function') {\r\n        // { enter() {}, leave() {} }\r\n        return specificVisitor;\r\n      }\r\n\r\n      var specificKindVisitor = specificVisitor[kind];\r\n\r\n      if (typeof specificKindVisitor === 'function') {\r\n        // { enter: { Kind() {} }, leave: { Kind() {} } }\r\n        return specificKindVisitor;\r\n      }\r\n    }\r\n  }\r\n}\r\n", "import { visit } from \"./visitor.mjs\";\r\nimport { printBlockString } from \"./blockString.mjs\";\r\n/**\r\n * Converts an AST into a string, using one set of reasonable\r\n * formatting rules.\r\n */\r\n\r\nexport function print(ast) {\r\n  return visit(ast, {\r\n    leave: printDocASTReducer\r\n  });\r\n}\r\nvar MAX_LINE_LENGTH = 80; // TODO: provide better type coverage in future\r\n\r\nvar printDocASTReducer = {\r\n  Name: function Name(node) {\r\n    return node.value;\r\n  },\r\n  Variable: function Variable(node) {\r\n    return '$' + node.name;\r\n  },\r\n  // Document\r\n  Document: function Document(node) {\r\n    return join(node.definitions, '\\n\\n') + '\\n';\r\n  },\r\n  OperationDefinition: function OperationDefinition(node) {\r\n    var op = node.operation;\r\n    var name = node.name;\r\n    var varDefs = wrap('(', join(node.variableDefinitions, ', '), ')');\r\n    var directives = join(node.directives, ' ');\r\n    var selectionSet = node.selectionSet; // Anonymous queries with no directives or variable definitions can use\r\n    // the query short form.\r\n\r\n    return !name && !directives && !varDefs && op === 'query' ? selectionSet : join([op, join([name, varDefs]), directives, selectionSet], ' ');\r\n  },\r\n  VariableDefinition: function VariableDefinition(_ref) {\r\n    var variable = _ref.variable,\r\n        type = _ref.type,\r\n        defaultValue = _ref.defaultValue,\r\n        directives = _ref.directives;\r\n    return variable + ': ' + type + wrap(' = ', defaultValue) + wrap(' ', join(directives, ' '));\r\n  },\r\n  SelectionSet: function SelectionSet(_ref2) {\r\n    var selections = _ref2.selections;\r\n    return block(selections);\r\n  },\r\n  Field: function Field(_ref3) {\r\n    var alias = _ref3.alias,\r\n        name = _ref3.name,\r\n        args = _ref3.arguments,\r\n        directives = _ref3.directives,\r\n        selectionSet = _ref3.selectionSet;\r\n    var prefix = wrap('', alias, ': ') + name;\r\n    var argsLine = prefix + wrap('(', join(args, ', '), ')');\r\n\r\n    if (argsLine.length > MAX_LINE_LENGTH) {\r\n      argsLine = prefix + wrap('(\\n', indent(join(args, '\\n')), '\\n)');\r\n    }\r\n\r\n    return join([argsLine, join(directives, ' '), selectionSet], ' ');\r\n  },\r\n  Argument: function Argument(_ref4) {\r\n    var name = _ref4.name,\r\n        value = _ref4.value;\r\n    return name + ': ' + value;\r\n  },\r\n  // Fragments\r\n  FragmentSpread: function FragmentSpread(_ref5) {\r\n    var name = _ref5.name,\r\n        directives = _ref5.directives;\r\n    return '...' + name + wrap(' ', join(directives, ' '));\r\n  },\r\n  InlineFragment: function InlineFragment(_ref6) {\r\n    var typeCondition = _ref6.typeCondition,\r\n        directives = _ref6.directives,\r\n        selectionSet = _ref6.selectionSet;\r\n    return join(['...', wrap('on ', typeCondition), join(directives, ' '), selectionSet], ' ');\r\n  },\r\n  FragmentDefinition: function FragmentDefinition(_ref7) {\r\n    var name = _ref7.name,\r\n        typeCondition = _ref7.typeCondition,\r\n        variableDefinitions = _ref7.variableDefinitions,\r\n        directives = _ref7.directives,\r\n        selectionSet = _ref7.selectionSet;\r\n    return (// Note: fragment variable definitions are experimental and may be changed\r\n      // or removed in the future.\r\n      \"fragment \".concat(name).concat(wrap('(', join(variableDefinitions, ', '), ')'), \" \") + \"on \".concat(typeCondition, \" \").concat(wrap('', join(directives, ' '), ' ')) + selectionSet\r\n    );\r\n  },\r\n  // Value\r\n  IntValue: function IntValue(_ref8) {\r\n    var value = _ref8.value;\r\n    return value;\r\n  },\r\n  FloatValue: function FloatValue(_ref9) {\r\n    var value = _ref9.value;\r\n    return value;\r\n  },\r\n  StringValue: function StringValue(_ref10, key) {\r\n    var value = _ref10.value,\r\n        isBlockString = _ref10.block;\r\n    return isBlockString ? printBlockString(value, key === 'description' ? '' : '  ') : JSON.stringify(value);\r\n  },\r\n  BooleanValue: function BooleanValue(_ref11) {\r\n    var value = _ref11.value;\r\n    return value ? 'true' : 'false';\r\n  },\r\n  NullValue: function NullValue() {\r\n    return 'null';\r\n  },\r\n  EnumValue: function EnumValue(_ref12) {\r\n    var value = _ref12.value;\r\n    return value;\r\n  },\r\n  ListValue: function ListValue(_ref13) {\r\n    var values = _ref13.values;\r\n    return '[' + join(values, ', ') + ']';\r\n  },\r\n  ObjectValue: function ObjectValue(_ref14) {\r\n    var fields = _ref14.fields;\r\n    return '{' + join(fields, ', ') + '}';\r\n  },\r\n  ObjectField: function ObjectField(_ref15) {\r\n    var name = _ref15.name,\r\n        value = _ref15.value;\r\n    return name + ': ' + value;\r\n  },\r\n  // Directive\r\n  Directive: function Directive(_ref16) {\r\n    var name = _ref16.name,\r\n        args = _ref16.arguments;\r\n    return '@' + name + wrap('(', join(args, ', '), ')');\r\n  },\r\n  // Type\r\n  NamedType: function NamedType(_ref17) {\r\n    var name = _ref17.name;\r\n    return name;\r\n  },\r\n  ListType: function ListType(_ref18) {\r\n    var type = _ref18.type;\r\n    return '[' + type + ']';\r\n  },\r\n  NonNullType: function NonNullType(_ref19) {\r\n    var type = _ref19.type;\r\n    return type + '!';\r\n  },\r\n  // Type System Definitions\r\n  SchemaDefinition: addDescription(function (_ref20) {\r\n    var directives = _ref20.directives,\r\n        operationTypes = _ref20.operationTypes;\r\n    return join(['schema', join(directives, ' '), block(operationTypes)], ' ');\r\n  }),\r\n  OperationTypeDefinition: function OperationTypeDefinition(_ref21) {\r\n    var operation = _ref21.operation,\r\n        type = _ref21.type;\r\n    return operation + ': ' + type;\r\n  },\r\n  ScalarTypeDefinition: addDescription(function (_ref22) {\r\n    var name = _ref22.name,\r\n        directives = _ref22.directives;\r\n    return join(['scalar', name, join(directives, ' ')], ' ');\r\n  }),\r\n  ObjectTypeDefinition: addDescription(function (_ref23) {\r\n    var name = _ref23.name,\r\n        interfaces = _ref23.interfaces,\r\n        directives = _ref23.directives,\r\n        fields = _ref23.fields;\r\n    return join(['type', name, wrap('implements ', join(interfaces, ' & ')), join(directives, ' '), block(fields)], ' ');\r\n  }),\r\n  FieldDefinition: addDescription(function (_ref24) {\r\n    var name = _ref24.name,\r\n        args = _ref24.arguments,\r\n        type = _ref24.type,\r\n        directives = _ref24.directives;\r\n    return name + (hasMultilineItems(args) ? wrap('(\\n', indent(join(args, '\\n')), '\\n)') : wrap('(', join(args, ', '), ')')) + ': ' + type + wrap(' ', join(directives, ' '));\r\n  }),\r\n  InputValueDefinition: addDescription(function (_ref25) {\r\n    var name = _ref25.name,\r\n        type = _ref25.type,\r\n        defaultValue = _ref25.defaultValue,\r\n        directives = _ref25.directives;\r\n    return join([name + ': ' + type, wrap('= ', defaultValue), join(directives, ' ')], ' ');\r\n  }),\r\n  InterfaceTypeDefinition: addDescription(function (_ref26) {\r\n    var name = _ref26.name,\r\n        interfaces = _ref26.interfaces,\r\n        directives = _ref26.directives,\r\n        fields = _ref26.fields;\r\n    return join(['interface', name, wrap('implements ', join(interfaces, ' & ')), join(directives, ' '), block(fields)], ' ');\r\n  }),\r\n  UnionTypeDefinition: addDescription(function (_ref27) {\r\n    var name = _ref27.name,\r\n        directives = _ref27.directives,\r\n        types = _ref27.types;\r\n    return join(['union', name, join(directives, ' '), types && types.length !== 0 ? '= ' + join(types, ' | ') : ''], ' ');\r\n  }),\r\n  EnumTypeDefinition: addDescription(function (_ref28) {\r\n    var name = _ref28.name,\r\n        directives = _ref28.directives,\r\n        values = _ref28.values;\r\n    return join(['enum', name, join(directives, ' '), block(values)], ' ');\r\n  }),\r\n  EnumValueDefinition: addDescription(function (_ref29) {\r\n    var name = _ref29.name,\r\n        directives = _ref29.directives;\r\n    return join([name, join(directives, ' ')], ' ');\r\n  }),\r\n  InputObjectTypeDefinition: addDescription(function (_ref30) {\r\n    var name = _ref30.name,\r\n        directives = _ref30.directives,\r\n        fields = _ref30.fields;\r\n    return join(['input', name, join(directives, ' '), block(fields)], ' ');\r\n  }),\r\n  DirectiveDefinition: addDescription(function (_ref31) {\r\n    var name = _ref31.name,\r\n        args = _ref31.arguments,\r\n        repeatable = _ref31.repeatable,\r\n        locations = _ref31.locations;\r\n    return 'directive @' + name + (hasMultilineItems(args) ? wrap('(\\n', indent(join(args, '\\n')), '\\n)') : wrap('(', join(args, ', '), ')')) + (repeatable ? ' repeatable' : '') + ' on ' + join(locations, ' | ');\r\n  }),\r\n  SchemaExtension: function SchemaExtension(_ref32) {\r\n    var directives = _ref32.directives,\r\n        operationTypes = _ref32.operationTypes;\r\n    return join(['extend schema', join(directives, ' '), block(operationTypes)], ' ');\r\n  },\r\n  ScalarTypeExtension: function ScalarTypeExtension(_ref33) {\r\n    var name = _ref33.name,\r\n        directives = _ref33.directives;\r\n    return join(['extend scalar', name, join(directives, ' ')], ' ');\r\n  },\r\n  ObjectTypeExtension: function ObjectTypeExtension(_ref34) {\r\n    var name = _ref34.name,\r\n        interfaces = _ref34.interfaces,\r\n        directives = _ref34.directives,\r\n        fields = _ref34.fields;\r\n    return join(['extend type', name, wrap('implements ', join(interfaces, ' & ')), join(directives, ' '), block(fields)], ' ');\r\n  },\r\n  InterfaceTypeExtension: function InterfaceTypeExtension(_ref35) {\r\n    var name = _ref35.name,\r\n        interfaces = _ref35.interfaces,\r\n        directives = _ref35.directives,\r\n        fields = _ref35.fields;\r\n    return join(['extend interface', name, wrap('implements ', join(interfaces, ' & ')), join(directives, ' '), block(fields)], ' ');\r\n  },\r\n  UnionTypeExtension: function UnionTypeExtension(_ref36) {\r\n    var name = _ref36.name,\r\n        directives = _ref36.directives,\r\n        types = _ref36.types;\r\n    return join(['extend union', name, join(directives, ' '), types && types.length !== 0 ? '= ' + join(types, ' | ') : ''], ' ');\r\n  },\r\n  EnumTypeExtension: function EnumTypeExtension(_ref37) {\r\n    var name = _ref37.name,\r\n        directives = _ref37.directives,\r\n        values = _ref37.values;\r\n    return join(['extend enum', name, join(directives, ' '), block(values)], ' ');\r\n  },\r\n  InputObjectTypeExtension: function InputObjectTypeExtension(_ref38) {\r\n    var name = _ref38.name,\r\n        directives = _ref38.directives,\r\n        fields = _ref38.fields;\r\n    return join(['extend input', name, join(directives, ' '), block(fields)], ' ');\r\n  }\r\n};\r\n\r\nfunction addDescription(cb) {\r\n  return function (node) {\r\n    return join([node.description, cb(node)], '\\n');\r\n  };\r\n}\r\n/**\r\n * Given maybeArray, print an empty string if it is null or empty, otherwise\r\n * print all items together separated by separator if provided\r\n */\r\n\r\n\r\nfunction join(maybeArray) {\r\n  var _maybeArray$filter$jo;\r\n\r\n  var separator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\r\n  return (_maybeArray$filter$jo = maybeArray === null || maybeArray === void 0 ? void 0 : maybeArray.filter(function (x) {\r\n    return x;\r\n  }).join(separator)) !== null && _maybeArray$filter$jo !== void 0 ? _maybeArray$filter$jo : '';\r\n}\r\n/**\r\n * Given array, print each item on its own line, wrapped in an\r\n * indented \"{ }\" block.\r\n */\r\n\r\n\r\nfunction block(array) {\r\n  return wrap('{\\n', indent(join(array, '\\n')), '\\n}');\r\n}\r\n/**\r\n * If maybeString is not null or empty, then wrap with start and end, otherwise print an empty string.\r\n */\r\n\r\n\r\nfunction wrap(start, maybeString) {\r\n  var end = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\r\n  return maybeString != null && maybeString !== '' ? start + maybeString + end : '';\r\n}\r\n\r\nfunction indent(str) {\r\n  return wrap('  ', str.replace(/\\n/g, '\\n  '));\r\n}\r\n\r\nfunction isMultiline(str) {\r\n  return str.indexOf('\\n') !== -1;\r\n}\r\n\r\nfunction hasMultilineItems(maybeArray) {\r\n  return maybeArray != null && maybeArray.some(isMultiline);\r\n}\r\n", "/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\r\n\r\nvar extendStatics = function(d, b) {\r\n  extendStatics = Object.setPrototypeOf ||\r\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n  return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n  if (typeof b !== \"function\" && b !== null)\r\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n  extendStatics(d, b);\r\n  function __() { this.constructor = d; }\r\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n  __assign = Object.assign || function __assign(t) {\r\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n          s = arguments[i];\r\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n      }\r\n      return t;\r\n  }\r\n  return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n  var t = {};\r\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n      t[p] = s[p];\r\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n              t[p[i]] = s[p[i]];\r\n      }\r\n  return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n  return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n  var _, done = false;\r\n  for (var i = decorators.length - 1; i >= 0; i--) {\r\n      var context = {};\r\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n      if (kind === \"accessor\") {\r\n          if (result === void 0) continue;\r\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n          if (_ = accept(result.get)) descriptor.get = _;\r\n          if (_ = accept(result.set)) descriptor.set = _;\r\n          if (_ = accept(result.init)) initializers.unshift(_);\r\n      }\r\n      else if (_ = accept(result)) {\r\n          if (kind === \"field\") initializers.unshift(_);\r\n          else descriptor[key] = _;\r\n      }\r\n  }\r\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n  done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n  var useValue = arguments.length > 2;\r\n  for (var i = 0; i < initializers.length; i++) {\r\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n  }\r\n  return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n  return new (P || (P = Promise))(function (resolve, reject) {\r\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n  });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\r\n  return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n  function verb(n) { return function (v) { return step([n, v]); }; }\r\n  function step(op) {\r\n      if (f) throw new TypeError(\"Generator is already executing.\");\r\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n          if (y = 0, t) op = [op[0] & 2, t.value];\r\n          switch (op[0]) {\r\n              case 0: case 1: t = op; break;\r\n              case 4: _.label++; return { value: op[1], done: false };\r\n              case 5: _.label++; y = op[1]; op = [0]; continue;\r\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n              default:\r\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                  if (t[2]) _.ops.pop();\r\n                  _.trys.pop(); continue;\r\n          }\r\n          op = body.call(thisArg, _);\r\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n  }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n  if (k2 === undefined) k2 = k;\r\n  var desc = Object.getOwnPropertyDescriptor(m, k);\r\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n  }\r\n  Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n  if (k2 === undefined) k2 = k;\r\n  o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n  if (m) return m.call(o);\r\n  if (o && typeof o.length === \"number\") return {\r\n      next: function () {\r\n          if (o && i >= o.length) o = void 0;\r\n          return { value: o && o[i++], done: !o };\r\n      }\r\n  };\r\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n  if (!m) return o;\r\n  var i = m.call(o), r, ar = [], e;\r\n  try {\r\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n  }\r\n  catch (error) { e = { error: error }; }\r\n  finally {\r\n      try {\r\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n      }\r\n      finally { if (e) throw e.error; }\r\n  }\r\n  return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n  for (var ar = [], i = 0; i < arguments.length; i++)\r\n      ar = ar.concat(__read(arguments[i]));\r\n  return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n          r[k] = a[j];\r\n  return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n      if (ar || !(i in from)) {\r\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n          ar[i] = from[i];\r\n      }\r\n  }\r\n  return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n  return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\r\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\r\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n  function fulfill(value) { resume(\"next\", value); }\r\n  function reject(value) { resume(\"throw\", value); }\r\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n  var i, p;\r\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n  var m = o[Symbol.asyncIterator], i;\r\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n  return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n  o[\"default\"] = v;\r\n};\r\n\r\nvar ownKeys = function(o) {\r\n  ownKeys = Object.getOwnPropertyNames || function (o) {\r\n    var ar = [];\r\n    for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\r\n    return ar;\r\n  };\r\n  return ownKeys(o);\r\n};\r\n\r\nexport function __importStar(mod) {\r\n  if (mod && mod.__esModule) return mod;\r\n  var result = {};\r\n  if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\r\n  __setModuleDefault(result, mod);\r\n  return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n  return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport function __addDisposableResource(env, value, async) {\r\n  if (value !== null && value !== void 0) {\r\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\r\n    var dispose, inner;\r\n    if (async) {\r\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\r\n      dispose = value[Symbol.asyncDispose];\r\n    }\r\n    if (dispose === void 0) {\r\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\r\n      dispose = value[Symbol.dispose];\r\n      if (async) inner = dispose;\r\n    }\r\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\r\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\r\n    env.stack.push({ value: value, dispose: dispose, async: async });\r\n  }\r\n  else if (async) {\r\n    env.stack.push({ async: true });\r\n  }\r\n  return value;\r\n}\r\n\r\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n  var e = new Error(message);\r\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\r\n\r\nexport function __disposeResources(env) {\r\n  function fail(e) {\r\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\r\n    env.hasError = true;\r\n  }\r\n  var r, s = 0;\r\n  function next() {\r\n    while (r = env.stack.pop()) {\r\n      try {\r\n        if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\r\n        if (r.dispose) {\r\n          var result = r.dispose.call(r.value);\r\n          if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\r\n        }\r\n        else s |= 1;\r\n      }\r\n      catch (e) {\r\n        fail(e);\r\n      }\r\n    }\r\n    if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\r\n    if (env.hasError) throw env.error;\r\n  }\r\n  return next();\r\n}\r\n\r\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\r\n  if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\r\n      return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\r\n          return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\r\n      });\r\n  }\r\n  return path;\r\n}\r\n\r\nexport default {\r\n  __extends,\r\n  __assign,\r\n  __rest,\r\n  __decorate,\r\n  __param,\r\n  __esDecorate,\r\n  __runInitializers,\r\n  __propKey,\r\n  __setFunctionName,\r\n  __metadata,\r\n  __awaiter,\r\n  __generator,\r\n  __createBinding,\r\n  __exportStar,\r\n  __values,\r\n  __read,\r\n  __spread,\r\n  __spreadArrays,\r\n  __spreadArray,\r\n  __await,\r\n  __asyncGenerator,\r\n  __asyncDelegator,\r\n  __asyncValues,\r\n  __makeTemplateObject,\r\n  __importStar,\r\n  __importDefault,\r\n  __classPrivateFieldGet,\r\n  __classPrivateFieldSet,\r\n  __classPrivateFieldIn,\r\n  __addDisposableResource,\r\n  __disposeResources,\r\n  __rewriteRelativeImportExtension,\r\n};\r\n", "/**\r\n * Returns true if the object is a function.\r\n * @param value The value to check\r\n */\r\nexport function isFunction(value: any): value is (...args: any[]) => any {\r\n  return typeof value === 'function';\r\n}\r\n", "/**\r\n * Used to create Error subclasses until the community moves away from ES5.\r\n *\r\n * This is because compiling from TypeScript down to ES5 has issues with subclassing Errors\r\n * as well as other built-in types: https://github.com/Microsoft/TypeScript/issues/12123\r\n *\r\n * @param createImpl A factory function to create the actual constructor implementation. The returned\r\n * function should be a named function that calls `_super` internally.\r\n */\r\nexport function createErrorClass<T>(createImpl: (_super: any) => any): T {\r\n  const _super = (instance: any) => {\r\n    Error.call(instance);\r\n    instance.stack = new Error().stack;\r\n  };\r\n\r\n  const ctorFunc = createImpl(_super);\r\n  ctorFunc.prototype = Object.create(Error.prototype);\r\n  ctorFunc.prototype.constructor = ctorFunc;\r\n  return ctorFunc;\r\n}\r\n", "import { createErrorClass } from './createErrorClass';\r\n\r\nexport interface UnsubscriptionError extends Error {\r\n  readonly errors: any[];\r\n}\r\n\r\nexport interface UnsubscriptionErrorCtor {\r\n  /**\r\n   * @deprecated Internal implementation detail. Do not construct error instances.\r\n   * Cannot be tagged as internal: https://github.com/ReactiveX/rxjs/issues/6269\r\n   */\r\n  new (errors: any[]): UnsubscriptionError;\r\n}\r\n\r\n/**\r\n * An error thrown when one or more errors have occurred during the\r\n * `unsubscribe` of a {@link Subscription}.\r\n */\r\nexport const UnsubscriptionError: UnsubscriptionErrorCtor = createErrorClass(\r\n  (_super) =>\r\n    function UnsubscriptionErrorImpl(this: any, errors: (Error | string)[]) {\r\n      _super(this);\r\n      this.message = errors\r\n        ? `${errors.length} errors occurred during unsubscription:\r\n${errors.map((err, i) => `${i + 1}) ${err.toString()}`).join('\\n  ')}`\r\n        : '';\r\n      this.name = 'UnsubscriptionError';\r\n      this.errors = errors;\r\n    }\r\n);\r\n", "/**\r\n * Removes an item from an array, mutating it.\r\n * @param arr The array to remove the item from\r\n * @param item The item to remove\r\n */\r\nexport function arrRemove<T>(arr: T[] | undefined | null, item: T) {\r\n  if (arr) {\r\n    const index = arr.indexOf(item);\r\n    0 <= index && arr.splice(index, 1);\r\n  }\r\n}\r\n", "import { isFunction } from './util/isFunction';\r\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\r\nimport { SubscriptionLike, TeardownLogic, Unsubscribable } from './types';\r\nimport { arrRemove } from './util/arrRemove';\r\n\r\n/**\r\n * Represents a disposable resource, such as the execution of an Observable. A\r\n * Subscription has one important method, `unsubscribe`, that takes no argument\r\n * and just disposes the resource held by the subscription.\r\n *\r\n * Additionally, subscriptions may be grouped together through the `add()`\r\n * method, which will attach a child Subscription to the current Subscription.\r\n * When a Subscription is unsubscribed, all its children (and its grandchildren)\r\n * will be unsubscribed as well.\r\n */\r\nexport class Subscription implements SubscriptionLike {\r\n  public static EMPTY = (() => {\r\n    const empty = new Subscription();\r\n    empty.closed = true;\r\n    return empty;\r\n  })();\r\n\r\n  /**\r\n   * A flag to indicate whether this Subscription has already been unsubscribed.\r\n   */\r\n  public closed = false;\r\n\r\n  private _parentage: Subscription[] | Subscription | null = null;\r\n\r\n  /**\r\n   * The list of registered finalizers to execute upon unsubscription. Adding and removing from this\r\n   * list occurs in the {@link #add} and {@link #remove} methods.\r\n   */\r\n  private _finalizers: Exclude<TeardownLogic, void>[] | null = null;\r\n\r\n  /**\r\n   * @param initialTeardown A function executed first as part of the finalization\r\n   * process that is kicked off when {@link #unsubscribe} is called.\r\n   */\r\n  constructor(private initialTeardown?: () => void) {}\r\n\r\n  /**\r\n   * Disposes the resources held by the subscription. May, for instance, cancel\r\n   * an ongoing Observable execution or cancel any other type of work that\r\n   * started when the Subscription was created.\r\n   */\r\n  unsubscribe(): void {\r\n    let errors: any[] | undefined;\r\n\r\n    if (!this.closed) {\r\n      this.closed = true;\r\n\r\n      // Remove this from it's parents.\r\n      const { _parentage } = this;\r\n      if (_parentage) {\r\n        this._parentage = null;\r\n        if (Array.isArray(_parentage)) {\r\n          for (const parent of _parentage) {\r\n            parent.remove(this);\r\n          }\r\n        } else {\r\n          _parentage.remove(this);\r\n        }\r\n      }\r\n\r\n      const { initialTeardown: initialFinalizer } = this;\r\n      if (isFunction(initialFinalizer)) {\r\n        try {\r\n          initialFinalizer();\r\n        } catch (e) {\r\n          errors = e instanceof UnsubscriptionError ? e.errors : [e];\r\n        }\r\n      }\r\n\r\n      const { _finalizers } = this;\r\n      if (_finalizers) {\r\n        this._finalizers = null;\r\n        for (const finalizer of _finalizers) {\r\n          try {\r\n            execFinalizer(finalizer);\r\n          } catch (err) {\r\n            errors = errors ?? [];\r\n            if (err instanceof UnsubscriptionError) {\r\n              errors = [...errors, ...err.errors];\r\n            } else {\r\n              errors.push(err);\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      if (errors) {\r\n        throw new UnsubscriptionError(errors);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Adds a finalizer to this subscription, so that finalization will be unsubscribed/called\r\n   * when this subscription is unsubscribed. If this subscription is already {@link #closed},\r\n   * because it has already been unsubscribed, then whatever finalizer is passed to it\r\n   * will automatically be executed (unless the finalizer itself is also a closed subscription).\r\n   *\r\n   * Closed Subscriptions cannot be added as finalizers to any subscription. Adding a closed\r\n   * subscription to a any subscription will result in no operation. (A noop).\r\n   *\r\n   * Adding a subscription to itself, or adding `null` or `undefined` will not perform any\r\n   * operation at all. (A noop).\r\n   *\r\n   * `Subscription` instances that are added to this instance will automatically remove themselves\r\n   * if they are unsubscribed. Functions and {@link Unsubscribable} objects that you wish to remove\r\n   * will need to be removed manually with {@link #remove}\r\n   *\r\n   * @param teardown The finalization logic to add to this subscription.\r\n   */\r\n  add(teardown: TeardownLogic): void {\r\n    // Only add the finalizer if it's not undefined\r\n    // and don't add a subscription to itself.\r\n    if (teardown && teardown !== this) {\r\n      if (this.closed) {\r\n        // If this subscription is already closed,\r\n        // execute whatever finalizer is handed to it automatically.\r\n        execFinalizer(teardown);\r\n      } else {\r\n        if (teardown instanceof Subscription) {\r\n          // We don't add closed subscriptions, and we don't add the same subscription\r\n          // twice. Subscription unsubscribe is idempotent.\r\n          if (teardown.closed || teardown._hasParent(this)) {\r\n            return;\r\n          }\r\n          teardown._addParent(this);\r\n        }\r\n        (this._finalizers = this._finalizers ?? []).push(teardown);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Checks to see if a this subscription already has a particular parent.\r\n   * This will signal that this subscription has already been added to the parent in question.\r\n   * @param parent the parent to check for\r\n   */\r\n  private _hasParent(parent: Subscription) {\r\n    const { _parentage } = this;\r\n    return _parentage === parent || (Array.isArray(_parentage) && _parentage.includes(parent));\r\n  }\r\n\r\n  /**\r\n   * Adds a parent to this subscription so it can be removed from the parent if it\r\n   * unsubscribes on it's own.\r\n   *\r\n   * NOTE: THIS ASSUMES THAT {@link _hasParent} HAS ALREADY BEEN CHECKED.\r\n   * @param parent The parent subscription to add\r\n   */\r\n  private _addParent(parent: Subscription) {\r\n    const { _parentage } = this;\r\n    this._parentage = Array.isArray(_parentage) ? (_parentage.push(parent), _parentage) : _parentage ? [_parentage, parent] : parent;\r\n  }\r\n\r\n  /**\r\n   * Called on a child when it is removed via {@link #remove}.\r\n   * @param parent The parent to remove\r\n   */\r\n  private _removeParent(parent: Subscription) {\r\n    const { _parentage } = this;\r\n    if (_parentage === parent) {\r\n      this._parentage = null;\r\n    } else if (Array.isArray(_parentage)) {\r\n      arrRemove(_parentage, parent);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Removes a finalizer from this subscription that was previously added with the {@link #add} method.\r\n   *\r\n   * Note that `Subscription` instances, when unsubscribed, will automatically remove themselves\r\n   * from every other `Subscription` they have been added to. This means that using the `remove` method\r\n   * is not a common thing and should be used thoughtfully.\r\n   *\r\n   * If you add the same finalizer instance of a function or an unsubscribable object to a `Subscription` instance\r\n   * more than once, you will need to call `remove` the same number of times to remove all instances.\r\n   *\r\n   * All finalizer instances are removed to free up memory upon unsubscription.\r\n   *\r\n   * @param teardown The finalizer to remove from this subscription\r\n   */\r\n  remove(teardown: Exclude<TeardownLogic, void>): void {\r\n    const { _finalizers } = this;\r\n    _finalizers && arrRemove(_finalizers, teardown);\r\n\r\n    if (teardown instanceof Subscription) {\r\n      teardown._removeParent(this);\r\n    }\r\n  }\r\n}\r\n\r\nexport const EMPTY_SUBSCRIPTION = Subscription.EMPTY;\r\n\r\nexport function isSubscription(value: any): value is Subscription {\r\n  return (\r\n    value instanceof Subscription ||\r\n    (value && 'closed' in value && isFunction(value.remove) && isFunction(value.add) && isFunction(value.unsubscribe))\r\n  );\r\n}\r\n\r\nfunction execFinalizer(finalizer: Unsubscribable | (() => void)) {\r\n  if (isFunction(finalizer)) {\r\n    finalizer();\r\n  } else {\r\n    finalizer.unsubscribe();\r\n  }\r\n}\r\n", "import { Subscriber } from './Subscriber';\r\nimport { ObservableNotification } from './types';\r\n\r\n/**\r\n * The {@link GlobalConfig} object for RxJS. It is used to configure things\r\n * like how to react on unhandled errors.\r\n */\r\nexport const config: GlobalConfig = {\r\n  onUnhandledError: null,\r\n  onStoppedNotification: null,\r\n  Promise: undefined,\r\n  useDeprecatedSynchronousErrorHandling: false,\r\n  useDeprecatedNextContext: false,\r\n};\r\n\r\n/**\r\n * The global configuration object for RxJS, used to configure things\r\n * like how to react on unhandled errors. Accessible via {@link config}\r\n * object.\r\n */\r\nexport interface GlobalConfig {\r\n  /**\r\n   * A registration point for unhandled errors from RxJS. These are errors that\r\n   * cannot were not handled by consuming code in the usual subscription path. For\r\n   * example, if you have this configured, and you subscribe to an observable without\r\n   * providing an error handler, errors from that subscription will end up here. This\r\n   * will _always_ be called asynchronously on another job in the runtime. This is because\r\n   * we do not want errors thrown in this user-configured handler to interfere with the\r\n   * behavior of the library.\r\n   */\r\n  onUnhandledError: ((err: any) => void) | null;\r\n\r\n  /**\r\n   * A registration point for notifications that cannot be sent to subscribers because they\r\n   * have completed, errored or have been explicitly unsubscribed. By default, next, complete\r\n   * and error notifications sent to stopped subscribers are noops. However, sometimes callers\r\n   * might want a different behavior. For example, with sources that attempt to report errors\r\n   * to stopped subscribers, a caller can configure RxJS to throw an unhandled error instead.\r\n   * This will _always_ be called asynchronously on another job in the runtime. This is because\r\n   * we do not want errors thrown in this user-configured handler to interfere with the\r\n   * behavior of the library.\r\n   */\r\n  onStoppedNotification: ((notification: ObservableNotification<any>, subscriber: Subscriber<any>) => void) | null;\r\n\r\n  /**\r\n   * The promise constructor used by default for {@link Observable#toPromise toPromise} and {@link Observable#forEach forEach}\r\n   * methods.\r\n   *\r\n   * @deprecated As of version 8, RxJS will no longer support this sort of injection of a\r\n   * Promise constructor. If you need a Promise implementation other than native promises,\r\n   * please polyfill/patch Promise as you see appropriate. Will be removed in v8.\r\n   */\r\n  Promise?: PromiseConstructorLike;\r\n\r\n  /**\r\n   * If true, turns on synchronous error rethrowing, which is a deprecated behavior\r\n   * in v6 and higher. This behavior enables bad patterns like wrapping a subscribe\r\n   * call in a try/catch block. It also enables producer interference, a nasty bug\r\n   * where a multicast can be broken for all observers by a downstream consumer with\r\n   * an unhandled error. DO NOT USE THIS FLAG UNLESS IT'S NEEDED TO BUY TIME\r\n   * FOR MIGRATION REASONS.\r\n   *\r\n   * @deprecated As of version 8, RxJS will no longer support synchronous throwing\r\n   * of unhandled errors. All errors will be thrown on a separate call stack to prevent bad\r\n   * behaviors described above. Will be removed in v8.\r\n   */\r\n  useDeprecatedSynchronousErrorHandling: boolean;\r\n\r\n  /**\r\n   * If true, enables an as-of-yet undocumented feature from v5: The ability to access\r\n   * `unsubscribe()` via `this` context in `next` functions created in observers passed\r\n   * to `subscribe`.\r\n   *\r\n   * This is being removed because the performance was severely problematic, and it could also cause\r\n   * issues when types other than POJOs are passed to subscribe as subscribers, as they will likely have\r\n   * their `this` context overwritten.\r\n   *\r\n   * @deprecated As of version 8, RxJS will no longer support altering the\r\n   * context of next functions provided as part of an observer to Subscribe. Instead,\r\n   * you will have access to a subscription or a signal or token that will allow you to do things like\r\n   * unsubscribe and test closed status. Will be removed in v8.\r\n   */\r\n  useDeprecatedNextContext: boolean;\r\n}\r\n", "import type { TimerHandle } from './timerHandle';\r\ntype SetTimeoutFunction = (handler: () => void, timeout?: number, ...args: any[]) => TimerHandle;\r\ntype ClearTimeoutFunction = (handle: TimerHandle) => void;\r\n\r\ninterface TimeoutProvider {\r\n  setTimeout: SetTimeoutFunction;\r\n  clearTimeout: ClearTimeoutFunction;\r\n  delegate:\r\n    | {\r\n        setTimeout: SetTimeoutFunction;\r\n        clearTimeout: ClearTimeoutFunction;\r\n      }\r\n    | undefined;\r\n}\r\n\r\nexport const timeoutProvider: TimeoutProvider = {\r\n  // When accessing the delegate, use the variable rather than `this` so that\r\n  // the functions can be called without being bound to the provider.\r\n  setTimeout(handler: () => void, timeout?: number, ...args) {\r\n    const { delegate } = timeoutProvider;\r\n    if (delegate?.setTimeout) {\r\n      return delegate.setTimeout(handler, timeout, ...args);\r\n    }\r\n    return setTimeout(handler, timeout, ...args);\r\n  },\r\n  clearTimeout(handle) {\r\n    const { delegate } = timeoutProvider;\r\n    return (delegate?.clearTimeout || clearTimeout)(handle as any);\r\n  },\r\n  delegate: undefined,\r\n};\r\n", "import { config } from '../config';\r\nimport { timeoutProvider } from '../scheduler/timeoutProvider';\r\n\r\n/**\r\n * Handles an error on another job either with the user-configured {@link onUnhandledError},\r\n * or by throwing it on that new job so it can be picked up by `window.onerror`, `process.on('error')`, etc.\r\n *\r\n * This should be called whenever there is an error that is out-of-band with the subscription\r\n * or when an error hits a terminal boundary of the subscription and no error handler was provided.\r\n *\r\n * @param err the error to report\r\n */\r\nexport function reportUnhandledError(err: any) {\r\n  timeoutProvider.setTimeout(() => {\r\n    const { onUnhandledError } = config;\r\n    if (onUnhandledError) {\r\n      // Execute the user-configured error handler.\r\n      onUnhandledError(err);\r\n    } else {\r\n      // Throw so it is picked up by the runtime's uncaught error mechanism.\r\n      throw err;\r\n    }\r\n  });\r\n}\r\n", "/* tslint:disable:no-empty */\r\nexport function noop() { }\r\n", "import { CompleteNotification, NextNotification, ErrorNotification } from './types';\r\n\r\n/**\r\n * A completion object optimized for memory use and created to be the\r\n * same \"shape\" as other notifications in v8.\r\n * @internal\r\n */\r\nexport const COMPLETE_NOTIFICATION = (() => createNotification('C', undefined, undefined) as CompleteNotification)();\r\n\r\n/**\r\n * Internal use only. Creates an optimized error notification that is the same \"shape\"\r\n * as other notifications.\r\n * @internal\r\n */\r\nexport function errorNotification(error: any): ErrorNotification {\r\n  return createNotification('E', undefined, error) as any;\r\n}\r\n\r\n/**\r\n * Internal use only. Creates an optimized next notification that is the same \"shape\"\r\n * as other notifications.\r\n * @internal\r\n */\r\nexport function nextNotification<T>(value: T) {\r\n  return createNotification('N', value, undefined) as NextNotification<T>;\r\n}\r\n\r\n/**\r\n * Ensures that all notifications created internally have the same \"shape\" in v8.\r\n *\r\n * TODO: This is only exported to support a crazy legacy test in `groupBy`.\r\n * @internal\r\n */\r\nexport function createNotification(kind: 'N' | 'E' | 'C', value: any, error: any) {\r\n  return {\r\n    kind,\r\n    value,\r\n    error,\r\n  };\r\n}\r\n", "import { config } from '../config';\r\n\r\nlet context: { errorThrown: boolean; error: any } | null = null;\r\n\r\n/**\r\n * Handles dealing with errors for super-gross mode. Creates a context, in which\r\n * any synchronously thrown errors will be passed to {@link captureError}. Which\r\n * will record the error such that it will be rethrown after the call back is complete.\r\n * TODO: Remove in v8\r\n * @param cb An immediately executed function.\r\n */\r\nexport function errorContext(cb: () => void) {\r\n  if (config.useDeprecatedSynchronousErrorHandling) {\r\n    const isRoot = !context;\r\n    if (isRoot) {\r\n      context = { errorThrown: false, error: null };\r\n    }\r\n    cb();\r\n    if (isRoot) {\r\n      const { errorThrown, error } = context!;\r\n      context = null;\r\n      if (errorThrown) {\r\n        throw error;\r\n      }\r\n    }\r\n  } else {\r\n    // This is the general non-deprecated path for everyone that\r\n    // isn't crazy enough to use super-gross mode (useDeprecatedSynchronousErrorHandling)\r\n    cb();\r\n  }\r\n}\r\n\r\n/**\r\n * Captures errors only in super-gross mode.\r\n * @param err the error to capture\r\n */\r\nexport function captureError(err: any) {\r\n  if (config.useDeprecatedSynchronousErrorHandling && context) {\r\n    context.errorThrown = true;\r\n    context.error = err;\r\n  }\r\n}\r\n", "import { isFunction } from './util/isFunction';\r\nimport { Observer, ObservableNotification } from './types';\r\nimport { isSubscription, Subscription } from './Subscription';\r\nimport { config } from './config';\r\nimport { reportUnhandledError } from './util/reportUnhandledError';\r\nimport { noop } from './util/noop';\r\nimport { nextNotification, errorNotification, COMPLETE_NOTIFICATION } from './NotificationFactories';\r\nimport { timeoutProvider } from './scheduler/timeoutProvider';\r\nimport { captureError } from './util/errorContext';\r\n\r\n/**\r\n * Implements the {@link Observer} interface and extends the\r\n * {@link Subscription} class. While the {@link Observer} is the public API for\r\n * consuming the values of an {@link Observable}, all Observers get converted to\r\n * a Subscriber, in order to provide Subscription-like capabilities such as\r\n * `unsubscribe`. Subscriber is a common type in RxJS, and crucial for\r\n * implementing operators, but it is rarely used as a public API.\r\n */\r\nexport class Subscriber<T> extends Subscription implements Observer<T> {\r\n  /**\r\n   * A static factory for a Subscriber, given a (potentially partial) definition\r\n   * of an Observer.\r\n   * @param next The `next` callback of an Observer.\r\n   * @param error The `error` callback of an\r\n   * Observer.\r\n   * @param complete The `complete` callback of an\r\n   * Observer.\r\n   * @return A Subscriber wrapping the (partially defined)\r\n   * Observer represented by the given arguments.\r\n   * @deprecated Do not use. Will be removed in v8. There is no replacement for this\r\n   * method, and there is no reason to be creating instances of `Subscriber` directly.\r\n   * If you have a specific use case, please file an issue.\r\n   */\r\n  static create<T>(next?: (x?: T) => void, error?: (e?: any) => void, complete?: () => void): Subscriber<T> {\r\n    return new SafeSubscriber(next, error, complete);\r\n  }\r\n\r\n  /** @deprecated Internal implementation detail, do not use directly. Will be made internal in v8. */\r\n  protected isStopped: boolean = false;\r\n  /** @deprecated Internal implementation detail, do not use directly. Will be made internal in v8. */\r\n  protected destination: Subscriber<any> | Observer<any>; // this `any` is the escape hatch to erase extra type param (e.g. R)\r\n\r\n  /**\r\n   * @deprecated Internal implementation detail, do not use directly. Will be made internal in v8.\r\n   * There is no reason to directly create an instance of Subscriber. This type is exported for typings reasons.\r\n   */\r\n  constructor(destination?: Subscriber<any> | Observer<any>) {\r\n    super();\r\n    if (destination) {\r\n      this.destination = destination;\r\n      // Automatically chain subscriptions together here.\r\n      // if destination is a Subscription, then it is a Subscriber.\r\n      if (isSubscription(destination)) {\r\n        destination.add(this);\r\n      }\r\n    } else {\r\n      this.destination = EMPTY_OBSERVER;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * The {@link Observer} callback to receive notifications of type `next` from\r\n   * the Observable, with a value. The Observable may call this method 0 or more\r\n   * times.\r\n   * @param value The `next` value.\r\n   */\r\n  next(value: T): void {\r\n    if (this.isStopped) {\r\n      handleStoppedNotification(nextNotification(value), this);\r\n    } else {\r\n      this._next(value!);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * The {@link Observer} callback to receive notifications of type `error` from\r\n   * the Observable, with an attached `Error`. Notifies the Observer that\r\n   * the Observable has experienced an error condition.\r\n   * @param err The `error` exception.\r\n   */\r\n  error(err?: any): void {\r\n    if (this.isStopped) {\r\n      handleStoppedNotification(errorNotification(err), this);\r\n    } else {\r\n      this.isStopped = true;\r\n      this._error(err);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * The {@link Observer} callback to receive a valueless notification of type\r\n   * `complete` from the Observable. Notifies the Observer that the Observable\r\n   * has finished sending push-based notifications.\r\n   */\r\n  complete(): void {\r\n    if (this.isStopped) {\r\n      handleStoppedNotification(COMPLETE_NOTIFICATION, this);\r\n    } else {\r\n      this.isStopped = true;\r\n      this._complete();\r\n    }\r\n  }\r\n\r\n  unsubscribe(): void {\r\n    if (!this.closed) {\r\n      this.isStopped = true;\r\n      super.unsubscribe();\r\n      this.destination = null!;\r\n    }\r\n  }\r\n\r\n  protected _next(value: T): void {\r\n    this.destination.next(value);\r\n  }\r\n\r\n  protected _error(err: any): void {\r\n    try {\r\n      this.destination.error(err);\r\n    } finally {\r\n      this.unsubscribe();\r\n    }\r\n  }\r\n\r\n  protected _complete(): void {\r\n    try {\r\n      this.destination.complete();\r\n    } finally {\r\n      this.unsubscribe();\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * This bind is captured here because we want to be able to have\r\n * compatibility with monoid libraries that tend to use a method named\r\n * `bind`. In particular, a library called Monio requires this.\r\n */\r\nconst _bind = Function.prototype.bind;\r\n\r\nfunction bind<Fn extends (...args: any[]) => any>(fn: Fn, thisArg: any): Fn {\r\n  return _bind.call(fn, thisArg);\r\n}\r\n\r\n/**\r\n * Internal optimization only, DO NOT EXPOSE.\r\n * @internal\r\n */\r\nclass ConsumerObserver<T> implements Observer<T> {\r\n  constructor(private partialObserver: Partial<Observer<T>>) {}\r\n\r\n  next(value: T): void {\r\n    const { partialObserver } = this;\r\n    if (partialObserver.next) {\r\n      try {\r\n        partialObserver.next(value);\r\n      } catch (error) {\r\n        handleUnhandledError(error);\r\n      }\r\n    }\r\n  }\r\n\r\n  error(err: any): void {\r\n    const { partialObserver } = this;\r\n    if (partialObserver.error) {\r\n      try {\r\n        partialObserver.error(err);\r\n      } catch (error) {\r\n        handleUnhandledError(error);\r\n      }\r\n    } else {\r\n      handleUnhandledError(err);\r\n    }\r\n  }\r\n\r\n  complete(): void {\r\n    const { partialObserver } = this;\r\n    if (partialObserver.complete) {\r\n      try {\r\n        partialObserver.complete();\r\n      } catch (error) {\r\n        handleUnhandledError(error);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport class SafeSubscriber<T> extends Subscriber<T> {\r\n  constructor(\r\n    observerOrNext?: Partial<Observer<T>> | ((value: T) => void) | null,\r\n    error?: ((e?: any) => void) | null,\r\n    complete?: (() => void) | null\r\n  ) {\r\n    super();\r\n\r\n    let partialObserver: Partial<Observer<T>>;\r\n    if (isFunction(observerOrNext) || !observerOrNext) {\r\n      // The first argument is a function, not an observer. The next\r\n      // two arguments *could* be observers, or they could be empty.\r\n      partialObserver = {\r\n        next: (observerOrNext ?? undefined) as ((value: T) => void) | undefined,\r\n        error: error ?? undefined,\r\n        complete: complete ?? undefined,\r\n      };\r\n    } else {\r\n      // The first argument is a partial observer.\r\n      let context: any;\r\n      if (this && config.useDeprecatedNextContext) {\r\n        // This is a deprecated path that made `this.unsubscribe()` available in\r\n        // next handler functions passed to subscribe. This only exists behind a flag\r\n        // now, as it is *very* slow.\r\n        context = Object.create(observerOrNext);\r\n        context.unsubscribe = () => this.unsubscribe();\r\n        partialObserver = {\r\n          next: observerOrNext.next && bind(observerOrNext.next, context),\r\n          error: observerOrNext.error && bind(observerOrNext.error, context),\r\n          complete: observerOrNext.complete && bind(observerOrNext.complete, context),\r\n        };\r\n      } else {\r\n        // The \"normal\" path. Just use the partial observer directly.\r\n        partialObserver = observerOrNext;\r\n      }\r\n    }\r\n\r\n    // Wrap the partial observer to ensure it's a full observer, and\r\n    // make sure proper error handling is accounted for.\r\n    this.destination = new ConsumerObserver(partialObserver);\r\n  }\r\n}\r\n\r\nfunction handleUnhandledError(error: any) {\r\n  if (config.useDeprecatedSynchronousErrorHandling) {\r\n    captureError(error);\r\n  } else {\r\n    // Ideal path, we report this as an unhandled error,\r\n    // which is thrown on a new call stack.\r\n    reportUnhandledError(error);\r\n  }\r\n}\r\n\r\n/**\r\n * An error handler used when no error handler was supplied\r\n * to the SafeSubscriber -- meaning no error handler was supplied\r\n * do the `subscribe` call on our observable.\r\n * @param err The error to handle\r\n */\r\nfunction defaultErrorHandler(err: any) {\r\n  throw err;\r\n}\r\n\r\n/**\r\n * A handler for notifications that cannot be sent to a stopped subscriber.\r\n * @param notification The notification being sent.\r\n * @param subscriber The stopped subscriber.\r\n */\r\nfunction handleStoppedNotification(notification: ObservableNotification<any>, subscriber: Subscriber<any>) {\r\n  const { onStoppedNotification } = config;\r\n  onStoppedNotification && timeoutProvider.setTimeout(() => onStoppedNotification(notification, subscriber));\r\n}\r\n\r\n/**\r\n * The observer used as a stub for subscriptions where the user did not\r\n * pass any arguments to `subscribe`. Comes with the default error handling\r\n * behavior.\r\n */\r\nexport const EMPTY_OBSERVER: Readonly<Observer<any>> & { closed: true } = {\r\n  closed: true,\r\n  next: noop,\r\n  error: defaultErrorHandler,\r\n  complete: noop,\r\n};\r\n", "/**\r\n * Symbol.observable or a string \"@@observable\". Used for interop\r\n *\r\n * @deprecated We will no longer be exporting this symbol in upcoming versions of RxJS.\r\n * Instead polyfill and use Symbol.observable directly *or* use https://www.npmjs.com/package/symbol-observable\r\n */\r\nexport const observable: string | symbol = (() => (typeof Symbol === 'function' && Symbol.observable) || '@@observable')();\r\n", "/**\r\n * This function takes one parameter and just returns it. Simply put,\r\n * this is like `<T>(x: T): T => x`.\r\n *\r\n * ## Examples\r\n *\r\n * This is useful in some cases when using things like `mergeMap`\r\n *\r\n * ```ts\r\n * import { interval, take, map, range, mergeMap, identity } from 'rxjs';\r\n *\r\n * const source$ = interval(1000).pipe(take(5));\r\n *\r\n * const result$ = source$.pipe(\r\n *   map(i => range(i)),\r\n *   mergeMap(identity) // same as mergeMap(x => x)\r\n * );\r\n *\r\n * result$.subscribe({\r\n *   next: console.log\r\n * });\r\n * ```\r\n *\r\n * Or when you want to selectively apply an operator\r\n *\r\n * ```ts\r\n * import { interval, take, identity } from 'rxjs';\r\n *\r\n * const shouldLimit = () => Math.random() < 0.5;\r\n *\r\n * const source$ = interval(1000);\r\n *\r\n * const result$ = source$.pipe(shouldLimit() ? take(5) : identity);\r\n *\r\n * result$.subscribe({\r\n *   next: console.log\r\n * });\r\n * ```\r\n *\r\n * @param x Any value that is returned by this function\r\n * @returns The value passed as the first parameter to this function\r\n */\r\nexport function identity<T>(x: T): T {\r\n  return x;\r\n}\r\n", "import { identity } from './identity';\r\nimport { UnaryFunction } from '../types';\r\n\r\nexport function pipe(): typeof identity;\r\nexport function pipe<T, A>(fn1: UnaryFunction<T, A>): UnaryFunction<T, A>;\r\nexport function pipe<T, A, B>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>): UnaryFunction<T, B>;\r\nexport function pipe<T, A, B, C>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>): UnaryFunction<T, C>;\r\nexport function pipe<T, A, B, C, D>(\r\n  fn1: UnaryFunction<T, A>,\r\n  fn2: UnaryFunction<A, B>,\r\n  fn3: UnaryFunction<B, C>,\r\n  fn4: UnaryFunction<C, D>\r\n): UnaryFunction<T, D>;\r\nexport function pipe<T, A, B, C, D, E>(\r\n  fn1: UnaryFunction<T, A>,\r\n  fn2: UnaryFunction<A, B>,\r\n  fn3: UnaryFunction<B, C>,\r\n  fn4: UnaryFunction<C, D>,\r\n  fn5: UnaryFunction<D, E>\r\n): UnaryFunction<T, E>;\r\nexport function pipe<T, A, B, C, D, E, F>(\r\n  fn1: UnaryFunction<T, A>,\r\n  fn2: UnaryFunction<A, B>,\r\n  fn3: UnaryFunction<B, C>,\r\n  fn4: UnaryFunction<C, D>,\r\n  fn5: UnaryFunction<D, E>,\r\n  fn6: UnaryFunction<E, F>\r\n): UnaryFunction<T, F>;\r\nexport function pipe<T, A, B, C, D, E, F, G>(\r\n  fn1: UnaryFunction<T, A>,\r\n  fn2: UnaryFunction<A, B>,\r\n  fn3: UnaryFunction<B, C>,\r\n  fn4: UnaryFunction<C, D>,\r\n  fn5: UnaryFunction<D, E>,\r\n  fn6: UnaryFunction<E, F>,\r\n  fn7: UnaryFunction<F, G>\r\n): UnaryFunction<T, G>;\r\nexport function pipe<T, A, B, C, D, E, F, G, H>(\r\n  fn1: UnaryFunction<T, A>,\r\n  fn2: UnaryFunction<A, B>,\r\n  fn3: UnaryFunction<B, C>,\r\n  fn4: UnaryFunction<C, D>,\r\n  fn5: UnaryFunction<D, E>,\r\n  fn6: UnaryFunction<E, F>,\r\n  fn7: UnaryFunction<F, G>,\r\n  fn8: UnaryFunction<G, H>\r\n): UnaryFunction<T, H>;\r\nexport function pipe<T, A, B, C, D, E, F, G, H, I>(\r\n  fn1: UnaryFunction<T, A>,\r\n  fn2: UnaryFunction<A, B>,\r\n  fn3: UnaryFunction<B, C>,\r\n  fn4: UnaryFunction<C, D>,\r\n  fn5: UnaryFunction<D, E>,\r\n  fn6: UnaryFunction<E, F>,\r\n  fn7: UnaryFunction<F, G>,\r\n  fn8: UnaryFunction<G, H>,\r\n  fn9: UnaryFunction<H, I>\r\n): UnaryFunction<T, I>;\r\nexport function pipe<T, A, B, C, D, E, F, G, H, I>(\r\n  fn1: UnaryFunction<T, A>,\r\n  fn2: UnaryFunction<A, B>,\r\n  fn3: UnaryFunction<B, C>,\r\n  fn4: UnaryFunction<C, D>,\r\n  fn5: UnaryFunction<D, E>,\r\n  fn6: UnaryFunction<E, F>,\r\n  fn7: UnaryFunction<F, G>,\r\n  fn8: UnaryFunction<G, H>,\r\n  fn9: UnaryFunction<H, I>,\r\n  ...fns: UnaryFunction<any, any>[]\r\n): UnaryFunction<T, unknown>;\r\n\r\n/**\r\n * pipe() can be called on one or more functions, each of which can take one argument (\"UnaryFunction\")\r\n * and uses it to return a value.\r\n * It returns a function that takes one argument, passes it to the first UnaryFunction, and then\r\n * passes the result to the next one, passes that result to the next one, and so on.  \r\n */\r\nexport function pipe(...fns: Array<UnaryFunction<any, any>>): UnaryFunction<any, any> {\r\n  return pipeFromArray(fns);\r\n}\r\n\r\n/** @internal */\r\nexport function pipeFromArray<T, R>(fns: Array<UnaryFunction<T, R>>): UnaryFunction<T, R> {\r\n  if (fns.length === 0) {\r\n    return identity as UnaryFunction<any, any>;\r\n  }\r\n\r\n  if (fns.length === 1) {\r\n    return fns[0];\r\n  }\r\n\r\n  return function piped(input: T): R {\r\n    return fns.reduce((prev: any, fn: UnaryFunction<T, R>) => fn(prev), input as any);\r\n  };\r\n}\r\n", "import { Operator } from './Operator';\r\nimport { SafeSubscriber, Subscriber } from './Subscriber';\r\nimport { isSubscription, Subscription } from './Subscription';\r\nimport { TeardownLogic, OperatorFunction, Subscribable, Observer } from './types';\r\nimport { observable as Symbol_observable } from './symbol/observable';\r\nimport { pipeFromArray } from './util/pipe';\r\nimport { config } from './config';\r\nimport { isFunction } from './util/isFunction';\r\nimport { errorContext } from './util/errorContext';\r\n\r\n/**\r\n * A representation of any set of values over any amount of time. This is the most basic building block\r\n * of RxJS.\r\n */\r\nexport class Observable<T> implements Subscribable<T> {\r\n  /**\r\n   * @deprecated Internal implementation detail, do not use directly. Will be made internal in v8.\r\n   */\r\n  source: Observable<any> | undefined;\r\n\r\n  /**\r\n   * @deprecated Internal implementation detail, do not use directly. Will be made internal in v8.\r\n   */\r\n  operator: Operator<any, T> | undefined;\r\n\r\n  /**\r\n   * @param subscribe The function that is called when the Observable is\r\n   * initially subscribed to. This function is given a Subscriber, to which new values\r\n   * can be `next`ed, or an `error` method can be called to raise an error, or\r\n   * `complete` can be called to notify of a successful completion.\r\n   */\r\n  constructor(subscribe?: (this: Observable<T>, subscriber: Subscriber<T>) => TeardownLogic) {\r\n    if (subscribe) {\r\n      this._subscribe = subscribe;\r\n    }\r\n  }\r\n\r\n  // HACK: Since TypeScript inherits static properties too, we have to\r\n  // fight against TypeScript here so Subject can have a different static create signature\r\n  /**\r\n   * Creates a new Observable by calling the Observable constructor\r\n   * @param subscribe the subscriber function to be passed to the Observable constructor\r\n   * @return A new observable.\r\n   * @deprecated Use `new Observable()` instead. Will be removed in v8.\r\n   */\r\n  static create: (...args: any[]) => any = <T>(subscribe?: (subscriber: Subscriber<T>) => TeardownLogic) => {\r\n    return new Observable<T>(subscribe);\r\n  };\r\n\r\n  /**\r\n   * Creates a new Observable, with this Observable instance as the source, and the passed\r\n   * operator defined as the new observable's operator.\r\n   * @param operator the operator defining the operation to take on the observable\r\n   * @return A new observable with the Operator applied.\r\n   * @deprecated Internal implementation detail, do not use directly. Will be made internal in v8.\r\n   * If you have implemented an operator using `lift`, it is recommended that you create an\r\n   * operator by simply returning `new Observable()` directly. See \"Creating new operators from\r\n   * scratch\" section here: https://rxjs.dev/guide/operators\r\n   */\r\n  lift<R>(operator?: Operator<T, R>): Observable<R> {\r\n    const observable = new Observable<R>();\r\n    observable.source = this;\r\n    observable.operator = operator;\r\n    return observable;\r\n  }\r\n\r\n  subscribe(observerOrNext?: Partial<Observer<T>> | ((value: T) => void)): Subscription;\r\n  /** @deprecated Instead of passing separate callback arguments, use an observer argument. Signatures taking separate callback arguments will be removed in v8. Details: https://rxjs.dev/deprecations/subscribe-arguments */\r\n  subscribe(next?: ((value: T) => void) | null, error?: ((error: any) => void) | null, complete?: (() => void) | null): Subscription;\r\n  /**\r\n   * Invokes an execution of an Observable and registers Observer handlers for notifications it will emit.\r\n   *\r\n   * <span class=\"informal\">Use it when you have all these Observables, but still nothing is happening.</span>\r\n   *\r\n   * `subscribe` is not a regular operator, but a method that calls Observable's internal `subscribe` function. It\r\n   * might be for example a function that you passed to Observable's constructor, but most of the time it is\r\n   * a library implementation, which defines what will be emitted by an Observable, and when it be will emitted. This means\r\n   * that calling `subscribe` is actually the moment when Observable starts its work, not when it is created, as it is often\r\n   * the thought.\r\n   *\r\n   * Apart from starting the execution of an Observable, this method allows you to listen for values\r\n   * that an Observable emits, as well as for when it completes or errors. You can achieve this in two\r\n   * of the following ways.\r\n   *\r\n   * The first way is creating an object that implements {@link Observer} interface. It should have methods\r\n   * defined by that interface, but note that it should be just a regular JavaScript object, which you can create\r\n   * yourself in any way you want (ES6 class, classic function constructor, object literal etc.). In particular, do\r\n   * not attempt to use any RxJS implementation details to create Observers - you don't need them. Remember also\r\n   * that your object does not have to implement all methods. If you find yourself creating a method that doesn't\r\n   * do anything, you can simply omit it. Note however, if the `error` method is not provided and an error happens,\r\n   * it will be thrown asynchronously. Errors thrown asynchronously cannot be caught using `try`/`catch`. Instead,\r\n   * use the {@link onUnhandledError} configuration option or use a runtime handler (like `window.onerror` or\r\n   * `process.on('error)`) to be notified of unhandled errors. Because of this, it's recommended that you provide\r\n   * an `error` method to avoid missing thrown errors.\r\n   *\r\n   * The second way is to give up on Observer object altogether and simply provide callback functions in place of its methods.\r\n   * This means you can provide three functions as arguments to `subscribe`, where the first function is equivalent\r\n   * of a `next` method, the second of an `error` method and the third of a `complete` method. Just as in case of an Observer,\r\n   * if you do not need to listen for something, you can omit a function by passing `undefined` or `null`,\r\n   * since `subscribe` recognizes these functions by where they were placed in function call. When it comes\r\n   * to the `error` function, as with an Observer, if not provided, errors emitted by an Observable will be thrown asynchronously.\r\n   *\r\n   * You can, however, subscribe with no parameters at all. This may be the case where you're not interested in terminal events\r\n   * and you also handled emissions internally by using operators (e.g. using `tap`).\r\n   *\r\n   * Whichever style of calling `subscribe` you use, in both cases it returns a Subscription object.\r\n   * This object allows you to call `unsubscribe` on it, which in turn will stop the work that an Observable does and will clean\r\n   * up all resources that an Observable used. Note that cancelling a subscription will not call `complete` callback\r\n   * provided to `subscribe` function, which is reserved for a regular completion signal that comes from an Observable.\r\n   *\r\n   * Remember that callbacks provided to `subscribe` are not guaranteed to be called asynchronously.\r\n   * It is an Observable itself that decides when these functions will be called. For example {@link of}\r\n   * by default emits all its values synchronously. Always check documentation for how given Observable\r\n   * will behave when subscribed and if its default behavior can be modified with a `scheduler`.\r\n   *\r\n   * #### Examples\r\n   *\r\n   * Subscribe with an {@link guide/observer Observer}\r\n   *\r\n   * ```ts\r\n   * import { of } from 'rxjs';\r\n   *\r\n   * const sumObserver = {\r\n   *   sum: 0,\r\n   *   next(value) {\r\n   *     console.log('Adding: ' + value);\r\n   *     this.sum = this.sum + value;\r\n   *   },\r\n   *   error() {\r\n   *     // We actually could just remove this method,\r\n   *     // since we do not really care about errors right now.\r\n   *   },\r\n   *   complete() {\r\n   *     console.log('Sum equals: ' + this.sum);\r\n   *   }\r\n   * };\r\n   *\r\n   * of(1, 2, 3) // Synchronously emits 1, 2, 3 and then completes.\r\n   *   .subscribe(sumObserver);\r\n   *\r\n   * // Logs:\r\n   * // 'Adding: 1'\r\n   * // 'Adding: 2'\r\n   * // 'Adding: 3'\r\n   * // 'Sum equals: 6'\r\n   * ```\r\n   *\r\n   * Subscribe with functions ({@link deprecations/subscribe-arguments deprecated})\r\n   *\r\n   * ```ts\r\n   * import { of } from 'rxjs'\r\n   *\r\n   * let sum = 0;\r\n   *\r\n   * of(1, 2, 3).subscribe(\r\n   *   value => {\r\n   *     console.log('Adding: ' + value);\r\n   *     sum = sum + value;\r\n   *   },\r\n   *   undefined,\r\n   *   () => console.log('Sum equals: ' + sum)\r\n   * );\r\n   *\r\n   * // Logs:\r\n   * // 'Adding: 1'\r\n   * // 'Adding: 2'\r\n   * // 'Adding: 3'\r\n   * // 'Sum equals: 6'\r\n   * ```\r\n   *\r\n   * Cancel a subscription\r\n   *\r\n   * ```ts\r\n   * import { interval } from 'rxjs';\r\n   *\r\n   * const subscription = interval(1000).subscribe({\r\n   *   next(num) {\r\n   *     console.log(num)\r\n   *   },\r\n   *   complete() {\r\n   *     // Will not be called, even when cancelling subscription.\r\n   *     console.log('completed!');\r\n   *   }\r\n   * });\r\n   *\r\n   * setTimeout(() => {\r\n   *   subscription.unsubscribe();\r\n   *   console.log('unsubscribed!');\r\n   * }, 2500);\r\n   *\r\n   * // Logs:\r\n   * // 0 after 1s\r\n   * // 1 after 2s\r\n   * // 'unsubscribed!' after 2.5s\r\n   * ```\r\n   *\r\n   * @param observerOrNext Either an {@link Observer} with some or all callback methods,\r\n   * or the `next` handler that is called for each value emitted from the subscribed Observable.\r\n   * @param error A handler for a terminal event resulting from an error. If no error handler is provided,\r\n   * the error will be thrown asynchronously as unhandled.\r\n   * @param complete A handler for a terminal event resulting from successful completion.\r\n   * @return A subscription reference to the registered handlers.\r\n   */\r\n  subscribe(\r\n    observerOrNext?: Partial<Observer<T>> | ((value: T) => void) | null,\r\n    error?: ((error: any) => void) | null,\r\n    complete?: (() => void) | null\r\n  ): Subscription {\r\n    const subscriber = isSubscriber(observerOrNext) ? observerOrNext : new SafeSubscriber(observerOrNext, error, complete);\r\n\r\n    errorContext(() => {\r\n      const { operator, source } = this;\r\n      subscriber.add(\r\n        operator\r\n          ? // We're dealing with a subscription in the\r\n            // operator chain to one of our lifted operators.\r\n            operator.call(subscriber, source)\r\n          : source\r\n          ? // If `source` has a value, but `operator` does not, something that\r\n            // had intimate knowledge of our API, like our `Subject`, must have\r\n            // set it. We're going to just call `_subscribe` directly.\r\n            this._subscribe(subscriber)\r\n          : // In all other cases, we're likely wrapping a user-provided initializer\r\n            // function, so we need to catch errors and handle them appropriately.\r\n            this._trySubscribe(subscriber)\r\n      );\r\n    });\r\n\r\n    return subscriber;\r\n  }\r\n\r\n  /** @internal */\r\n  protected _trySubscribe(sink: Subscriber<T>): TeardownLogic {\r\n    try {\r\n      return this._subscribe(sink);\r\n    } catch (err) {\r\n      // We don't need to return anything in this case,\r\n      // because it's just going to try to `add()` to a subscription\r\n      // above.\r\n      sink.error(err);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Used as a NON-CANCELLABLE means of subscribing to an observable, for use with\r\n   * APIs that expect promises, like `async/await`. You cannot unsubscribe from this.\r\n   *\r\n   * **WARNING**: Only use this with observables you *know* will complete. If the source\r\n   * observable does not complete, you will end up with a promise that is hung up, and\r\n   * potentially all of the state of an async function hanging out in memory. To avoid\r\n   * this situation, look into adding something like {@link timeout}, {@link take},\r\n   * {@link takeWhile}, or {@link takeUntil} amongst others.\r\n   *\r\n   * #### Example\r\n   *\r\n   * ```ts\r\n   * import { interval, take } from 'rxjs';\r\n   *\r\n   * const source$ = interval(1000).pipe(take(4));\r\n   *\r\n   * async function getTotal() {\r\n   *   let total = 0;\r\n   *\r\n   *   await source$.forEach(value => {\r\n   *     total += value;\r\n   *     console.log('observable -> ' + value);\r\n   *   });\r\n   *\r\n   *   return total;\r\n   * }\r\n   *\r\n   * getTotal().then(\r\n   *   total => console.log('Total: ' + total)\r\n   * );\r\n   *\r\n   * // Expected:\r\n   * // 'observable -> 0'\r\n   * // 'observable -> 1'\r\n   * // 'observable -> 2'\r\n   * // 'observable -> 3'\r\n   * // 'Total: 6'\r\n   * ```\r\n   *\r\n   * @param next A handler for each value emitted by the observable.\r\n   * @return A promise that either resolves on observable completion or\r\n   * rejects with the handled error.\r\n   */\r\n  forEach(next: (value: T) => void): Promise<void>;\r\n\r\n  /**\r\n   * @param next a handler for each value emitted by the observable\r\n   * @param promiseCtor a constructor function used to instantiate the Promise\r\n   * @return a promise that either resolves on observable completion or\r\n   *  rejects with the handled error\r\n   * @deprecated Passing a Promise constructor will no longer be available\r\n   * in upcoming versions of RxJS. This is because it adds weight to the library, for very\r\n   * little benefit. If you need this functionality, it is recommended that you either\r\n   * polyfill Promise, or you create an adapter to convert the returned native promise\r\n   * to whatever promise implementation you wanted. Will be removed in v8.\r\n   */\r\n  forEach(next: (value: T) => void, promiseCtor: PromiseConstructorLike): Promise<void>;\r\n\r\n  forEach(next: (value: T) => void, promiseCtor?: PromiseConstructorLike): Promise<void> {\r\n    promiseCtor = getPromiseCtor(promiseCtor);\r\n\r\n    return new promiseCtor<void>((resolve, reject) => {\r\n      const subscriber = new SafeSubscriber<T>({\r\n        next: (value) => {\r\n          try {\r\n            next(value);\r\n          } catch (err) {\r\n            reject(err);\r\n            subscriber.unsubscribe();\r\n          }\r\n        },\r\n        error: reject,\r\n        complete: resolve,\r\n      });\r\n      this.subscribe(subscriber);\r\n    }) as Promise<void>;\r\n  }\r\n\r\n  /** @internal */\r\n  protected _subscribe(subscriber: Subscriber<any>): TeardownLogic {\r\n    return this.source?.subscribe(subscriber);\r\n  }\r\n\r\n  /**\r\n   * An interop point defined by the es7-observable spec https://github.com/zenparsing/es-observable\r\n   * @return This instance of the observable.\r\n   */\r\n  [Symbol_observable]() {\r\n    return this;\r\n  }\r\n\r\n  /* tslint:disable:max-line-length */\r\n  pipe(): Observable<T>;\r\n  pipe<A>(op1: OperatorFunction<T, A>): Observable<A>;\r\n  pipe<A, B>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>): Observable<B>;\r\n  pipe<A, B, C>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>): Observable<C>;\r\n  pipe<A, B, C, D>(\r\n    op1: OperatorFunction<T, A>,\r\n    op2: OperatorFunction<A, B>,\r\n    op3: OperatorFunction<B, C>,\r\n    op4: OperatorFunction<C, D>\r\n  ): Observable<D>;\r\n  pipe<A, B, C, D, E>(\r\n    op1: OperatorFunction<T, A>,\r\n    op2: OperatorFunction<A, B>,\r\n    op3: OperatorFunction<B, C>,\r\n    op4: OperatorFunction<C, D>,\r\n    op5: OperatorFunction<D, E>\r\n  ): Observable<E>;\r\n  pipe<A, B, C, D, E, F>(\r\n    op1: OperatorFunction<T, A>,\r\n    op2: OperatorFunction<A, B>,\r\n    op3: OperatorFunction<B, C>,\r\n    op4: OperatorFunction<C, D>,\r\n    op5: OperatorFunction<D, E>,\r\n    op6: OperatorFunction<E, F>\r\n  ): Observable<F>;\r\n  pipe<A, B, C, D, E, F, G>(\r\n    op1: OperatorFunction<T, A>,\r\n    op2: OperatorFunction<A, B>,\r\n    op3: OperatorFunction<B, C>,\r\n    op4: OperatorFunction<C, D>,\r\n    op5: OperatorFunction<D, E>,\r\n    op6: OperatorFunction<E, F>,\r\n    op7: OperatorFunction<F, G>\r\n  ): Observable<G>;\r\n  pipe<A, B, C, D, E, F, G, H>(\r\n    op1: OperatorFunction<T, A>,\r\n    op2: OperatorFunction<A, B>,\r\n    op3: OperatorFunction<B, C>,\r\n    op4: OperatorFunction<C, D>,\r\n    op5: OperatorFunction<D, E>,\r\n    op6: OperatorFunction<E, F>,\r\n    op7: OperatorFunction<F, G>,\r\n    op8: OperatorFunction<G, H>\r\n  ): Observable<H>;\r\n  pipe<A, B, C, D, E, F, G, H, I>(\r\n    op1: OperatorFunction<T, A>,\r\n    op2: OperatorFunction<A, B>,\r\n    op3: OperatorFunction<B, C>,\r\n    op4: OperatorFunction<C, D>,\r\n    op5: OperatorFunction<D, E>,\r\n    op6: OperatorFunction<E, F>,\r\n    op7: OperatorFunction<F, G>,\r\n    op8: OperatorFunction<G, H>,\r\n    op9: OperatorFunction<H, I>\r\n  ): Observable<I>;\r\n  pipe<A, B, C, D, E, F, G, H, I>(\r\n    op1: OperatorFunction<T, A>,\r\n    op2: OperatorFunction<A, B>,\r\n    op3: OperatorFunction<B, C>,\r\n    op4: OperatorFunction<C, D>,\r\n    op5: OperatorFunction<D, E>,\r\n    op6: OperatorFunction<E, F>,\r\n    op7: OperatorFunction<F, G>,\r\n    op8: OperatorFunction<G, H>,\r\n    op9: OperatorFunction<H, I>,\r\n    ...operations: OperatorFunction<any, any>[]\r\n  ): Observable<unknown>;\r\n  /* tslint:enable:max-line-length */\r\n\r\n  /**\r\n   * Used to stitch together functional operators into a chain.\r\n   *\r\n   * ## Example\r\n   *\r\n   * ```ts\r\n   * import { interval, filter, map, scan } from 'rxjs';\r\n   *\r\n   * interval(1000)\r\n   *   .pipe(\r\n   *     filter(x => x % 2 === 0),\r\n   *     map(x => x + x),\r\n   *     scan((acc, x) => acc + x)\r\n   *   )\r\n   *   .subscribe(x => console.log(x));\r\n   * ```\r\n   *\r\n   * @return The Observable result of all the operators having been called\r\n   * in the order they were passed in.\r\n   */\r\n  pipe(...operations: OperatorFunction<any, any>[]): Observable<any> {\r\n    return pipeFromArray(operations)(this);\r\n  }\r\n\r\n  /* tslint:disable:max-line-length */\r\n  /** @deprecated Replaced with {@link firstValueFrom} and {@link lastValueFrom}. Will be removed in v8. Details: https://rxjs.dev/deprecations/to-promise */\r\n  toPromise(): Promise<T | undefined>;\r\n  /** @deprecated Replaced with {@link firstValueFrom} and {@link lastValueFrom}. Will be removed in v8. Details: https://rxjs.dev/deprecations/to-promise */\r\n  toPromise(PromiseCtor: typeof Promise): Promise<T | undefined>;\r\n  /** @deprecated Replaced with {@link firstValueFrom} and {@link lastValueFrom}. Will be removed in v8. Details: https://rxjs.dev/deprecations/to-promise */\r\n  toPromise(PromiseCtor: PromiseConstructorLike): Promise<T | undefined>;\r\n  /* tslint:enable:max-line-length */\r\n\r\n  /**\r\n   * Subscribe to this Observable and get a Promise resolving on\r\n   * `complete` with the last emission (if any).\r\n   *\r\n   * **WARNING**: Only use this with observables you *know* will complete. If the source\r\n   * observable does not complete, you will end up with a promise that is hung up, and\r\n   * potentially all of the state of an async function hanging out in memory. To avoid\r\n   * this situation, look into adding something like {@link timeout}, {@link take},\r\n   * {@link takeWhile}, or {@link takeUntil} amongst others.\r\n   *\r\n   * @param [promiseCtor] a constructor function used to instantiate\r\n   * the Promise\r\n   * @return A Promise that resolves with the last value emit, or\r\n   * rejects on an error. If there were no emissions, Promise\r\n   * resolves with undefined.\r\n   * @deprecated Replaced with {@link firstValueFrom} and {@link lastValueFrom}. Will be removed in v8. Details: https://rxjs.dev/deprecations/to-promise\r\n   */\r\n  toPromise(promiseCtor?: PromiseConstructorLike): Promise<T | undefined> {\r\n    promiseCtor = getPromiseCtor(promiseCtor);\r\n\r\n    return new promiseCtor((resolve, reject) => {\r\n      let value: T | undefined;\r\n      this.subscribe(\r\n        (x: T) => (value = x),\r\n        (err: any) => reject(err),\r\n        () => resolve(value)\r\n      );\r\n    }) as Promise<T | undefined>;\r\n  }\r\n}\r\n\r\n/**\r\n * Decides between a passed promise constructor from consuming code,\r\n * A default configured promise constructor, and the native promise\r\n * constructor and returns it. If nothing can be found, it will throw\r\n * an error.\r\n * @param promiseCtor The optional promise constructor to passed by consuming code\r\n */\r\nfunction getPromiseCtor(promiseCtor: PromiseConstructorLike | undefined) {\r\n  return promiseCtor ?? config.Promise ?? Promise;\r\n}\r\n\r\nfunction isObserver<T>(value: any): value is Observer<T> {\r\n  return value && isFunction(value.next) && isFunction(value.error) && isFunction(value.complete);\r\n}\r\n\r\nfunction isSubscriber<T>(value: any): value is Subscriber<T> {\r\n  return (value && value instanceof Subscriber) || (isObserver(value) && isSubscription(value));\r\n}\r\n", "import { Observable } from '../Observable';\r\nimport { Subscriber } from '../Subscriber';\r\nimport { OperatorFunction } from '../types';\r\nimport { isFunction } from './isFunction';\r\n\r\n/**\r\n * Used to determine if an object is an Observable with a lift function.\r\n */\r\nexport function hasLift(source: any): source is { lift: InstanceType<typeof Observable>['lift'] } {\r\n  return isFunction(source?.lift);\r\n}\r\n\r\n/**\r\n * Creates an `OperatorFunction`. Used to define operators throughout the library in a concise way.\r\n * @param init The logic to connect the liftedSource to the subscriber at the moment of subscription.\r\n */\r\nexport function operate<T, R>(\r\n  init: (liftedSource: Observable<T>, subscriber: Subscriber<R>) => (() => void) | void\r\n): OperatorFunction<T, R> {\r\n  return (source: Observable<T>) => {\r\n    if (hasLift(source)) {\r\n      return source.lift(function (this: Subscriber<R>, liftedSource: Observable<T>) {\r\n        try {\r\n          return init(liftedSource, this);\r\n        } catch (err) {\r\n          this.error(err);\r\n        }\r\n      });\r\n    }\r\n    throw new TypeError('Unable to lift unknown Observable type');\r\n  };\r\n}\r\n", "import { Subscriber } from '../Subscriber';\r\n\r\n/**\r\n * Creates an instance of an `OperatorSubscriber`.\r\n * @param destination The downstream subscriber.\r\n * @param onNext Handles next values, only called if this subscriber is not stopped or closed. Any\r\n * error that occurs in this function is caught and sent to the `error` method of this subscriber.\r\n * @param onError Handles errors from the subscription, any errors that occur in this handler are caught\r\n * and send to the `destination` error handler.\r\n * @param onComplete Handles completion notification from the subscription. Any errors that occur in\r\n * this handler are sent to the `destination` error handler.\r\n * @param onFinalize Additional teardown logic here. This will only be called on teardown if the\r\n * subscriber itself is not already closed. This is called after all other teardown logic is executed.\r\n */\r\nexport function createOperatorSubscriber<T>(\r\n  destination: Subscriber<any>,\r\n  onNext?: (value: T) => void,\r\n  onComplete?: () => void,\r\n  onError?: (err: any) => void,\r\n  onFinalize?: () => void\r\n): Subscriber<T> {\r\n  return new OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize);\r\n}\r\n\r\n/**\r\n * A generic helper for allowing operators to be created with a Subscriber and\r\n * use closures to capture necessary state from the operator function itself.\r\n */\r\nexport class OperatorSubscriber<T> extends Subscriber<T> {\r\n  /**\r\n   * Creates an instance of an `OperatorSubscriber`.\r\n   * @param destination The downstream subscriber.\r\n   * @param onNext Handles next values, only called if this subscriber is not stopped or closed. Any\r\n   * error that occurs in this function is caught and sent to the `error` method of this subscriber.\r\n   * @param onError Handles errors from the subscription, any errors that occur in this handler are caught\r\n   * and send to the `destination` error handler.\r\n   * @param onComplete Handles completion notification from the subscription. Any errors that occur in\r\n   * this handler are sent to the `destination` error handler.\r\n   * @param onFinalize Additional finalization logic here. This will only be called on finalization if the\r\n   * subscriber itself is not already closed. This is called after all other finalization logic is executed.\r\n   * @param shouldUnsubscribe An optional check to see if an unsubscribe call should truly unsubscribe.\r\n   * NOTE: This currently **ONLY** exists to support the strange behavior of {@link groupBy}, where unsubscription\r\n   * to the resulting observable does not actually disconnect from the source if there are active subscriptions\r\n   * to any grouped observable. (DO NOT EXPOSE OR USE EXTERNALLY!!!)\r\n   */\r\n  constructor(\r\n    destination: Subscriber<any>,\r\n    onNext?: (value: T) => void,\r\n    onComplete?: () => void,\r\n    onError?: (err: any) => void,\r\n    private onFinalize?: () => void,\r\n    private shouldUnsubscribe?: () => boolean\r\n  ) {\r\n    // It's important - for performance reasons - that all of this class's\r\n    // members are initialized and that they are always initialized in the same\r\n    // order. This will ensure that all OperatorSubscriber instances have the\r\n    // same hidden class in V8. This, in turn, will help keep the number of\r\n    // hidden classes involved in property accesses within the base class as\r\n    // low as possible. If the number of hidden classes involved exceeds four,\r\n    // the property accesses will become megamorphic and performance penalties\r\n    // will be incurred - i.e. inline caches won't be used.\r\n    //\r\n    // The reasons for ensuring all instances have the same hidden class are\r\n    // further discussed in this blog post from Benedikt Meurer:\r\n    // https://benediktmeurer.de/2018/03/23/impact-of-polymorphism-on-component-based-frameworks-like-react/\r\n    super(destination);\r\n    this._next = onNext\r\n      ? function (this: OperatorSubscriber<T>, value: T) {\r\n          try {\r\n            onNext(value);\r\n          } catch (err) {\r\n            destination.error(err);\r\n          }\r\n        }\r\n      : super._next;\r\n    this._error = onError\r\n      ? function (this: OperatorSubscriber<T>, err: any) {\r\n          try {\r\n            onError(err);\r\n          } catch (err) {\r\n            // Send any errors that occur down stream.\r\n            destination.error(err);\r\n          } finally {\r\n            // Ensure finalization.\r\n            this.unsubscribe();\r\n          }\r\n        }\r\n      : super._error;\r\n    this._complete = onComplete\r\n      ? function (this: OperatorSubscriber<T>) {\r\n          try {\r\n            onComplete();\r\n          } catch (err) {\r\n            // Send any errors that occur down stream.\r\n            destination.error(err);\r\n          } finally {\r\n            // Ensure finalization.\r\n            this.unsubscribe();\r\n          }\r\n        }\r\n      : super._complete;\r\n  }\r\n\r\n  unsubscribe() {\r\n    if (!this.shouldUnsubscribe || this.shouldUnsubscribe()) {\r\n      const { closed } = this;\r\n      super.unsubscribe();\r\n      // Execute additional teardown if we have any and we didn't already do so.\r\n      !closed && this.onFinalize?.();\r\n    }\r\n  }\r\n}\r\n", "export const isArrayLike = (<T>(x: any): x is ArrayLike<T> => x && typeof x.length === 'number' && typeof x !== 'function');", "import { isFunction } from \"./isFunction\";\r\n\r\n/**\r\n * Tests to see if the object is \"thennable\".\r\n * @param value the object to test\r\n */\r\nexport function isPromise(value: any): value is PromiseLike<any> {\r\n  return isFunction(value?.then);\r\n}\r\n", "import { InteropObservable } from '../types';\r\nimport { observable as Symbol_observable } from '../symbol/observable';\r\nimport { isFunction } from './isFunction';\r\n\r\n/** Identifies an input as being Observable (but not necessary an Rx Observable) */\r\nexport function isInteropObservable(input: any): input is InteropObservable<any> {\r\n  return isFunction(input[Symbol_observable]);\r\n}\r\n", "import { isFunction } from './isFunction';\r\n\r\nexport function isAsyncIterable<T>(obj: any): obj is AsyncIterable<T> {\r\n  return Symbol.asyncIterator && isFunction(obj?.[Symbol.asyncIterator]);\r\n}\r\n", "/**\r\n * Creates the TypeError to throw if an invalid object is passed to `from` or `scheduled`.\r\n * @param input The object that was passed.\r\n */\r\nexport function createInvalidObservableTypeError(input: any) {\r\n  // TODO: We should create error codes that can be looked up, so this can be less verbose.\r\n  return new TypeError(\r\n    `You provided ${\r\n      input !== null && typeof input === 'object' ? 'an invalid object' : `'${input}'`\r\n    } where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`\r\n  );\r\n}\r\n", "export function getSymbolIterator(): symbol {\r\n  if (typeof Symbol !== 'function' || !Symbol.iterator) {\r\n    return '@@iterator' as any;\r\n  }\r\n\r\n  return Symbol.iterator;\r\n}\r\n\r\nexport const iterator = getSymbolIterator();\r\n", "import { iterator as Symbol_iterator } from '../symbol/iterator';\r\nimport { isFunction } from './isFunction';\r\n\r\n/** Identifies an input as being an Iterable */\r\nexport function isIterable(input: any): input is Iterable<any> {\r\n  return isFunction(input?.[Symbol_iterator]);\r\n}\r\n", "import { ReadableStreamLike } from '../types';\r\nimport { isFunction } from './isFunction';\r\n\r\nexport async function* readableStreamLikeToAsyncGenerator<T>(readableStream: ReadableStreamLike<T>): AsyncGenerator<T> {\r\n  const reader = readableStream.getReader();\r\n  try {\r\n    while (true) {\r\n      const { value, done } = await reader.read();\r\n      if (done) {\r\n        return;\r\n      }\r\n      yield value!;\r\n    }\r\n  } finally {\r\n    reader.releaseLock();\r\n  }\r\n}\r\n\r\nexport function isReadableStreamLike<T>(obj: any): obj is ReadableStreamLike<T> {\r\n  // We don't want to use instanceof checks because they would return\r\n  // false for instances from another Realm, like an <iframe>.\r\n  return isFunction(obj?.getReader);\r\n}\r\n", "import { isArrayLike } from '../util/isArrayLike';\r\nimport { isPromise } from '../util/isPromise';\r\nimport { Observable } from '../Observable';\r\nimport { ObservableInput, ObservedValueOf, ReadableStreamLike } from '../types';\r\nimport { isInteropObservable } from '../util/isInteropObservable';\r\nimport { isAsyncIterable } from '../util/isAsyncIterable';\r\nimport { createInvalidObservableTypeError } from '../util/throwUnobservableError';\r\nimport { isIterable } from '../util/isIterable';\r\nimport { isReadableStreamLike, readableStreamLikeToAsyncGenerator } from '../util/isReadableStreamLike';\r\nimport { Subscriber } from '../Subscriber';\r\nimport { isFunction } from '../util/isFunction';\r\nimport { reportUnhandledError } from '../util/reportUnhandledError';\r\nimport { observable as Symbol_observable } from '../symbol/observable';\r\n\r\nexport function innerFrom<O extends ObservableInput<any>>(input: O): Observable<ObservedValueOf<O>>;\r\nexport function innerFrom<T>(input: ObservableInput<T>): Observable<T> {\r\n  if (input instanceof Observable) {\r\n    return input;\r\n  }\r\n  if (input != null) {\r\n    if (isInteropObservable(input)) {\r\n      return fromInteropObservable(input);\r\n    }\r\n    if (isArrayLike(input)) {\r\n      return fromArrayLike(input);\r\n    }\r\n    if (isPromise(input)) {\r\n      return fromPromise(input);\r\n    }\r\n    if (isAsyncIterable(input)) {\r\n      return fromAsyncIterable(input);\r\n    }\r\n    if (isIterable(input)) {\r\n      return fromIterable(input);\r\n    }\r\n    if (isReadableStreamLike(input)) {\r\n      return fromReadableStreamLike(input);\r\n    }\r\n  }\r\n\r\n  throw createInvalidObservableTypeError(input);\r\n}\r\n\r\n/**\r\n * Creates an RxJS Observable from an object that implements `Symbol.observable`.\r\n * @param obj An object that properly implements `Symbol.observable`.\r\n */\r\nexport function fromInteropObservable<T>(obj: any) {\r\n  return new Observable((subscriber: Subscriber<T>) => {\r\n    const obs = obj[Symbol_observable]();\r\n    if (isFunction(obs.subscribe)) {\r\n      return obs.subscribe(subscriber);\r\n    }\r\n    // Should be caught by observable subscribe function error handling.\r\n    throw new TypeError('Provided object does not correctly implement Symbol.observable');\r\n  });\r\n}\r\n\r\n/**\r\n * Synchronously emits the values of an array like and completes.\r\n * This is exported because there are creation functions and operators that need to\r\n * make direct use of the same logic, and there's no reason to make them run through\r\n * `from` conditionals because we *know* they're dealing with an array.\r\n * @param array The array to emit values from\r\n */\r\nexport function fromArrayLike<T>(array: ArrayLike<T>) {\r\n  return new Observable((subscriber: Subscriber<T>) => {\r\n    // Loop over the array and emit each value. Note two things here:\r\n    // 1. We're making sure that the subscriber is not closed on each loop.\r\n    //    This is so we don't continue looping over a very large array after\r\n    //    something like a `take`, `takeWhile`, or other synchronous unsubscription\r\n    //    has already unsubscribed.\r\n    // 2. In this form, reentrant code can alter that array we're looping over.\r\n    //    This is a known issue, but considered an edge case. The alternative would\r\n    //    be to copy the array before executing the loop, but this has\r\n    //    performance implications.\r\n    for (let i = 0; i < array.length && !subscriber.closed; i++) {\r\n      subscriber.next(array[i]);\r\n    }\r\n    subscriber.complete();\r\n  });\r\n}\r\n\r\nexport function fromPromise<T>(promise: PromiseLike<T>) {\r\n  return new Observable((subscriber: Subscriber<T>) => {\r\n    promise\r\n      .then(\r\n        (value) => {\r\n          if (!subscriber.closed) {\r\n            subscriber.next(value);\r\n            subscriber.complete();\r\n          }\r\n        },\r\n        (err: any) => subscriber.error(err)\r\n      )\r\n      .then(null, reportUnhandledError);\r\n  });\r\n}\r\n\r\nexport function fromIterable<T>(iterable: Iterable<T>) {\r\n  return new Observable((subscriber: Subscriber<T>) => {\r\n    for (const value of iterable) {\r\n      subscriber.next(value);\r\n      if (subscriber.closed) {\r\n        return;\r\n      }\r\n    }\r\n    subscriber.complete();\r\n  });\r\n}\r\n\r\nexport function fromAsyncIterable<T>(asyncIterable: AsyncIterable<T>) {\r\n  return new Observable((subscriber: Subscriber<T>) => {\r\n    process(asyncIterable, subscriber).catch((err) => subscriber.error(err));\r\n  });\r\n}\r\n\r\nexport function fromReadableStreamLike<T>(readableStream: ReadableStreamLike<T>) {\r\n  return fromAsyncIterable(readableStreamLikeToAsyncGenerator(readableStream));\r\n}\r\n\r\nasync function process<T>(asyncIterable: AsyncIterable<T>, subscriber: Subscriber<T>) {\r\n  for await (const value of asyncIterable) {\r\n    subscriber.next(value);\r\n    // A side-effect may have closed our subscriber,\r\n    // check before the next iteration.\r\n    if (subscriber.closed) {\r\n      return;\r\n    }\r\n  }\r\n  subscriber.complete();\r\n}\r\n", "import { Subscription } from '../Subscription';\r\nimport { SchedulerAction, SchedulerLike } from '../types';\r\n\r\nexport function executeSchedule(\r\n  parentSubscription: Subscription,\r\n  scheduler: SchedulerLike,\r\n  work: () => void,\r\n  delay: number,\r\n  repeat: true\r\n): void;\r\nexport function executeSchedule(\r\n  parentSubscription: Subscription,\r\n  scheduler: SchedulerLike,\r\n  work: () => void,\r\n  delay?: number,\r\n  repeat?: false\r\n): Subscription;\r\n\r\nexport function executeSchedule(\r\n  parentSubscription: Subscription,\r\n  scheduler: SchedulerLike,\r\n  work: () => void,\r\n  delay = 0,\r\n  repeat = false\r\n): Subscription | void {\r\n  const scheduleSubscription = scheduler.schedule(function (this: SchedulerAction<any>) {\r\n    work();\r\n    if (repeat) {\r\n      parentSubscription.add(this.schedule(null, delay));\r\n    } else {\r\n      this.unsubscribe();\r\n    }\r\n  }, delay);\r\n\r\n  parentSubscription.add(scheduleSubscription);\r\n\r\n  if (!repeat) {\r\n    // Because user-land scheduler implementations are unlikely to properly reuse\r\n    // Actions for repeat scheduling, we can't trust that the returned subscription\r\n    // will control repeat subscription scenarios. So we're trying to avoid using them\r\n    // incorrectly within this library.\r\n    return scheduleSubscription;\r\n  }\r\n}\r\n", "/** @prettier */\r\nimport { MonoTypeOperatorFunction, SchedulerLike } from '../types';\r\nimport { executeSchedule } from '../util/executeSchedule';\r\nimport { operate } from '../util/lift';\r\nimport { createOperatorSubscriber } from './OperatorSubscriber';\r\n\r\n/**\r\n * Re-emits all notifications from source Observable with specified scheduler.\r\n *\r\n * <span class=\"informal\">Ensure a specific scheduler is used, from outside of an Observable.</span>\r\n *\r\n * `observeOn` is an operator that accepts a scheduler as a first parameter, which will be used to reschedule\r\n * notifications emitted by the source Observable. It might be useful, if you do not have control over\r\n * internal scheduler of a given Observable, but want to control when its values are emitted nevertheless.\r\n *\r\n * Returned Observable emits the same notifications (nexted values, complete and error events) as the source Observable,\r\n * but rescheduled with provided scheduler. Note that this doesn't mean that source Observables internal\r\n * scheduler will be replaced in any way. Original scheduler still will be used, but when the source Observable emits\r\n * notification, it will be immediately scheduled again - this time with scheduler passed to `observeOn`.\r\n * An anti-pattern would be calling `observeOn` on Observable that emits lots of values synchronously, to split\r\n * that emissions into asynchronous chunks. For this to happen, scheduler would have to be passed into the source\r\n * Observable directly (usually into the operator that creates it). `observeOn` simply delays notifications a\r\n * little bit more, to ensure that they are emitted at expected moments.\r\n *\r\n * As a matter of fact, `observeOn` accepts second parameter, which specifies in milliseconds with what delay notifications\r\n * will be emitted. The main difference between {@link delay} operator and `observeOn` is that `observeOn`\r\n * will delay all notifications - including error notifications - while `delay` will pass through error\r\n * from source Observable immediately when it is emitted. In general it is highly recommended to use `delay` operator\r\n * for any kind of delaying of values in the stream, while using `observeOn` to specify which scheduler should be used\r\n * for notification emissions in general.\r\n *\r\n * ## Example\r\n *\r\n * Ensure values in subscribe are called just before browser repaint\r\n *\r\n * ```ts\r\n * import { interval, observeOn, animationFrameScheduler } from 'rxjs';\r\n *\r\n * const someDiv = document.createElement('div');\r\n * someDiv.style.cssText = 'width: 200px;background: #09c';\r\n * document.body.appendChild(someDiv);\r\n * const intervals = interval(10);      // Intervals are scheduled\r\n *                                      // with async scheduler by default...\r\n * intervals.pipe(\r\n *   observeOn(animationFrameScheduler) // ...but we will observe on animationFrame\r\n * )                                    // scheduler to ensure smooth animation.\r\n * .subscribe(val => {\r\n *   someDiv.style.height = val + 'px';\r\n * });\r\n * ```\r\n *\r\n * @see {@link delay}\r\n *\r\n * @param scheduler Scheduler that will be used to reschedule notifications from source Observable.\r\n * @param delay Number of milliseconds that states with what delay every notification should be rescheduled.\r\n * @return A function that returns an Observable that emits the same\r\n * notifications as the source Observable, but with provided scheduler.\r\n */\r\nexport function observeOn<T>(scheduler: SchedulerLike, delay = 0): MonoTypeOperatorFunction<T> {\r\n  return operate((source, subscriber) => {\r\n    source.subscribe(\r\n      createOperatorSubscriber(\r\n        subscriber,\r\n        (value) => executeSchedule(subscriber, scheduler, () => subscriber.next(value), delay),\r\n        () => executeSchedule(subscriber, scheduler, () => subscriber.complete(), delay),\r\n        (err) => executeSchedule(subscriber, scheduler, () => subscriber.error(err), delay)\r\n      )\r\n    );\r\n  });\r\n}\r\n", "import { MonoTypeOperatorFunction, SchedulerLike } from '../types';\r\nimport { operate } from '../util/lift';\r\n\r\n/**\r\n * Asynchronously subscribes Observers to this Observable on the specified {@link SchedulerLike}.\r\n *\r\n * With `subscribeOn` you can decide what type of scheduler a specific Observable will be using when it is subscribed to.\r\n *\r\n * Schedulers control the speed and order of emissions to observers from an Observable stream.\r\n *\r\n * ![](subscribeOn.png)\r\n *\r\n * ## Example\r\n *\r\n * Given the following code:\r\n *\r\n * ```ts\r\n * import { of, merge } from 'rxjs';\r\n *\r\n * const a = of(1, 2, 3);\r\n * const b = of(4, 5, 6);\r\n *\r\n * merge(a, b).subscribe(console.log);\r\n *\r\n * // Outputs\r\n * // 1\r\n * // 2\r\n * // 3\r\n * // 4\r\n * // 5\r\n * // 6\r\n * ```\r\n *\r\n * Both Observable `a` and `b` will emit their values directly and synchronously once they are subscribed to.\r\n *\r\n * If we instead use the `subscribeOn` operator declaring that we want to use the {@link asyncScheduler} for values emitted by Observable `a`:\r\n *\r\n * ```ts\r\n * import { of, subscribeOn, asyncScheduler, merge } from 'rxjs';\r\n *\r\n * const a = of(1, 2, 3).pipe(subscribeOn(asyncScheduler));\r\n * const b = of(4, 5, 6);\r\n *\r\n * merge(a, b).subscribe(console.log);\r\n *\r\n * // Outputs\r\n * // 4\r\n * // 5\r\n * // 6\r\n * // 1\r\n * // 2\r\n * // 3\r\n * ```\r\n *\r\n * The reason for this is that Observable `b` emits its values directly and synchronously like before\r\n * but the emissions from `a` are scheduled on the event loop because we are now using the {@link asyncScheduler} for that specific Observable.\r\n *\r\n * @param scheduler The {@link SchedulerLike} to perform subscription actions on.\r\n * @param delay A delay to pass to the scheduler to delay subscriptions\r\n * @return A function that returns an Observable modified so that its\r\n * subscriptions happen on the specified {@link SchedulerLike}.\r\n */\r\nexport function subscribeOn<T>(scheduler: SchedulerLike, delay: number = 0): MonoTypeOperatorFunction<T> {\r\n  return operate((source, subscriber) => {\r\n    subscriber.add(scheduler.schedule(() => source.subscribe(subscriber), delay));\r\n  });\r\n}\r\n", "import { innerFrom } from '../observable/innerFrom';\r\nimport { observeOn } from '../operators/observeOn';\r\nimport { subscribeOn } from '../operators/subscribeOn';\r\nimport { InteropObservable, SchedulerLike } from '../types';\r\n\r\nexport function scheduleObservable<T>(input: InteropObservable<T>, scheduler: SchedulerLike) {\r\n  return innerFrom(input).pipe(subscribeOn(scheduler), observeOn(scheduler));\r\n}\r\n", "import { innerFrom } from '../observable/innerFrom';\r\nimport { observeOn } from '../operators/observeOn';\r\nimport { subscribeOn } from '../operators/subscribeOn';\r\nimport { SchedulerLike } from '../types';\r\n\r\nexport function schedulePromise<T>(input: PromiseLike<T>, scheduler: SchedulerLike) {\r\n  return innerFrom(input).pipe(subscribeOn(scheduler), observeOn(scheduler));\r\n}\r\n", "import { Observable } from '../Observable';\r\nimport { SchedulerLike } from '../types';\r\n\r\nexport function scheduleArray<T>(input: ArrayLike<T>, scheduler: SchedulerLike) {\r\n  return new Observable<T>((subscriber) => {\r\n    // The current array index.\r\n    let i = 0;\r\n    // Start iterating over the array like on a schedule.\r\n    return scheduler.schedule(function () {\r\n      if (i === input.length) {\r\n        // If we have hit the end of the array like in the\r\n        // previous job, we can complete.\r\n        subscriber.complete();\r\n      } else {\r\n        // Otherwise let's next the value at the current index,\r\n        // then increment our index.\r\n        subscriber.next(input[i++]);\r\n        // If the last emission didn't cause us to close the subscriber\r\n        // (via take or some side effect), reschedule the job and we'll\r\n        // make another pass.\r\n        if (!subscriber.closed) {\r\n          this.schedule();\r\n        }\r\n      }\r\n    });\r\n  });\r\n}\r\n", "import { Observable } from '../Observable';\r\nimport { SchedulerLike } from '../types';\r\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\r\nimport { isFunction } from '../util/isFunction';\r\nimport { executeSchedule } from '../util/executeSchedule';\r\n\r\n/**\r\n * Used in {@link scheduled} to create an observable from an Iterable.\r\n * @param input The iterable to create an observable from\r\n * @param scheduler The scheduler to use\r\n */\r\nexport function scheduleIterable<T>(input: Iterable<T>, scheduler: SchedulerLike) {\r\n  return new Observable<T>((subscriber) => {\r\n    let iterator: Iterator<T, T>;\r\n\r\n    // Schedule the initial creation of the iterator from\r\n    // the iterable. This is so the code in the iterable is\r\n    // not called until the scheduled job fires.\r\n    executeSchedule(subscriber, scheduler, () => {\r\n      // Create the iterator.\r\n      iterator = (input as any)[Symbol_iterator]();\r\n\r\n      executeSchedule(\r\n        subscriber,\r\n        scheduler,\r\n        () => {\r\n          let value: T;\r\n          let done: boolean | undefined;\r\n          try {\r\n            // Pull the value out of the iterator\r\n            ({ value, done } = iterator.next());\r\n          } catch (err) {\r\n            // We got an error while pulling from the iterator\r\n            subscriber.error(err);\r\n            return;\r\n          }\r\n\r\n          if (done) {\r\n            // If it is \"done\" we just complete. This mimics the\r\n            // behavior of JavaScript's `for..of` consumption of\r\n            // iterables, which will not emit the value from an iterator\r\n            // result of `{ done: true: value: 'here' }`.\r\n            subscriber.complete();\r\n          } else {\r\n            // The iterable is not done, emit the value.\r\n            subscriber.next(value);\r\n          }\r\n        },\r\n        0,\r\n        true\r\n      );\r\n    });\r\n\r\n    // During finalization, if we see this iterator has a `return` method,\r\n    // then we know it is a Generator, and not just an Iterator. So we call\r\n    // the `return()` function. This will ensure that any `finally { }` blocks\r\n    // inside of the generator we can hit will be hit properly.\r\n    return () => isFunction(iterator?.return) && iterator.return();\r\n  });\r\n}\r\n", "import { SchedulerLike } from '../types';\r\nimport { Observable } from '../Observable';\r\nimport { executeSchedule } from '../util/executeSchedule';\r\n\r\nexport function scheduleAsyncIterable<T>(input: AsyncIterable<T>, scheduler: SchedulerLike) {\r\n  if (!input) {\r\n    throw new Error('Iterable cannot be null');\r\n  }\r\n  return new Observable<T>((subscriber) => {\r\n    executeSchedule(subscriber, scheduler, () => {\r\n      const iterator = input[Symbol.asyncIterator]();\r\n      executeSchedule(\r\n        subscriber,\r\n        scheduler,\r\n        () => {\r\n          iterator.next().then((result) => {\r\n            if (result.done) {\r\n              // This will remove the subscriptions from\r\n              // the parent subscription.\r\n              subscriber.complete();\r\n            } else {\r\n              subscriber.next(result.value);\r\n            }\r\n          });\r\n        },\r\n        0,\r\n        true\r\n      );\r\n    });\r\n  });\r\n}\r\n", "import { SchedulerLike, ReadableStreamLike } from '../types';\r\nimport { Observable } from '../Observable';\r\nimport { scheduleAsyncIterable } from './scheduleAsyncIterable';\r\nimport { readableStreamLikeToAsyncGenerator } from '../util/isReadableStreamLike';\r\n\r\nexport function scheduleReadableStreamLike<T>(input: ReadableStreamLike<T>, scheduler: SchedulerLike): Observable<T> {\r\n  return scheduleAsyncIterable(readableStreamLikeToAsyncGenerator(input), scheduler);\r\n}\r\n", "import { scheduleObservable } from './scheduleObservable';\r\nimport { schedulePromise } from './schedulePromise';\r\nimport { scheduleArray } from './scheduleArray';\r\nimport { scheduleIterable } from './scheduleIterable';\r\nimport { scheduleAsyncIterable } from './scheduleAsyncIterable';\r\nimport { isInteropObservable } from '../util/isInteropObservable';\r\nimport { isPromise } from '../util/isPromise';\r\nimport { isArrayLike } from '../util/isArrayLike';\r\nimport { isIterable } from '../util/isIterable';\r\nimport { ObservableInput, SchedulerLike } from '../types';\r\nimport { Observable } from '../Observable';\r\nimport { isAsyncIterable } from '../util/isAsyncIterable';\r\nimport { createInvalidObservableTypeError } from '../util/throwUnobservableError';\r\nimport { isReadableStreamLike } from '../util/isReadableStreamLike';\r\nimport { scheduleReadableStreamLike } from './scheduleReadableStreamLike';\r\n\r\n/**\r\n * Converts from a common {@link ObservableInput} type to an observable where subscription and emissions\r\n * are scheduled on the provided scheduler.\r\n *\r\n * @see {@link from}\r\n * @see {@link of}\r\n *\r\n * @param input The observable, array, promise, iterable, etc you would like to schedule\r\n * @param scheduler The scheduler to use to schedule the subscription and emissions from\r\n * the returned observable.\r\n */\r\nexport function scheduled<T>(input: ObservableInput<T>, scheduler: SchedulerLike): Observable<T> {\r\n  if (input != null) {\r\n    if (isInteropObservable(input)) {\r\n      return scheduleObservable(input, scheduler);\r\n    }\r\n    if (isArrayLike(input)) {\r\n      return scheduleArray(input, scheduler);\r\n    }\r\n    if (isPromise(input)) {\r\n      return schedulePromise(input, scheduler);\r\n    }\r\n    if (isAsyncIterable(input)) {\r\n      return scheduleAsyncIterable(input, scheduler);\r\n    }\r\n    if (isIterable(input)) {\r\n      return scheduleIterable(input, scheduler);\r\n    }\r\n    if (isReadableStreamLike(input)) {\r\n      return scheduleReadableStreamLike(input, scheduler);\r\n    }\r\n  }\r\n  throw createInvalidObservableTypeError(input);\r\n}\r\n", "import { Observable } from '../Observable';\r\nimport { ObservableInput, SchedulerLike, ObservedValueOf } from '../types';\r\nimport { scheduled } from '../scheduled/scheduled';\r\nimport { innerFrom } from './innerFrom';\r\n\r\nexport function from<O extends ObservableInput<any>>(input: O): Observable<ObservedValueOf<O>>;\r\n/** @deprecated The `scheduler` parameter will be removed in v8. Use `scheduled`. Details: https://rxjs.dev/deprecations/scheduler-argument */\r\nexport function from<O extends ObservableInput<any>>(input: O, scheduler: SchedulerLike | undefined): Observable<ObservedValueOf<O>>;\r\n\r\n/**\r\n * Creates an Observable from an Array, an array-like object, a Promise, an iterable object, or an Observable-like object.\r\n *\r\n * <span class=\"informal\">Converts almost anything to an Observable.</span>\r\n *\r\n * ![](from.png)\r\n *\r\n * `from` converts various other objects and data types into Observables. It also converts a Promise, an array-like, or an\r\n * <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#iterable\" target=\"_blank\">iterable</a>\r\n * object into an Observable that emits the items in that promise, array, or iterable. A String, in this context, is treated\r\n * as an array of characters. Observable-like objects (contains a function named with the ES2015 Symbol for Observable) can also be\r\n * converted through this operator.\r\n *\r\n * ## Examples\r\n *\r\n * Converts an array to an Observable\r\n *\r\n * ```ts\r\n * import { from } from 'rxjs';\r\n *\r\n * const array = [10, 20, 30];\r\n * const result = from(array);\r\n *\r\n * result.subscribe(x => console.log(x));\r\n *\r\n * // Logs:\r\n * // 10\r\n * // 20\r\n * // 30\r\n * ```\r\n *\r\n * Convert an infinite iterable (from a generator) to an Observable\r\n *\r\n * ```ts\r\n * import { from, take } from 'rxjs';\r\n *\r\n * function* generateDoubles(seed) {\r\n *    let i = seed;\r\n *    while (true) {\r\n *      yield i;\r\n *      i = 2 * i; // double it\r\n *    }\r\n * }\r\n *\r\n * const iterator = generateDoubles(3);\r\n * const result = from(iterator).pipe(take(10));\r\n *\r\n * result.subscribe(x => console.log(x));\r\n *\r\n * // Logs:\r\n * // 3\r\n * // 6\r\n * // 12\r\n * // 24\r\n * // 48\r\n * // 96\r\n * // 192\r\n * // 384\r\n * // 768\r\n * // 1536\r\n * ```\r\n *\r\n * With `asyncScheduler`\r\n *\r\n * ```ts\r\n * import { from, asyncScheduler } from 'rxjs';\r\n *\r\n * console.log('start');\r\n *\r\n * const array = [10, 20, 30];\r\n * const result = from(array, asyncScheduler);\r\n *\r\n * result.subscribe(x => console.log(x));\r\n *\r\n * console.log('end');\r\n *\r\n * // Logs:\r\n * // 'start'\r\n * // 'end'\r\n * // 10\r\n * // 20\r\n * // 30\r\n * ```\r\n *\r\n * @see {@link fromEvent}\r\n * @see {@link fromEventPattern}\r\n *\r\n * @param input A subscription object, a Promise, an Observable-like,\r\n * an Array, an iterable, or an array-like object to be converted.\r\n * @param scheduler An optional {@link SchedulerLike} on which to schedule the emission of values.\r\n * @return An Observable converted from {@link ObservableInput}.\r\n */\r\nexport function from<T>(input: ObservableInput<T>, scheduler?: SchedulerLike): Observable<T> {\r\n  return scheduler ? scheduled(input, scheduler) : innerFrom(input);\r\n}\r\n", "import { OperatorFunction } from '../types';\r\nimport { operate } from '../util/lift';\r\nimport { createOperatorSubscriber } from './OperatorSubscriber';\r\n\r\nexport function map<T, R>(project: (value: T, index: number) => R): OperatorFunction<T, R>;\r\n/** @deprecated Use a closure instead of a `thisArg`. Signatures accepting a `thisArg` will be removed in v8. */\r\nexport function map<T, R, A>(project: (this: A, value: T, index: number) => R, thisArg: A): OperatorFunction<T, R>;\r\n\r\n/**\r\n * Applies a given `project` function to each value emitted by the source\r\n * Observable, and emits the resulting values as an Observable.\r\n *\r\n * <span class=\"informal\">Like [Array.prototype.map()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map),\r\n * it passes each source value through a transformation function to get\r\n * corresponding output values.</span>\r\n *\r\n * ![](map.png)\r\n *\r\n * Similar to the well known `Array.prototype.map` function, this operator\r\n * applies a projection to each value and emits that projection in the output\r\n * Observable.\r\n *\r\n * ## Example\r\n *\r\n * Map every click to the `clientX` position of that click\r\n *\r\n * ```ts\r\n * import { fromEvent, map } from 'rxjs';\r\n *\r\n * const clicks = fromEvent<PointerEvent>(document, 'click');\r\n * const positions = clicks.pipe(map(ev => ev.clientX));\r\n *\r\n * positions.subscribe(x => console.log(x));\r\n * ```\r\n *\r\n * @see {@link mapTo}\r\n * @see {@link pluck}\r\n *\r\n * @param project The function to apply to each `value` emitted by the source\r\n * Observable. The `index` parameter is the number `i` for the i-th emission\r\n * that has happened since the subscription, starting from the number `0`.\r\n * @param thisArg An optional argument to define what `this` is in the\r\n * `project` function.\r\n * @return A function that returns an Observable that emits the values from the\r\n * source Observable transformed by the given `project` function.\r\n */\r\nexport function map<T, R>(project: (value: T, index: number) => R, thisArg?: any): OperatorFunction<T, R> {\r\n  return operate((source, subscriber) => {\r\n    // The index of the value from the source. Used with projection.\r\n    let index = 0;\r\n    // Subscribe to the source, all errors and completions are sent along\r\n    // to the consumer.\r\n    source.subscribe(\r\n      createOperatorSubscriber(subscriber, (value: T) => {\r\n        // Call the projection function with the appropriate this context,\r\n        // and send the resulting value to the consumer.\r\n        subscriber.next(project.call(thisArg, value, index++));\r\n      })\r\n    );\r\n  });\r\n}\r\n", "import { OperatorFunction, MonoTypeOperatorFunction, TruthyTypesOf } from '../types';\r\nimport { operate } from '../util/lift';\r\nimport { createOperatorSubscriber } from './OperatorSubscriber';\r\n\r\n/** @deprecated Use a closure instead of a `thisArg`. Signatures accepting a `thisArg` will be removed in v8. */\r\nexport function filter<T, S extends T, A>(predicate: (this: A, value: T, index: number) => value is S, thisArg: A): OperatorFunction<T, S>;\r\nexport function filter<T, S extends T>(predicate: (value: T, index: number) => value is S): OperatorFunction<T, S>;\r\nexport function filter<T>(predicate: BooleanConstructor): OperatorFunction<T, TruthyTypesOf<T>>;\r\n/** @deprecated Use a closure instead of a `thisArg`. Signatures accepting a `thisArg` will be removed in v8. */\r\nexport function filter<T, A>(predicate: (this: A, value: T, index: number) => boolean, thisArg: A): MonoTypeOperatorFunction<T>;\r\nexport function filter<T>(predicate: (value: T, index: number) => boolean): MonoTypeOperatorFunction<T>;\r\n\r\n/**\r\n * Filter items emitted by the source Observable by only emitting those that\r\n * satisfy a specified predicate.\r\n *\r\n * <span class=\"informal\">Like\r\n * [Array.prototype.filter()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter),\r\n * it only emits a value from the source if it passes a criterion function.</span>\r\n *\r\n * ![](filter.png)\r\n *\r\n * Similar to the well-known `Array.prototype.filter` method, this operator\r\n * takes values from the source Observable, passes them through a `predicate`\r\n * function and only emits those values that yielded `true`.\r\n *\r\n * ## Example\r\n *\r\n * Emit only click events whose target was a DIV element\r\n *\r\n * ```ts\r\n * import { fromEvent, filter } from 'rxjs';\r\n *\r\n * const div = document.createElement('div');\r\n * div.style.cssText = 'width: 200px; height: 200px; background: #09c;';\r\n * document.body.appendChild(div);\r\n *\r\n * const clicks = fromEvent(document, 'click');\r\n * const clicksOnDivs = clicks.pipe(filter(ev => (<HTMLElement>ev.target).tagName === 'DIV'));\r\n * clicksOnDivs.subscribe(x => console.log(x));\r\n * ```\r\n *\r\n * @see {@link distinct}\r\n * @see {@link distinctUntilChanged}\r\n * @see {@link distinctUntilKeyChanged}\r\n * @see {@link ignoreElements}\r\n * @see {@link partition}\r\n * @see {@link skip}\r\n *\r\n * @param predicate A function that\r\n * evaluates each value emitted by the source Observable. If it returns `true`,\r\n * the value is emitted, if `false` the value is not passed to the output\r\n * Observable. The `index` parameter is the number `i` for the i-th source\r\n * emission that has happened since the subscription, starting from the number\r\n * `0`.\r\n * @param thisArg An optional argument to determine the value of `this`\r\n * in the `predicate` function.\r\n * @return A function that returns an Observable that emits items from the\r\n * source Observable that satisfy the specified `predicate`.\r\n */\r\nexport function filter<T>(predicate: (value: T, index: number) => boolean, thisArg?: any): MonoTypeOperatorFunction<T> {\r\n  return operate((source, subscriber) => {\r\n    // An index passed to our predicate function on each call.\r\n    let index = 0;\r\n\r\n    // Subscribe to the source, all errors and completions are\r\n    // forwarded to the consumer.\r\n    source.subscribe(\r\n      // Call the predicate with the appropriate `this` context,\r\n      // if the predicate returns `true`, then send the value\r\n      // to the consumer.\r\n      createOperatorSubscriber(subscriber, (value) => predicate.call(thisArg, value, index++) && subscriber.next(value))\r\n    );\r\n  });\r\n}\r\n", "import { Observable } from '../Observable';\r\n\r\nimport { ObservableInput, OperatorFunction, ObservedValueOf } from '../types';\r\nimport { Subscription } from '../Subscription';\r\nimport { innerFrom } from '../observable/innerFrom';\r\nimport { createOperatorSubscriber } from './OperatorSubscriber';\r\nimport { operate } from '../util/lift';\r\n\r\nexport function catchError<T, O extends ObservableInput<any>>(\r\n  selector: (err: any, caught: Observable<T>) => O\r\n): OperatorFunction<T, T | ObservedValueOf<O>>;\r\n\r\n/**\r\n * Catches errors on the observable to be handled by returning a new observable or throwing an error.\r\n *\r\n * <span class=\"informal\">\r\n * It only listens to the error channel and ignores notifications.\r\n * Handles errors from the source observable, and maps them to a new observable.\r\n * The error may also be rethrown, or a new error can be thrown to emit an error from the result.\r\n * </span>\r\n *\r\n * ![](catch.png)\r\n *\r\n * This operator handles errors, but forwards along all other events to the resulting observable.\r\n * If the source observable terminates with an error, it will map that error to a new observable,\r\n * subscribe to it, and forward all of its events to the resulting observable.\r\n *\r\n * ## Examples\r\n *\r\n * Continue with a different Observable when there's an error\r\n *\r\n * ```ts\r\n * import { of, map, catchError } from 'rxjs';\r\n *\r\n * of(1, 2, 3, 4, 5)\r\n *   .pipe(\r\n *     map(n => {\r\n *       if (n === 4) {\r\n *         throw 'four!';\r\n *       }\r\n *       return n;\r\n *     }),\r\n *     catchError(err => of('I', 'II', 'III', 'IV', 'V'))\r\n *   )\r\n *   .subscribe(x => console.log(x));\r\n *   // 1, 2, 3, I, II, III, IV, V\r\n * ```\r\n *\r\n * Retry the caught source Observable again in case of error, similar to `retry()` operator\r\n *\r\n * ```ts\r\n * import { of, map, catchError, take } from 'rxjs';\r\n *\r\n * of(1, 2, 3, 4, 5)\r\n *   .pipe(\r\n *     map(n => {\r\n *       if (n === 4) {\r\n *         throw 'four!';\r\n *       }\r\n *       return n;\r\n *     }),\r\n *     catchError((err, caught) => caught),\r\n *     take(30)\r\n *   )\r\n *   .subscribe(x => console.log(x));\r\n *   // 1, 2, 3, 1, 2, 3, ...\r\n * ```\r\n *\r\n * Throw a new error when the source Observable throws an error\r\n *\r\n * ```ts\r\n * import { of, map, catchError } from 'rxjs';\r\n *\r\n * of(1, 2, 3, 4, 5)\r\n *   .pipe(\r\n *     map(n => {\r\n *       if (n === 4) {\r\n *         throw 'four!';\r\n *       }\r\n *       return n;\r\n *     }),\r\n *     catchError(err => {\r\n *       throw 'error in source. Details: ' + err;\r\n *     })\r\n *   )\r\n *   .subscribe({\r\n *     next: x => console.log(x),\r\n *     error: err => console.log(err)\r\n *   });\r\n *   // 1, 2, 3, error in source. Details: four!\r\n * ```\r\n *\r\n * @see {@link onErrorResumeNext}\r\n * @see {@link repeat}\r\n * @see {@link repeatWhen}\r\n * @see {@link retry }\r\n * @see {@link retryWhen}\r\n *\r\n * @param selector A function that takes as arguments `err`, which is the error, and `caught`, which\r\n * is the source observable, in case you'd like to \"retry\" that observable by returning it again.\r\n * Whatever observable is returned by the `selector` will be used to continue the observable chain.\r\n * @return A function that returns an Observable that originates from either\r\n * the source or the Observable returned by the `selector` function.\r\n */\r\nexport function catchError<T, O extends ObservableInput<any>>(\r\n  selector: (err: any, caught: Observable<T>) => O\r\n): OperatorFunction<T, T | ObservedValueOf<O>> {\r\n  return operate((source, subscriber) => {\r\n    let innerSub: Subscription | null = null;\r\n    let syncUnsub = false;\r\n    let handledResult: Observable<ObservedValueOf<O>>;\r\n\r\n    innerSub = source.subscribe(\r\n      createOperatorSubscriber(subscriber, undefined, undefined, (err) => {\r\n        handledResult = innerFrom(selector(err, catchError(selector)(source)));\r\n        if (innerSub) {\r\n          innerSub.unsubscribe();\r\n          innerSub = null;\r\n          handledResult.subscribe(subscriber);\r\n        } else {\r\n          // We don't have an innerSub yet, that means the error was synchronous\r\n          // because the subscribe call hasn't returned yet.\r\n          syncUnsub = true;\r\n        }\r\n      })\r\n    );\r\n\r\n    if (syncUnsub) {\r\n      // We have a synchronous error, we need to make sure to\r\n      // finalize right away. This ensures that callbacks in the `finalize` operator are called\r\n      // at the right time, and that finalization occurs at the expected\r\n      // time between the source error and the subscription to the\r\n      // next observable.\r\n      innerSub.unsubscribe();\r\n      innerSub = null;\r\n      handledResult!.subscribe(subscriber);\r\n    }\r\n  });\r\n}\r\n", "export class AmplifyError extends Error {\n    /**\n     *  Constructs an AmplifyError.\n     *\n     * @param message text that describes the main problem.\n     * @param underlyingError the underlying cause of the error.\n     * @param recoverySuggestion suggestion to recover from the error.\n     *\n     */\n    constructor({ message, name, recoverySuggestion, underlyingError, metadata, }) {\n        super(message);\n        this.name = name;\n        this.underlyingError = underlyingError;\n        this.recoverySuggestion = recoverySuggestion;\n        if (metadata) {\n            // If metadata exists, explicitly only record the following properties.\n            const { extendedRequestId, httpStatusCode, requestId } = metadata;\n            this.metadata = { extendedRequestId, httpStatusCode, requestId };\n        }\n        // Hack for making the custom error class work when transpiled to es5\n        // TODO: Delete the following 2 lines after we change the build target to >= es2015\n        this.constructor = AmplifyError;\n        Object.setPrototypeOf(this, AmplifyError.prototype);\n    }\n}\n", "export var AmplifyErrorCode;\n(function (AmplifyErrorCode) {\n    AmplifyErrorCode[\"NoEndpointId\"] = \"NoEndpointId\";\n    AmplifyErrorCode[\"PlatformNotSupported\"] = \"PlatformNotSupported\";\n    AmplifyErrorCode[\"Unknown\"] = \"Unknown\";\n    AmplifyErrorCode[\"NetworkError\"] = \"NetworkError\";\n})(AmplifyErrorCode || (AmplifyErrorCode = {}));\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AmplifyError } from './AmplifyError';\nexport const createAssertionFunction = (errorMap, AssertionError = AmplifyError) => (assertion, name, additionalContext) => {\n    const { message, recoverySuggestion } = errorMap[name];\n    if (!assertion) {\n        throw new AssertionError({\n            name,\n            message: additionalContext\n                ? `${message} ${additionalContext}`\n                : message,\n            recoverySuggestion,\n        });\n    }\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AmplifyError } from '../../errors';\nexport const getCrypto = () => {\n    if (typeof window === 'object' && typeof window.crypto === 'object') {\n        return window.crypto;\n    }\n    // Next.js global polyfill\n    if (typeof crypto === 'object') {\n        return crypto;\n    }\n    throw new AmplifyError({\n        name: 'MissingPolyfill',\n        message: 'Cannot resolve the `crypto` function from the environment.',\n    });\n};\nexport const getBtoa = () => {\n    // browser\n    if (typeof window !== 'undefined' && typeof window.btoa === 'function') {\n        return window.btoa;\n    }\n    // Next.js global polyfill\n    if (typeof btoa === 'function') {\n        return btoa;\n    }\n    throw new AmplifyError({\n        name: 'Base64EncoderError',\n        message: 'Cannot resolve the `btoa` function from the environment.',\n    });\n};\nexport const getAtob = () => {\n    // browser\n    if (typeof window !== 'undefined' && typeof window.atob === 'function') {\n        return window.atob;\n    }\n    // Next.js global polyfill\n    if (typeof atob === 'function') {\n        return atob;\n    }\n    throw new AmplifyError({\n        name: 'Base64EncoderError',\n        message: 'Cannot resolve the `atob` function from the environment.',\n    });\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Logging constants\nexport const AWS_CLOUDWATCH_CATEGORY = 'Logging';\nexport const USER_AGENT_HEADER = 'x-amz-user-agent';\n// Error exception code constants\nexport const NO_HUBCALLBACK_PROVIDED_EXCEPTION = 'NoHubcallbackProvidedException';\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport var LogType;\n(function (LogType) {\n    LogType[\"DEBUG\"] = \"DEBUG\";\n    LogType[\"ERROR\"] = \"ERROR\";\n    LogType[\"INFO\"] = \"INFO\";\n    LogType[\"WARN\"] = \"WARN\";\n    LogType[\"VERBOSE\"] = \"VERBOSE\";\n    LogType[\"NONE\"] = \"NONE\";\n})(LogType || (LogType = {}));\n", "/* eslint-disable no-console */\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AWS_CLOUDWATCH_CATEGORY } from '../constants';\nimport { LogType } from './types';\nconst LOG_LEVELS = {\n    VERBOSE: 1,\n    DEBUG: 2,\n    INFO: 3,\n    WARN: 4,\n    ERROR: 5,\n    NONE: 6,\n};\n/**\n * Write logs\n * @class Logger\n */\nexport class ConsoleLogger {\n    /**\n     * @constructor\n     * @param {string} name - Name of the logger\n     */\n    constructor(name, level = LogType.WARN) {\n        this.name = name;\n        this.level = level;\n        this._pluggables = [];\n    }\n    _padding(n) {\n        return n < 10 ? '0' + n : '' + n;\n    }\n    _ts() {\n        const dt = new Date();\n        return ([this._padding(dt.getMinutes()), this._padding(dt.getSeconds())].join(':') +\n            '.' +\n            dt.getMilliseconds());\n    }\n    configure(config) {\n        if (!config)\n            return this._config;\n        this._config = config;\n        return this._config;\n    }\n    /**\n     * Write log\n     * @method\n     * @memeberof Logger\n     * @param {LogType|string} type - log type, default INFO\n     * @param {string|object} msg - Logging message or object\n     */\n    _log(type, ...msg) {\n        let loggerLevelName = this.level;\n        if (ConsoleLogger.LOG_LEVEL) {\n            loggerLevelName = ConsoleLogger.LOG_LEVEL;\n        }\n        if (typeof window !== 'undefined' && window.LOG_LEVEL) {\n            loggerLevelName = window.LOG_LEVEL;\n        }\n        const loggerLevel = LOG_LEVELS[loggerLevelName];\n        const typeLevel = LOG_LEVELS[type];\n        if (!(typeLevel >= loggerLevel)) {\n            // Do nothing if type is not greater than or equal to logger level (handle undefined)\n            return;\n        }\n        let log = console.log.bind(console);\n        if (type === LogType.ERROR && console.error) {\n            log = console.error.bind(console);\n        }\n        if (type === LogType.WARN && console.warn) {\n            log = console.warn.bind(console);\n        }\n        if (ConsoleLogger.BIND_ALL_LOG_LEVELS) {\n            if (type === LogType.INFO && console.info) {\n                log = console.info.bind(console);\n            }\n            if (type === LogType.DEBUG && console.debug) {\n                log = console.debug.bind(console);\n            }\n        }\n        const prefix = `[${type}] ${this._ts()} ${this.name}`;\n        let message = '';\n        if (msg.length === 1 && typeof msg[0] === 'string') {\n            message = `${prefix} - ${msg[0]}`;\n            log(message);\n        }\n        else if (msg.length === 1) {\n            message = `${prefix} ${msg[0]}`;\n            log(prefix, msg[0]);\n        }\n        else if (typeof msg[0] === 'string') {\n            let obj = msg.slice(1);\n            if (obj.length === 1) {\n                obj = obj[0];\n            }\n            message = `${prefix} - ${msg[0]} ${obj}`;\n            log(`${prefix} - ${msg[0]}`, obj);\n        }\n        else {\n            message = `${prefix} ${msg}`;\n            log(prefix, msg);\n        }\n        for (const plugin of this._pluggables) {\n            const logEvent = { message, timestamp: Date.now() };\n            plugin.pushLogs([logEvent]);\n        }\n    }\n    /**\n     * Write General log. Default to INFO\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    log(...msg) {\n        this._log(LogType.INFO, ...msg);\n    }\n    /**\n     * Write INFO log\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    info(...msg) {\n        this._log(LogType.INFO, ...msg);\n    }\n    /**\n     * Write WARN log\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    warn(...msg) {\n        this._log(LogType.WARN, ...msg);\n    }\n    /**\n     * Write ERROR log\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    error(...msg) {\n        this._log(LogType.ERROR, ...msg);\n    }\n    /**\n     * Write DEBUG log\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    debug(...msg) {\n        this._log(LogType.DEBUG, ...msg);\n    }\n    /**\n     * Write VERBOSE log\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    verbose(...msg) {\n        this._log(LogType.VERBOSE, ...msg);\n    }\n    addPluggable(pluggable) {\n        if (pluggable && pluggable.getCategoryName() === AWS_CLOUDWATCH_CATEGORY) {\n            this._pluggables.push(pluggable);\n            pluggable.configure(this._config);\n        }\n    }\n    listPluggables() {\n        return this._pluggables;\n    }\n}\nConsoleLogger.LOG_LEVEL = null;\nConsoleLogger.BIND_ALL_LOG_LEVELS = false;\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport const isBrowser = () => typeof window !== 'undefined' && typeof window.document !== 'undefined';\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport const isWebWorker = () => {\n    if (typeof self === 'undefined') {\n        return false;\n    }\n    const selfContext = self;\n    return (typeof selfContext.WorkerGlobalScope !== 'undefined' &&\n        self instanceof selfContext.WorkerGlobalScope);\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport class NonRetryableError extends Error {\n    constructor() {\n        super(...arguments);\n        this.nonRetryable = true;\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport const isNonRetryableError = (obj) => {\n    const key = 'nonRetryable';\n    return obj && obj[key];\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport const MAX_DELAY_MS = 5 * 60 * 1000;\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { MAX_DELAY_MS } from './constants';\n/**\n * @private\n * Internal use of Amplify only\n */\nexport function jitteredBackoff(maxDelayMs = MAX_DELAY_MS) {\n    const BASE_TIME_MS = 100;\n    const JITTER_FACTOR = 100;\n    return attempt => {\n        const delay = 2 ** attempt * BASE_TIME_MS + JITTER_FACTOR * Math.random();\n        return delay > maxDelayMs ? false : delay;\n    };\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { ConsoleLogger } from '../../Logger/ConsoleLogger';\nimport { isNonRetryableError } from './isNonRetryableError';\nconst logger = new ConsoleLogger('retryUtil');\n/**\n * @private\n * Internal use of Amplify only\n */\nexport async function retry(functionToRetry, args, delayFn, onTerminate) {\n    if (typeof functionToRetry !== 'function') {\n        throw Error('functionToRetry must be a function');\n    }\n    // TODO(eslint): remove this linter suppression with refactoring.\n    // eslint-disable-next-line no-async-promise-executor\n    return new Promise(async (resolve, reject) => {\n        let attempt = 0;\n        let terminated = false;\n        let timeout;\n        let wakeUp = () => {\n            // no-op\n        }; // will be replaced with a resolver()\n        // used after the loop if terminated while waiting for a timer.\n        let lastError;\n        onTerminate &&\n            onTerminate.then(() => {\n                // signal not to try anymore.\n                terminated = true;\n                // stop sleeping if we're sleeping.\n                clearTimeout(timeout);\n                wakeUp();\n            });\n        // TODO(eslint): remove this linter suppression with refactoring.\n        // eslint-disable-next-line no-unmodified-loop-condition\n        while (!terminated) {\n            attempt++;\n            logger.debug(`${functionToRetry.name} attempt #${attempt} with this vars: ${JSON.stringify(args)}`);\n            try {\n                resolve(await functionToRetry(...args));\n                return;\n            }\n            catch (err) {\n                lastError = err;\n                logger.debug(`error on ${functionToRetry.name}`, err);\n                if (isNonRetryableError(err)) {\n                    logger.debug(`${functionToRetry.name} non retryable error`, err);\n                    reject(err);\n                    return;\n                }\n                const retryIn = delayFn(attempt, args, err);\n                logger.debug(`${functionToRetry.name} retrying in ${retryIn} ms`);\n                // we check `terminated` again here because it could have flipped\n                // in the time it took `functionToRetry` to return.\n                if (retryIn === false || terminated) {\n                    reject(err);\n                    return;\n                }\n                else {\n                    await new Promise(_resolve => {\n                        wakeUp = _resolve; // export wakeUp for onTerminate handling\n                        timeout = setTimeout(wakeUp, retryIn);\n                    });\n                }\n            }\n        }\n        // reached if terminated while waiting for a timer.\n        reject(lastError);\n    });\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { MAX_DELAY_MS } from './constants';\nimport { jitteredBackoff } from './jitteredBackoff';\nimport { retry } from './retry';\n/**\n * @private\n * Internal use of Amplify only\n */\nexport const jitteredExponentialRetry = (functionToRetry, args, maxDelayMs = MAX_DELAY_MS, onTerminate) => retry(functionToRetry, args, jitteredBackoff(maxDelayMs), onTerminate);\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport function urlSafeDecode(hex) {\n    const matchArr = hex.match(/.{2}/g) || [];\n    return matchArr.map(char => String.fromCharCode(parseInt(char, 16))).join('');\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * returns in-flight promise if there is one\n *\n * @param asyncFunction - asyncFunction to be deduped.\n * @returns - the return type of the callback\n */\nexport const deDupeAsyncFunction = (asyncFunction) => {\n    let inflightPromise;\n    return async (...args) => {\n        if (inflightPromise)\n            return inflightPromise;\n        inflightPromise = new Promise((resolve, reject) => {\n            asyncFunction(...args)\n                .then(result => {\n                resolve(result);\n            })\n                .catch(error => {\n                reject(error);\n            })\n                .finally(() => {\n                inflightPromise = undefined;\n            });\n        });\n        return inflightPromise;\n    };\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport function isTokenExpired({ expiresAt, clockDrift, tolerance = 5000, }) {\n    const currentTime = Date.now();\n    return currentTime + clockDrift + tolerance > expiresAt;\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { ConsoleLogger } from './Logger';\nimport { AmplifyError } from './errors';\nconst logger = new ConsoleLogger('parseAWSExports');\nconst authTypeMapping = {\n    API_KEY: 'apiKey',\n    AWS_IAM: 'iam',\n    AMAZON_COGNITO_USER_POOLS: 'userPool',\n    OPENID_CONNECT: 'oidc',\n    NONE: 'none',\n    AWS_LAMBDA: 'lambda',\n    // `LAMBDA` is an incorrect value that was added during the v6 rewrite.\n    // Keeping it as a valid value until v7 to prevent breaking customers who might\n    // be relying on it as a workaround.\n    // ref: https://github.com/aws-amplify/amplify-js/pull/12922\n    // TODO: @v7 remove next line\n    LAMBDA: 'lambda',\n};\n/**\n * Converts the object imported from `aws-exports.js` or `amplifyconfiguration.json` files generated by\n * the Amplify CLI into an object that conforms to the {@link ResourcesConfig}.\n *\n * @param config A configuration object imported  from `aws-exports.js` or `amplifyconfiguration.json`.\n *\n * @returns An object that conforms to the {@link ResourcesConfig} .\n */\nexport const parseAWSExports = (config = {}) => {\n    if (!Object.prototype.hasOwnProperty.call(config, 'aws_project_region')) {\n        throw new AmplifyError({\n            name: 'InvalidParameterException',\n            message: 'Invalid config parameter.',\n            recoverySuggestion: 'Ensure passing the config object imported from  `amplifyconfiguration.json`.',\n        });\n    }\n    const { aws_appsync_apiKey, aws_appsync_authenticationType, aws_appsync_graphqlEndpoint, aws_appsync_region, aws_bots_config, aws_cognito_identity_pool_id, aws_cognito_sign_up_verification_method, aws_cognito_mfa_configuration, aws_cognito_mfa_types, aws_cognito_password_protection_settings, aws_cognito_verification_mechanisms, aws_cognito_signup_attributes, aws_cognito_social_providers, aws_cognito_username_attributes, aws_mandatory_sign_in, aws_mobile_analytics_app_id, aws_mobile_analytics_app_region, aws_user_files_s3_bucket, aws_user_files_s3_bucket_region, aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing, aws_user_pools_id, aws_user_pools_web_client_id, geo, oauth, predictions, aws_cloud_logic_custom, Notifications, modelIntrospection, } = config;\n    const amplifyConfig = {};\n    // Analytics\n    if (aws_mobile_analytics_app_id) {\n        amplifyConfig.Analytics = {\n            Pinpoint: {\n                appId: aws_mobile_analytics_app_id,\n                region: aws_mobile_analytics_app_region,\n            },\n        };\n    }\n    // Notifications\n    const { InAppMessaging, Push } = Notifications ?? {};\n    if (InAppMessaging?.AWSPinpoint || Push?.AWSPinpoint) {\n        if (InAppMessaging?.AWSPinpoint) {\n            const { appId, region } = InAppMessaging.AWSPinpoint;\n            amplifyConfig.Notifications = {\n                InAppMessaging: {\n                    Pinpoint: {\n                        appId,\n                        region,\n                    },\n                },\n            };\n        }\n        if (Push?.AWSPinpoint) {\n            const { appId, region } = Push.AWSPinpoint;\n            amplifyConfig.Notifications = {\n                ...amplifyConfig.Notifications,\n                PushNotification: {\n                    Pinpoint: {\n                        appId,\n                        region,\n                    },\n                },\n            };\n        }\n    }\n    // Interactions\n    if (Array.isArray(aws_bots_config)) {\n        amplifyConfig.Interactions = {\n            LexV1: Object.fromEntries(aws_bots_config.map(bot => [bot.name, bot])),\n        };\n    }\n    // API\n    if (aws_appsync_graphqlEndpoint) {\n        const defaultAuthMode = authTypeMapping[aws_appsync_authenticationType];\n        if (!defaultAuthMode) {\n            logger.debug(`Invalid authentication type ${aws_appsync_authenticationType}. Falling back to IAM.`);\n        }\n        amplifyConfig.API = {\n            GraphQL: {\n                endpoint: aws_appsync_graphqlEndpoint,\n                apiKey: aws_appsync_apiKey,\n                region: aws_appsync_region,\n                defaultAuthMode: defaultAuthMode ?? 'iam',\n            },\n        };\n        if (modelIntrospection) {\n            amplifyConfig.API.GraphQL.modelIntrospection = modelIntrospection;\n        }\n    }\n    // Auth\n    const mfaConfig = aws_cognito_mfa_configuration\n        ? {\n            status: aws_cognito_mfa_configuration &&\n                aws_cognito_mfa_configuration.toLowerCase(),\n            totpEnabled: aws_cognito_mfa_types?.includes('TOTP') ?? false,\n            smsEnabled: aws_cognito_mfa_types?.includes('SMS') ?? false,\n        }\n        : undefined;\n    const passwordFormatConfig = aws_cognito_password_protection_settings\n        ? {\n            minLength: aws_cognito_password_protection_settings.passwordPolicyMinLength,\n            requireLowercase: aws_cognito_password_protection_settings.passwordPolicyCharacters?.includes('REQUIRES_LOWERCASE') ?? false,\n            requireUppercase: aws_cognito_password_protection_settings.passwordPolicyCharacters?.includes('REQUIRES_UPPERCASE') ?? false,\n            requireNumbers: aws_cognito_password_protection_settings.passwordPolicyCharacters?.includes('REQUIRES_NUMBERS') ?? false,\n            requireSpecialCharacters: aws_cognito_password_protection_settings.passwordPolicyCharacters?.includes('REQUIRES_SYMBOLS') ?? false,\n        }\n        : undefined;\n    const mergedUserAttributes = Array.from(new Set([\n        ...(aws_cognito_verification_mechanisms ?? []),\n        ...(aws_cognito_signup_attributes ?? []),\n    ]));\n    const userAttributes = mergedUserAttributes.reduce((attributes, key) => ({\n        ...attributes,\n        // All user attributes generated by the CLI are required\n        [key.toLowerCase()]: { required: true },\n    }), {});\n    const loginWithEmailEnabled = aws_cognito_username_attributes?.includes('EMAIL') ?? false;\n    const loginWithPhoneEnabled = aws_cognito_username_attributes?.includes('PHONE_NUMBER') ?? false;\n    if (aws_cognito_identity_pool_id || aws_user_pools_id) {\n        amplifyConfig.Auth = {\n            Cognito: {\n                identityPoolId: aws_cognito_identity_pool_id,\n                allowGuestAccess: aws_mandatory_sign_in !== 'enable',\n                signUpVerificationMethod: aws_cognito_sign_up_verification_method,\n                userAttributes,\n                userPoolClientId: aws_user_pools_web_client_id,\n                userPoolId: aws_user_pools_id,\n                mfa: mfaConfig,\n                passwordFormat: passwordFormatConfig,\n                loginWith: {\n                    username: !(loginWithEmailEnabled || loginWithPhoneEnabled),\n                    email: loginWithEmailEnabled,\n                    phone: loginWithPhoneEnabled,\n                },\n            },\n        };\n    }\n    const hasOAuthConfig = oauth ? Object.keys(oauth).length > 0 : false;\n    const hasSocialProviderConfig = aws_cognito_social_providers\n        ? aws_cognito_social_providers.length > 0\n        : false;\n    if (amplifyConfig.Auth && hasOAuthConfig) {\n        amplifyConfig.Auth.Cognito.loginWith = {\n            ...amplifyConfig.Auth.Cognito.loginWith,\n            oauth: {\n                ...getOAuthConfig(oauth),\n                ...(hasSocialProviderConfig && {\n                    providers: parseSocialProviders(aws_cognito_social_providers),\n                }),\n            },\n        };\n    }\n    // Storage\n    if (aws_user_files_s3_bucket) {\n        amplifyConfig.Storage = {\n            S3: {\n                bucket: aws_user_files_s3_bucket,\n                region: aws_user_files_s3_bucket_region,\n                dangerouslyConnectToHttpEndpointForTesting: aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing,\n            },\n        };\n    }\n    // Geo\n    if (geo) {\n        const { amazon_location_service } = geo;\n        amplifyConfig.Geo = {\n            LocationService: {\n                maps: amazon_location_service.maps,\n                geofenceCollections: amazon_location_service.geofenceCollections,\n                searchIndices: amazon_location_service.search_indices,\n                region: amazon_location_service.region,\n            },\n        };\n    }\n    // REST API\n    if (aws_cloud_logic_custom) {\n        amplifyConfig.API = {\n            ...amplifyConfig.API,\n            REST: aws_cloud_logic_custom.reduce((acc, api) => {\n                const { name, endpoint, region, service } = api;\n                return {\n                    ...acc,\n                    [name]: {\n                        endpoint,\n                        ...(service ? { service } : undefined),\n                        ...(region ? { region } : undefined),\n                    },\n                };\n            }, {}),\n        };\n    }\n    // Predictions\n    if (predictions) {\n        // map VoiceId from speechGenerator defaults to voiceId\n        const { VoiceId: voiceId } = predictions?.convert?.speechGenerator?.defaults ?? {};\n        amplifyConfig.Predictions = voiceId\n            ? {\n                ...predictions,\n                convert: {\n                    ...predictions.convert,\n                    speechGenerator: {\n                        ...predictions.convert.speechGenerator,\n                        defaults: { voiceId },\n                    },\n                },\n            }\n            : predictions;\n    }\n    return amplifyConfig;\n};\nconst getRedirectUrl = (redirectStr) => redirectStr?.split(',') ?? [];\nconst getOAuthConfig = ({ domain, scope, redirectSignIn, redirectSignOut, responseType, }) => ({\n    domain,\n    scopes: scope,\n    redirectSignIn: getRedirectUrl(redirectSignIn),\n    redirectSignOut: getRedirectUrl(redirectSignOut),\n    responseType,\n});\nconst parseSocialProviders = (aws_cognito_social_providers) => {\n    return aws_cognito_social_providers.map((provider) => {\n        const updatedProvider = provider.toLowerCase();\n        return updatedProvider.charAt(0).toUpperCase() + updatedProvider.slice(1);\n    });\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport function isAmplifyOutputs(config) {\n    // version format initially will be '1' but is expected to be something like x.y where x is major and y minor version\n    const { version } = config;\n    if (!version) {\n        return false;\n    }\n    return version.startsWith('1');\n}\nfunction parseStorage(amplifyOutputsStorageProperties) {\n    if (!amplifyOutputsStorageProperties) {\n        return undefined;\n    }\n    const { bucket_name, aws_region, buckets } = amplifyOutputsStorageProperties;\n    return {\n        S3: {\n            bucket: bucket_name,\n            region: aws_region,\n            buckets: buckets && createBucketInfoMap(buckets),\n        },\n    };\n}\nfunction parseAuth(amplifyOutputsAuthProperties) {\n    if (!amplifyOutputsAuthProperties) {\n        return undefined;\n    }\n    const { user_pool_id, user_pool_client_id, identity_pool_id, password_policy, mfa_configuration, mfa_methods, unauthenticated_identities_enabled, oauth, username_attributes, standard_required_attributes, groups, } = amplifyOutputsAuthProperties;\n    const authConfig = {\n        Cognito: {\n            userPoolId: user_pool_id,\n            userPoolClientId: user_pool_client_id,\n            groups,\n        },\n    };\n    if (identity_pool_id) {\n        authConfig.Cognito = {\n            ...authConfig.Cognito,\n            identityPoolId: identity_pool_id,\n        };\n    }\n    if (password_policy) {\n        authConfig.Cognito.passwordFormat = {\n            requireLowercase: password_policy.require_lowercase,\n            requireNumbers: password_policy.require_numbers,\n            requireUppercase: password_policy.require_uppercase,\n            requireSpecialCharacters: password_policy.require_symbols,\n            minLength: password_policy.min_length ?? 6,\n        };\n    }\n    if (mfa_configuration) {\n        authConfig.Cognito.mfa = {\n            status: getMfaStatus(mfa_configuration),\n            smsEnabled: mfa_methods?.includes('SMS'),\n            totpEnabled: mfa_methods?.includes('TOTP'),\n        };\n    }\n    if (unauthenticated_identities_enabled) {\n        authConfig.Cognito.allowGuestAccess = unauthenticated_identities_enabled;\n    }\n    if (oauth) {\n        authConfig.Cognito.loginWith = {\n            oauth: {\n                domain: oauth.domain,\n                redirectSignIn: oauth.redirect_sign_in_uri,\n                redirectSignOut: oauth.redirect_sign_out_uri,\n                responseType: oauth.response_type === 'token' ? 'token' : 'code',\n                scopes: oauth.scopes,\n                providers: getOAuthProviders(oauth.identity_providers),\n            },\n        };\n    }\n    if (username_attributes) {\n        authConfig.Cognito.loginWith = {\n            ...authConfig.Cognito.loginWith,\n            email: username_attributes.includes('email'),\n            phone: username_attributes.includes('phone_number'),\n            // Signing in with a username is not currently supported in Gen2, this should always evaluate to false\n            username: username_attributes.includes('username'),\n        };\n    }\n    if (standard_required_attributes) {\n        authConfig.Cognito.userAttributes = standard_required_attributes.reduce((acc, curr) => ({ ...acc, [curr]: { required: true } }), {});\n    }\n    return authConfig;\n}\nexport function parseAnalytics(amplifyOutputsAnalyticsProperties) {\n    if (!amplifyOutputsAnalyticsProperties?.amazon_pinpoint) {\n        return undefined;\n    }\n    const { amazon_pinpoint } = amplifyOutputsAnalyticsProperties;\n    return {\n        Pinpoint: {\n            appId: amazon_pinpoint.app_id,\n            region: amazon_pinpoint.aws_region,\n        },\n    };\n}\nfunction parseGeo(amplifyOutputsAnalyticsProperties) {\n    if (!amplifyOutputsAnalyticsProperties) {\n        return undefined;\n    }\n    const { aws_region, geofence_collections, maps, search_indices } = amplifyOutputsAnalyticsProperties;\n    return {\n        LocationService: {\n            region: aws_region,\n            searchIndices: search_indices,\n            geofenceCollections: geofence_collections,\n            maps,\n        },\n    };\n}\nfunction parseData(amplifyOutputsDataProperties) {\n    if (!amplifyOutputsDataProperties) {\n        return undefined;\n    }\n    const { aws_region, default_authorization_type, url, api_key, model_introspection, } = amplifyOutputsDataProperties;\n    const GraphQL = {\n        endpoint: url,\n        defaultAuthMode: getGraphQLAuthMode(default_authorization_type),\n        region: aws_region,\n        apiKey: api_key,\n        modelIntrospection: model_introspection,\n    };\n    return {\n        GraphQL,\n    };\n}\nfunction parseCustom(amplifyOutputsCustomProperties) {\n    if (!amplifyOutputsCustomProperties?.events) {\n        return undefined;\n    }\n    const { url, aws_region, api_key, default_authorization_type } = amplifyOutputsCustomProperties.events;\n    const Events = {\n        endpoint: url,\n        defaultAuthMode: getGraphQLAuthMode(default_authorization_type),\n        region: aws_region,\n        apiKey: api_key,\n    };\n    return {\n        Events,\n    };\n}\nfunction parseNotifications(amplifyOutputsNotificationsProperties) {\n    if (!amplifyOutputsNotificationsProperties) {\n        return undefined;\n    }\n    const { aws_region, channels, amazon_pinpoint_app_id } = amplifyOutputsNotificationsProperties;\n    const hasInAppMessaging = channels.includes('IN_APP_MESSAGING');\n    const hasPushNotification = channels.includes('APNS') || channels.includes('FCM');\n    if (!(hasInAppMessaging || hasPushNotification)) {\n        return undefined;\n    }\n    // At this point, we know the Amplify outputs contains at least one supported channel\n    const notificationsConfig = {};\n    if (hasInAppMessaging) {\n        notificationsConfig.InAppMessaging = {\n            Pinpoint: {\n                appId: amazon_pinpoint_app_id,\n                region: aws_region,\n            },\n        };\n    }\n    if (hasPushNotification) {\n        notificationsConfig.PushNotification = {\n            Pinpoint: {\n                appId: amazon_pinpoint_app_id,\n                region: aws_region,\n            },\n        };\n    }\n    return notificationsConfig;\n}\nexport function parseAmplifyOutputs(amplifyOutputs) {\n    const resourcesConfig = {};\n    if (amplifyOutputs.storage) {\n        resourcesConfig.Storage = parseStorage(amplifyOutputs.storage);\n    }\n    if (amplifyOutputs.auth) {\n        resourcesConfig.Auth = parseAuth(amplifyOutputs.auth);\n    }\n    if (amplifyOutputs.analytics) {\n        resourcesConfig.Analytics = parseAnalytics(amplifyOutputs.analytics);\n    }\n    if (amplifyOutputs.geo) {\n        resourcesConfig.Geo = parseGeo(amplifyOutputs.geo);\n    }\n    if (amplifyOutputs.data) {\n        resourcesConfig.API = parseData(amplifyOutputs.data);\n    }\n    if (amplifyOutputs.custom) {\n        const customConfig = parseCustom(amplifyOutputs.custom);\n        if (customConfig && 'Events' in customConfig) {\n            resourcesConfig.API = { ...resourcesConfig.API, ...customConfig };\n        }\n    }\n    if (amplifyOutputs.notifications) {\n        resourcesConfig.Notifications = parseNotifications(amplifyOutputs.notifications);\n    }\n    return resourcesConfig;\n}\nconst authModeNames = {\n    AMAZON_COGNITO_USER_POOLS: 'userPool',\n    API_KEY: 'apiKey',\n    AWS_IAM: 'iam',\n    AWS_LAMBDA: 'lambda',\n    OPENID_CONNECT: 'oidc',\n};\nfunction getGraphQLAuthMode(authType) {\n    return authModeNames[authType];\n}\nconst providerNames = {\n    GOOGLE: 'Google',\n    LOGIN_WITH_AMAZON: 'Amazon',\n    FACEBOOK: 'Facebook',\n    SIGN_IN_WITH_APPLE: 'Apple',\n};\nfunction getOAuthProviders(providers = []) {\n    return providers.reduce((oAuthProviders, provider) => {\n        if (providerNames[provider] !== undefined) {\n            oAuthProviders.push(providerNames[provider]);\n        }\n        return oAuthProviders;\n    }, []);\n}\nfunction getMfaStatus(mfaConfiguration) {\n    if (mfaConfiguration === 'OPTIONAL')\n        return 'optional';\n    if (mfaConfiguration === 'REQUIRED')\n        return 'on';\n    return 'off';\n}\nfunction createBucketInfoMap(buckets) {\n    const mappedBuckets = {};\n    buckets.forEach(({ name, bucket_name: bucketName, aws_region: region, paths }) => {\n        if (name in mappedBuckets) {\n            throw new Error(`Duplicate friendly name found: ${name}. Name must be unique.`);\n        }\n        const sanitizedPaths = paths\n            ? Object.entries(paths).reduce((acc, [key, value]) => {\n                if (value !== undefined) {\n                    acc[key] = value;\n                }\n                return acc;\n            }, {})\n            : undefined;\n        mappedBuckets[name] = {\n            bucketName,\n            region,\n            paths: sanitizedPaths,\n        };\n    });\n    return mappedBuckets;\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport const ADD_OAUTH_LISTENER = Symbol('oauth-listener');\n", "// Unique ID creation requires a high quality random # generator. In the browser we therefore\r\n// require the crypto API and do not support built-in fallback to lower quality random number\r\n// generators (like Math.random()).\r\nlet getRandomValues;\r\nconst rnds8 = new Uint8Array(16);\r\nexport default function rng() {\r\n  // lazy load so that environments that need to polyfill have a chance to do so\r\n  if (!getRandomValues) {\r\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\r\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\r\n\r\n    if (!getRandomValues) {\r\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\r\n    }\r\n  }\r\n\r\n  return getRandomValues(rnds8);\r\n}", "import validate from './validate.js';\r\n/**\r\n * Convert array of 16 byte values to UUID string format of the form:\r\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\r\n */\r\n\r\nconst byteToHex = [];\r\n\r\nfor (let i = 0; i < 256; ++i) {\r\n  byteToHex.push((i + 0x100).toString(16).slice(1));\r\n}\r\n\r\nexport function unsafeStringify(arr, offset = 0) {\r\n  // Note: Be careful editing this code!  It's been tuned for performance\r\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\r\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\r\n}\r\n\r\nfunction stringify(arr, offset = 0) {\r\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\r\n  // of the following:\r\n  // - One or more input array values don't map to a hex octet (leading to\r\n  // \"undefined\" in the uuid)\r\n  // - Invalid input values for the RFC `version` or `variant` fields\r\n\r\n  if (!validate(uuid)) {\r\n    throw TypeError('Stringified UUID is invalid');\r\n  }\r\n\r\n  return uuid;\r\n}\r\n\r\nexport default stringify;", "const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\r\nexport default {\r\n  randomUUID\r\n};", "import native from './native.js';\r\nimport rng from './rng.js';\r\nimport { unsafeStringify } from './stringify.js';\r\n\r\nfunction v4(options, buf, offset) {\r\n  if (native.randomUUID && !buf && !options) {\r\n    return native.randomUUID();\r\n  }\r\n\r\n  options = options || {};\r\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\r\n\r\n  rnds[6] = rnds[6] & 0x0f | 0x40;\r\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\r\n\r\n  if (buf) {\r\n    offset = offset || 0;\r\n\r\n    for (let i = 0; i < 16; ++i) {\r\n      buf[offset + i] = rnds[i];\r\n    }\r\n\r\n    return buf;\r\n  }\r\n\r\n  return unsafeStringify(rnds);\r\n}\r\n\r\nexport default v4;", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { v4 } from 'uuid';\nconst amplifyUuid = v4;\nexport { amplifyUuid };\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst AmplifyUrl = URL;\nconst AmplifyUrlSearchParams = URLSearchParams;\nexport { AmplifyUrl, AmplifyUrlSearchParams };\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { parseAWSExports } from '../parseAWSExports';\nimport { isAmplifyOutputs, parseAmplifyOutputs } from '../parseAmplifyOutputs';\n/**\n * Parses the variety of configuration shapes that Amplify can accept into a ResourcesConfig.\n *\n * @param amplifyConfig An Amplify configuration object conforming to one of the supported schemas.\n * @return A ResourcesConfig for the provided configuration object.\n */\nexport const parseAmplifyConfig = (amplifyConfig) => {\n    if (Object.keys(amplifyConfig).some(key => key.startsWith('aws_'))) {\n        return parseAWSExports(amplifyConfig);\n    }\n    else if (isAmplifyOutputs(amplifyConfig)) {\n        return parseAmplifyOutputs(amplifyConfig);\n    }\n    else {\n        return amplifyConfig;\n    }\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { getAtob } from '../../globalHelpers';\nexport const base64Decoder = {\n    convert(input, options) {\n        let inputStr = input;\n        // urlSafe character replacement options conform to the base64 url spec\n        // https://datatracker.ietf.org/doc/html/rfc4648#page-7\n        if (options?.urlSafe) {\n            inputStr = inputStr.replace(/-/g, '+').replace(/_/g, '/');\n        }\n        return getAtob()(inputStr);\n    },\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { createAssertionFunction } from '../../../errors';\nexport var AuthConfigurationErrorCode;\n(function (AuthConfigurationErrorCode) {\n    AuthConfigurationErrorCode[\"AuthTokenConfigException\"] = \"AuthTokenConfigException\";\n    AuthConfigurationErrorCode[\"AuthUserPoolAndIdentityPoolException\"] = \"AuthUserPoolAndIdentityPoolException\";\n    AuthConfigurationErrorCode[\"AuthUserPoolException\"] = \"AuthUserPoolException\";\n    AuthConfigurationErrorCode[\"InvalidIdentityPoolIdException\"] = \"InvalidIdentityPoolIdException\";\n    AuthConfigurationErrorCode[\"OAuthNotConfigureException\"] = \"OAuthNotConfigureException\";\n})(AuthConfigurationErrorCode || (AuthConfigurationErrorCode = {}));\nconst authConfigurationErrorMap = {\n    [AuthConfigurationErrorCode.AuthTokenConfigException]: {\n        message: 'Auth Token Provider not configured.',\n        recoverySuggestion: 'Make sure to call Amplify.configure in your app.',\n    },\n    [AuthConfigurationErrorCode.AuthUserPoolAndIdentityPoolException]: {\n        message: 'Auth UserPool or IdentityPool not configured.',\n        recoverySuggestion: 'Make sure to call Amplify.configure in your app with UserPoolId and IdentityPoolId.',\n    },\n    [AuthConfigurationErrorCode.AuthUserPoolException]: {\n        message: 'Auth UserPool not configured.',\n        recoverySuggestion: 'Make sure to call Amplify.configure in your app with userPoolId and userPoolClientId.',\n    },\n    [AuthConfigurationErrorCode.InvalidIdentityPoolIdException]: {\n        message: 'Invalid identity pool id provided.',\n        recoverySuggestion: 'Make sure a valid identityPoolId is given in the config.',\n    },\n    [AuthConfigurationErrorCode.OAuthNotConfigureException]: {\n        message: 'oauth param not configured.',\n        recoverySuggestion: 'Make sure to call Amplify.configure with oauth parameter in your app.',\n    },\n};\nexport const assert = createAssertionFunction(authConfigurationErrorMap);\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { base64Decoder } from '../../../utils/convert';\nimport { AuthConfigurationErrorCode, assert } from './errorHelpers';\nexport function assertTokenProviderConfig(cognitoConfig) {\n    let assertionValid = true; // assume valid until otherwise proveed\n    if (!cognitoConfig) {\n        assertionValid = false;\n    }\n    else {\n        assertionValid =\n            !!cognitoConfig.userPoolId && !!cognitoConfig.userPoolClientId;\n    }\n    assert(assertionValid, AuthConfigurationErrorCode.AuthUserPoolException);\n}\nexport function assertOAuthConfig(cognitoConfig) {\n    const validOAuthConfig = !!cognitoConfig?.loginWith?.oauth?.domain &&\n        !!cognitoConfig?.loginWith?.oauth?.redirectSignOut &&\n        !!cognitoConfig?.loginWith?.oauth?.redirectSignIn &&\n        !!cognitoConfig?.loginWith?.oauth?.responseType;\n    assert(validOAuthConfig, AuthConfigurationErrorCode.OAuthNotConfigureException);\n}\nexport function assertIdentityPoolIdConfig(cognitoConfig) {\n    const validConfig = !!cognitoConfig?.identityPoolId;\n    assert(validConfig, AuthConfigurationErrorCode.InvalidIdentityPoolIdException);\n}\n/**\n * Decodes payload of JWT token\n *\n * @param {String} token A string representing a token to be decoded\n * @throws {@link Error} - Throws error when token is invalid or payload malformed.\n */\nexport function decodeJWT(token) {\n    const tokenParts = token.split('.');\n    if (tokenParts.length !== 3) {\n        throw new Error('Invalid token');\n    }\n    try {\n        const base64WithUrlSafe = tokenParts[1];\n        const base64 = base64WithUrlSafe.replace(/-/g, '+').replace(/_/g, '/');\n        const jsonStr = decodeURIComponent(base64Decoder\n            .convert(base64)\n            .split('')\n            .map(char => `%${`00${char.charCodeAt(0).toString(16)}`.slice(-2)}`)\n            .join(''));\n        const payload = JSON.parse(jsonStr);\n        return {\n            toString: () => token,\n            payload,\n        };\n    }\n    catch (err) {\n        throw new Error('Invalid token payload');\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns signed headers.\n *\n * @param headers `headers` from the request.\n * @returns List of headers included in canonical headers, separated by semicolons (;). This indicates which headers\n * are part of the signing process. Header names must use lowercase characters and must appear in alphabetical order.\n *\n * @internal\n */\nexport const getSignedHeaders = (headers) => Object.keys(headers)\n    .map(key => key.toLowerCase())\n    .sort()\n    .join(';');\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// query params\nexport const ALGORITHM_QUERY_PARAM = 'X-Amz-Algorithm';\nexport const AMZ_DATE_QUERY_PARAM = 'X-Amz-Date';\nexport const CREDENTIAL_QUERY_PARAM = 'X-Amz-Credential';\nexport const EXPIRES_QUERY_PARAM = 'X-Amz-Expires';\nexport const REGION_SET_PARAM = 'X-Amz-Region-Set';\nexport const SIGNATURE_QUERY_PARAM = 'X-Amz-Signature';\nexport const SIGNED_HEADERS_QUERY_PARAM = 'X-Amz-SignedHeaders';\nexport const TOKEN_QUERY_PARAM = 'X-Amz-Security-Token';\n// headers\nexport const AUTH_HEADER = 'authorization';\nexport const HOST_HEADER = 'host';\nexport const AMZ_DATE_HEADER = AMZ_DATE_QUERY_PARAM.toLowerCase();\nexport const TOKEN_HEADER = TOKEN_QUERY_PARAM.toLowerCase();\n// identifiers\nexport const KEY_TYPE_IDENTIFIER = 'aws4_request';\nexport const SHA256_ALGORITHM_IDENTIFIER = 'AWS4-HMAC-SHA256';\nexport const SIGNATURE_IDENTIFIER = 'AWS4';\n// preset values\nexport const EMPTY_HASH = 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855';\nexport const UNSIGNED_PAYLOAD = 'UNSIGNED-PAYLOAD';\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { KEY_TYPE_IDENTIFIER } from '../constants';\n/**\n * Returns the credential scope which restricts the resulting signature to the specified region and service.\n *\n * @param date Current date in the format 'YYYYMMDD'.\n * @param region AWS region in which the service resides.\n * @param service Service to which the signed request is being sent.\n *\n * @returns  A string representing the credential scope with format 'YYYYMMDD/region/service/aws4_request'.\n *\n * @internal\n */\nexport const getCredentialScope = (date, region, service) => `${date}/${region}/${service}/${KEY_TYPE_IDENTIFIER}`;\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns expected date strings to be used in signing.\n *\n * @param date JavaScript `Date` object.\n * @returns `FormattedDates` object containing the following:\n * - longDate: A date string in 'YYYYMMDDThhmmssZ' format\n * - shortDate: A date string in 'YYYYMMDD' format\n *\n * @internal\n */\nexport const getFormattedDates = (date) => {\n    const longDate = date.toISOString().replace(/[:-]|\\.\\d{3}/g, '');\n    return {\n        longDate,\n        shortDate: longDate.slice(0, 8),\n    };\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { getCredentialScope } from './getCredentialScope';\nimport { getFormattedDates } from './getFormattedDates';\n/**\n * Extracts common values used for signing both requests and urls.\n *\n * @param options `SignRequestOptions` object containing values used to construct the signature.\n * @returns Common `SigningValues` used for signing.\n *\n * @internal\n */\nexport const getSigningValues = ({ credentials, signingDate = new Date(), signingRegion, signingService, uriEscapePath = true, }) => {\n    // get properties from credentials\n    const { accessKeyId, secretAccessKey, sessionToken } = credentials;\n    // get formatted dates for signing\n    const { longDate, shortDate } = getFormattedDates(signingDate);\n    // copy header and set signing properties\n    const credentialScope = getCredentialScope(shortDate, signingRegion, signingService);\n    return {\n        accessKeyId,\n        credentialScope,\n        longDate,\n        secretAccessKey,\n        sessionToken,\n        shortDate,\n        signingRegion,\n        signingService,\n        uriEscapePath,\n    };\n};\n", "/**\r\n * @internal\r\n */\r\nexport const BLOCK_SIZE: number = 64;\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const DIGEST_LENGTH: number = 32;\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const KEY = new Uint32Array([\r\n  0x428a2f98,\r\n  0x71374491,\r\n  0xb5c0fbcf,\r\n  0xe9b5dba5,\r\n  0x3956c25b,\r\n  0x59f111f1,\r\n  0x923f82a4,\r\n  0xab1c5ed5,\r\n  0xd807aa98,\r\n  0x12835b01,\r\n  0x243185be,\r\n  0x550c7dc3,\r\n  0x72be5d74,\r\n  0x80deb1fe,\r\n  0x9bdc06a7,\r\n  0xc19bf174,\r\n  0xe49b69c1,\r\n  0xefbe4786,\r\n  0x0fc19dc6,\r\n  0x240ca1cc,\r\n  0x2de92c6f,\r\n  0x4a7484aa,\r\n  0x5cb0a9dc,\r\n  0x76f988da,\r\n  0x983e5152,\r\n  0xa831c66d,\r\n  0xb00327c8,\r\n  0xbf597fc7,\r\n  0xc6e00bf3,\r\n  0xd5a79147,\r\n  0x06ca6351,\r\n  0x14292967,\r\n  0x27b70a85,\r\n  0x2e1b2138,\r\n  0x4d2c6dfc,\r\n  0x53380d13,\r\n  0x650a7354,\r\n  0x766a0abb,\r\n  0x81c2c92e,\r\n  0x92722c85,\r\n  0xa2bfe8a1,\r\n  0xa81a664b,\r\n  0xc24b8b70,\r\n  0xc76c51a3,\r\n  0xd192e819,\r\n  0xd6990624,\r\n  0xf40e3585,\r\n  0x106aa070,\r\n  0x19a4c116,\r\n  0x1e376c08,\r\n  0x2748774c,\r\n  0x34b0bcb5,\r\n  0x391c0cb3,\r\n  0x4ed8aa4a,\r\n  0x5b9cca4f,\r\n  0x682e6ff3,\r\n  0x748f82ee,\r\n  0x78a5636f,\r\n  0x84c87814,\r\n  0x8cc70208,\r\n  0x90befffa,\r\n  0xa4506ceb,\r\n  0xbef9a3f7,\r\n  0xc67178f2\r\n]);\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const INIT = [\r\n  0x6a09e667,\r\n  0xbb67ae85,\r\n  0x3c6ef372,\r\n  0xa54ff53a,\r\n  0x510e527f,\r\n  0x9b05688c,\r\n  0x1f83d9ab,\r\n  0x5be0cd19\r\n];\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const MAX_HASHABLE_LENGTH = 2 ** 53 - 1;\r\n", "import {\r\n  BLOCK_SIZE,\r\n  DIGEST_LENGTH,\r\n  INIT,\r\n  KEY,\r\n  MAX_HASHABLE_LENGTH\r\n} from \"./constants\";\r\n\r\n/**\r\n * @internal\r\n */\r\nexport class RawSha256 {\r\n  private state: Int32Array = Int32Array.from(INIT);\r\n  private temp: Int32Array = new Int32Array(64);\r\n  private buffer: Uint8Array = new Uint8Array(64);\r\n  private bufferLength: number = 0;\r\n  private bytesHashed: number = 0;\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  finished: boolean = false;\r\n\r\n  update(data: Uint8Array): void {\r\n    if (this.finished) {\r\n      throw new Error(\"Attempted to update an already finished hash.\");\r\n    }\r\n\r\n    let position = 0;\r\n    let { byteLength } = data;\r\n    this.bytesHashed += byteLength;\r\n\r\n    if (this.bytesHashed * 8 > MAX_HASHABLE_LENGTH) {\r\n      throw new Error(\"Cannot hash more than 2^53 - 1 bits\");\r\n    }\r\n\r\n    while (byteLength > 0) {\r\n      this.buffer[this.bufferLength++] = data[position++];\r\n      byteLength--;\r\n\r\n      if (this.bufferLength === BLOCK_SIZE) {\r\n        this.hashBuffer();\r\n        this.bufferLength = 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  digest(): Uint8Array {\r\n    if (!this.finished) {\r\n      const bitsHashed = this.bytesHashed * 8;\r\n      const bufferView = new DataView(\r\n        this.buffer.buffer,\r\n        this.buffer.byteOffset,\r\n        this.buffer.byteLength\r\n      );\r\n\r\n      const undecoratedLength = this.bufferLength;\r\n      bufferView.setUint8(this.bufferLength++, 0x80);\r\n\r\n      // Ensure the final block has enough room for the hashed length\r\n      if (undecoratedLength % BLOCK_SIZE >= BLOCK_SIZE - 8) {\r\n        for (let i = this.bufferLength; i < BLOCK_SIZE; i++) {\r\n          bufferView.setUint8(i, 0);\r\n        }\r\n        this.hashBuffer();\r\n        this.bufferLength = 0;\r\n      }\r\n\r\n      for (let i = this.bufferLength; i < BLOCK_SIZE - 8; i++) {\r\n        bufferView.setUint8(i, 0);\r\n      }\r\n      bufferView.setUint32(\r\n        BLOCK_SIZE - 8,\r\n        Math.floor(bitsHashed / 0x100000000),\r\n        true\r\n      );\r\n      bufferView.setUint32(BLOCK_SIZE - 4, bitsHashed);\r\n\r\n      this.hashBuffer();\r\n\r\n      this.finished = true;\r\n    }\r\n\r\n    // The value in state is little-endian rather than big-endian, so flip\r\n    // each word into a new Uint8Array\r\n    const out = new Uint8Array(DIGEST_LENGTH);\r\n    for (let i = 0; i < 8; i++) {\r\n      out[i * 4] = (this.state[i] >>> 24) & 0xff;\r\n      out[i * 4 + 1] = (this.state[i] >>> 16) & 0xff;\r\n      out[i * 4 + 2] = (this.state[i] >>> 8) & 0xff;\r\n      out[i * 4 + 3] = (this.state[i] >>> 0) & 0xff;\r\n    }\r\n\r\n    return out;\r\n  }\r\n\r\n  private hashBuffer(): void {\r\n    const { buffer, state } = this;\r\n\r\n    let state0 = state[0],\r\n      state1 = state[1],\r\n      state2 = state[2],\r\n      state3 = state[3],\r\n      state4 = state[4],\r\n      state5 = state[5],\r\n      state6 = state[6],\r\n      state7 = state[7];\r\n\r\n    for (let i = 0; i < BLOCK_SIZE; i++) {\r\n      if (i < 16) {\r\n        this.temp[i] =\r\n          ((buffer[i * 4] & 0xff) << 24) |\r\n          ((buffer[i * 4 + 1] & 0xff) << 16) |\r\n          ((buffer[i * 4 + 2] & 0xff) << 8) |\r\n          (buffer[i * 4 + 3] & 0xff);\r\n      } else {\r\n        let u = this.temp[i - 2];\r\n        const t1 =\r\n          ((u >>> 17) | (u << 15)) ^ ((u >>> 19) | (u << 13)) ^ (u >>> 10);\r\n\r\n        u = this.temp[i - 15];\r\n        const t2 =\r\n          ((u >>> 7) | (u << 25)) ^ ((u >>> 18) | (u << 14)) ^ (u >>> 3);\r\n\r\n        this.temp[i] =\r\n          ((t1 + this.temp[i - 7]) | 0) + ((t2 + this.temp[i - 16]) | 0);\r\n      }\r\n\r\n      const t1 =\r\n        ((((((state4 >>> 6) | (state4 << 26)) ^\r\n          ((state4 >>> 11) | (state4 << 21)) ^\r\n          ((state4 >>> 25) | (state4 << 7))) +\r\n          ((state4 & state5) ^ (~state4 & state6))) |\r\n          0) +\r\n          ((state7 + ((KEY[i] + this.temp[i]) | 0)) | 0)) |\r\n        0;\r\n\r\n      const t2 =\r\n        ((((state0 >>> 2) | (state0 << 30)) ^\r\n          ((state0 >>> 13) | (state0 << 19)) ^\r\n          ((state0 >>> 22) | (state0 << 10))) +\r\n          ((state0 & state1) ^ (state0 & state2) ^ (state1 & state2))) |\r\n        0;\r\n\r\n      state7 = state6;\r\n      state6 = state5;\r\n      state5 = state4;\r\n      state4 = (state3 + t1) | 0;\r\n      state3 = state2;\r\n      state2 = state1;\r\n      state1 = state0;\r\n      state0 = (t1 + t2) | 0;\r\n    }\r\n\r\n    state[0] += state0;\r\n    state[1] += state1;\r\n    state[2] += state2;\r\n    state[3] += state3;\r\n    state[4] += state4;\r\n    state[5] += state5;\r\n    state[6] += state6;\r\n    state[7] += state7;\r\n  }\r\n}\r\n", "export const fromUtf8 = (input) => new TextEncoder().encode(input);\r\n", "// Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.\r\n// SPDX-License-Identifier: Apache-2.0\r\n\r\nimport { SourceData } from \"@aws-sdk/types\";\r\nimport { fromUtf8 as fromUtf8Browser } from \"@smithy/util-utf8\";\r\n\r\n// Quick polyfill\r\nconst fromUtf8 =\r\n  typeof Buffer !== \"undefined\" && Buffer.from\r\n    ? (input: string) => Buffer.from(input, \"utf8\")\r\n    : fromUtf8Browser;\r\n\r\nexport function convertToBuffer(data: SourceData): Uint8Array {\r\n  // Already a Uint8, do nothing\r\n  if (data instanceof Uint8Array) return data;\r\n\r\n  if (typeof data === \"string\") {\r\n    return fromUtf8(data);\r\n  }\r\n\r\n  if (ArrayBuffer.isView(data)) {\r\n    return new Uint8Array(\r\n      data.buffer,\r\n      data.byteOffset,\r\n      data.byteLength / Uint8Array.BYTES_PER_ELEMENT\r\n    );\r\n  }\r\n\r\n  return new Uint8Array(data);\r\n}\r\n", "// Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.\r\n// SPDX-License-Identifier: Apache-2.0\r\n\r\nimport { SourceData } from \"@aws-sdk/types\";\r\n\r\nexport function isEmptyData(data: SourceData): boolean {\r\n  if (typeof data === \"string\") {\r\n    return data.length === 0;\r\n  }\r\n\r\n  return data.byteLength === 0;\r\n}\r\n", "import { BLOCK_SIZE } from \"./constants\";\r\nimport { RawSha256 } from \"./RawSha256\";\r\nimport { Checksum, SourceData } from \"@aws-sdk/types\";\r\nimport { isEmptyData, convertToBuffer } from \"@aws-crypto/util\";\r\n\r\nexport class Sha256 implements Checksum {\r\n  private readonly secret?: SourceData;\r\n  private hash: RawSha256;\r\n  private outer?: RawSha256;\r\n  private error: any;\r\n\r\n  constructor(secret?: SourceData) {\r\n    this.secret = secret;\r\n    this.hash = new RawSha256();\r\n    this.reset();\r\n  }\r\n\r\n  update(toHash: SourceData): void {\r\n    if (isEmptyData(toHash) || this.error) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      this.hash.update(convertToBuffer(toHash));\r\n    } catch (e) {\r\n      this.error = e;\r\n    }\r\n  }\r\n\r\n  /* This synchronous method keeps compatibility\r\n   * with the v2 aws-sdk.\r\n   */\r\n  digestSync(): Uint8Array {\r\n    if (this.error) {\r\n      throw this.error;\r\n    }\r\n\r\n    if (this.outer) {\r\n      if (!this.outer.finished) {\r\n        this.outer.update(this.hash.digest());\r\n      }\r\n\r\n      return this.outer.digest();\r\n    }\r\n\r\n    return this.hash.digest();\r\n  }\r\n\r\n  /* The underlying digest method here is synchronous.\r\n   * To keep the same interface with the other hash functions\r\n   * the default is to expose this as an async method.\r\n   * However, it can sometimes be useful to have a sync method.\r\n   */\r\n  async digest(): Promise<Uint8Array> {\r\n    return this.digestSync();\r\n  }\r\n\r\n  reset(): void {\r\n    this.hash = new RawSha256();\r\n    if (this.secret) {\r\n      this.outer = new RawSha256();\r\n      const inner = bufferFromSecret(this.secret);\r\n      const outer = new Uint8Array(BLOCK_SIZE);\r\n      outer.set(inner);\r\n\r\n      for (let i = 0; i < BLOCK_SIZE; i++) {\r\n        inner[i] ^= 0x36;\r\n        outer[i] ^= 0x5c;\r\n      }\r\n\r\n      this.hash.update(inner);\r\n      this.outer.update(outer);\r\n\r\n      // overwrite the copied key in memory\r\n      for (let i = 0; i < inner.byteLength; i++) {\r\n        inner[i] = 0;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction bufferFromSecret(secret: SourceData): Uint8Array {\r\n  let input = convertToBuffer(secret);\r\n\r\n  if (input.byteLength > BLOCK_SIZE) {\r\n    const bufferHash = new RawSha256();\r\n    bufferHash.update(input);\r\n    input = bufferHash.digest();\r\n  }\r\n\r\n  const buffer = new Uint8Array(BLOCK_SIZE);\r\n  buffer.set(input);\r\n  return buffer;\r\n}\r\n", "const SHORT_TO_HEX = {};\r\nconst HEX_TO_SHORT = {};\r\nfor (let i = 0; i < 256; i++) {\r\n    let encodedByte = i.toString(16).toLowerCase();\r\n    if (encodedByte.length === 1) {\r\n        encodedByte = `0${encodedByte}`;\r\n    }\r\n    SHORT_TO_HEX[i] = encodedByte;\r\n    HEX_TO_SHORT[encodedByte] = i;\r\n}\r\nexport function fromHex(encoded) {\r\n    if (encoded.length % 2 !== 0) {\r\n        throw new Error(\"Hex encoded strings must have an even number length\");\r\n    }\r\n    const out = new Uint8Array(encoded.length / 2);\r\n    for (let i = 0; i < encoded.length; i += 2) {\r\n        const encodedByte = encoded.slice(i, i + 2).toLowerCase();\r\n        if (encodedByte in HEX_TO_SHORT) {\r\n            out[i / 2] = HEX_TO_SHORT[encodedByte];\r\n        }\r\n        else {\r\n            throw new Error(`Cannot decode unrecognized sequence ${encodedByte} as hexadecimal`);\r\n        }\r\n    }\r\n    return out;\r\n}\r\nexport function toHex(bytes) {\r\n    let out = \"\";\r\n    for (let i = 0; i < bytes.byteLength; i++) {\r\n        out += SHORT_TO_HEX[bytes[i]];\r\n    }\r\n    return out;\r\n}\r\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// TODO: V6 update to different crypto dependency?\nimport { Sha256 } from '@aws-crypto/sha256-js';\nimport { toHex } from '@smithy/util-hex-encoding';\n/**\n * Returns the hashed data a `Uint8Array`.\n *\n * @param key `SourceData` to be used as hashing key.\n * @param data Hashable `SourceData`.\n * @returns `Uint8Array` created from the data as input to a hash function.\n */\nexport const getHashedData = (key, data) => {\n    const sha256 = new Sha256(key ?? undefined);\n    sha256.update(data);\n    // TODO: V6 flip to async digest\n    const hashedData = sha256.digestSync();\n    return hashedData;\n};\n/**\n * Returns the hashed data as a hex string.\n *\n * @param key `SourceData` to be used as hashing key.\n * @param data Hashable `SourceData`.\n * @returns String using lowercase hexadecimal characters created from the data as input to a hash function.\n *\n * @internal\n */\nexport const getHashedDataAsHex = (key, data) => {\n    const hashedData = getHashedData(key, data);\n    return toHex(hashedData);\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns canonical headers.\n *\n * @param headers Headers from the request.\n * @returns Request headers that will be signed, and their values, separated by newline characters. Header names must\n * use lowercase characters, must appear in alphabetical order, and must be followed by a colon (:). For the values,\n * trim any leading or trailing spaces, convert sequential spaces to a single space, and separate the values\n * for a multi-value header using commas.\n *\n * @internal\n */\nexport const getCanonicalHeaders = (headers) => Object.entries(headers)\n    .map(([key, value]) => ({\n    key: key.toLowerCase(),\n    value: value?.trim().replace(/\\s+/g, ' ') ?? '',\n}))\n    .sort((a, b) => (a.key < b.key ? -1 : 1))\n    .map(entry => `${entry.key}:${entry.value}\\n`)\n    .join('');\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns a canonical query string.\n *\n * @param searchParams `searchParams` from the request url.\n * @returns URL-encoded query string parameters, separated by ampersands (&). Percent-encode reserved characters,\n * including the space character. Encode names and values separately. If there are empty parameters, append the equals\n * sign to the parameter name before encoding. After encoding, sort the parameters alphabetically by key name. If there\n * is no query string, use an empty string (\"\").\n *\n * @internal\n */\nexport const getCanonicalQueryString = (searchParams) => Array.from(searchParams)\n    .sort(([keyA, valA], [keyB, valB]) => {\n    if (keyA === keyB) {\n        return valA < valB ? -1 : 1;\n    }\n    return keyA < keyB ? -1 : 1;\n})\n    .map(([key, val]) => `${escapeUri(key)}=${escapeUri(val)}`)\n    .join('&');\nconst escapeUri = (uri) => encodeURIComponent(uri).replace(/[!'()*]/g, hexEncode);\nconst hexEncode = (c) => `%${c.charCodeAt(0).toString(16).toUpperCase()}`;\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns a canonical uri.\n *\n * @param pathname `pathname` from request url.\n * @param uriEscapePath Whether to uri encode the path as part of canonical uri. It's used for S3 only where the\n *   pathname is already uri encoded, and the signing process is not expected to uri encode it again. Defaults to true.\n * @returns URI-encoded version of the absolute path component URL (everything between the host and the question mark\n * character (?) that starts the query string parameters). If the absolute path is empty, a forward slash character (/).\n *\n * @internal\n */\nexport const getCanonicalUri = (pathname, uriEscapePath = true) => pathname\n    ? uriEscapePath\n        ? encodeURIComponent(pathname).replace(/%2F/g, '/')\n        : pathname\n    : '/';\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { EMPTY_HASH, UNSIGNED_PAYLOAD } from '../constants';\nimport { getHashedDataAsHex } from './dataHashHelpers';\n/**\n * Returns the hashed payload.\n *\n * @param body `body` (payload) from the request.\n * @returns String created using the payload in the body of the HTTP request as input to a hash function. This string\n * uses lowercase hexadecimal characters. If the payload is empty, return precalculated result of an empty hash.\n *\n * @internal\n */\nexport const getHashedPayload = (body) => {\n    // return precalculated empty hash if body is undefined or null\n    if (body == null) {\n        return EMPTY_HASH;\n    }\n    if (isSourceData(body)) {\n        const hashedData = getHashedDataAsHex(null, body);\n        return hashedData;\n    }\n    // Defined body is not signable. Return unsigned payload which may or may not be accepted by the service.\n    return UNSIGNED_PAYLOAD;\n};\nconst isSourceData = (body) => typeof body === 'string' || ArrayBuffer.isView(body) || isArrayBuffer(body);\nconst isArrayBuffer = (arg) => (typeof ArrayBuffer === 'function' && arg instanceof ArrayBuffer) ||\n    Object.prototype.toString.call(arg) === '[object ArrayBuffer]';\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { getCanonicalHeaders } from './getCanonicalHeaders';\nimport { getCanonicalQueryString } from './getCanonicalQueryString';\nimport { getCanonicalUri } from './getCanonicalUri';\nimport { getHashedPayload } from './getHashedPayload';\nimport { getSignedHeaders } from './getSignedHeaders';\n/**\n * Returns a canonical request.\n *\n * @param request `HttpRequest` from which to create the canonical request from.\n * @param uriEscapePath Whether to uri encode the path as part of canonical uri. It's used for S3 only where the\n *   pathname is already uri encoded, and the signing process is not expected to uri encode it again. Defaults to true.\n * @returns String created by by concatenating the following strings, separated by newline characters:\n * - HTTPMethod\n * - CanonicalUri\n * - CanonicalQueryString\n * - CanonicalHeaders\n * - SignedHeaders\n * - HashedPayload\n *\n * @internal\n */\nexport const getCanonicalRequest = ({ body, headers, method, url }, uriEscapePath = true) => [\n    method,\n    getCanonicalUri(url.pathname, uriEscapePath),\n    getCanonicalQueryString(url.searchParams),\n    getCanonicalHeaders(headers),\n    getSignedHeaders(headers),\n    getHashedPayload(body),\n].join('\\n');\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { KEY_TYPE_IDENTIFIER, SIGNATURE_IDENTIFIER } from '../constants';\nimport { getHashedData } from './dataHashHelpers';\n/**\n * Returns a signing key to be used for signing requests.\n *\n * @param secretAccessKey AWS secret access key from credentials.\n * @param date Current date in the format 'YYYYMMDD'.\n * @param region AWS region in which the service resides.\n * @param service Service to which the signed request is being sent.\n *\n * @returns `Uint8Array` calculated from its composite parts.\n *\n * @internal\n */\nexport const getSigningKey = (secretAccessKey, date, region, service) => {\n    const key = `${SIGNATURE_IDENTIFIER}${secretAccessKey}`;\n    const dateKey = getHashedData(key, date);\n    const regionKey = getHashedData(dateKey, region);\n    const serviceKey = getHashedData(regionKey, service);\n    const signingKey = getHashedData(serviceKey, KEY_TYPE_IDENTIFIER);\n    return signingKey;\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { SHA256_ALGORITHM_IDENTIFIER } from '../constants';\n/**\n * Returns a string to be signed.\n *\n * @param date Current date in the format 'YYYYMMDDThhmmssZ'.\n * @param credentialScope String representing the credential scope with format 'YYYYMMDD/region/service/aws4_request'.\n * @param hashedRequest Hashed canonical request.\n *\n * @returns A string created by by concatenating the following strings, separated by newline characters:\n * - Algorithm\n * - RequestDateTime\n * - CredentialScope\n * - HashedCanonicalRequest\n *\n * @internal\n */\nexport const getStringToSign = (date, credentialScope, hashedRequest) => [SHA256_ALGORITHM_IDENTIFIER, date, credentialScope, hashedRequest].join('\\n');\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { getHashedDataAsHex } from './dataHashHelpers';\nimport { getCanonicalRequest } from './getCanonicalRequest';\nimport { getSigningKey } from './getSigningKey';\nimport { getStringToSign } from './getStringToSign';\n/**\n * Calculates and returns an AWS API Signature.\n * https://docs.aws.amazon.com/IAM/latest/UserGuide/create-signed-request.html\n *\n * @param request `HttpRequest` to be signed.\n * @param signRequestOptions `SignRequestOptions` object containing values used to construct the signature.\n * @returns AWS API Signature to sign a request or url with.\n *\n * @internal\n */\nexport const getSignature = (request, { credentialScope, longDate, secretAccessKey, shortDate, signingRegion, signingService, uriEscapePath, }) => {\n    // step 1: create a canonical request\n    const canonicalRequest = getCanonicalRequest(request, uriEscapePath);\n    // step 2: create a hash of the canonical request\n    const hashedRequest = getHashedDataAsHex(null, canonicalRequest);\n    // step 3: create a string to sign\n    const stringToSign = getStringToSign(longDate, credentialScope, hashedRequest);\n    // step 4: calculate the signature\n    const signature = getHashedDataAsHex(getSigningKey(secretAccessKey, shortDate, signingRegion, signingService), stringToSign);\n    return signature;\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { getSignedHeaders } from './utils/getSignedHeaders';\nimport { getSigningValues } from './utils/getSigningValues';\nimport { AMZ_DATE_HEADER, AUTH_HEADER, HOST_HEADER, SHA256_ALGORITHM_IDENTIFIER, TOKEN_HEADER, } from './constants';\nimport { getSignature } from './utils/getSignature';\n/**\n * Given a `HttpRequest`, returns a Signature Version 4 signed `HttpRequest`.\n *\n * @param request `HttpRequest` to be signed.\n * @param signRequestOptions `SignRequestOptions` object containing values used to construct the signature.\n * @returns A `HttpRequest` with authentication headers which can grant temporary access to AWS resources.\n */\nexport const signRequest = (request, options) => {\n    const signingValues = getSigningValues(options);\n    const { accessKeyId, credentialScope, longDate, sessionToken } = signingValues;\n    // create the request to sign\n    const headers = { ...request.headers };\n    headers[HOST_HEADER] = request.url.host;\n    headers[AMZ_DATE_HEADER] = longDate;\n    if (sessionToken) {\n        headers[TOKEN_HEADER] = sessionToken;\n    }\n    const requestToSign = { ...request, headers };\n    // calculate and add the signature to the request\n    const signature = getSignature(requestToSign, signingValues);\n    const credentialEntry = `Credential=${accessKeyId}/${credentialScope}`;\n    const signedHeadersEntry = `SignedHeaders=${getSignedHeaders(headers)}`;\n    const signatureEntry = `Signature=${signature}`;\n    headers[AUTH_HEADER] =\n        `${SHA256_ALGORITHM_IDENTIFIER} ${credentialEntry}, ${signedHeadersEntry}, ${signatureEntry}`;\n    return requestToSign;\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport var Framework;\n(function (Framework) {\n    // < 100 - Web frameworks\n    Framework[\"WebUnknown\"] = \"0\";\n    Framework[\"React\"] = \"1\";\n    Framework[\"NextJs\"] = \"2\";\n    Framework[\"Angular\"] = \"3\";\n    Framework[\"VueJs\"] = \"4\";\n    Framework[\"Nuxt\"] = \"5\";\n    Framework[\"Svelte\"] = \"6\";\n    // 100s - Server side frameworks\n    Framework[\"ServerSideUnknown\"] = \"100\";\n    Framework[\"ReactSSR\"] = \"101\";\n    Framework[\"NextJsSSR\"] = \"102\";\n    Framework[\"AngularSSR\"] = \"103\";\n    Framework[\"VueJsSSR\"] = \"104\";\n    Framework[\"NuxtSSR\"] = \"105\";\n    Framework[\"SvelteSSR\"] = \"106\";\n    // 200s - Mobile framework\n    Framework[\"ReactNative\"] = \"201\";\n    Framework[\"Expo\"] = \"202\";\n})(Framework || (Framework = {}));\nexport var Category;\n(function (Category) {\n    Category[\"AI\"] = \"ai\";\n    Category[\"API\"] = \"api\";\n    Category[\"Auth\"] = \"auth\";\n    Category[\"Analytics\"] = \"analytics\";\n    Category[\"DataStore\"] = \"datastore\";\n    Category[\"Geo\"] = \"geo\";\n    Category[\"InAppMessaging\"] = \"inappmessaging\";\n    Category[\"Interactions\"] = \"interactions\";\n    Category[\"Predictions\"] = \"predictions\";\n    Category[\"PubSub\"] = \"pubsub\";\n    Category[\"PushNotification\"] = \"pushnotification\";\n    Category[\"Storage\"] = \"storage\";\n})(Category || (Category = {}));\nexport var AiAction;\n(function (AiAction) {\n    AiAction[\"CreateConversation\"] = \"1\";\n    AiAction[\"GetConversation\"] = \"2\";\n    AiAction[\"ListConversations\"] = \"3\";\n    AiAction[\"DeleteConversation\"] = \"4\";\n    AiAction[\"SendMessage\"] = \"5\";\n    AiAction[\"ListMessages\"] = \"6\";\n    AiAction[\"OnMessage\"] = \"7\";\n    AiAction[\"Generation\"] = \"8\";\n    AiAction[\"UpdateConversation\"] = \"9\";\n})(AiAction || (AiAction = {}));\nexport var AnalyticsAction;\n(function (AnalyticsAction) {\n    AnalyticsAction[\"Record\"] = \"1\";\n    AnalyticsAction[\"IdentifyUser\"] = \"2\";\n})(AnalyticsAction || (AnalyticsAction = {}));\nexport var ApiAction;\n(function (ApiAction) {\n    ApiAction[\"GraphQl\"] = \"1\";\n    ApiAction[\"Get\"] = \"2\";\n    ApiAction[\"Post\"] = \"3\";\n    ApiAction[\"Put\"] = \"4\";\n    ApiAction[\"Patch\"] = \"5\";\n    ApiAction[\"Del\"] = \"6\";\n    ApiAction[\"Head\"] = \"7\";\n})(ApiAction || (ApiAction = {}));\nexport var AuthAction;\n(function (AuthAction) {\n    AuthAction[\"SignUp\"] = \"1\";\n    AuthAction[\"ConfirmSignUp\"] = \"2\";\n    AuthAction[\"ResendSignUpCode\"] = \"3\";\n    AuthAction[\"SignIn\"] = \"4\";\n    AuthAction[\"FetchMFAPreference\"] = \"6\";\n    AuthAction[\"UpdateMFAPreference\"] = \"7\";\n    AuthAction[\"SetUpTOTP\"] = \"10\";\n    AuthAction[\"VerifyTOTPSetup\"] = \"11\";\n    AuthAction[\"ConfirmSignIn\"] = \"12\";\n    AuthAction[\"DeleteUserAttributes\"] = \"15\";\n    AuthAction[\"DeleteUser\"] = \"16\";\n    AuthAction[\"UpdateUserAttributes\"] = \"17\";\n    AuthAction[\"FetchUserAttributes\"] = \"18\";\n    AuthAction[\"ConfirmUserAttribute\"] = \"22\";\n    AuthAction[\"SignOut\"] = \"26\";\n    AuthAction[\"UpdatePassword\"] = \"27\";\n    AuthAction[\"ResetPassword\"] = \"28\";\n    AuthAction[\"ConfirmResetPassword\"] = \"29\";\n    AuthAction[\"FederatedSignIn\"] = \"30\";\n    AuthAction[\"RememberDevice\"] = \"32\";\n    AuthAction[\"ForgetDevice\"] = \"33\";\n    AuthAction[\"FetchDevices\"] = \"34\";\n    AuthAction[\"SendUserAttributeVerificationCode\"] = \"35\";\n    AuthAction[\"SignInWithRedirect\"] = \"36\";\n    AuthAction[\"StartWebAuthnRegistration\"] = \"37\";\n    AuthAction[\"CompleteWebAuthnRegistration\"] = \"38\";\n    AuthAction[\"ListWebAuthnCredentials\"] = \"39\";\n    AuthAction[\"DeleteWebAuthnCredential\"] = \"40\";\n})(AuthAction || (AuthAction = {}));\nexport var DataStoreAction;\n(function (DataStoreAction) {\n    DataStoreAction[\"Subscribe\"] = \"1\";\n    DataStoreAction[\"GraphQl\"] = \"2\";\n})(DataStoreAction || (DataStoreAction = {}));\nexport var GeoAction;\n(function (GeoAction) {\n    GeoAction[\"SearchByText\"] = \"0\";\n    GeoAction[\"SearchByCoordinates\"] = \"1\";\n    GeoAction[\"SearchForSuggestions\"] = \"2\";\n    GeoAction[\"SearchByPlaceId\"] = \"3\";\n    GeoAction[\"SaveGeofences\"] = \"4\";\n    GeoAction[\"GetGeofence\"] = \"5\";\n    GeoAction[\"ListGeofences\"] = \"6\";\n    GeoAction[\"DeleteGeofences\"] = \"7\";\n})(GeoAction || (GeoAction = {}));\nexport var InAppMessagingAction;\n(function (InAppMessagingAction) {\n    InAppMessagingAction[\"SyncMessages\"] = \"1\";\n    InAppMessagingAction[\"IdentifyUser\"] = \"2\";\n    InAppMessagingAction[\"NotifyMessageInteraction\"] = \"3\";\n})(InAppMessagingAction || (InAppMessagingAction = {}));\nexport var InteractionsAction;\n(function (InteractionsAction) {\n    InteractionsAction[\"None\"] = \"0\";\n})(InteractionsAction || (InteractionsAction = {}));\nexport var PredictionsAction;\n(function (PredictionsAction) {\n    PredictionsAction[\"Convert\"] = \"1\";\n    PredictionsAction[\"Identify\"] = \"2\";\n    PredictionsAction[\"Interpret\"] = \"3\";\n})(PredictionsAction || (PredictionsAction = {}));\nexport var PubSubAction;\n(function (PubSubAction) {\n    PubSubAction[\"Subscribe\"] = \"1\";\n})(PubSubAction || (PubSubAction = {}));\nexport var PushNotificationAction;\n(function (PushNotificationAction) {\n    PushNotificationAction[\"InitializePushNotifications\"] = \"1\";\n    PushNotificationAction[\"IdentifyUser\"] = \"2\";\n})(PushNotificationAction || (PushNotificationAction = {}));\nexport var StorageAction;\n(function (StorageAction) {\n    StorageAction[\"UploadData\"] = \"1\";\n    StorageAction[\"DownloadData\"] = \"2\";\n    StorageAction[\"List\"] = \"3\";\n    StorageAction[\"Copy\"] = \"4\";\n    StorageAction[\"Remove\"] = \"5\";\n    StorageAction[\"GetProperties\"] = \"6\";\n    StorageAction[\"GetUrl\"] = \"7\";\n    StorageAction[\"GetDataAccess\"] = \"8\";\n    StorageAction[\"ListCallerAccessGrants\"] = \"9\";\n})(StorageAction || (StorageAction = {}));\n", "// generated by genversion\nexport const version = '6.14.4';\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport const globalExists = () => {\n    return typeof global !== 'undefined';\n};\nexport const globalThisExists = () => {\n    return typeof globalThis !== 'undefined';\n};\nexport const windowExists = () => {\n    return typeof window !== 'undefined';\n};\nexport const documentExists = () => {\n    return typeof document !== 'undefined';\n};\nexport const processExists = () => {\n    return typeof process !== 'undefined';\n};\nexport const keyPrefixMatch = (object, prefix) => {\n    return !!Object.keys(object).find(key => key.startsWith(prefix));\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { documentExists, processExists } from './helpers';\n// Tested with react 18.2 - built using Vite\nexport function reactWebDetect() {\n    const elementKeyPrefixedWithReact = (key) => {\n        return key.startsWith('_react') || key.startsWith('__react');\n    };\n    const elementIsReactEnabled = (element) => {\n        return Object.keys(element).find(elementKeyPrefixedWithReact);\n    };\n    const allElementsWithId = () => Array.from(document.querySelectorAll('[id]'));\n    return documentExists() && allElementsWithId().some(elementIsReactEnabled);\n}\nexport function reactSSRDetect() {\n    return (processExists() &&\n        typeof process.env !== 'undefined' &&\n        !!Object.keys(process.env).find(key => key.includes('react')));\n}\n// use the some\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { globalExists, keyPrefixMatch, windowExists } from './helpers';\n// Tested with vue 3.3.2\nexport function vueWebDetect() {\n    return windowExists() && keyPrefixMatch(window, '__VUE');\n}\nexport function vueSSRDetect() {\n    return globalExists() && keyPrefixMatch(global, '__VUE');\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { keyPrefixMatch, processExists, windowExists } from './helpers';\n// Tested with svelte 3.59\nexport function svelteWebDetect() {\n    return windowExists() && keyPrefixMatch(window, '__SVELTE');\n}\nexport function svelteSSRDetect() {\n    return (processExists() &&\n        typeof process.env !== 'undefined' &&\n        !!Object.keys(process.env).find(key => key.includes('svelte')));\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { globalExists, keyPrefixMatch, windowExists } from './helpers';\n// Tested with next 13.4 / react 18.2\nexport function nextWebDetect() {\n    return (windowExists() &&\n        window.next &&\n        typeof window.next === 'object');\n}\nexport function nextSSRDetect() {\n    return (globalExists() &&\n        (keyPrefixMatch(global, '__next') || keyPrefixMatch(global, '__NEXT')));\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { globalExists, windowExists } from './helpers';\n// Tested with nuxt 2.15 / vue 2.7\nexport function nuxtWebDetect() {\n    return (windowExists() &&\n        (window.__NUXT__ !== undefined ||\n            window.$nuxt !== undefined));\n}\nexport function nuxtSSRDetect() {\n    return (globalExists() && typeof global.__NUXT_PATHS__ !== 'undefined');\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { documentExists, processExists, windowExists } from './helpers';\n// Tested with @angular/core 16.0.0\nexport function angularWebDetect() {\n    const angularVersionSetInDocument = Boolean(documentExists() && document.querySelector('[ng-version]'));\n    const angularContentSetInWindow = Boolean(windowExists() && typeof window.ng !== 'undefined');\n    return angularVersionSetInDocument || angularContentSetInWindow;\n}\nexport function angularSSRDetect() {\n    return ((processExists() &&\n        typeof process.env === 'object' &&\n        process.env.npm_lifecycle_script?.startsWith('ng ')) ||\n        false);\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with react-native 0.17.7\nexport function reactNativeDetect() {\n    return (typeof navigator !== 'undefined' &&\n        typeof navigator.product !== 'undefined' &&\n        navigator.product === 'ReactNative');\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { globalExists } from './helpers';\n// Tested with expo 48 / react-native 0.71.3\nexport function expoDetect() {\n    return globalExists() && typeof global.expo !== 'undefined';\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { windowExists } from './helpers';\nexport function webDetect() {\n    return windowExists();\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Framework } from '../types';\nimport { reactSSRDetect, reactWebDetect } from './React';\nimport { vueSSRDetect, vueWebDetect } from './Vue';\nimport { svelteSSRDetect, svelteWebDetect } from './Svelte';\nimport { nextSSRDetect, nextWebDetect } from './Next';\nimport { nuxtSSRDetect, nuxtWebDetect } from './Nuxt';\nimport { angularSSRDetect, angularWebDetect } from './Angular';\nimport { reactNativeDetect } from './ReactNative';\nimport { expoDetect } from './Expo';\nimport { webDetect } from './Web';\n// These are in the order of detection where when both are detectable, the early Framework will be reported\nconst detectionMap = [\n    // First, detect mobile\n    { platform: Framework.Expo, detectionMethod: expoDetect },\n    { platform: Framework.ReactNative, detectionMethod: reactNativeDetect },\n    // Next, detect web frameworks\n    { platform: Framework.NextJs, detectionMethod: nextWebDetect },\n    { platform: Framework.Nuxt, detectionMethod: nuxtWebDetect },\n    { platform: Framework.Angular, detectionMethod: angularWebDetect },\n    { platform: Framework.React, detectionMethod: reactWebDetect },\n    { platform: Framework.VueJs, detectionMethod: vueWebDetect },\n    { platform: Framework.Svelte, detectionMethod: svelteWebDetect },\n    { platform: Framework.WebUnknown, detectionMethod: webDetect },\n    // Last, detect ssr frameworks\n    { platform: Framework.NextJsSSR, detectionMethod: nextSSRDetect },\n    { platform: Framework.NuxtSSR, detectionMethod: nuxtSSRDetect },\n    { platform: Framework.ReactSSR, detectionMethod: reactSSRDetect },\n    { platform: Framework.VueJsSSR, detectionMethod: vueSSRDetect },\n    { platform: Framework.AngularSSR, detectionMethod: angularSSRDetect },\n    { platform: Framework.SvelteSSR, detectionMethod: svelteSSRDetect },\n];\nexport function detect() {\n    return (detectionMap.find(detectionEntry => detectionEntry.detectionMethod())\n        ?.platform || Framework.ServerSideUnknown);\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Framework } from './types';\nimport { detect } from './detection';\n// We want to cache detection since the framework won't change\nlet frameworkCache;\nexport const frameworkChangeObservers = [];\n// Setup the detection reset tracking / timeout delays\nlet resetTriggered = false;\nconst SSR_RESET_TIMEOUT = 10; // ms\nconst WEB_RESET_TIMEOUT = 10; // ms\nconst PRIME_FRAMEWORK_DELAY = 1000; // ms\nexport const detectFramework = () => {\n    if (!frameworkCache) {\n        frameworkCache = detect();\n        if (resetTriggered) {\n            // The final run of detectFramework:\n            // Starting from this point, the `frameworkCache` becomes \"final\".\n            // So we don't need to notify the observers again so the observer\n            // can be removed after the final notice.\n            while (frameworkChangeObservers.length) {\n                frameworkChangeObservers.pop()?.();\n            }\n        }\n        else {\n            // The first run of detectFramework:\n            // Every time we update the cache, call each observer function\n            frameworkChangeObservers.forEach(fcn => {\n                fcn();\n            });\n        }\n        // Retry once for either Unknown type after a delay (explained below)\n        resetTimeout(Framework.ServerSideUnknown, SSR_RESET_TIMEOUT);\n        resetTimeout(Framework.WebUnknown, WEB_RESET_TIMEOUT);\n    }\n    return frameworkCache;\n};\n/**\n * @internal Setup observer callback that will be called everytime the framework changes\n */\nexport const observeFrameworkChanges = (fcn) => {\n    // When the `frameworkCache` won't be updated again, we ignore all incoming\n    // observers.\n    if (resetTriggered) {\n        return;\n    }\n    frameworkChangeObservers.push(fcn);\n};\nexport function clearCache() {\n    frameworkCache = undefined;\n}\n// For a framework type and a delay amount, setup the event to re-detect\n//   During the runtime boot, it is possible that framework detection will\n//   be triggered before the framework has made modifications to the\n//   global/window/etc needed for detection. When no framework is detected\n//   we will reset and try again to ensure we don't use a cached\n//   non-framework detection result for all requests.\nfunction resetTimeout(framework, delay) {\n    if (frameworkCache === framework && !resetTriggered) {\n        setTimeout(() => {\n            clearCache();\n            resetTriggered = true;\n            setTimeout(detectFramework, PRIME_FRAMEWORK_DELAY);\n        }, delay);\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Maintains custom user-agent state set by external consumers.\nconst customUserAgentState = {};\n/**\n * Sets custom user agent state which will be appended to applicable requests. Returns a function that can be used to\n * clean up any custom state set with this API.\n *\n * @note\n * This API operates globally. Calling this API multiple times will result in the most recently set values for a\n * particular API being used.\n *\n * @note\n * This utility IS NOT compatible with SSR.\n *\n * @param input - SetCustomUserAgentInput that defines custom state to apply to the specified APIs.\n */\nexport const setCustomUserAgent = (input) => {\n    // Save custom user-agent state & increment reference counter\n    // TODO Remove `any` when we upgrade to TypeScript 5.2, see: https://github.com/microsoft/TypeScript/issues/44373\n    customUserAgentState[input.category] = input.apis.reduce((acc, api) => ({\n        ...acc,\n        [api]: {\n            refCount: acc[api]?.refCount ? acc[api].refCount + 1 : 1,\n            additionalDetails: input.additionalDetails,\n        },\n    }), customUserAgentState[input.category] ?? {});\n    // Callback that cleans up state for APIs recorded by this call\n    let cleanUpCallbackCalled = false;\n    const cleanUpCallback = () => {\n        // Only allow the cleanup callback to be called once\n        if (cleanUpCallbackCalled) {\n            return;\n        }\n        cleanUpCallbackCalled = true;\n        input.apis.forEach(api => {\n            const apiRefCount = customUserAgentState[input.category][api].refCount;\n            if (apiRefCount > 1) {\n                customUserAgentState[input.category][api].refCount = apiRefCount - 1;\n            }\n            else {\n                delete customUserAgentState[input.category][api];\n                // Clean up category if no more APIs set\n                if (!Object.keys(customUserAgentState[input.category]).length) {\n                    delete customUserAgentState[input.category];\n                }\n            }\n        });\n    };\n    return cleanUpCallback;\n};\nexport const getCustomUserAgent = (category, api) => customUserAgentState[category]?.[api]?.additionalDetails;\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Framework } from './types';\nimport { version } from './version';\nimport { detectFramework, observeFrameworkChanges } from './detectFramework';\nimport { getCustomUserAgent } from './customUserAgent';\nconst BASE_USER_AGENT = `aws-amplify`;\n/** Sanitize Amplify version string be removing special character + and character post the special character  */\nexport const sanitizeAmplifyVersion = (amplifyVersion) => amplifyVersion.replace(/\\+.*/, '');\nclass PlatformBuilder {\n    constructor() {\n        this.userAgent = `${BASE_USER_AGENT}/${sanitizeAmplifyVersion(version)}`;\n    }\n    get framework() {\n        return detectFramework();\n    }\n    get isReactNative() {\n        return (this.framework === Framework.ReactNative ||\n            this.framework === Framework.Expo);\n    }\n    observeFrameworkChanges(fcn) {\n        observeFrameworkChanges(fcn);\n    }\n}\nexport const Platform = new PlatformBuilder();\nexport const getAmplifyUserAgentObject = ({ category, action, } = {}) => {\n    const userAgent = [\n        [BASE_USER_AGENT, sanitizeAmplifyVersion(version)],\n    ];\n    if (category) {\n        userAgent.push([category, action]);\n    }\n    userAgent.push(['framework', detectFramework()]);\n    if (category && action) {\n        const customState = getCustomUserAgent(category, action);\n        if (customState) {\n            customState.forEach(state => {\n                userAgent.push(state);\n            });\n        }\n    }\n    return userAgent;\n};\nexport const getAmplifyUserAgent = (customUserAgentDetails) => {\n    const userAgent = getAmplifyUserAgentObject(customUserAgentDetails);\n    const userAgentString = userAgent\n        .map(([agentKey, agentValue]) => agentKey && agentValue ? `${agentKey}/${agentValue}` : agentKey)\n        .join(' ');\n    return userAgentString;\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AmplifyError } from './AmplifyError';\n/**\n * Error class for errors that associated with unsuccessful HTTP responses.\n * It's throw by API category REST API handlers and GraphQL query handlers for now.\n */\nexport class ApiError extends AmplifyError {\n    /**\n     * The unwrapped HTTP response causing the given API error.\n     */\n    get response() {\n        return this._response\n            ? replicateApiErrorResponse(this._response)\n            : undefined;\n    }\n    constructor(params) {\n        super(params);\n        // TODO: Delete the following 2 lines after we change the build target to >= es2015\n        this.constructor = ApiError;\n        Object.setPrototypeOf(this, ApiError.prototype);\n        if (params.response) {\n            this._response = params.response;\n        }\n    }\n}\nconst replicateApiErrorResponse = (response) => ({\n    ...response,\n    headers: { ...response.headers },\n});\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AmplifyErrorCode } from '../types';\nimport { AmplifyError } from './AmplifyError';\nexport class PlatformNotSupportedError extends AmplifyError {\n    constructor() {\n        super({\n            name: AmplifyErrorCode.PlatformNotSupported,\n            message: 'Function not supported on current platform',\n        });\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Observable, from } from 'rxjs';\nimport { isWebWorker } from '../utils';\nexport class Reachability {\n    networkMonitor(_) {\n        const globalObj = isWebWorker()\n            ? self\n            : typeof window !== 'undefined' && window;\n        if (!globalObj) {\n            return from([{ online: true }]);\n        }\n        return new Observable(observer => {\n            observer.next({ online: globalObj.navigator.onLine });\n            const notifyOnline = () => {\n                observer.next({ online: true });\n            };\n            const notifyOffline = () => {\n                observer.next({ online: false });\n            };\n            globalObj.addEventListener('online', notifyOnline);\n            globalObj.addEventListener('offline', notifyOffline);\n            Reachability._observers.push(observer);\n            return () => {\n                globalObj.removeEventListener('online', notifyOnline);\n                globalObj.removeEventListener('offline', notifyOffline);\n                Reachability._observers = Reachability._observers.filter(_observer => _observer !== observer);\n            };\n        });\n    }\n    // expose observers to simulate offline mode for integration testing\n    static _observerOverride(status) {\n        for (const observer of this._observers) {\n            if (observer.closed) {\n                this._observers = this._observers.filter(_observer => _observer !== observer);\n                continue;\n            }\n            observer?.next && observer.next(status);\n        }\n    }\n}\nReachability._observers = [];\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport const fetchAuthSession = (amplify, options) => {\n    return amplify.Auth.fetchAuthSession(options);\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { ConsoleLogger } from '../Logger';\nimport { NO_HUBCALLBACK_PROVIDED_EXCEPTION } from '../constants';\nimport { AmplifyError } from '../errors';\nexport const AMPLIFY_SYMBOL = (typeof Symbol !== 'undefined'\n    ? Symbol('amplify_default')\n    : '@@amplify_default');\nconst logger = new ConsoleLogger('Hub');\nexport class HubClass {\n    constructor(name) {\n        this.listeners = new Map();\n        this.protectedChannels = [\n            'core',\n            'auth',\n            'api',\n            'analytics',\n            'interactions',\n            'pubsub',\n            'storage',\n            'ui',\n            'xr',\n        ];\n        this.name = name;\n    }\n    /**\n     * Used internally to remove a Hub listener.\n     *\n     * @remarks\n     * This private method is for internal use only. Instead of calling Hub.remove, call the result of Hub.listen.\n     */\n    _remove(channel, listener) {\n        const holder = this.listeners.get(channel);\n        if (!holder) {\n            logger.warn(`No listeners for ${channel}`);\n            return;\n        }\n        this.listeners.set(channel, [\n            ...holder.filter(({ callback }) => callback !== listener),\n        ]);\n    }\n    dispatch(channel, payload, source, ampSymbol) {\n        if (typeof channel === 'string' &&\n            this.protectedChannels.indexOf(channel) > -1) {\n            const hasAccess = ampSymbol === AMPLIFY_SYMBOL;\n            if (!hasAccess) {\n                logger.warn(`WARNING: ${channel} is protected and dispatching on it can have unintended consequences`);\n            }\n        }\n        const capsule = {\n            channel,\n            payload: { ...payload },\n            source,\n            patternInfo: [],\n        };\n        try {\n            this._toListeners(capsule);\n        }\n        catch (e) {\n            logger.error(e);\n        }\n    }\n    listen(channel, callback, listenerName = 'noname') {\n        let cb;\n        if (typeof callback !== 'function') {\n            throw new AmplifyError({\n                name: NO_HUBCALLBACK_PROVIDED_EXCEPTION,\n                message: 'No callback supplied to Hub',\n            });\n        }\n        else {\n            // Needs to be casted as a more generic type\n            cb = callback;\n        }\n        let holder = this.listeners.get(channel);\n        if (!holder) {\n            holder = [];\n            this.listeners.set(channel, holder);\n        }\n        holder.push({\n            name: listenerName,\n            callback: cb,\n        });\n        return () => {\n            this._remove(channel, cb);\n        };\n    }\n    _toListeners(capsule) {\n        const { channel, payload } = capsule;\n        const holder = this.listeners.get(channel);\n        if (holder) {\n            holder.forEach(listener => {\n                logger.debug(`Dispatching to ${channel} with `, payload);\n                try {\n                    listener.callback(capsule);\n                }\n                catch (e) {\n                    logger.error(e);\n                }\n            });\n        }\n    }\n}\n/* We export a __default__ instance of HubClass to use it as a\npseudo Singleton for the main messaging bus, however you can still create\nyour own instance of HubClass() for a separate \"private bus\" of events. */\nexport const Hub = new HubClass('__default__');\n/**\n * @internal\n *\n * Internal hub used for core Amplify functionality. Not intended for use outside of Amplify.\n *\n */\nexport const HubInternal = new HubClass('internal-hub');\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport function bytesToString(input) {\n    return Array.from(input, byte => String.fromCodePoint(byte)).join('');\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { getBtoa } from '../../globalHelpers';\nimport { bytesToString } from './bytesToString';\nexport const base64Encoder = {\n    /**\n     * Convert input to base64-encoded string\n     * @param input - string to convert to base64\n     * @param options - encoding options that can optionally produce a base64url string\n     * @returns base64-encoded string\n     */\n    convert(input, options = {\n        urlSafe: false,\n        skipPadding: false,\n    }) {\n        const inputStr = typeof input === 'string' ? input : bytesToString(input);\n        let encodedStr = getBtoa()(inputStr);\n        // urlSafe char replacement and skipPadding options conform to the base64url spec\n        // https://datatracker.ietf.org/doc/html/rfc4648#section-5\n        if (options.urlSafe) {\n            encodedStr = encodedStr.replace(/\\+/g, '-').replace(/\\//g, '_');\n        }\n        if (options.skipPadding) {\n            encodedStr = encodedStr.replace(/=/g, '');\n        }\n        return encodedStr;\n    },\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { ApiError } from '@aws-amplify/core/internals/utils';\nexport class RestApiError extends ApiError {\n    constructor(params) {\n        super(params);\n        // TODO: Delete the following 2 lines after we change the build target to >= es2015\n        this.constructor = RestApiError;\n        Object.setPrototypeOf(this, RestApiError.prototype);\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { RestApiError } from './RestApiError';\n/**\n * Internal-only class for CanceledError.\n *\n * @internal\n */\nexport class CanceledError extends RestApiError {\n    constructor(params = {}) {\n        super({\n            name: 'CanceledError',\n            message: 'Request is canceled by user',\n            ...params,\n        });\n        // TODO: Delete the following 2 lines after we change the build target to >= es2015\n        this.constructor = CanceledError;\n        Object.setPrototypeOf(this, CanceledError.prototype);\n    }\n}\n/**\n * Check if an error is caused by user calling `cancel()` in REST API.\n *\n * @note This function works **ONLY** for errors thrown by REST API. For GraphQL APIs, use `client.isCancelError(error)`\n *   instead. `client` is generated from  `generateClient()` API from `aws-amplify/api`.\n *\n * @param {unknown} error The unknown exception to be checked.\n * @returns - A boolean indicating if the error was from an upload cancellation\n */\nexport const isCancelError = (error) => !!error && error instanceof CanceledError;\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport const deepFreeze = (object) => {\n    const propNames = Reflect.ownKeys(object);\n    for (const name of propNames) {\n        const value = object[name];\n        if ((value && typeof value === 'object') || typeof value === 'function') {\n            deepFreeze(value);\n        }\n    }\n    return Object.freeze(object);\n};\n", "export class AuthClass {\n    /**\n     * Configure Auth category\n     *\n     * @internal\n     *\n     * @param authResourcesConfig - Resources configurations required by Auth providers.\n     * @param authOptions - Client options used by library\n     *\n     * @returns void\n     */\n    configure(authResourcesConfig, authOptions) {\n        this.authConfig = authResourcesConfig;\n        this.authOptions = authOptions;\n    }\n    /**\n     * Fetch the auth tokens, and the temporary AWS credentials and identity if they are configured. By default it\n     * does not refresh the auth tokens or credentials if they are loaded in storage already. You can force a refresh\n     * with `{ forceRefresh: true }` input.\n     *\n     * @param options - Options configuring the fetch behavior.\n     *\n     * @returns Promise of current auth session {@link AuthSession}.\n     */\n    async fetchAuthSession(options = {}) {\n        let credentialsAndIdentityId;\n        let userSub;\n        // Get tokens will throw if session cannot be refreshed (network or service error) or return null if not available\n        const tokens = await this.getTokens(options);\n        if (tokens) {\n            userSub = tokens.accessToken?.payload?.sub;\n            // getCredentialsAndIdentityId will throw if cannot get credentials (network or service error)\n            credentialsAndIdentityId =\n                await this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({\n                    authConfig: this.authConfig,\n                    tokens,\n                    authenticated: true,\n                    forceRefresh: options.forceRefresh,\n                });\n        }\n        else {\n            // getCredentialsAndIdentityId will throw if cannot get credentials (network or service error)\n            credentialsAndIdentityId =\n                await this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({\n                    authConfig: this.authConfig,\n                    authenticated: false,\n                    forceRefresh: options.forceRefresh,\n                });\n        }\n        return {\n            tokens,\n            credentials: credentialsAndIdentityId?.credentials,\n            identityId: credentialsAndIdentityId?.identityId,\n            userSub,\n        };\n    }\n    async clearCredentials() {\n        await this.authOptions?.credentialsProvider?.clearCredentialsAndIdentityId();\n    }\n    async getTokens(options) {\n        return ((await this.authOptions?.tokenProvider?.getTokens(options)) ?? undefined);\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AMPLIFY_SYMBOL, Hub } from '../Hub';\nimport { deepFreeze } from '../utils';\nimport { parseAmplifyConfig } from '../libraryUtils';\nimport { AuthClass } from './Auth';\nimport { ADD_OAUTH_LISTENER } from './constants';\nexport class AmplifyClass {\n    constructor() {\n        this.oAuthListener = undefined;\n        this.resourcesConfig = {};\n        this.libraryOptions = {};\n        this.Auth = new AuthClass();\n    }\n    /**\n     * Configures Amplify for use with your back-end resources.\n     *\n     * @remarks\n     * This API does not perform any merging of either `resourcesConfig` or `libraryOptions`. The most recently\n     * provided values will be used after configuration.\n     *\n     * @remarks\n     * `configure` can be used to specify additional library options where available for supported categories.\n     *\n     * @param resourceConfig - Back-end resource configuration. Typically provided via the `aws-exports.js` file.\n     * @param libraryOptions - Additional options for customizing the behavior of the library.\n     */\n    configure(resourcesConfig, libraryOptions) {\n        const resolvedResourceConfig = parseAmplifyConfig(resourcesConfig);\n        this.resourcesConfig = resolvedResourceConfig;\n        if (libraryOptions) {\n            this.libraryOptions = libraryOptions;\n        }\n        // Make resource config immutable\n        this.resourcesConfig = deepFreeze(this.resourcesConfig);\n        this.Auth.configure(this.resourcesConfig.Auth, this.libraryOptions.Auth);\n        Hub.dispatch('core', {\n            event: 'configure',\n            data: this.resourcesConfig,\n        }, 'Configure', AMPLIFY_SYMBOL);\n        this.notifyOAuthListener();\n    }\n    /**\n     * Provides access to the current back-end resource configuration for the Library.\n     *\n     * @returns Returns the immutable back-end resource configuration.\n     */\n    getConfig() {\n        return this.resourcesConfig;\n    }\n    /** @internal */\n    [ADD_OAUTH_LISTENER](listener) {\n        if (this.resourcesConfig.Auth?.Cognito.loginWith?.oauth) {\n            // when Amplify has been configured with a valid OAuth config while adding the listener, run it directly\n            listener(this.resourcesConfig.Auth?.Cognito);\n        }\n        else {\n            // otherwise register the listener and run it later when Amplify gets configured with a valid oauth config\n            this.oAuthListener = listener;\n        }\n    }\n    notifyOAuthListener() {\n        if (!this.resourcesConfig.Auth?.Cognito.loginWith?.oauth ||\n            !this.oAuthListener) {\n            return;\n        }\n        this.oAuthListener(this.resourcesConfig.Auth?.Cognito);\n        // the listener should only be notified once with a valid oauth config\n        this.oAuthListener = undefined;\n    }\n}\n/**\n * The `Amplify` utility is used to configure the library.\n *\n * @remarks\n * `Amplify` orchestrates cross-category communication within the library.\n */\nexport const Amplify = new AmplifyClass();\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Amplify } from '../Amplify';\nimport { fetchAuthSession as fetchAuthSessionInternal } from './internal/fetchAuthSession';\n/**\n * Fetch the auth session including the tokens and credentials if they are available. By default it\n * does not refresh the auth tokens or credentials if they are loaded in storage already. You can force a refresh\n * with `{ forceRefresh: true }` input.\n *\n * @param options - Options configuring the fetch behavior.\n * @throws {@link AuthError} - Throws error when session information cannot be refreshed.\n * @returns Promise<AuthSession>\n */\nexport const fetchAuthSession = (options) => {\n    return fetchAuthSessionInternal(Amplify, options);\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport const parseMetadata = (response) => {\n    const { headers, statusCode } = response;\n    return {\n        ...(isMetadataBearer(response) ? response.$metadata : {}),\n        httpStatusCode: statusCode,\n        requestId: headers['x-amzn-requestid'] ??\n            headers['x-amzn-request-id'] ??\n            headers['x-amz-request-id'],\n        extendedRequestId: headers['x-amz-id-2'],\n        cfId: headers['x-amz-cf-id'],\n    };\n};\nconst isMetadataBearer = (response) => typeof response?.$metadata === 'object';\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { parseMetadata } from './responseInfo';\n/**\n * Utility functions for serializing and deserializing of JSON protocol in general(including: REST-JSON, JSON-RPC, etc.)\n */\n/**\n * Error parser for AWS JSON protocol.\n */\nexport const parseJsonError = async (response) => {\n    if (!response || response.statusCode < 300) {\n        return;\n    }\n    const body = await parseJsonBody(response);\n    const sanitizeErrorCode = (rawValue) => {\n        const [cleanValue] = rawValue.toString().split(/[,:]+/);\n        if (cleanValue.includes('#')) {\n            return cleanValue.split('#')[1];\n        }\n        return cleanValue;\n    };\n    const code = sanitizeErrorCode(response.headers['x-amzn-errortype'] ??\n        body.code ??\n        body.__type ??\n        'UnknownError');\n    const message = body.message ?? body.Message ?? 'Unknown error';\n    const error = new Error(message);\n    return Object.assign(error, {\n        name: code,\n        $metadata: parseMetadata(response),\n    });\n};\n/**\n * Parse JSON response body to JavaScript object.\n */\nexport const parseJsonBody = async (response) => {\n    if (!response.body) {\n        throw new Error('Missing response payload');\n    }\n    const output = await response.body.json();\n    return Object.assign(output, {\n        $metadata: parseMetadata(response),\n    });\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Compose a service API handler that accepts input as defined shape and responds conforming to defined output shape.\n * A service API handler is composed with:\n * * A transfer handler\n * * A serializer function\n * * A deserializer function\n * * A default config object\n *\n * The returned service API handler, when called, will trigger the following workflow:\n * 1. When calling the service API handler function, the default config object is merged into the input config\n * object to assign the default values of some omitted configs, resulting to a resolved config object.\n * 2. The `endpointResolver` function from the default config object will be invoked with the resolved config object and\n * API input object resulting to an endpoint instance.\n * 3. The serializer function is invoked with API input object and the endpoint instance resulting to an HTTP request\n * instance.\n * 4. The HTTP request instance and the resolved config object is passed to the transfer handler function.\n * 5. The transfer handler function resolves to an HTTP response instance(can be either successful or failed status code).\n * 6. The deserializer function is invoked with the HTTP response instance resulting to the API output object, and\n * return to the caller.\n *\n *\n * @param transferHandler Async function for dispatching HTTP requests and returning HTTP response.\n * @param serializer  Async function for converting object in defined input shape into HTTP request targeting a given\n * \tendpoint.\n * @param deserializer Async function for converting HTTP response into output object in defined output shape, or error\n * \tshape.\n * @param defaultConfig  object containing default options to be consumed by transfer handler, serializer and\n *  deserializer.\n * @returns a async service API handler function that accepts a config object and input object in defined shape, returns\n * \tan output object in defined shape. It may also throw error instance in defined shape in deserializer. The config\n *  object type is composed with options type of transferHandler, endpointResolver function as well as endpointResolver\n *  function's input options type, region string. The config object property will be marked as optional if it's also\n * \tdefined in defaultConfig.\n *\n * @internal\n */\nexport const composeServiceApi = (transferHandler, serializer, deserializer, defaultConfig) => {\n    return async (config, input) => {\n        const resolvedConfig = {\n            ...defaultConfig,\n            ...config,\n        };\n        // We need to allow different endpoints based on both given config(other than region) and input.\n        // However for most of non-S3 services, region is the only input for endpoint resolver.\n        const endpoint = await resolvedConfig.endpointResolver(resolvedConfig, input);\n        // Unlike AWS SDK clients, a serializer should NOT populate the `host` or `content-length` headers.\n        // Both of these headers are prohibited per Spec(https://developer.mozilla.org/en-US/docs/Glossary/Forbidden_header_name).\n        // They will be populated automatically by browser, or node-fetch polyfill.\n        const request = await serializer(input, endpoint);\n        const response = await transferHandler(request, {\n            ...resolvedConfig,\n        });\n        return deserializer(response);\n    };\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Default partition for AWS services. This is used when the region is not provided or the region is not recognized.\n *\n * @internal\n */\nexport const defaultPartition = {\n    id: 'aws',\n    outputs: {\n        dnsSuffix: 'amazonaws.com',\n    },\n    regionRegex: '^(us|eu|ap|sa|ca|me|af)\\\\-\\\\w+\\\\-\\\\d+$',\n    regions: ['aws-global'],\n};\n/**\n * This data is adapted from the partition file from AWS SDK shared utilities but remove some contents for bundle size\n * concern. Information removed are `dualStackDnsSuffix`, `supportDualStack`, `supportFIPS`, restricted partitions, and\n * list of regions for each partition other than global regions.\n *\n * * Ref: https://docs.aws.amazon.com/general/latest/gr/rande.html#regional-endpoints\n * * Ref: https://github.com/aws/aws-sdk-js-v3/blob/0201baef03c2379f1f6f7150b9d401d4b230d488/packages/util-endpoints/src/lib/aws/partitions.json#L1\n *\n * @internal\n */\nexport const partitionsInfo = {\n    partitions: [\n        defaultPartition,\n        {\n            id: 'aws-cn',\n            outputs: {\n                dnsSuffix: 'amazonaws.com.cn',\n            },\n            regionRegex: '^cn\\\\-\\\\w+\\\\-\\\\d+$',\n            regions: ['aws-cn-global'],\n        },\n    ],\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { defaultPartition, partitionsInfo } from './partitions';\n/**\n * Get the AWS Services endpoint URL's DNS suffix for a given region. A typical AWS regional service endpoint URL will\n * follow this pattern: {endpointPrefix}.{region}.{dnsSuffix}. For example, the endpoint URL for Cognito Identity in\n * us-east-1 will be cognito-identity.us-east-1.amazonaws.com. Here the DnsSuffix is `amazonaws.com`.\n *\n * @param region\n * @returns The DNS suffix\n *\n * @internal\n */\nexport const getDnsSuffix = (region) => {\n    const { partitions } = partitionsInfo;\n    for (const { regions, outputs, regionRegex } of partitions) {\n        const regex = new RegExp(regionRegex);\n        if (regions.includes(region) || regex.test(region)) {\n            return outputs.dnsSuffix;\n        }\n    }\n    return defaultPartition.outputs.dnsSuffix;\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport const DEFAULT_RETRY_ATTEMPTS = 3;\nexport const AMZ_SDK_INVOCATION_ID_HEADER = 'amz-sdk-invocation-id';\nexport const AMZ_SDK_REQUEST_HEADER = 'amz-sdk-request';\nexport const DEFAULT_MAX_DELAY_MS = 5 * 60 * 1000;\n", "import { DEFAULT_RETRY_ATTEMPTS } from './constants';\n/**\n * Middleware that executes the retry logic.\n */\nexport const retryMiddlewareFactory = ({ maxAttempts = DEFAULT_RETRY_ATTEMPTS, retryDecider, computeDelay, abortSignal, }) => {\n    if (maxAttempts < 1) {\n        throw new Error('maxAttempts must be greater than 0');\n    }\n    return (next, context) => async function retryMiddleware(request) {\n        let error;\n        let attemptsCount = context.attemptsCount ?? 0;\n        let response;\n        // When retry is not needed or max attempts is reached, either error or response will be set. This function handles either cases.\n        const handleTerminalErrorOrResponse = () => {\n            if (response) {\n                addOrIncrementMetadataAttempts(response, attemptsCount);\n                return response;\n            }\n            else {\n                addOrIncrementMetadataAttempts(error, attemptsCount);\n                throw error;\n            }\n        };\n        while (!abortSignal?.aborted && attemptsCount < maxAttempts) {\n            try {\n                response = await next(request);\n                error = undefined;\n            }\n            catch (e) {\n                error = e;\n                response = undefined;\n            }\n            // context.attemptsCount may be updated after calling next handler which may retry the request by itself.\n            attemptsCount =\n                (context.attemptsCount ?? 0) > attemptsCount\n                    ? (context.attemptsCount ?? 0)\n                    : attemptsCount + 1;\n            context.attemptsCount = attemptsCount;\n            const { isCredentialsExpiredError, retryable } = await retryDecider(response, error, context);\n            if (retryable) {\n                // Setting isCredentialsInvalid flag to notify signing middleware to forceRefresh credentials provider.\n                context.isCredentialsExpired = !!isCredentialsExpiredError;\n                if (!abortSignal?.aborted && attemptsCount < maxAttempts) {\n                    // prevent sleep for last attempt or cancelled request;\n                    const delay = computeDelay(attemptsCount);\n                    await cancellableSleep(delay, abortSignal);\n                }\n                continue;\n            }\n            else {\n                return handleTerminalErrorOrResponse();\n            }\n        }\n        if (abortSignal?.aborted) {\n            throw new Error('Request aborted.');\n        }\n        else {\n            return handleTerminalErrorOrResponse();\n        }\n    };\n};\nconst cancellableSleep = (timeoutMs, abortSignal) => {\n    if (abortSignal?.aborted) {\n        return Promise.resolve();\n    }\n    let timeoutId;\n    let sleepPromiseResolveFn;\n    const sleepPromise = new Promise(resolve => {\n        sleepPromiseResolveFn = resolve;\n        timeoutId = setTimeout(resolve, timeoutMs);\n    });\n    abortSignal?.addEventListener('abort', function cancelSleep(_) {\n        clearTimeout(timeoutId);\n        abortSignal?.removeEventListener('abort', cancelSleep);\n        sleepPromiseResolveFn();\n    });\n    return sleepPromise;\n};\nconst addOrIncrementMetadataAttempts = (nextHandlerOutput, attempts) => {\n    if (Object.prototype.toString.call(nextHandlerOutput) !== '[object Object]') {\n        return;\n    }\n    nextHandlerOutput.$metadata = {\n        ...(nextHandlerOutput.$metadata ?? {}),\n        attempts,\n    };\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { amplifyUuid } from '../../../libraryUtils';\nimport { AMZ_SDK_INVOCATION_ID_HEADER } from './constants';\n/**\n * Middleware injects a UUID string to `amz-sdk-invocation-id` header.\n * if the header is not set already. This header is helpful to provide\n * observability to group the requests caused by automatic retry.\n *\n * This middleware is standalone because of extra UUID dependency, we will\n * NOT use this middleware for API categories.\n *\n * Ref: https://sdk.amazonaws.com/kotlin/api/smithy-kotlin/api/1.0.9/http-client/aws.smithy.kotlin.runtime.http.operation/-http-operation-context/-sdk-invocation-id.html\n */\nexport const amzSdkInvocationIdHeaderMiddlewareFactory = () => next => {\n    return async function amzSdkInvocationIdHeaderMiddleware(request) {\n        if (!request.headers[AMZ_SDK_INVOCATION_ID_HEADER]) {\n            request.headers[AMZ_SDK_INVOCATION_ID_HEADER] = amplifyUuid();\n        }\n        return next(request);\n    };\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AMZ_SDK_REQUEST_HEADER, DEFAULT_RETRY_ATTEMPTS } from './constants';\n/**\n * Middleware injects `amz-sdk-request` header to indicate the retry state at the time an HTTP request is made.\n * This middleware should co-exist with retryMiddleware as it relies on the retryAttempts value in middleware context\n * set by the retry middleware.\n *\n * Example header: `amz-sdk-request: attempt=1; max=3`.\n *\n * This middleware is standalone because of extra headers may conflict with custom endpoint settings(e.g. CORS), we will\n * NOT use this middleware for API categories.\n */\nexport const amzSdkRequestHeaderMiddlewareFactory = ({ maxAttempts = DEFAULT_RETRY_ATTEMPTS }) => (next, context) => {\n    return async function amzSdkRequestHeaderMiddleware(request) {\n        const attemptsCount = context.attemptsCount ?? 0;\n        request.headers[AMZ_SDK_REQUEST_HEADER] =\n            `attempt=${attemptsCount + 1}; max=${maxAttempts}`;\n        return next(request);\n    };\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Middleware injects user agent string to specified header(default to 'x-amz-user-agent'),\n * if the header is not set already.\n *\n * TODO: incorporate new user agent design\n */\nexport const userAgentMiddlewareFactory = ({ userAgentHeader = 'x-amz-user-agent', userAgentValue = '', }) => next => {\n    return async function userAgentMiddleware(request) {\n        if (userAgentValue.trim().length === 0) {\n            const result = await next(request);\n            return result;\n        }\n        else {\n            const headerName = userAgentHeader.toLowerCase();\n            request.headers[headerName] = request.headers[headerName]\n                ? `${request.headers[headerName]} ${userAgentValue}`\n                : userAgentValue;\n            const response = await next(request);\n            return response;\n        }\n    };\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Compose a transfer handler with a core transfer handler and a list of middleware.\n * @param coreHandler Core transfer handler\n * @param middleware\tList of middleware\n * @returns A transfer handler whose option type is the union of the core\n * \ttransfer handler's option type and the middleware's option type.\n * @internal\n */\nexport const composeTransferHandler = (coreHandler, middleware) => (request, options) => {\n    const context = {};\n    let composedHandler = (composeHandlerRequest) => coreHandler(composeHandlerRequest, options);\n    for (let i = middleware.length - 1; i >= 0; i--) {\n        const m = middleware[i];\n        const resolvedMiddleware = m(options);\n        composedHandler = resolvedMiddleware(composedHandler, context);\n    }\n    return composedHandler(request);\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Cache the payload of a response body. It allows multiple calls to the body,\n * for example, when reading the body in both retry decider and error deserializer.\n * Caching body is allowed here because we call the body accessor(blob(), json(),\n * etc.) when body is small or streaming implementation is not available(RN).\n *\n * @internal\n */\nexport const withMemoization = (payloadAccessor) => {\n    let cached;\n    return () => {\n        if (!cached) {\n            // Explicitly not awaiting. Intermediate await would add overhead and\n            // introduce a possible race in the event that this wrapper is called\n            // again before the first `payloadAccessor` call resolves.\n            cached = payloadAccessor();\n        }\n        return cached;\n    };\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AmplifyError } from '../../errors';\nimport { withMemoization } from '../utils/memoization';\nimport { AmplifyErrorCode } from '../../types';\nconst shouldSendBody = (method) => !['HEAD', 'GET', 'DELETE'].includes(method.toUpperCase());\n// TODO[AllanZhengYP]: we need to provide isCanceledError utility\nexport const fetchTransferHandler = async ({ url, method, headers, body }, { abortSignal, cache, withCrossDomainCredentials }) => {\n    let resp;\n    try {\n        resp = await fetch(url, {\n            method,\n            headers,\n            body: shouldSendBody(method) ? body : undefined,\n            signal: abortSignal,\n            cache,\n            credentials: withCrossDomainCredentials ? 'include' : 'same-origin',\n        });\n    }\n    catch (e) {\n        if (e instanceof TypeError) {\n            throw new AmplifyError({\n                name: AmplifyErrorCode.NetworkError,\n                message: 'A network error has occurred.',\n                underlyingError: e,\n            });\n        }\n        throw e;\n    }\n    const responseHeaders = {};\n    resp.headers?.forEach((value, key) => {\n        responseHeaders[key.toLowerCase()] = value;\n    });\n    const httpResponse = {\n        statusCode: resp.status,\n        headers: responseHeaders,\n        body: null,\n    };\n    // resp.body is a ReadableStream according to Fetch API spec, but React Native\n    // does not implement it.\n    const bodyWithMixin = Object.assign(resp.body ?? {}, {\n        text: withMemoization(() => resp.text()),\n        blob: withMemoization(() => resp.blob()),\n        json: withMemoization(() => resp.json()),\n    });\n    return {\n        ...httpResponse,\n        body: bodyWithMixin,\n    };\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { amzSdkInvocationIdHeaderMiddlewareFactory, amzSdkRequestHeaderMiddlewareFactory, retryMiddlewareFactory, } from '../../middleware/retry';\nimport { userAgentMiddlewareFactory, } from '../../middleware/userAgent';\nimport { composeTransferHandler } from '../../internal/composeTransferHandler';\nimport { fetchTransferHandler } from '../fetch';\nexport const unauthenticatedHandler = composeTransferHandler(fetchTransferHandler, [\n    userAgentMiddlewareFactory,\n    amzSdkInvocationIdHeaderMiddlewareFactory,\n    retryMiddlewareFactory,\n    amzSdkRequestHeaderMiddlewareFactory,\n]);\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { jitteredBackoff as jitteredBackoffUtil } from '../../../utils';\nimport { DEFAULT_MAX_DELAY_MS } from './constants';\n// TODO: [v6] The separate retry utility is used by Data packages now and will replaced by retry middleware.\nexport const jitteredBackoff = attempt => {\n    const delayFunction = jitteredBackoffUtil(DEFAULT_MAX_DELAY_MS);\n    const delay = delayFunction(attempt);\n    // The delayFunction returns false when the delay is greater than the max delay(5 mins).\n    // In this case, the retry middleware will delay 5 mins instead, as a ceiling of the delay.\n    return delay === false ? DEFAULT_MAX_DELAY_MS : delay;\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// via https://github.com/aws/aws-sdk-js-v3/blob/ab0e7be36e7e7f8a0c04834357aaad643c7912c3/packages/service-error-classification/src/constants.ts#L8\nconst CLOCK_SKEW_ERROR_CODES = [\n    'AuthFailure',\n    'InvalidSignatureException',\n    'RequestExpired',\n    'RequestInTheFuture',\n    'RequestTimeTooSkewed',\n    'SignatureDoesNotMatch',\n    'BadRequestException', // API Gateway\n];\n/**\n * Given an error code, returns true if it is related to a clock skew error.\n *\n * @param errorCode String representation of some error.\n * @returns True if given error is present in `CLOCK_SKEW_ERROR_CODES`, false otherwise.\n *\n * @internal\n */\nexport const isClockSkewError = (errorCode) => !!errorCode && CLOCK_SKEW_ERROR_CODES.includes(errorCode);\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AmplifyErrorCode } from '../../../types';\nimport { isClockSkewError } from './isClockSkewError';\n/**\n * Get retry decider function\n * @param errorParser Function to load JavaScript error from HTTP response\n */\nexport const getRetryDecider = (errorParser) => async (response, error) => {\n    const parsedError = error ??\n        (await errorParser(response)) ??\n        undefined;\n    const errorCode = parsedError?.code || parsedError?.name;\n    const statusCode = response?.statusCode;\n    const isRetryable = isConnectionError(error) ||\n        isThrottlingError(statusCode, errorCode) ||\n        isClockSkewError(errorCode) ||\n        isServerSideError(statusCode, errorCode);\n    return {\n        retryable: isRetryable,\n    };\n};\n// reference: https://github.com/aws/aws-sdk-js-v3/blob/ab0e7be36e7e7f8a0c04834357aaad643c7912c3/packages/service-error-classification/src/constants.ts#L22-L37\nconst THROTTLING_ERROR_CODES = [\n    'BandwidthLimitExceeded',\n    'EC2ThrottledException',\n    'LimitExceededException',\n    'PriorRequestNotComplete',\n    'ProvisionedThroughputExceededException',\n    'RequestLimitExceeded',\n    'RequestThrottled',\n    'RequestThrottledException',\n    'SlowDown',\n    'ThrottledException',\n    'Throttling',\n    'ThrottlingException',\n    'TooManyRequestsException',\n];\nconst TIMEOUT_ERROR_CODES = [\n    'TimeoutError',\n    'RequestTimeout',\n    'RequestTimeoutException',\n];\nconst isThrottlingError = (statusCode, errorCode) => statusCode === 429 ||\n    (!!errorCode && THROTTLING_ERROR_CODES.includes(errorCode));\nconst isConnectionError = (error) => [\n    AmplifyErrorCode.NetworkError,\n    // TODO(vNext): unify the error code `ERR_NETWORK` used by the Storage XHR handler\n    'ERR_NETWORK',\n].includes(error?.name);\nconst isServerSideError = (statusCode, errorCode) => (!!statusCode && [500, 502, 503, 504].includes(statusCode)) ||\n    (!!errorCode && TIMEOUT_ERROR_CODES.includes(errorCode));\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { getDnsSuffix, parseJsonError, unauthenticatedHandler, } from '../../clients';\nimport { composeTransferHandler } from '../../clients/internal/composeTransferHandler';\nimport { getRetryDecider, jitteredBackoff, } from '../../clients/middleware/retry';\nimport { getAmplifyUserAgent } from '../../Platform';\nimport { observeFrameworkChanges } from '../../Platform/detectFramework';\nimport { AmplifyUrl } from '../../utils/amplifyUrl';\n/**\n * The service name used to sign requests if the API requires authentication.\n */\nconst SERVICE_NAME = 'cognito-identity';\n/**\n * The endpoint resolver function that returns the endpoint URL for a given region.\n */\nconst endpointResolver = ({ region }) => ({\n    url: new AmplifyUrl(`https://cognito-identity.${region}.${getDnsSuffix(region)}`),\n});\n/**\n * A Cognito Identity-specific middleware that disables caching for all requests.\n */\nconst disableCacheMiddlewareFactory = () => next => async function disableCacheMiddleware(request) {\n    request.headers['cache-control'] = 'no-store';\n    return next(request);\n};\n/**\n * A Cognito Identity-specific transfer handler that does NOT sign requests, and\n * disables caching.\n *\n * @internal\n */\nexport const cognitoIdentityTransferHandler = composeTransferHandler(unauthenticatedHandler, [disableCacheMiddlewareFactory]);\n/**\n * @internal\n */\nexport const defaultConfig = {\n    service: SERVICE_NAME,\n    endpointResolver,\n    retryDecider: getRetryDecider(parseJsonError),\n    computeDelay: jitteredBackoff,\n    userAgentValue: getAmplifyUserAgent(),\n    cache: 'no-store',\n};\nobserveFrameworkChanges(() => {\n    defaultConfig.userAgentValue = getAmplifyUserAgent();\n});\n/**\n * @internal\n */\nexport const getSharedHeaders = (operation) => ({\n    'content-type': 'application/x-amz-json-1.1',\n    'x-amz-target': `AWSCognitoIdentityService.${operation}`,\n});\n/**\n * @internal\n */\nexport const buildHttpRpcRequest = ({ url }, headers, body) => ({\n    headers,\n    url,\n    body,\n    method: 'POST',\n});\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { parseJsonBody, parseJsonError, parseMetadata, } from '../../clients';\nimport { composeServiceApi } from '../../clients/internal';\nimport { buildHttpRpcRequest, cognitoIdentityTransferHandler, defaultConfig, getSharedHeaders, } from './base';\nconst getIdSerializer = (input, endpoint) => {\n    const headers = getSharedHeaders('GetId');\n    const body = JSON.stringify(input);\n    return buildHttpRpcRequest(endpoint, headers, body);\n};\nconst getIdDeserializer = async (response) => {\n    if (response.statusCode >= 300) {\n        const error = await parseJsonError(response);\n        throw error;\n    }\n    else {\n        const body = await parseJsonBody(response);\n        return {\n            IdentityId: body.IdentityId,\n            $metadata: parseMetadata(response),\n        };\n    }\n};\n/**\n * @internal\n */\nexport const getId = composeServiceApi(cognitoIdentityTransferHandler, getIdSerializer, getIdDeserializer, defaultConfig);\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { parseJsonBody, parseJsonError, parseMetadata, } from '../../clients';\nimport { composeServiceApi } from '../../clients/internal';\nimport { buildHttpRpcRequest, cognitoIdentityTransferHandler, defaultConfig, getSharedHeaders, } from './base';\nconst getCredentialsForIdentitySerializer = (input, endpoint) => {\n    const headers = getSharedHeaders('GetCredentialsForIdentity');\n    const body = JSON.stringify(input);\n    return buildHttpRpcRequest(endpoint, headers, body);\n};\nconst getCredentialsForIdentityDeserializer = async (response) => {\n    if (response.statusCode >= 300) {\n        const error = await parseJsonError(response);\n        throw error;\n    }\n    else {\n        const body = await parseJsonBody(response);\n        return {\n            IdentityId: body.IdentityId,\n            Credentials: deserializeCredentials(body.Credentials),\n            $metadata: parseMetadata(response),\n        };\n    }\n};\nconst deserializeCredentials = ({ AccessKeyId, SecretKey, SessionToken, Expiration, } = {}) => {\n    return {\n        AccessKeyId,\n        SecretKey,\n        SessionToken,\n        Expiration: Expiration && new Date(Expiration * 1000),\n    };\n};\n/**\n * @internal\n */\nexport const getCredentialsForIdentity = composeServiceApi(cognitoIdentityTransferHandler, getCredentialsForIdentitySerializer, getCredentialsForIdentityDeserializer, defaultConfig);\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { PlatformNotSupportedError } from '../errors';\n/**\n * @internal\n */\nexport class KeyValueStorage {\n    constructor(storage) {\n        this.storage = storage;\n    }\n    /**\n     * This is used to set a specific item in storage\n     * @param {string} key - the key for the item\n     * @param {object} value - the value\n     * @returns {string} value that was set\n     */\n    async setItem(key, value) {\n        if (!this.storage)\n            throw new PlatformNotSupportedError();\n        this.storage.setItem(key, value);\n    }\n    /**\n     * This is used to get a specific key from storage\n     * @param {string} key - the key for the item\n     * This is used to clear the storage\n     * @returns {string} the data item\n     */\n    async getItem(key) {\n        if (!this.storage)\n            throw new PlatformNotSupportedError();\n        return this.storage.getItem(key);\n    }\n    /**\n     * This is used to remove an item from storage\n     * @param {string} key - the key being set\n     * @returns {string} value - value that was deleted\n     */\n    async removeItem(key) {\n        if (!this.storage)\n            throw new PlatformNotSupportedError();\n        this.storage.removeItem(key);\n    }\n    /**\n     * This is used to clear the storage\n     * @returns {string} nothing\n     */\n    async clear() {\n        if (!this.storage)\n            throw new PlatformNotSupportedError();\n        this.storage.clear();\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nexport class InMemoryStorage {\n    constructor() {\n        this.storage = new Map();\n    }\n    get length() {\n        return this.storage.size;\n    }\n    key(index) {\n        if (index > this.length - 1) {\n            return null;\n        }\n        return Array.from(this.storage.keys())[index];\n    }\n    setItem(key, value) {\n        this.storage.set(key, value);\n    }\n    getItem(key) {\n        return this.storage.get(key) ?? null;\n    }\n    removeItem(key) {\n        this.storage.delete(key);\n    }\n    clear() {\n        this.storage.clear();\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { ConsoleLogger } from '../Logger';\nimport { InMemoryStorage } from './InMemoryStorage';\n/**\n * @internal\n * @returns Either a reference to window.localStorage or an in-memory storage as fallback\n */\nconst logger = new ConsoleLogger('CoreStorageUtils');\nexport const getLocalStorageWithFallback = () => {\n    try {\n        // Attempt to use localStorage directly\n        if (typeof window !== 'undefined' && window.localStorage) {\n            return window.localStorage;\n        }\n    }\n    catch (e) {\n        // Handle any errors related to localStorage access\n        logger.info('localStorage not found. InMemoryStorage is used as a fallback.');\n    }\n    // Return in-memory storage as a fallback if localStorage is not accessible\n    return new InMemoryStorage();\n};\n/**\n * @internal\n * @returns Either a reference to window.sessionStorage or an in-memory storage as fallback\n */\nexport const getSessionStorageWithFallback = () => {\n    try {\n        // Attempt to use sessionStorage directly\n        if (typeof window !== 'undefined' && window.sessionStorage) {\n            // Verify we can actually use it by testing access\n            window.sessionStorage.getItem('test');\n            return window.sessionStorage;\n        }\n        throw new Error('sessionStorage is not defined');\n    }\n    catch (e) {\n        // Handle any errors related to sessionStorage access\n        logger.info('sessionStorage not found. InMemoryStorage is used as a fallback.');\n        return new InMemoryStorage();\n    }\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { KeyValueStorage } from './KeyValueStorage';\nimport { getLocalStorageWithFallback } from './utils';\n/**\n * @internal\n */\nexport class DefaultStorage extends KeyValueStorage {\n    constructor() {\n        super(getLocalStorageWithFallback());\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { KeyValueStorage } from './KeyValueStorage';\nimport { getSessionStorageWithFallback } from './utils';\n/**\n * @internal\n */\nexport class SessionStorage extends KeyValueStorage {\n    constructor() {\n        super(getSessionStorageWithFallback());\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { PlatformNotSupportedError } from '../errors';\n/**\n * @internal\n */\nexport class SyncKeyValueStorage {\n    constructor(storage) {\n        this._storage = storage;\n    }\n    get storage() {\n        if (!this._storage)\n            throw new PlatformNotSupportedError();\n        return this._storage;\n    }\n    /**\n     * This is used to set a specific item in storage\n     * @param {string} key - the key for the item\n     * @param {object} value - the value\n     * @returns {string} value that was set\n     */\n    setItem(key, value) {\n        this.storage.setItem(key, value);\n    }\n    /**\n     * This is used to get a specific key from storage\n     * @param {string} key - the key for the item\n     * This is used to clear the storage\n     * @returns {string} the data item\n     */\n    getItem(key) {\n        return this.storage.getItem(key);\n    }\n    /**\n     * This is used to remove an item from storage\n     * @param {string} key - the key being set\n     * @returns {string} value - value that was deleted\n     */\n    removeItem(key) {\n        this.storage.removeItem(key);\n    }\n    /**\n     * This is used to clear the storage\n     * @returns {string} nothing\n     */\n    clear() {\n        this.storage.clear();\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { SyncKeyValueStorage } from './SyncKeyValueStorage';\nimport { getSessionStorageWithFallback } from './utils';\n/**\n * @internal\n */\nexport class SyncSessionStorage extends SyncKeyValueStorage {\n    constructor() {\n        super(getSessionStorageWithFallback());\n    }\n}\n", "/*! js-cookie v3.0.5 | MIT */\r\n/* eslint-disable no-var */\r\nfunction assign (target) {\r\n  for (var i = 1; i < arguments.length; i++) {\r\n    var source = arguments[i];\r\n    for (var key in source) {\r\n      target[key] = source[key];\r\n    }\r\n  }\r\n  return target\r\n}\r\n/* eslint-enable no-var */\r\n\r\n/* eslint-disable no-var */\r\nvar defaultConverter = {\r\n  read: function (value) {\r\n    if (value[0] === '\"') {\r\n      value = value.slice(1, -1);\r\n    }\r\n    return value.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent)\r\n  },\r\n  write: function (value) {\r\n    return encodeURIComponent(value).replace(\r\n      /%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,\r\n      decodeURIComponent\r\n    )\r\n  }\r\n};\r\n/* eslint-enable no-var */\r\n\r\n/* eslint-disable no-var */\r\n\r\nfunction init (converter, defaultAttributes) {\r\n  function set (name, value, attributes) {\r\n    if (typeof document === 'undefined') {\r\n      return\r\n    }\r\n\r\n    attributes = assign({}, defaultAttributes, attributes);\r\n\r\n    if (typeof attributes.expires === 'number') {\r\n      attributes.expires = new Date(Date.now() + attributes.expires * 864e5);\r\n    }\r\n    if (attributes.expires) {\r\n      attributes.expires = attributes.expires.toUTCString();\r\n    }\r\n\r\n    name = encodeURIComponent(name)\r\n      .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\r\n      .replace(/[()]/g, escape);\r\n\r\n    var stringifiedAttributes = '';\r\n    for (var attributeName in attributes) {\r\n      if (!attributes[attributeName]) {\r\n        continue\r\n      }\r\n\r\n      stringifiedAttributes += '; ' + attributeName;\r\n\r\n      if (attributes[attributeName] === true) {\r\n        continue\r\n      }\r\n\r\n      // Considers RFC 6265 section 5.2:\r\n      // ...\r\n      // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\r\n      //     character:\r\n      // Consume the characters of the unparsed-attributes up to,\r\n      // not including, the first %x3B (\";\") character.\r\n      // ...\r\n      stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\r\n    }\r\n\r\n    return (document.cookie =\r\n      name + '=' + converter.write(value, name) + stringifiedAttributes)\r\n  }\r\n\r\n  function get (name) {\r\n    if (typeof document === 'undefined' || (arguments.length && !name)) {\r\n      return\r\n    }\r\n\r\n    // To prevent the for loop in the first place assign an empty array\r\n    // in case there are no cookies at all.\r\n    var cookies = document.cookie ? document.cookie.split('; ') : [];\r\n    var jar = {};\r\n    for (var i = 0; i < cookies.length; i++) {\r\n      var parts = cookies[i].split('=');\r\n      var value = parts.slice(1).join('=');\r\n\r\n      try {\r\n        var found = decodeURIComponent(parts[0]);\r\n        jar[found] = converter.read(value, found);\r\n\r\n        if (name === found) {\r\n          break\r\n        }\r\n      } catch (e) {}\r\n    }\r\n\r\n    return name ? jar[name] : jar\r\n  }\r\n\r\n  return Object.create(\r\n    {\r\n      set,\r\n      get,\r\n      remove: function (name, attributes) {\r\n        set(\r\n          name,\r\n          '',\r\n          assign({}, attributes, {\r\n            expires: -1\r\n          })\r\n        );\r\n      },\r\n      withAttributes: function (attributes) {\r\n        return init(this.converter, assign({}, this.attributes, attributes))\r\n      },\r\n      withConverter: function (converter) {\r\n        return init(assign({}, this.converter, converter), this.attributes)\r\n      }\r\n    },\r\n    {\r\n      attributes: { value: Object.freeze(defaultAttributes) },\r\n      converter: { value: Object.freeze(converter) }\r\n    }\r\n  )\r\n}\r\n\r\nvar api = init(defaultConverter, { path: '/' });\r\n/* eslint-enable no-var */\r\n\r\nexport { api as default };\r\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport JsCookie from 'js-cookie';\nexport class CookieStorage {\n    constructor(data = {}) {\n        const { path, domain, expires, sameSite, secure } = data;\n        this.domain = domain;\n        this.path = path || '/';\n        this.expires = Object.prototype.hasOwnProperty.call(data, 'expires')\n            ? expires\n            : 365;\n        this.secure = Object.prototype.hasOwnProperty.call(data, 'secure')\n            ? secure\n            : true;\n        if (Object.prototype.hasOwnProperty.call(data, 'sameSite')) {\n            if (!sameSite || !['strict', 'lax', 'none'].includes(sameSite)) {\n                throw new Error('The sameSite value of cookieStorage must be \"lax\", \"strict\" or \"none\".');\n            }\n            if (sameSite === 'none' && !this.secure) {\n                throw new Error('sameSite = None requires the Secure attribute in latest browser versions.');\n            }\n            this.sameSite = sameSite;\n        }\n    }\n    async setItem(key, value) {\n        JsCookie.set(key, value, this.getData());\n    }\n    async getItem(key) {\n        const item = JsCookie.get(key);\n        return item ?? null;\n    }\n    async removeItem(key) {\n        JsCookie.remove(key, this.getData());\n    }\n    async clear() {\n        const cookie = JsCookie.get();\n        const promises = Object.keys(cookie).map(key => this.removeItem(key));\n        await Promise.all(promises);\n    }\n    getData() {\n        return {\n            path: this.path,\n            expires: this.expires,\n            domain: this.domain,\n            secure: this.secure,\n            ...(this.sameSite && { sameSite: this.sameSite }),\n        };\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { DefaultStorage } from './DefaultStorage';\nimport { InMemoryStorage } from './InMemoryStorage';\nimport { KeyValueStorage } from './KeyValueStorage';\nimport { SessionStorage } from './SessionStorage';\nimport { SyncSessionStorage } from './SyncSessionStorage';\nexport { CookieStorage } from './CookieStorage';\nexport const defaultStorage = new DefaultStorage();\nexport const sessionStorage = new SessionStorage();\nexport const syncSessionStorage = new SyncSessionStorage();\nexport const sharedInMemoryStorage = new KeyValueStorage(new InMemoryStorage());\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Default cache config\n */\nexport const defaultConfig = {\n    keyPrefix: 'aws-amplify-cache',\n    capacityInBytes: 1048576,\n    itemMaxSize: 210000,\n    defaultTTL: 259200000,\n    defaultPriority: 5,\n    warningThreshold: 0.8,\n};\nexport const currentSizeKey = 'CurSize';\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { currentSizeKey } from '../constants';\n/**\n * return the byte size of the string\n * @param str\n */\nexport function getByteLength(str) {\n    let ret = 0;\n    ret = str.length;\n    for (let i = str.length; i >= 0; i -= 1) {\n        const charCode = str.charCodeAt(i);\n        if (charCode > 0x7f && charCode <= 0x7ff) {\n            ret += 1;\n        }\n        else if (charCode > 0x7ff && charCode <= 0xffff) {\n            ret += 2;\n        }\n        // trail surrogate\n        if (charCode >= 0xdc00 && charCode <= 0xdfff) {\n            i -= 1;\n        }\n    }\n    return ret;\n}\n/**\n * get current time\n */\nexport function getCurrentTime() {\n    const currentTime = new Date();\n    return currentTime.getTime();\n}\n/**\n * check if passed value is an integer\n */\nexport function isInteger(value) {\n    if (Number.isInteger) {\n        return Number.isInteger(value);\n    }\n    return (typeof value === 'number' && isFinite(value) && Math.floor(value) === value);\n}\nexport const getCurrentSizeKey = (keyPrefix) => `${keyPrefix}${currentSizeKey}`;\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { createAssertionFunction } from '../../errors';\nexport var CacheErrorCode;\n(function (CacheErrorCode) {\n    CacheErrorCode[\"NoCacheItem\"] = \"NoCacheItem\";\n    CacheErrorCode[\"NullNextNode\"] = \"NullNextNode\";\n    CacheErrorCode[\"NullPreviousNode\"] = \"NullPreviousNode\";\n})(CacheErrorCode || (CacheErrorCode = {}));\nconst cacheErrorMap = {\n    [CacheErrorCode.NoCacheItem]: {\n        message: 'Item not found in the cache storage.',\n    },\n    [CacheErrorCode.NullNextNode]: {\n        message: 'Next node is null.',\n    },\n    [CacheErrorCode.NullPreviousNode]: {\n        message: 'Previous node is null.',\n    },\n};\nexport const assert = createAssertionFunction(cacheErrorMap);\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { ConsoleLogger } from '../Logger';\nimport { currentSizeKey, defaultConfig } from './constants';\nimport { getByteLength, getCurrentSizeKey, getCurrentTime } from './utils';\nimport { CacheErrorCode, assert } from './utils/errorHelpers';\nconst logger = new ConsoleLogger('StorageCache');\n/**\n * Initialization of the cache\n *\n */\nexport class StorageCacheCommon {\n    /**\n     * Initialize the cache\n     *\n     * @param config - Custom configuration for this instance.\n     */\n    constructor({ config, keyValueStorage, }) {\n        this.config = {\n            ...defaultConfig,\n            ...config,\n        };\n        this.keyValueStorage = keyValueStorage;\n        this.sanitizeConfig();\n    }\n    getModuleName() {\n        return 'Cache';\n    }\n    /**\n     * Set custom configuration for the cache instance.\n     *\n     * @param config - customized configuration (without keyPrefix, which can't be changed)\n     *\n     * @return - the current configuration\n     */\n    configure(config) {\n        if (config) {\n            if (config.keyPrefix) {\n                logger.warn('keyPrefix can not be re-configured on an existing Cache instance.');\n            }\n            this.config = {\n                ...this.config,\n                ...config,\n            };\n        }\n        this.sanitizeConfig();\n        return this.config;\n    }\n    /**\n     * return the current size of the cache\n     * @return {Promise}\n     */\n    async getCurrentCacheSize() {\n        let size = await this.getStorage().getItem(getCurrentSizeKey(this.config.keyPrefix));\n        if (!size) {\n            await this.getStorage().setItem(getCurrentSizeKey(this.config.keyPrefix), '0');\n            size = '0';\n        }\n        return Number(size);\n    }\n    /**\n     * Set item into cache. You can put number, string, boolean or object.\n     * The cache will first check whether has the same key.\n     * If it has, it will delete the old item and then put the new item in\n     * The cache will pop out items if it is full\n     * You can specify the cache item options. The cache will abort and output a warning:\n     * If the key is invalid\n     * If the size of the item exceeds itemMaxSize.\n     * If the value is undefined\n     * If incorrect cache item configuration\n     * If error happened with browser storage\n     *\n     * @param {String} key - the key of the item\n     * @param {Object} value - the value of the item\n     * @param {Object} [options] - optional, the specified meta-data\n     *\n     * @return {Promise}\n     */\n    async setItem(key, value, options) {\n        logger.debug(`Set item: key is ${key}, value is ${value} with options: ${options}`);\n        if (!key || key === currentSizeKey) {\n            logger.warn(`Invalid key: should not be empty or reserved key: '${currentSizeKey}'`);\n            return;\n        }\n        if (typeof value === 'undefined') {\n            logger.warn(`The value of item should not be undefined!`);\n            return;\n        }\n        const cacheItemOptions = {\n            priority: options?.priority !== undefined\n                ? options.priority\n                : this.config.defaultPriority,\n            expires: options?.expires !== undefined\n                ? options.expires\n                : this.config.defaultTTL + getCurrentTime(),\n        };\n        if (cacheItemOptions.priority < 1 || cacheItemOptions.priority > 5) {\n            logger.warn(`Invalid parameter: priority due to out or range. It should be within 1 and 5.`);\n            return;\n        }\n        const prefixedKey = `${this.config.keyPrefix}${key}`;\n        const item = this.fillCacheItem(prefixedKey, value, cacheItemOptions);\n        // check whether this item is too big;\n        if (item.byteSize > this.config.itemMaxSize) {\n            logger.warn(`Item with key: ${key} you are trying to put into is too big!`);\n            return;\n        }\n        try {\n            // first look into the storage, if it exists, delete it.\n            const val = await this.getStorage().getItem(prefixedKey);\n            if (val) {\n                await this.removeCacheItem(prefixedKey, JSON.parse(val).byteSize);\n            }\n            // check whether the cache is full\n            if (await this.isCacheFull(item.byteSize)) {\n                const validKeys = await this.clearInvalidAndGetRemainingKeys();\n                if (await this.isCacheFull(item.byteSize)) {\n                    const sizeToPop = await this.sizeToPop(item.byteSize);\n                    await this.popOutItems(validKeys, sizeToPop);\n                }\n            }\n            // put item in the cache\n            return this.setCacheItem(prefixedKey, item);\n        }\n        catch (e) {\n            logger.warn(`setItem failed! ${e}`);\n        }\n    }\n    /**\n     * Get item from cache. It will return null if item doesnt exist or it has been expired.\n     * If you specified callback function in the options,\n     * then the function will be executed if no such item in the cache\n     * and finally put the return value into cache.\n     * Please make sure the callback function will return the value you want to put into the cache.\n     * The cache will abort output a warning:\n     * If the key is invalid\n     * If error happened with AsyncStorage\n     *\n     * @param {String} key - the key of the item\n     * @param {Object} [options] - the options of callback function\n     *\n     * @return {Promise} - return a promise resolves to be the value of the item\n     */\n    async getItem(key, options) {\n        logger.debug(`Get item: key is ${key} with options ${options}`);\n        let cached;\n        if (!key || key === currentSizeKey) {\n            logger.warn(`Invalid key: should not be empty or reserved key: '${currentSizeKey}'`);\n            return null;\n        }\n        const prefixedKey = `${this.config.keyPrefix}${key}`;\n        try {\n            cached = await this.getStorage().getItem(prefixedKey);\n            if (cached != null) {\n                if (await this.isExpired(prefixedKey)) {\n                    // if expired, remove that item and return null\n                    await this.removeCacheItem(prefixedKey, JSON.parse(cached).byteSize);\n                }\n                else {\n                    // if not expired, update its visitedTime and return the value\n                    const item = await this.updateVisitedTime(JSON.parse(cached), prefixedKey);\n                    return item.data;\n                }\n            }\n            if (options?.callback) {\n                const val = options.callback();\n                if (val !== null) {\n                    await this.setItem(key, val, options);\n                }\n                return val;\n            }\n            return null;\n        }\n        catch (e) {\n            logger.warn(`getItem failed! ${e}`);\n            return null;\n        }\n    }\n    /**\n     * remove item from the cache\n     * The cache will abort output a warning:\n     * If error happened with AsyncStorage\n     * @param {String} key - the key of the item\n     * @return {Promise}\n     */\n    async removeItem(key) {\n        logger.debug(`Remove item: key is ${key}`);\n        if (!key || key === currentSizeKey) {\n            logger.warn(`Invalid key: should not be empty or reserved key: '${currentSizeKey}'`);\n            return;\n        }\n        const prefixedKey = `${this.config.keyPrefix}${key}`;\n        try {\n            const val = await this.getStorage().getItem(prefixedKey);\n            if (val) {\n                await this.removeCacheItem(prefixedKey, JSON.parse(val).byteSize);\n            }\n        }\n        catch (e) {\n            logger.warn(`removeItem failed! ${e}`);\n        }\n    }\n    /**\n     * Return all the keys owned by this cache.\n     * Will return an empty array if error occurred.\n     *\n     * @return {Promise}\n     */\n    async getAllKeys() {\n        try {\n            return await this.getAllCacheKeys();\n        }\n        catch (e) {\n            logger.warn(`getAllkeys failed! ${e}`);\n            return [];\n        }\n    }\n    getStorage() {\n        return this.keyValueStorage;\n    }\n    /**\n     * check whether item is expired\n     *\n     * @param key - the key of the item\n     *\n     * @return true if the item is expired.\n     */\n    async isExpired(key) {\n        const text = await this.getStorage().getItem(key);\n        assert(text !== null, CacheErrorCode.NoCacheItem, `Key: ${key}`);\n        const item = JSON.parse(text);\n        if (getCurrentTime() >= item.expires) {\n            return true;\n        }\n        return false;\n    }\n    /**\n     * delete item from cache\n     *\n     * @param prefixedKey - the key of the item\n     * @param size - optional, the byte size of the item\n     */\n    async removeCacheItem(prefixedKey, size) {\n        const item = await this.getStorage().getItem(prefixedKey);\n        assert(item !== null, CacheErrorCode.NoCacheItem, `Key: ${prefixedKey}`);\n        const itemSize = size ?? JSON.parse(item).byteSize;\n        // first try to update the current size of the cache\n        await this.decreaseCurrentSizeInBytes(itemSize);\n        // try to remove the item from cache\n        try {\n            await this.getStorage().removeItem(prefixedKey);\n        }\n        catch (removeItemError) {\n            // if some error happened, we need to rollback the current size\n            await this.increaseCurrentSizeInBytes(itemSize);\n            logger.error(`Failed to remove item: ${removeItemError}`);\n        }\n    }\n    /**\n     * produce a JSON object with meta-data and data value\n     * @param value - the value of the item\n     * @param options - optional, the specified meta-data\n     *\n     * @return - the item which has the meta-data and the value\n     */\n    fillCacheItem(key, value, options) {\n        const item = {\n            key,\n            data: value,\n            timestamp: getCurrentTime(),\n            visitedTime: getCurrentTime(),\n            priority: options.priority ?? 0,\n            expires: options.expires ?? 0,\n            type: typeof value,\n            byteSize: 0,\n        };\n        // calculate byte size\n        item.byteSize = getByteLength(JSON.stringify(item));\n        // re-calculate using cache item with updated byteSize property\n        item.byteSize = getByteLength(JSON.stringify(item));\n        return item;\n    }\n    sanitizeConfig() {\n        if (this.config.itemMaxSize > this.config.capacityInBytes) {\n            logger.error('Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default.');\n            this.config.itemMaxSize = defaultConfig.itemMaxSize;\n        }\n        if (this.config.defaultPriority > 5 || this.config.defaultPriority < 1) {\n            logger.error('Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default.');\n            this.config.defaultPriority = defaultConfig.defaultPriority;\n        }\n        if (Number(this.config.warningThreshold) > 1 ||\n            Number(this.config.warningThreshold) < 0) {\n            logger.error('Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default.');\n            this.config.warningThreshold = defaultConfig.warningThreshold;\n        }\n        // Set 5MB limit\n        const cacheLimit = 5 * 1024 * 1024;\n        if (this.config.capacityInBytes > cacheLimit) {\n            logger.error('Cache Capacity should be less than 5MB. Setting back to default. Setting back to default.');\n            this.config.capacityInBytes = defaultConfig.capacityInBytes;\n        }\n    }\n    /**\n     * increase current size of the cache\n     *\n     * @param amount - the amount of the cache szie which need to be increased\n     */\n    async increaseCurrentSizeInBytes(amount) {\n        const size = await this.getCurrentCacheSize();\n        await this.getStorage().setItem(getCurrentSizeKey(this.config.keyPrefix), (size + amount).toString());\n    }\n    /**\n     * decrease current size of the cache\n     *\n     * @param amount - the amount of the cache size which needs to be decreased\n     */\n    async decreaseCurrentSizeInBytes(amount) {\n        const size = await this.getCurrentCacheSize();\n        await this.getStorage().setItem(getCurrentSizeKey(this.config.keyPrefix), (size - amount).toString());\n    }\n    /**\n     * update the visited time if item has been visited\n     *\n     * @param item - the item which need to be updated\n     * @param prefixedKey - the key of the item\n     *\n     * @return the updated item\n     */\n    async updateVisitedTime(item, prefixedKey) {\n        item.visitedTime = getCurrentTime();\n        await this.getStorage().setItem(prefixedKey, JSON.stringify(item));\n        return item;\n    }\n    /**\n     * put item into cache\n     *\n     * @param prefixedKey - the key of the item\n     * @param itemData - the value of the item\n     * @param itemSizeInBytes - the byte size of the item\n     */\n    async setCacheItem(prefixedKey, item) {\n        // first try to update the current size of the cache.\n        await this.increaseCurrentSizeInBytes(item.byteSize);\n        // try to add the item into cache\n        try {\n            await this.getStorage().setItem(prefixedKey, JSON.stringify(item));\n        }\n        catch (setItemErr) {\n            // if some error happened, we need to rollback the current size\n            await this.decreaseCurrentSizeInBytes(item.byteSize);\n            logger.error(`Failed to set item ${setItemErr}`);\n        }\n    }\n    /**\n     * total space needed when poping out items\n     *\n     * @param itemSize\n     *\n     * @return total space needed\n     */\n    async sizeToPop(itemSize) {\n        const cur = await this.getCurrentCacheSize();\n        const spaceItemNeed = cur + itemSize - this.config.capacityInBytes;\n        const cacheThresholdSpace = (1 - this.config.warningThreshold) * this.config.capacityInBytes;\n        return spaceItemNeed > cacheThresholdSpace\n            ? spaceItemNeed\n            : cacheThresholdSpace;\n    }\n    /**\n     * see whether cache is full\n     *\n     * @param itemSize\n     *\n     * @return true if cache is full\n     */\n    async isCacheFull(itemSize) {\n        const cur = await this.getCurrentCacheSize();\n        return itemSize + cur > this.config.capacityInBytes;\n    }\n    /**\n     * get all the items we have, sort them by their priority,\n     * if priority is same, sort them by their last visited time\n     * pop out items from the low priority (5 is the lowest)\n     * @private\n     * @param keys - all the keys in this cache\n     * @param sizeToPop - the total size of the items which needed to be poped out\n     */\n    async popOutItems(keys, sizeToPop) {\n        const items = [];\n        let remainedSize = sizeToPop;\n        for (const key of keys) {\n            const val = await this.getStorage().getItem(key);\n            if (val != null) {\n                const item = JSON.parse(val);\n                items.push(item);\n            }\n        }\n        // first compare priority\n        // then compare visited time\n        items.sort((a, b) => {\n            if (a.priority > b.priority) {\n                return -1;\n            }\n            else if (a.priority < b.priority) {\n                return 1;\n            }\n            else {\n                if (a.visitedTime < b.visitedTime) {\n                    return -1;\n                }\n                else\n                    return 1;\n            }\n        });\n        for (const item of items) {\n            // pop out items until we have enough room for new item\n            await this.removeCacheItem(item.key, item.byteSize);\n            remainedSize -= item.byteSize;\n            if (remainedSize <= 0) {\n                return;\n            }\n        }\n    }\n    /**\n     * Scan the storage and combine the following operations for efficiency\n     *   1. Clear out all expired keys owned by this cache, not including the size key.\n     *   2. Return the remaining keys.\n     *\n     * @return The remaining valid keys\n     */\n    async clearInvalidAndGetRemainingKeys() {\n        const remainingKeys = [];\n        const keys = await this.getAllCacheKeys({\n            omitSizeKey: true,\n        });\n        for (const key of keys) {\n            if (await this.isExpired(key)) {\n                await this.removeCacheItem(key);\n            }\n            else {\n                remainingKeys.push(key);\n            }\n        }\n        return remainingKeys;\n    }\n    /**\n     * clear the entire cache\n     * The cache will abort and output a warning if error occurs\n     * @return {Promise}\n     */\n    async clear() {\n        logger.debug(`Clear Cache`);\n        try {\n            const keys = await this.getAllKeys();\n            for (const key of keys) {\n                const prefixedKey = `${this.config.keyPrefix}${key}`;\n                await this.getStorage().removeItem(prefixedKey);\n            }\n        }\n        catch (e) {\n            logger.warn(`clear failed! ${e}`);\n        }\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { ConsoleLogger } from '../Logger';\nimport { KeyValueStorage } from '../storage/KeyValueStorage';\nimport { getLocalStorageWithFallback } from '../storage/utils';\nimport { defaultConfig } from './constants';\nimport { StorageCacheCommon } from './StorageCacheCommon';\nimport { getCurrentSizeKey, getCurrentTime } from './utils';\nconst logger = new ConsoleLogger('StorageCache');\n/**\n * Customized storage based on the SessionStorage or LocalStorage with LRU implemented\n */\nexport class StorageCache extends StorageCacheCommon {\n    /**\n     * initialize the cache\n     * @param config - the configuration of the cache\n     */\n    constructor(config) {\n        const storage = getLocalStorageWithFallback();\n        super({ config, keyValueStorage: new KeyValueStorage(storage) });\n        this.storage = storage;\n        this.getItem = this.getItem.bind(this);\n        this.setItem = this.setItem.bind(this);\n        this.removeItem = this.removeItem.bind(this);\n    }\n    async getAllCacheKeys(options) {\n        const { omitSizeKey } = options ?? {};\n        const keys = [];\n        for (let i = 0; i < this.storage.length; i++) {\n            const key = this.storage.key(i);\n            if (omitSizeKey && key === getCurrentSizeKey(this.config.keyPrefix)) {\n                continue;\n            }\n            if (key?.startsWith(this.config.keyPrefix)) {\n                keys.push(key.substring(this.config.keyPrefix.length));\n            }\n        }\n        return keys;\n    }\n    /**\n     * Return a new instance of cache with customized configuration.\n     * @param {Object} config - the customized configuration\n     * @return {Object} - the new instance of Cache\n     */\n    createInstance(config) {\n        if (!config.keyPrefix || config.keyPrefix === defaultConfig.keyPrefix) {\n            logger.error('invalid keyPrefix, setting keyPrefix with timeStamp');\n            config.keyPrefix = getCurrentTime.toString();\n        }\n        return new StorageCache(config);\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { StorageCache } from './StorageCache';\nexport const Cache = new StorageCache();\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { ConsoleLogger } from '../Logger';\nconst logger = new ConsoleLogger('I18n');\n/**\n * Language translation utility.\n */\nexport class I18n {\n    constructor() {\n        /**\n         * @private\n         */\n        this._options = null;\n        /**\n         * @private\n         */\n        this._lang = null;\n        /**\n         * @private\n         */\n        this._dict = {};\n    }\n    /**\n     * Sets the default language from the configuration when required.\n     */\n    setDefaultLanguage() {\n        // Default to window language if not set in instance\n        if (!this._lang &&\n            typeof window !== 'undefined' &&\n            window &&\n            window.navigator) {\n            this._lang = window.navigator.language;\n        }\n        logger.debug(this._lang);\n    }\n    /**\n     * @method\n     * Explicitly setting language\n     * @param {String} lang\n     */\n    setLanguage(lang) {\n        this._lang = lang;\n    }\n    /**\n     * @method\n     * Get value\n     * @param {String} key\n     * @param {String} defVal - Default value\n     */\n    get(key, defVal = undefined) {\n        this.setDefaultLanguage();\n        if (!this._lang) {\n            return typeof defVal !== 'undefined' ? defVal : key;\n        }\n        const lang = this._lang;\n        let val = this.getByLanguage(key, lang);\n        if (val) {\n            return val;\n        }\n        if (lang.indexOf('-') > 0) {\n            val = this.getByLanguage(key, lang.split('-')[0]);\n        }\n        if (val) {\n            return val;\n        }\n        return typeof defVal !== 'undefined' ? defVal : key;\n    }\n    /**\n     * @method\n     * Get value according to specified language\n     * @param {String} key\n     * @param {String} language - Specified langurage to be used\n     * @param {String} defVal - Default value\n     */\n    getByLanguage(key, language, defVal = null) {\n        if (!language) {\n            return defVal;\n        }\n        const langDict = this._dict[language];\n        if (!langDict) {\n            return defVal;\n        }\n        return langDict[key];\n    }\n    /**\n     * @method\n     * Add vocabularies for one language\n     * @param {String} language - Language of the dictionary\n     * @param {Object} vocabularies - Object that has key-value as dictionary entry\n     */\n    putVocabulariesForLanguage(language, vocabularies) {\n        let langDict = this._dict[language];\n        if (!langDict) {\n            langDict = this._dict[language] = {};\n        }\n        this._dict[language] = { ...langDict, ...vocabularies };\n    }\n    /**\n     * @method\n     * Add vocabularies for one language\n     * @param {Object} vocabularies - Object that has language as key,\n     *                                vocabularies of each language as value\n     */\n    putVocabularies(vocabularies) {\n        Object.keys(vocabularies).forEach(key => {\n            this.putVocabulariesForLanguage(key, vocabularies[key]);\n        });\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { createAssertionFunction } from '../errors';\nexport var I18nErrorCode;\n(function (I18nErrorCode) {\n    I18nErrorCode[\"NotConfigured\"] = \"NotConfigured\";\n})(I18nErrorCode || (I18nErrorCode = {}));\nconst i18nErrorMap = {\n    [I18nErrorCode.NotConfigured]: {\n        message: 'i18n is not configured.',\n    },\n};\nexport const assert = createAssertionFunction(i18nErrorMap);\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { ConsoleLogger } from '../Logger';\nimport { I18n as I18nClass } from './I18n';\nimport { I18nErrorCode, assert } from './errorHelpers';\nconst logger = new ConsoleLogger('I18n');\nlet _config = { language: null };\nlet _i18n = null;\n/**\n * Export I18n APIs\n */\nexport class I18n {\n    /**\n     * @static\n     * @method\n     * Configure I18n part\n     * @param {Object} config - Configuration of the I18n\n     */\n    static configure(config) {\n        logger.debug('configure I18n');\n        if (!config) {\n            return _config;\n        }\n        _config = Object.assign({}, _config, config.I18n || config);\n        I18n.createInstance();\n        return _config;\n    }\n    static getModuleName() {\n        return 'I18n';\n    }\n    /**\n     * @static\n     * @method\n     * Create an instance of I18n for the library\n     */\n    static createInstance() {\n        logger.debug('create I18n instance');\n        if (_i18n) {\n            return;\n        }\n        _i18n = new I18nClass();\n    }\n    /**\n     * @static @method\n     * Explicitly setting language\n     * @param {String} lang\n     */\n    static setLanguage(lang) {\n        I18n.checkConfig();\n        assert(!!_i18n, I18nErrorCode.NotConfigured);\n        _i18n.setLanguage(lang);\n    }\n    /**\n     * @static @method\n     * Get value\n     * @param {String} key\n     * @param {String} defVal - Default value\n     */\n    static get(key, defVal) {\n        if (!I18n.checkConfig()) {\n            return typeof defVal === 'undefined' ? key : defVal;\n        }\n        assert(!!_i18n, I18nErrorCode.NotConfigured);\n        return _i18n.get(key, defVal);\n    }\n    /**\n     * @static\n     * @method\n     * Add vocabularies for one language\n     * @param {String} language - Language of the dictionary\n     * @param {Object} vocabularies - Object that has key-value as dictionary entry\n     */\n    static putVocabulariesForLanguage(language, vocabularies) {\n        I18n.checkConfig();\n        assert(!!_i18n, I18nErrorCode.NotConfigured);\n        _i18n.putVocabulariesForLanguage(language, vocabularies);\n    }\n    /**\n     * @static\n     * @method\n     * Add vocabularies for one language\n     * @param {Object} vocabularies - Object that has language as key,\n     *                                vocabularies of each language as value\n     */\n    static putVocabularies(vocabularies) {\n        I18n.checkConfig();\n        assert(!!_i18n, I18nErrorCode.NotConfigured);\n        _i18n.putVocabularies(vocabularies);\n    }\n    static checkConfig() {\n        if (!_i18n) {\n            I18n.createInstance();\n        }\n        return true;\n    }\n}\n// Create an instance of I18n in the static class\nI18n.createInstance();\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns a `Date` that is corrected for clock skew.\n *\n * @param systemClockOffset The offset of the system clock in milliseconds.\n *\n * @returns `Date` representing the current time adjusted by the system clock offset.\n *\n * @internal\n */\nexport const getSkewCorrectedDate = (systemClockOffset) => new Date(Date.now() + systemClockOffset);\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { getSkewCorrectedDate } from './getSkewCorrectedDate';\n// 5 mins in milliseconds. Ref: https://github.com/aws/aws-sdk-js-v3/blob/6c0f44fab30a1bb2134af47362a31332abc3666b/packages/middleware-signing/src/utils/isClockSkewed.ts#L10\nconst SKEW_WINDOW = 5 * 60 * 1000;\n/**\n * Checks if the provided date is within the skew window of 5 minutes.\n *\n * @param clockTimeInMilliseconds Time to check for skew in milliseconds.\n * @param clockOffsetInMilliseconds Offset to check clock against in milliseconds.\n *\n * @returns True if skewed. False otherwise.\n *\n * @internal\n */\nexport const isClockSkewed = (clockTimeInMilliseconds, clockOffsetInMilliseconds) => Math.abs(getSkewCorrectedDate(clockOffsetInMilliseconds).getTime() -\n    clockTimeInMilliseconds) >= SKEW_WINDOW;\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { isClockSkewed } from './isClockSkewed';\n/**\n * Returns the difference between clock time and the current system time if clock is skewed.\n *\n * @param clockTimeInMilliseconds Clock time in milliseconds.\n * @param currentSystemClockOffset Current system clock offset in milliseconds.\n *\n * @internal\n */\nexport const getUpdatedSystemClockOffset = (clockTimeInMilliseconds, currentSystemClockOffset) => {\n    if (isClockSkewed(clockTimeInMilliseconds, currentSystemClockOffset)) {\n        return clockTimeInMilliseconds - Date.now();\n    }\n    return currentSystemClockOffset;\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { signRequest } from './signer/signatureV4';\nimport { getSkewCorrectedDate } from './utils/getSkewCorrectedDate';\nimport { getUpdatedSystemClockOffset } from './utils/getUpdatedSystemClockOffset';\n/**\n * Middleware that SigV4 signs request with AWS credentials, and correct system clock offset.\n * This middleware is expected to be placed after retry middleware.\n */\nexport const signingMiddlewareFactory = ({ credentials, region, service, uriEscapePath = true, }) => {\n    let currentSystemClockOffset;\n    return (next, context) => async function signingMiddleware(request) {\n        currentSystemClockOffset = currentSystemClockOffset ?? 0;\n        const signRequestOptions = {\n            credentials: typeof credentials === 'function'\n                ? await credentials({\n                    forceRefresh: !!context?.isCredentialsExpired,\n                })\n                : credentials,\n            signingDate: getSkewCorrectedDate(currentSystemClockOffset),\n            signingRegion: region,\n            signingService: service,\n            uriEscapePath,\n        };\n        const signedRequest = await signRequest(request, signRequestOptions);\n        const response = await next(signedRequest);\n        // Update system clock offset if response contains date header, regardless of the status code.\n        // non-2xx response will still be returned from next handler instead of thrown, because it's\n        // only thrown by the retry middleware.\n        const dateString = getDateHeader(response);\n        if (dateString) {\n            currentSystemClockOffset = getUpdatedSystemClockOffset(Date.parse(dateString), currentSystemClockOffset);\n        }\n        return response;\n    };\n};\nconst getDateHeader = ({ headers } = {}) => headers?.date ?? headers?.Date ?? headers?.['x-amz-date'];\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport var RestApiValidationErrorCode;\n(function (RestApiValidationErrorCode) {\n    RestApiValidationErrorCode[\"InvalidApiName\"] = \"InvalidApiName\";\n})(RestApiValidationErrorCode || (RestApiValidationErrorCode = {}));\nexport const validationErrorMap = {\n    [RestApiValidationErrorCode.InvalidApiName]: {\n        message: 'API name is invalid.',\n        recoverySuggestion: 'Check if the API name matches the one in your configuration or `aws-exports.js`',\n    },\n};\n", "import { parseJsonError as parseAwsJsonError, } from '@aws-amplify/core/internals/aws-client-utils';\nimport { RestApiError } from '../errors';\n/**\n * Parses both AWS and non-AWS error responses coming from the users' backend code.\n * * AWS errors generated by the AWS services(e.g. API Gateway, Bedrock). They can be Signature errors,\n *   ClockSkew errors, etc. These responses will be parsed to errors with proper name and message from the AWS\n *   services.\n * * non-AWS errors thrown by the user code. They can contain any headers or body. Users need to access the\n *   error.response to get the headers and body and parse them accordingly. The JS error name and message will\n *   be `UnknownError` and `Unknown error` respectively.\n */\nexport const parseRestApiServiceError = async (response) => {\n    if (!response) {\n        // Response is not considered an error.\n        return;\n    }\n    const parsedAwsError = await parseAwsJsonError(stubErrorResponse(response));\n    if (!parsedAwsError) {\n        // Response is not considered an error.\n    }\n    else {\n        const bodyText = await response.body?.text();\n        return buildRestApiError(parsedAwsError, {\n            statusCode: response.statusCode,\n            headers: response.headers,\n            body: bodyText,\n        });\n    }\n};\n/**\n * The response object needs to be stub here because the parseAwsJsonError assumes the response body to be valid JSON.\n * Although this is true for AWS services, it is not true for responses from user's code. Once the response body is\n * unwrapped as JSON(and fail), it cannot be read as text again. Therefore, we need to stub the response body here to\n * make sure we can read the error response body as a JSON, and may fall back to read as text if it is not a valid JSON.\n */\nconst stubErrorResponse = (response) => {\n    let bodyTextPromise;\n    const bodyProxy = new Proxy(response.body, {\n        get(target, prop, receiver) {\n            if (prop === 'json') {\n                // For potential AWS errors, error parser will try to parse the body as JSON first.\n                return async () => {\n                    if (!bodyTextPromise) {\n                        bodyTextPromise = target.text();\n                    }\n                    try {\n                        return JSON.parse(await bodyTextPromise);\n                    }\n                    catch (error) {\n                        // If response body is not a valid JSON, we stub it to be an empty object and eventually parsed\n                        // as an unknown error\n                        return {};\n                    }\n                };\n            }\n            else if (prop === 'text') {\n                // For non-AWS errors, users can access the body as a string as a fallback.\n                return async () => {\n                    if (!bodyTextPromise) {\n                        bodyTextPromise = target.text();\n                    }\n                    return bodyTextPromise;\n                };\n            }\n            else {\n                return Reflect.get(target, prop, receiver);\n            }\n        },\n    });\n    const responseProxy = new Proxy(response, {\n        get(target, prop, receiver) {\n            if (prop === 'body') {\n                return bodyProxy;\n            }\n            else {\n                return Reflect.get(target, prop, receiver);\n            }\n        },\n    });\n    return responseProxy;\n};\n/**\n * Utility to create a new RestApiError from a service error.\n */\nconst buildRestApiError = (error, response) => {\n    const restApiError = new RestApiError({\n        name: error?.name,\n        message: error.message,\n        underlyingError: error,\n        response,\n    });\n    // $metadata is only required for backwards compatibility.\n    return Object.assign(restApiError, { $metadata: error.$metadata });\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { ConsoleLogger } from '@aws-amplify/core';\nexport const logger = new ConsoleLogger('RestApis');\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { CanceledError } from '../errors';\nimport { parseRestApiServiceError } from './serviceError';\nimport { logger } from './logger';\n/**\n * @internal\n */\nexport function createCancellableOperation(handler, abortController) {\n    const isInternalPost = (targetHandler) => !!abortController;\n    // For creating a cancellable operation for public REST APIs, we need to create an AbortController\n    // internally. Whereas for internal POST APIs, we need to accept in the AbortController from the\n    // callers.\n    const publicApisAbortController = new AbortController();\n    const publicApisAbortSignal = publicApisAbortController.signal;\n    const internalPostAbortSignal = abortController?.signal;\n    let abortReason;\n    const job = async () => {\n        try {\n            const response = await (isInternalPost(handler)\n                ? handler()\n                : handler(publicApisAbortSignal));\n            if (response.statusCode >= 300) {\n                throw await parseRestApiServiceError(response);\n            }\n            return response;\n        }\n        catch (error) {\n            const abortSignal = internalPostAbortSignal ?? publicApisAbortSignal;\n            const message = abortReason ?? abortSignal.reason;\n            if (error.name === 'AbortError' || abortSignal?.aborted === true) {\n                const canceledError = new CanceledError({\n                    ...(message && { message }),\n                    underlyingError: error,\n                    recoverySuggestion: 'The API request was explicitly canceled. If this is not intended, validate if you called the `cancel()` function on the API request erroneously.',\n                });\n                logger.debug(error);\n                throw canceledError;\n            }\n            logger.debug(error);\n            throw error;\n        }\n    };\n    if (isInternalPost(handler)) {\n        return job();\n    }\n    else {\n        const cancel = (abortMessage) => {\n            if (publicApisAbortSignal.aborted === true) {\n                return;\n            }\n            publicApisAbortController.abort(abortMessage);\n            // If abort reason is not supported, set a scoped reasons instead. The reason property inside an\n            // AbortSignal is a readonly property and trying to set it would throw an error.\n            if (abortMessage && publicApisAbortSignal.reason !== abortMessage) {\n                abortReason = abortMessage;\n            }\n        };\n        return { response: job(), cancel };\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport const DEFAULT_REST_IAM_SIGNING_SERVICE = 'execute-api';\nexport const DEFAULT_APPSYNC_API_SERVICE = 'appsync-api';\nexport const DEFAULT_IAM_SIGNING_REGION = 'us-east-1';\n/**\n * The REST endpoints generated by API Gateway\n * @see {@link https://docs.aws.amazon.com/general/latest/gr/apigateway.html#apigateway_region_data_plane}\n */\nexport const APIG_HOSTNAME_PATTERN = /^.+\\.([a-z0-9-]+)\\.([a-z0-9-]+)\\.amazonaws\\.com/;\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { APIG_HOSTNAME_PATTERN, DEFAULT_IAM_SIGNING_REGION, DEFAULT_REST_IAM_SIGNING_SERVICE, } from './constants';\n/**\n * Infer the signing service and region from the given URL, and for REST API only, from the Amplify configuration.\n * It supports raw API Gateway endpoint and AppSync endpoint.\n *\n * @internal\n */\nexport const parseSigningInfo = (url, restApiOptions) => {\n    const { service: signingService = DEFAULT_REST_IAM_SIGNING_SERVICE, region: signingRegion = DEFAULT_IAM_SIGNING_REGION, } = restApiOptions?.amplify.getConfig()?.API?.REST?.[restApiOptions?.apiName] ??\n        {};\n    const { hostname } = url;\n    const [, service, region] = APIG_HOSTNAME_PATTERN.exec(hostname) ?? [];\n    if (service === DEFAULT_REST_IAM_SIGNING_SERVICE) {\n        // The configured endpoint is an API Gateway endpoint\n        // @see: https://docs.aws.amazon.com/apigateway/latest/developerguide/how-to-call-api.html\n        return {\n            service,\n            region: region ?? signingRegion,\n        };\n    }\n    else if (service === 'appsync-api') {\n        // AppSync endpoint is internally supported because GraphQL operation will send request using POST handler.\n        // example: https://xxxx.appsync-api.us-east-1.amazonaws.com/graphql\n        return {\n            service: 'appsync',\n            region: region ?? signingRegion,\n        };\n    }\n    else {\n        return {\n            service: signingService,\n            region: signingRegion,\n        };\n    }\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Determines if IAM authentication should be applied for a GraphQL request.\n *\n * This function checks the `headers` of the HTTP request to determine if IAM authentication\n * is applicable. IAM authentication is considered applicable if there is no `authorization`\n * header, no `x-api-key` header, and `signingServiceInfo` is provided.\n *\n * @param request - The HTTP request object containing headers.\n * @param signingServiceInfo - Optional signing service information,\n * including service and region.\n * @returns A boolean `true` if IAM authentication should be applied.\n *\n * @internal\n */\nexport const isIamAuthApplicableForGraphQL = ({ headers }, signingServiceInfo) => !headers.authorization && !headers['x-api-key'] && !!signingServiceInfo;\n/**\n * Determines if IAM authentication should be applied for a REST request.\n *\n * This function checks the `headers` of the HTTP request to determine if IAM authentication\n * is applicable. IAM authentication is considered applicable if there is no `authorization`\n * header and `signingServiceInfo` is provided.\n *\n * @param request - The HTTP request object containing headers.\n * @param signingServiceInfo - Optional signing service information,\n * including service and region.\n * @returns A boolean `true` if IAM authentication should be applied.\n *\n * @internal\n */\nexport const isIamAuthApplicableForRest = ({ headers }, signingServiceInfo) => !headers.authorization && !!signingServiceInfo;\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport const resolveHeaders = (headers, body) => {\n    const normalizedHeaders = {};\n    for (const key in headers) {\n        normalizedHeaders[key.toLowerCase()] = headers[key];\n    }\n    if (body) {\n        normalizedHeaders['content-type'] = 'application/json; charset=UTF-8';\n        if (body instanceof FormData) {\n            /**\n             * If body is a FormData we should not allow setting content-type.\n             * It's because runtime HTTP handlers(xhr, fetch, undici, node-fetch,\n             * etc.) will modify the content-type value when setting multipart\n             * boundary.\n             */\n            delete normalizedHeaders['content-type'];\n        }\n    }\n    return normalizedHeaders;\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { fetchTransferHandler, retryMiddlewareFactory, signingMiddlewareFactory, userAgentMiddlewareFactory, } from '@aws-amplify/core/internals/aws-client-utils';\nimport { composeTransferHandler } from '@aws-amplify/core/internals/aws-client-utils/composers';\n/**\n * @internal\n */\nexport const authenticatedHandler = composeTransferHandler(fetchTransferHandler, [\n    userAgentMiddlewareFactory,\n    retryMiddlewareFactory,\n    signingMiddlewareFactory,\n]);\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { fetchTransferHandler, retryMiddlewareFactory, userAgentMiddlewareFactory, } from '@aws-amplify/core/internals/aws-client-utils';\nimport { composeTransferHandler } from '@aws-amplify/core/internals/aws-client-utils/composers';\n/**\n * @internal\n */\nexport const unauthenticatedHandler = composeTransferHandler(fetchTransferHandler, [userAgentMiddlewareFactory, retryMiddlewareFactory]);\n", "import { getRetryDecider, jitteredBackoff, } from '@aws-amplify/core/internals/aws-client-utils';\nimport { logger, parseRestApiServiceError, parseSigningInfo, } from '../../utils';\nimport { resolveHeaders } from '../../utils/resolveHeaders';\nimport { authenticatedHandler } from './baseHandlers/authenticatedHandler';\nimport { unauthenticatedHandler } from './baseHandlers/unauthenticatedHandler';\n/**\n * Make REST API call with best-effort IAM auth.\n * @param amplify Amplify instance to to resolve credentials and tokens. Should use different instance in client-side\n *   and SSR\n * @param options Options accepted from public API options when calling the handlers.\n * @param signingServiceInfo Internal-only options enable IAM auth as well as to to overwrite the IAM signing service\n *   and region. If specified, and NONE of API Key header or Auth header is present, IAM auth will be used.\n * @param iamAuthApplicable Callback function that is used to determine if IAM Auth should be used or not.\n *\n * @internal\n */\nexport const transferHandler = async (amplify, options, iamAuthApplicable, signingServiceInfo) => {\n    const { url, method, headers, body, withCredentials, abortSignal, retryStrategy, } = options;\n    const resolvedBody = body\n        ? body instanceof FormData\n            ? body\n            : JSON.stringify(body ?? '')\n        : undefined;\n    const resolvedHeaders = resolveHeaders(headers, body);\n    const request = {\n        url,\n        headers: resolvedHeaders,\n        method,\n        body: resolvedBody,\n    };\n    const baseOptions = {\n        retryDecider: getRetryDeciderFromStrategy(retryStrategy ?? amplify?.libraryOptions?.API?.REST?.retryStrategy),\n        computeDelay: jitteredBackoff,\n        withCrossDomainCredentials: withCredentials,\n        abortSignal,\n    };\n    const isIamAuthApplicable = iamAuthApplicable(request, signingServiceInfo);\n    let response;\n    const credentials = await resolveCredentials(amplify);\n    if (isIamAuthApplicable && credentials) {\n        const signingInfoFromUrl = parseSigningInfo(url);\n        const signingService = signingServiceInfo?.service ?? signingInfoFromUrl.service;\n        const signingRegion = signingServiceInfo?.region ?? signingInfoFromUrl.region;\n        response = await authenticatedHandler(request, {\n            ...baseOptions,\n            credentials,\n            region: signingRegion,\n            service: signingService,\n        });\n    }\n    else {\n        response = await unauthenticatedHandler(request, {\n            ...baseOptions,\n        });\n    }\n    // Clean-up un-modeled properties from response.\n    return {\n        statusCode: response.statusCode,\n        headers: response.headers,\n        body: response.body,\n    };\n};\nconst getRetryDeciderFromStrategy = (retryStrategy) => {\n    const strategy = retryStrategy?.strategy;\n    if (strategy === 'no-retry') {\n        return () => Promise.resolve({ retryable: false });\n    }\n    return getRetryDecider(parseRestApiServiceError);\n};\nconst resolveCredentials = async (amplify) => {\n    try {\n        const { credentials } = await amplify.Auth.fetchAuthSession();\n        if (credentials) {\n            return credentials;\n        }\n    }\n    catch (e) {\n        logger.debug('No credentials available, the request will be unsigned.');\n    }\n    return null;\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { createCancellableOperation } from '../../utils';\nimport { isIamAuthApplicableForGraphQL } from '../../utils/isIamAuthApplicable';\nimport { transferHandler } from './transferHandler';\n/**\n * This weak map provides functionality to cancel a request given the promise containing the `post` request.\n *\n * 1. For every GraphQL POST request, an abort controller is created and supplied to the request.\n * 2. The promise fulfilled by GraphGL POST request is then mapped to that abort controller.\n * 3. The promise is returned to the external caller.\n * 4. The caller can either wait for the promise to fulfill or call `cancel(promise)` to cancel the request.\n * 5. If `cancel(promise)` is called, then the corresponding abort controller is retrieved from the map below.\n * 6. GraphQL POST request will be rejected with the error message provided during cancel.\n * 7. Caller can check if the error is because of cancelling by calling `isCancelError(error)`.\n */\nconst cancelTokenMap = new WeakMap();\n/**\n * @internal\n *\n * REST POST handler to send GraphQL request to given endpoint. By default, it will use IAM to authorize\n * the request. In some auth modes, the IAM auth has to be disabled. Here's how to set up the request auth correctly:\n * * If auth mode is 'iam', you MUST NOT set 'authorization' header and 'x-api-key' header, since it would disable IAM\n *   auth. You MUST also set 'input.options.signingServiceInfo' option.\n *   * The including 'input.options.signingServiceInfo.service' and 'input.options.signingServiceInfo.region' are\n *     optional. If omitted, the signing service and region will be inferred from url.\n * * If auth mode is 'none', you MUST NOT set 'options.signingServiceInfo' option.\n * * If auth mode is 'apiKey', you MUST set 'x-api-key' custom header.\n * * If auth mode is 'oidc' or 'lambda' or 'userPool', you MUST set 'authorization' header.\n *\n * To make the internal post cancellable, you must also call `updateRequestToBeCancellable()` with the promise from\n * internal post call and the abort controller supplied to the internal post call.\n *\n * @param amplify the AmplifyClassV6 instance - it may be the singleton used on Web, or an instance created within\n * a context created by `runWithAmplifyServerContext`\n * @param postInput an object of {@link InternalPostInput}\n * @param postInput.url The URL that the POST request sends to\n * @param postInput.options Options of the POST request\n * @param postInput.abortController The abort controller used to cancel the POST request\n * @returns a {@link RestApiResponse}\n *\n * @throws an {@link AmplifyError} with `Network Error` as the `message` when the external resource is unreachable due to one\n * of the following reasons:\n *   1. no network connection\n *   2. CORS error\n * @throws a {@link CanceledError} when the ongoing POST request get cancelled\n */\nexport const post = (amplify, { url, options, abortController }) => {\n    const controller = abortController ?? new AbortController();\n    const responsePromise = createCancellableOperation(async () => {\n        const response = transferHandler(amplify, {\n            url,\n            method: 'POST',\n            ...options,\n            abortSignal: controller.signal,\n            retryStrategy: {\n                strategy: 'jittered-exponential-backoff',\n            },\n        }, isIamAuthApplicableForGraphQL, options?.signingServiceInfo);\n        return response;\n    }, controller);\n    const responseWithCleanUp = responsePromise.finally(() => {\n        cancelTokenMap.delete(responseWithCleanUp);\n    });\n    return responseWithCleanUp;\n};\n/**\n * Cancels a request given the promise returned by `post`.\n * If the request is already completed, this function does nothing.\n * It MUST be used after `updateRequestToBeCancellable` is called.\n */\nexport const cancel = (promise, message) => {\n    const controller = cancelTokenMap.get(promise);\n    if (controller) {\n        controller.abort(message);\n        if (message && controller.signal.reason !== message) {\n            // In runtimes where `AbortSignal.reason` is not supported, we track the reason ourselves.\n            // @ts-expect-error reason is read-only property.\n            controller.signal.reason = message;\n        }\n        return true;\n    }\n    return false;\n};\n/**\n * MUST be used to make a promise including internal `post` API call cancellable.\n */\nexport const updateRequestToBeCancellable = (promise, controller) => {\n    cancelTokenMap.set(promise, controller);\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport { AMPLIFY_SYMBOL } from '@aws-amplify/core/internals/utils';\nexport const MAX_DELAY_MS = 5000;\nexport const NON_RETRYABLE_CODES = [400, 401, 403];\nexport const NON_RETRYABLE_ERROR_TYPES = [\n    'BadRequestException',\n    'UnauthorizedException',\n];\nexport const CONNECTION_STATE_CHANGE = 'ConnectionStateChange';\nexport var MESSAGE_TYPES;\n(function (MESSAGE_TYPES) {\n    /**\n     * Client -> Server message.\n     * This message type is the first message after handshake and this will initialize AWS AppSync RealTime communication\n     */\n    MESSAGE_TYPES[\"GQL_CONNECTION_INIT\"] = \"connection_init\";\n    /**\n     * Server -> Client message\n     * This message type is in case there is an issue with AWS AppSync RealTime when establishing connection\n     */\n    MESSAGE_TYPES[\"GQL_CONNECTION_ERROR\"] = \"connection_error\";\n    /**\n     * Server -> Client message.\n     * This message type is for the ack response from AWS AppSync RealTime for GQL_CONNECTION_INIT message\n     */\n    MESSAGE_TYPES[\"GQL_CONNECTION_ACK\"] = \"connection_ack\";\n    /**\n     * Client -> Server message.\n     * This message type is for register subscriptions with AWS AppSync RealTime\n     */\n    MESSAGE_TYPES[\"GQL_START\"] = \"start\";\n    /**\n     * Server -> Client message.\n     * This message type is for the ack response from AWS AppSync RealTime for GQL_START message\n     */\n    MESSAGE_TYPES[\"GQL_START_ACK\"] = \"start_ack\";\n    /**\n     * Server -> Client message.\n     * This message type is for subscription message from AWS AppSync RealTime or Events\n     */\n    MESSAGE_TYPES[\"DATA\"] = \"data\";\n    /**\n     * Server -> Client message.\n     * This message type helps the client to know is still receiving messages from AWS AppSync RealTime\n     */\n    MESSAGE_TYPES[\"GQL_CONNECTION_KEEP_ALIVE\"] = \"ka\";\n    /**\n     * Client -> Server message.\n     * This message type is for unregister subscriptions with AWS AppSync RealTime\n     */\n    MESSAGE_TYPES[\"GQL_STOP\"] = \"stop\";\n    /**\n     * Server -> Client message.\n     * This message type is for the ack response from AWS AppSync RealTime for GQL_STOP message\n     */\n    MESSAGE_TYPES[\"GQL_COMPLETE\"] = \"complete\";\n    /**\n     * Server -> Client message.\n     * This message type is for sending error messages from AWS AppSync RealTime to the client\n     */\n    MESSAGE_TYPES[\"GQL_ERROR\"] = \"error\";\n    /**\n     * Client -> Server message.\n     * This message type is for registering subscriptions with Events\n     */\n    MESSAGE_TYPES[\"EVENT_SUBSCRIBE\"] = \"subscribe\";\n    /**\n     * Client -> Server message.\n     * This message type is for publishing a message with Events\n     */\n    MESSAGE_TYPES[\"EVENT_PUBLISH\"] = \"publish\";\n    /**\n     * Server -> Client message.\n     * Server acknowledges successful subscription\n     */\n    MESSAGE_TYPES[\"EVENT_SUBSCRIBE_ACK\"] = \"subscribe_success\";\n    /**\n     * Server -> Client message.\n     * Server acknowledges successful publish\n     */\n    MESSAGE_TYPES[\"EVENT_PUBLISH_ACK\"] = \"publish_success\";\n    /**\n     * Client -> Server message.\n     * This message type is for unregister subscriptions with AWS AppSync RealTime\n     */\n    MESSAGE_TYPES[\"EVENT_STOP\"] = \"unsubscribe\";\n    /**\n     * Server -> Client message.\n     * This is the ack response from AWS AppSync Events to EVENT_STOP message\n     */\n    MESSAGE_TYPES[\"EVENT_COMPLETE\"] = \"unsubscribe_success\";\n})(MESSAGE_TYPES || (MESSAGE_TYPES = {}));\nexport var SUBSCRIPTION_STATUS;\n(function (SUBSCRIPTION_STATUS) {\n    SUBSCRIPTION_STATUS[SUBSCRIPTION_STATUS[\"PENDING\"] = 0] = \"PENDING\";\n    SUBSCRIPTION_STATUS[SUBSCRIPTION_STATUS[\"CONNECTED\"] = 1] = \"CONNECTED\";\n    SUBSCRIPTION_STATUS[SUBSCRIPTION_STATUS[\"FAILED\"] = 2] = \"FAILED\";\n})(SUBSCRIPTION_STATUS || (SUBSCRIPTION_STATUS = {}));\nexport var SOCKET_STATUS;\n(function (SOCKET_STATUS) {\n    SOCKET_STATUS[SOCKET_STATUS[\"CLOSED\"] = 0] = \"CLOSED\";\n    SOCKET_STATUS[SOCKET_STATUS[\"READY\"] = 1] = \"READY\";\n    SOCKET_STATUS[SOCKET_STATUS[\"CONNECTING\"] = 2] = \"CONNECTING\";\n})(SOCKET_STATUS || (SOCKET_STATUS = {}));\nexport const AWS_APPSYNC_REALTIME_HEADERS = {\n    accept: 'application/json, text/javascript',\n    'content-encoding': 'amz-1.0',\n    'content-type': 'application/json; charset=UTF-8',\n};\n/**\n * Time in milleseconds to wait for GQL_CONNECTION_INIT message\n */\nexport const CONNECTION_INIT_TIMEOUT = 15000;\n/**\n * Time in milleseconds to wait for GQL_START_ACK message\n */\nexport const START_ACK_TIMEOUT = 15000;\n/**\n * Default Time in milleseconds to wait for GQL_CONNECTION_KEEP_ALIVE message\n */\nexport const DEFAULT_KEEP_ALIVE_TIMEOUT = 5 * 60 * 1000;\n/**\n * Default Time in milleseconds between monitoring checks of keep alive status\n */\nexport const DEFAULT_KEEP_ALIVE_HEARTBEAT_TIMEOUT = 5 * 1000;\n/**\n * Default Time in milleseconds to alert for missed GQL_CONNECTION_KEEP_ALIVE message\n */\nexport const DEFAULT_KEEP_ALIVE_ALERT_TIMEOUT = 65 * 1000;\n/**\n * Default delay time in milleseconds between when reconnect is triggered vs when it is attempted\n */\nexport const RECONNECT_DELAY = 5 * 1000;\n/**\n * Default interval time in milleseconds between when reconnect is re-attempted\n */\nexport const RECONNECT_INTERVAL = 60 * 1000;\n", "export var CONTROL_MSG;\n(function (CONTROL_MSG) {\n    CONTROL_MSG[\"CONNECTION_CLOSED\"] = \"Connection closed\";\n    CONTROL_MSG[\"CONNECTION_FAILED\"] = \"Connection failed\";\n    CONTROL_MSG[\"REALTIME_SUBSCRIPTION_INIT_ERROR\"] = \"AppSync Realtime subscription init error\";\n    CONTROL_MSG[\"SUBSCRIPTION_ACK\"] = \"Subscription ack\";\n    CONTROL_MSG[\"TIMEOUT_DISCONNECT\"] = \"Timeout disconnect\";\n})(CONTROL_MSG || (CONTROL_MSG = {}));\n/** @enum {string} */\nexport var ConnectionState;\n(function (ConnectionState) {\n    /*\n     * The connection is alive and healthy\n     */\n    ConnectionState[\"Connected\"] = \"Connected\";\n    /*\n     * The connection is alive, but the connection is offline\n     */\n    ConnectionState[\"ConnectedPendingNetwork\"] = \"ConnectedPendingNetwork\";\n    /*\n     * The connection has been disconnected while in use\n     */\n    ConnectionState[\"ConnectionDisrupted\"] = \"ConnectionDisrupted\";\n    /*\n     * The connection has been disconnected and the network is offline\n     */\n    ConnectionState[\"ConnectionDisruptedPendingNetwork\"] = \"ConnectionDisruptedPendingNetwork\";\n    /*\n     * The connection is in the process of connecting\n     */\n    ConnectionState[\"Connecting\"] = \"Connecting\";\n    /*\n     * The connection is not in use and is being disconnected\n     */\n    ConnectionState[\"ConnectedPendingDisconnect\"] = \"ConnectedPendingDisconnect\";\n    /*\n     * The connection is not in use and has been disconnected\n     */\n    ConnectionState[\"Disconnected\"] = \"Disconnected\";\n    /*\n     * The connection is alive, but a keep alive message has been missed\n     */\n    ConnectionState[\"ConnectedPendingKeepAlive\"] = \"ConnectedPendingKeepAlive\";\n})(ConnectionState || (ConnectionState = {}));\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Reachability } from '@aws-amplify/core/internals/utils';\nexport const ReachabilityMonitor = () => new Reachability().networkMonitor();\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Observable, filter, map } from 'rxjs';\nimport { ConnectionState } from '../types/PubSub';\nimport { ReachabilityMonitor } from './ReachabilityMonitor';\nexport const CONNECTION_CHANGE = {\n    KEEP_ALIVE_MISSED: { keepAliveState: 'unhealthy' },\n    KEEP_ALIVE: { keepAliveState: 'healthy' },\n    CONNECTION_ESTABLISHED: { connectionState: 'connected' },\n    CONNECTION_FAILED: {\n        intendedConnectionState: 'disconnected',\n        connectionState: 'disconnected',\n    },\n    CLOSING_CONNECTION: { intendedConnectionState: 'disconnected' },\n    OPENING_CONNECTION: {\n        intendedConnectionState: 'connected',\n        connectionState: 'connecting',\n    },\n    CLOSED: { connectionState: 'disconnected' },\n    ONLINE: { networkState: 'connected' },\n    OFFLINE: { networkState: 'disconnected' },\n};\nexport class ConnectionStateMonitor {\n    constructor() {\n        this._networkMonitoringSubscription = undefined;\n        this._linkedConnectionState = {\n            networkState: 'connected',\n            connectionState: 'disconnected',\n            intendedConnectionState: 'disconnected',\n            keepAliveState: 'healthy',\n        };\n        // Attempt to update the state with the current actual network state\n        this._initialNetworkStateSubscription = ReachabilityMonitor().subscribe(({ online }) => {\n            this.record(online ? CONNECTION_CHANGE.ONLINE : CONNECTION_CHANGE.OFFLINE);\n            this._initialNetworkStateSubscription?.unsubscribe();\n        });\n        this._linkedConnectionStateObservable =\n            new Observable(connectionStateObserver => {\n                connectionStateObserver.next(this._linkedConnectionState);\n                this._linkedConnectionStateObserver = connectionStateObserver;\n            });\n    }\n    /**\n     * Turn network state monitoring on if it isn't on already\n     */\n    enableNetworkMonitoring() {\n        // If no initial network state was discovered, stop trying\n        this._initialNetworkStateSubscription?.unsubscribe();\n        // Maintain the network state based on the reachability monitor\n        if (this._networkMonitoringSubscription === undefined) {\n            this._networkMonitoringSubscription = ReachabilityMonitor().subscribe(({ online }) => {\n                this.record(online ? CONNECTION_CHANGE.ONLINE : CONNECTION_CHANGE.OFFLINE);\n            });\n        }\n    }\n    /**\n     * Turn network state monitoring off if it isn't off already\n     */\n    disableNetworkMonitoring() {\n        this._networkMonitoringSubscription?.unsubscribe();\n        this._networkMonitoringSubscription = undefined;\n    }\n    /**\n     * Get the observable that allows us to monitor the connection state\n     *\n     * @returns {Observable<ConnectionState>} - The observable that emits ConnectionState updates\n     */\n    get connectionStateObservable() {\n        let previous;\n        // The linked state aggregates state changes to any of the network, connection,\n        // intendedConnection and keepAliveHealth. Some states will change these independent\n        // states without changing the overall connection state.\n        // After translating from linked states to ConnectionState, then remove any duplicates\n        return this._linkedConnectionStateObservable\n            .pipe(map(value => {\n            return this.connectionStatesTranslator(value);\n        }))\n            .pipe(filter(current => {\n            const toInclude = current !== previous;\n            previous = current;\n            return toInclude;\n        }));\n    }\n    /*\n     * Updates local connection state and emits the full state to the observer.\n     */\n    record(statusUpdates) {\n        // Maintain the network monitor\n        if (statusUpdates.intendedConnectionState === 'connected') {\n            this.enableNetworkMonitoring();\n        }\n        else if (statusUpdates.intendedConnectionState === 'disconnected') {\n            this.disableNetworkMonitoring();\n        }\n        // Maintain the socket state\n        const newSocketStatus = {\n            ...this._linkedConnectionState,\n            ...statusUpdates,\n        };\n        this._linkedConnectionState = { ...newSocketStatus };\n        this._linkedConnectionStateObserver?.next(this._linkedConnectionState);\n    }\n    /*\n     * Translate the ConnectionState structure into a specific ConnectionState string literal union\n     */\n    connectionStatesTranslator({ connectionState, networkState, intendedConnectionState, keepAliveState, }) {\n        if (connectionState === 'connected' && networkState === 'disconnected')\n            return ConnectionState.ConnectedPendingNetwork;\n        if (connectionState === 'connected' &&\n            intendedConnectionState === 'disconnected')\n            return ConnectionState.ConnectedPendingDisconnect;\n        if (connectionState === 'disconnected' &&\n            intendedConnectionState === 'connected' &&\n            networkState === 'disconnected')\n            return ConnectionState.ConnectionDisruptedPendingNetwork;\n        if (connectionState === 'disconnected' &&\n            intendedConnectionState === 'connected')\n            return ConnectionState.ConnectionDisrupted;\n        if (connectionState === 'connected' && keepAliveState === 'unhealthy')\n            return ConnectionState.ConnectedPendingKeepAlive;\n        // All remaining states directly correspond to the connection state\n        if (connectionState === 'connecting')\n            return ConnectionState.Connecting;\n        if (connectionState === 'disconnected')\n            return ConnectionState.Disconnected;\n        return ConnectionState.Connected;\n    }\n}\n", "import { RECONNECT_DELAY, RECONNECT_INTERVAL } from '../Providers/constants';\nexport var ReconnectEvent;\n(function (ReconnectEvent) {\n    ReconnectEvent[\"START_RECONNECT\"] = \"START_RECONNECT\";\n    ReconnectEvent[\"HALT_RECONNECT\"] = \"HALT_RECONNECT\";\n})(ReconnectEvent || (ReconnectEvent = {}));\n/**\n * Captures the reconnect event logic used to determine when to reconnect to PubSub providers.\n *   Reconnect attempts are delayed by 5 seconds to let the interface settle.\n *   Attempting to reconnect only once creates unrecoverable states when the network state isn't\n *   supported by the browser, so this keeps retrying every minute until halted.\n */\nexport class ReconnectionMonitor {\n    constructor() {\n        this.reconnectObservers = [];\n    }\n    /**\n     * Add reconnect observer to the list of observers to alert on reconnect\n     */\n    addObserver(reconnectObserver) {\n        this.reconnectObservers.push(reconnectObserver);\n    }\n    /**\n     * Given a reconnect event, start the appropriate behavior\n     */\n    record(event) {\n        if (event === ReconnectEvent.START_RECONNECT) {\n            // If the reconnection hasn't been started\n            if (this.reconnectSetTimeoutId === undefined &&\n                this.reconnectIntervalId === undefined) {\n                this.reconnectSetTimeoutId = setTimeout(() => {\n                    // Reconnect now\n                    this._triggerReconnect();\n                    // Retry reconnect every periodically until it works\n                    this.reconnectIntervalId = setInterval(() => {\n                        this._triggerReconnect();\n                    }, RECONNECT_INTERVAL);\n                }, RECONNECT_DELAY);\n            }\n        }\n        if (event === ReconnectEvent.HALT_RECONNECT) {\n            if (this.reconnectIntervalId) {\n                clearInterval(this.reconnectIntervalId);\n                this.reconnectIntervalId = undefined;\n            }\n            if (this.reconnectSetTimeoutId) {\n                clearTimeout(this.reconnectSetTimeoutId);\n                this.reconnectSetTimeoutId = undefined;\n            }\n        }\n    }\n    /**\n     * Complete all reconnect observers\n     */\n    close() {\n        this.reconnectObservers.forEach(reconnectObserver => {\n            reconnectObserver.complete?.();\n        });\n    }\n    _triggerReconnect() {\n        this.reconnectObservers.forEach(reconnectObserver => {\n            reconnectObserver.next?.();\n        });\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AmplifyUrl, AmplifyUrlSearchParams, } from '@aws-amplify/core/internals/utils';\nconst protocol = 'wss://';\nconst standardDomainPattern = /^https:\\/\\/\\w{26}\\.appsync-api\\.\\w{2}(?:(?:-\\w{2,})+)-\\d\\.amazonaws.com(?:\\.cn)?\\/graphql$/i;\nconst eventDomainPattern = /^https:\\/\\/\\w{26}\\.\\w+-api\\.\\w{2}(?:(?:-\\w{2,})+)-\\d\\.amazonaws.com(?:\\.cn)?\\/event$/i;\nconst customDomainPath = '/realtime';\nexport const isCustomDomain = (url) => {\n    return url.match(standardDomainPattern) === null;\n};\nconst isEventDomain = (url) => url.match(eventDomainPattern) !== null;\nexport const getRealtimeEndpointUrl = (appSyncGraphqlEndpoint) => {\n    let realtimeEndpoint = appSyncGraphqlEndpoint ?? '';\n    if (isEventDomain(realtimeEndpoint)) {\n        realtimeEndpoint = realtimeEndpoint\n            .concat(customDomainPath)\n            .replace('ddpg-api', 'grt-gamma')\n            .replace('appsync-api', 'appsync-realtime-api');\n    }\n    else if (isCustomDomain(realtimeEndpoint)) {\n        realtimeEndpoint = realtimeEndpoint.concat(customDomainPath);\n    }\n    else {\n        realtimeEndpoint = realtimeEndpoint\n            .replace('appsync-api', 'appsync-realtime-api')\n            .replace('gogi-beta', 'grt-beta')\n            .replace('ddpg-api', 'grt-gamma');\n    }\n    realtimeEndpoint = realtimeEndpoint\n        .replace('https://', protocol)\n        .replace('http://', protocol);\n    return new AmplifyUrl(realtimeEndpoint);\n};\n/**\n * Strips out `Authorization` header if present\n */\nconst extractNonAuthHeaders = (headers) => {\n    if (!headers) {\n        return {};\n    }\n    if ('Authorization' in headers) {\n        const { Authorization: _, ...nonAuthHeaders } = headers;\n        return nonAuthHeaders;\n    }\n    return headers;\n};\n/**\n *\n * @param headers - http headers\n * @returns uri-encoded query parameters derived from custom headers\n */\nexport const queryParamsFromCustomHeaders = (headers) => {\n    const nonAuthHeaders = extractNonAuthHeaders(headers);\n    const params = new AmplifyUrlSearchParams();\n    Object.entries(nonAuthHeaders).forEach(([k, v]) => {\n        params.append(k, v);\n    });\n    return params;\n};\n/**\n * Normalizes AppSync realtime endpoint URL\n *\n * @param appSyncGraphqlEndpoint - AppSync endpointUri from config\n * @param urlParams - URLSearchParams\n * @returns fully resolved string realtime endpoint URL\n */\nexport const realtimeUrlWithQueryString = (appSyncGraphqlEndpoint, urlParams) => {\n    const realtimeEndpointUrl = getRealtimeEndpointUrl(appSyncGraphqlEndpoint);\n    // preserves any query params a customer might manually set in the configuration\n    const existingParams = new AmplifyUrlSearchParams(realtimeEndpointUrl.search);\n    for (const [k, v] of urlParams.entries()) {\n        existingParams.append(k, v);\n    }\n    realtimeEndpointUrl.search = existingParams.toString();\n    return realtimeEndpointUrl.toString();\n};\n// TODO: move to separate file?\nexport const additionalHeadersFromOptions = async (options) => {\n    const { appSyncGraphqlEndpoint, query, libraryConfigHeaders = () => ({}), additionalHeaders = {}, authToken, } = options;\n    let additionalCustomHeaders = {};\n    const _libraryConfigHeaders = await libraryConfigHeaders();\n    if (typeof additionalHeaders === 'function') {\n        const requestOptions = {\n            url: appSyncGraphqlEndpoint || '',\n            queryString: query || '',\n        };\n        additionalCustomHeaders = await additionalHeaders(requestOptions);\n    }\n    else {\n        additionalCustomHeaders = additionalHeaders;\n    }\n    // if an authorization header is set, have the explicit, operation-level authToken take precedence\n    if (authToken) {\n        additionalCustomHeaders = {\n            ...additionalCustomHeaders,\n            Authorization: authToken,\n        };\n    }\n    return {\n        additionalCustomHeaders,\n        libraryConfigHeaders: _libraryConfigHeaders,\n    };\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { ConsoleLogger, fetchAuthSession } from '@aws-amplify/core';\nimport { signRequest } from '@aws-amplify/core/internals/aws-client-utils';\nimport { AmplifyUrl } from '@aws-amplify/core/internals/utils';\nimport { AWS_APPSYNC_REALTIME_HEADERS } from '../constants';\nconst logger = new ConsoleLogger('AWSAppSyncRealTimeProvider Auth');\nconst awsAuthTokenHeader = async ({ host }) => {\n    const session = await fetchAuthSession();\n    return {\n        Authorization: session?.tokens?.accessToken?.toString(),\n        host,\n    };\n};\nconst awsRealTimeApiKeyHeader = async ({ apiKey, host, }) => {\n    const dt = new Date();\n    const dtStr = dt.toISOString().replace(/[:-]|\\.\\d{3}/g, '');\n    return {\n        host,\n        'x-amz-date': dtStr,\n        'x-api-key': apiKey,\n    };\n};\nconst awsRealTimeIAMHeader = async ({ payload, canonicalUri, appSyncGraphqlEndpoint, region, }) => {\n    const endpointInfo = {\n        region,\n        service: 'appsync',\n    };\n    const creds = (await fetchAuthSession()).credentials;\n    const request = {\n        url: `${appSyncGraphqlEndpoint}${canonicalUri}`,\n        data: payload,\n        method: 'POST',\n        headers: { ...AWS_APPSYNC_REALTIME_HEADERS },\n    };\n    const signedParams = signRequest({\n        headers: request.headers,\n        method: request.method,\n        url: new AmplifyUrl(request.url),\n        body: request.data,\n    }, {\n        credentials: creds,\n        signingRegion: endpointInfo.region,\n        signingService: endpointInfo.service,\n    });\n    return signedParams.headers;\n};\nconst customAuthHeader = async ({ host, additionalCustomHeaders, }) => {\n    /**\n     * If `additionalHeaders` was provided to the subscription as a function,\n     * the headers that are returned by that function will already have been\n     * provided before this function is called.\n     */\n    if (!additionalCustomHeaders?.Authorization) {\n        throw new Error('No auth token specified');\n    }\n    return {\n        Authorization: additionalCustomHeaders.Authorization,\n        host,\n    };\n};\nexport const awsRealTimeHeaderBasedAuth = async ({ apiKey, authenticationType, canonicalUri, appSyncGraphqlEndpoint, region, additionalCustomHeaders, payload, }) => {\n    const headerHandler = {\n        apiKey: awsRealTimeApiKeyHeader,\n        iam: awsRealTimeIAMHeader,\n        oidc: awsAuthTokenHeader,\n        userPool: awsAuthTokenHeader,\n        lambda: customAuthHeader,\n        none: customAuthHeader,\n    };\n    if (!authenticationType || !headerHandler[authenticationType]) {\n        logger.debug(`Authentication type ${authenticationType} not supported`);\n        return undefined;\n    }\n    else {\n        const handler = headerHandler[authenticationType];\n        const host = appSyncGraphqlEndpoint\n            ? new AmplifyUrl(appSyncGraphqlEndpoint).host\n            : undefined;\n        const resolvedApiKey = authenticationType === 'apiKey' ? apiKey : undefined;\n        logger.debug(`Authenticating with ${JSON.stringify(authenticationType)}`);\n        const result = await handler({\n            payload,\n            canonicalUri,\n            appSyncGraphqlEndpoint,\n            apiKey: resolvedApiKey,\n            region,\n            host,\n            additionalCustomHeaders,\n        });\n        return result;\n    }\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Observable } from 'rxjs';\nimport { GraphQLError } from 'graphql';\nimport { ConsoleLogger, Hub } from '@aws-amplify/core';\nimport { NonRetryableError, amplifyUuid, base64Encoder, isNonRetryableError, jitteredExponentialRetry, } from '@aws-amplify/core/internals/utils';\nimport { CONTROL_MSG, ConnectionState, } from '../../types/PubSub';\nimport { AMPLIFY_SYMBOL, CONNECTION_INIT_TIMEOUT, CONNECTION_STATE_CHANGE, DEFAULT_KEEP_ALIVE_ALERT_TIMEOUT, DEFAULT_KEEP_ALIVE_HEARTBEAT_TIMEOUT, MAX_DELAY_MS, MESSAGE_TYPES, NON_RETRYABLE_CODES, NON_RETRYABLE_ERROR_TYPES, SOCKET_STATUS, START_ACK_TIMEOUT, SUBSCRIPTION_STATUS, } from '../constants';\nimport { CONNECTION_CHANGE, ConnectionStateMonitor, } from '../../utils/ConnectionStateMonitor';\nimport { ReconnectEvent, ReconnectionMonitor, } from '../../utils/ReconnectionMonitor';\nimport { additionalHeadersFromOptions, queryParamsFromCustomHeaders, realtimeUrlWithQueryString, } from './appsyncUrl';\nimport { awsRealTimeHeaderBasedAuth } from './authHeaders';\nconst dispatchApiEvent = (payload) => {\n    Hub.dispatch('api', payload, 'PubSub', AMPLIFY_SYMBOL);\n};\nexport class AWSWebSocketProvider {\n    constructor(args) {\n        this.subscriptionObserverMap = new Map();\n        this.allowNoSubscriptions = false;\n        this.socketStatus = SOCKET_STATUS.CLOSED;\n        this.keepAliveTimestamp = Date.now();\n        this.promiseArray = [];\n        this.connectionStateMonitor = new ConnectionStateMonitor();\n        this.reconnectionMonitor = new ReconnectionMonitor();\n        /**\n         * Open WebSocket connection & perform handshake\n         * Ref: https://docs.aws.amazon.com/appsync/latest/devguide/real-time-websocket-client.html#appsynclong-real-time-websocket-client-implementation-guide-for-graphql-subscriptions\n         *\n         * @param subprotocol -\n         */\n        this._establishConnection = async (awsRealTimeUrl, subprotocol) => {\n            this.logger.debug(`Establishing WebSocket connection to ${awsRealTimeUrl}`);\n            try {\n                await this._openConnection(awsRealTimeUrl, subprotocol);\n                await this._initiateHandshake();\n            }\n            catch (err) {\n                const { errorType, errorCode } = err;\n                if (NON_RETRYABLE_CODES.includes(errorCode) ||\n                    // Event API does not currently return `errorCode`. This may change in the future.\n                    // For now fall back to also checking known non-retryable error types\n                    NON_RETRYABLE_ERROR_TYPES.includes(errorType)) {\n                    throw new NonRetryableError(errorType);\n                }\n                else if (errorType) {\n                    throw new Error(errorType);\n                }\n                else {\n                    throw err;\n                }\n            }\n        };\n        this.logger = new ConsoleLogger(args.providerName);\n        this.wsProtocolName = args.wsProtocolName;\n        this.wsConnectUri = args.connectUri;\n        this.connectionStateMonitorSubscription =\n            this._startConnectionStateMonitoring();\n    }\n    /**\n     * Mark the socket closed and release all active listeners\n     */\n    close() {\n        // Mark the socket closed both in status and the connection monitor\n        this.socketStatus = SOCKET_STATUS.CLOSED;\n        this.connectionStateMonitor.record(CONNECTION_CHANGE.CONNECTION_FAILED);\n        // Turn off the subscription monitor Hub publishing\n        this.connectionStateMonitorSubscription.unsubscribe();\n        // Complete all reconnect observers\n        this.reconnectionMonitor.close();\n        return new Promise((resolve, reject) => {\n            if (this.awsRealTimeSocket) {\n                this.awsRealTimeSocket.onclose = (_) => {\n                    this._closeSocket();\n                    this.subscriptionObserverMap = new Map();\n                    this.awsRealTimeSocket = undefined;\n                    resolve();\n                };\n                this.awsRealTimeSocket.onerror = (err) => {\n                    reject(err);\n                };\n                this.awsRealTimeSocket.close();\n            }\n            else {\n                resolve();\n            }\n        });\n    }\n    subscribe(options, customUserAgentDetails) {\n        return new Observable(observer => {\n            if (!options?.appSyncGraphqlEndpoint) {\n                observer.error({\n                    errors: [\n                        {\n                            ...new GraphQLError(`Subscribe only available for AWS AppSync endpoint`),\n                        },\n                    ],\n                });\n                observer.complete();\n                return;\n            }\n            let subscriptionStartInProgress = false;\n            const subscriptionId = amplifyUuid();\n            const startSubscription = () => {\n                if (!subscriptionStartInProgress) {\n                    subscriptionStartInProgress = true;\n                    this._startSubscriptionWithAWSAppSyncRealTime({\n                        options,\n                        observer,\n                        subscriptionId,\n                        customUserAgentDetails,\n                    })\n                        .catch(err => {\n                        this.logger.debug(`${CONTROL_MSG.REALTIME_SUBSCRIPTION_INIT_ERROR}: ${err}`);\n                        this._closeSocket();\n                    })\n                        .finally(() => {\n                        subscriptionStartInProgress = false;\n                    });\n                }\n            };\n            // Add an observable to the reconnection list to manage reconnection for this subscription\n            const reconnectSubscription = new Observable(reconnectSubscriptionObserver => {\n                this.reconnectionMonitor.addObserver(reconnectSubscriptionObserver);\n            }).subscribe(() => {\n                startSubscription();\n            });\n            startSubscription();\n            return async () => {\n                await this._cleanupSubscription(subscriptionId, reconnectSubscription);\n            };\n        });\n    }\n    async connect(options) {\n        if (this.socketStatus === SOCKET_STATUS.READY) {\n            return;\n        }\n        await this._connectWebSocket(options);\n    }\n    async publish(options, customUserAgentDetails) {\n        if (this.socketStatus !== SOCKET_STATUS.READY) {\n            throw new Error('Subscription has not been initialized');\n        }\n        return this._publishMessage(options, customUserAgentDetails);\n    }\n    async _connectWebSocket(options) {\n        const { apiKey, appSyncGraphqlEndpoint, authenticationType, region } = options;\n        const { additionalCustomHeaders } = await additionalHeadersFromOptions(options);\n        this.connectionStateMonitor.record(CONNECTION_CHANGE.OPENING_CONNECTION);\n        await this._initializeWebSocketConnection({\n            apiKey,\n            appSyncGraphqlEndpoint,\n            authenticationType,\n            region,\n            additionalCustomHeaders,\n        });\n    }\n    async _publishMessage(options, customUserAgentDetails) {\n        const subscriptionId = amplifyUuid();\n        const { additionalCustomHeaders, libraryConfigHeaders } = await additionalHeadersFromOptions(options);\n        const serializedSubscriptionMessage = await this._prepareSubscriptionPayload({\n            options,\n            subscriptionId,\n            customUserAgentDetails,\n            additionalCustomHeaders,\n            libraryConfigHeaders,\n            publish: true,\n        });\n        return new Promise((resolve, reject) => {\n            if (this.awsRealTimeSocket) {\n                const publishListener = (event) => {\n                    const data = JSON.parse(event.data);\n                    if (data.id === subscriptionId && data.type === 'publish_success') {\n                        this.awsRealTimeSocket &&\n                            this.awsRealTimeSocket.removeEventListener('message', publishListener);\n                        cleanup();\n                        resolve();\n                    }\n                    if (data.errors && data.errors.length > 0) {\n                        const errorTypes = data.errors.map((error) => error.errorType);\n                        cleanup();\n                        reject(new Error(`Publish errors: ${errorTypes.join(', ')}`));\n                    }\n                };\n                const errorListener = (error) => {\n                    cleanup();\n                    reject(new Error(`WebSocket error: ${error}`));\n                };\n                const closeListener = () => {\n                    cleanup();\n                    reject(new Error('WebSocket is closed'));\n                };\n                const cleanup = () => {\n                    this.awsRealTimeSocket?.removeEventListener('message', publishListener);\n                    this.awsRealTimeSocket?.removeEventListener('error', errorListener);\n                    this.awsRealTimeSocket?.removeEventListener('close', closeListener);\n                };\n                this.awsRealTimeSocket.addEventListener('message', publishListener);\n                this.awsRealTimeSocket.addEventListener('error', errorListener);\n                this.awsRealTimeSocket.addEventListener('close', closeListener);\n                this.awsRealTimeSocket.send(serializedSubscriptionMessage);\n            }\n            else {\n                reject(new Error('WebSocket is not connected'));\n            }\n        });\n    }\n    async _cleanupSubscription(subscriptionId, reconnectSubscription) {\n        // Cleanup reconnection subscription\n        reconnectSubscription?.unsubscribe();\n        // Cleanup after unsubscribing or observer.complete was called after _startSubscriptionWithAWSAppSyncRealTime\n        try {\n            // Waiting that subscription has been connected before trying to unsubscribe\n            await this._waitForSubscriptionToBeConnected(subscriptionId);\n            const { subscriptionState } = this.subscriptionObserverMap.get(subscriptionId) || {};\n            if (!subscriptionState) {\n                // subscription already unsubscribed\n                return;\n            }\n            if (subscriptionState === SUBSCRIPTION_STATUS.CONNECTED) {\n                this._sendUnsubscriptionMessage(subscriptionId);\n            }\n            else {\n                throw new Error('Subscription never connected');\n            }\n        }\n        catch (err) {\n            this.logger.debug(`Error while unsubscribing ${err}`);\n        }\n        finally {\n            this._removeSubscriptionObserver(subscriptionId);\n        }\n    }\n    // Monitor the connection state and pass changes along to Hub\n    _startConnectionStateMonitoring() {\n        return this.connectionStateMonitor.connectionStateObservable.subscribe(connectionState => {\n            dispatchApiEvent({\n                event: CONNECTION_STATE_CHANGE,\n                data: {\n                    provider: this,\n                    connectionState,\n                },\n                message: `Connection state is ${connectionState}`,\n            });\n            this.connectionState = connectionState;\n            // Trigger START_RECONNECT when the connection is disrupted\n            if (connectionState === ConnectionState.ConnectionDisrupted) {\n                this.reconnectionMonitor.record(ReconnectEvent.START_RECONNECT);\n            }\n            // Trigger HALT_RECONNECT to halt reconnection attempts when the state is anything other than\n            // ConnectionDisrupted or Connecting\n            if ([\n                ConnectionState.Connected,\n                ConnectionState.ConnectedPendingDisconnect,\n                ConnectionState.ConnectedPendingKeepAlive,\n                ConnectionState.ConnectedPendingNetwork,\n                ConnectionState.ConnectionDisruptedPendingNetwork,\n                ConnectionState.Disconnected,\n            ].includes(connectionState)) {\n                this.reconnectionMonitor.record(ReconnectEvent.HALT_RECONNECT);\n            }\n        });\n    }\n    async _startSubscriptionWithAWSAppSyncRealTime({ options, observer, subscriptionId, customUserAgentDetails, }) {\n        const { query, variables } = options;\n        this.subscriptionObserverMap.set(subscriptionId, {\n            observer,\n            query: query ?? '',\n            variables: variables ?? {},\n            subscriptionState: SUBSCRIPTION_STATUS.PENDING,\n            startAckTimeoutId: undefined,\n        });\n        const { additionalCustomHeaders, libraryConfigHeaders } = await additionalHeadersFromOptions(options);\n        const serializedSubscriptionMessage = await this._prepareSubscriptionPayload({\n            options,\n            subscriptionId,\n            customUserAgentDetails,\n            additionalCustomHeaders,\n            libraryConfigHeaders,\n        });\n        try {\n            await this._connectWebSocket(options);\n        }\n        catch (err) {\n            this._logStartSubscriptionError(subscriptionId, observer, err);\n            return;\n        }\n        // Potential race condition can occur when unsubscribe is called during _initializeWebSocketConnection.\n        // E.g.unsubscribe gets invoked prior to finishing WebSocket handshake or START_ACK.\n        // Both subscriptionFailedCallback and subscriptionReadyCallback are used to synchronized this.\n        const { subscriptionFailedCallback, subscriptionReadyCallback } = this.subscriptionObserverMap.get(subscriptionId) ?? {};\n        // This must be done before sending the message in order to be listening immediately\n        this.subscriptionObserverMap.set(subscriptionId, {\n            observer,\n            subscriptionState: SUBSCRIPTION_STATUS.PENDING,\n            query: query ?? '',\n            variables: variables ?? {},\n            subscriptionReadyCallback,\n            subscriptionFailedCallback,\n            startAckTimeoutId: setTimeout(() => {\n                this._timeoutStartSubscriptionAck(subscriptionId);\n            }, START_ACK_TIMEOUT),\n        });\n        if (this.awsRealTimeSocket) {\n            this.awsRealTimeSocket.send(serializedSubscriptionMessage);\n        }\n    }\n    // Log logic for start subscription failures\n    _logStartSubscriptionError(subscriptionId, observer, err) {\n        this.logger.debug({ err });\n        const message = String(err.message ?? '');\n        // Resolving to give the state observer time to propogate the update\n        this._closeSocket();\n        // Capture the error only when the network didn't cause disruption\n        if (this.connectionState !== ConnectionState.ConnectionDisruptedPendingNetwork) {\n            // When the error is non-retriable, error out the observable\n            if (isNonRetryableError(err)) {\n                observer.error({\n                    errors: [\n                        {\n                            ...new GraphQLError(`${CONTROL_MSG.CONNECTION_FAILED}: ${message}`),\n                        },\n                    ],\n                });\n            }\n            else {\n                this.logger.debug(`${CONTROL_MSG.CONNECTION_FAILED}: ${message}`);\n            }\n            const { subscriptionFailedCallback } = this.subscriptionObserverMap.get(subscriptionId) || {};\n            // Notify concurrent unsubscription\n            if (typeof subscriptionFailedCallback === 'function') {\n                subscriptionFailedCallback();\n            }\n        }\n    }\n    // Waiting that subscription has been connected before trying to unsubscribe\n    async _waitForSubscriptionToBeConnected(subscriptionId) {\n        const subscriptionObserver = this.subscriptionObserverMap.get(subscriptionId);\n        if (subscriptionObserver) {\n            const { subscriptionState } = subscriptionObserver;\n            // This in case unsubscribe is invoked before sending start subscription message\n            if (subscriptionState === SUBSCRIPTION_STATUS.PENDING) {\n                return new Promise((resolve, reject) => {\n                    const { observer, subscriptionState: observedSubscriptionState, variables, query, } = subscriptionObserver;\n                    this.subscriptionObserverMap.set(subscriptionId, {\n                        observer,\n                        subscriptionState: observedSubscriptionState,\n                        variables,\n                        query,\n                        subscriptionReadyCallback: resolve,\n                        subscriptionFailedCallback: reject,\n                    });\n                });\n            }\n        }\n    }\n    _sendUnsubscriptionMessage(subscriptionId) {\n        try {\n            if (this.awsRealTimeSocket &&\n                this.awsRealTimeSocket.readyState === WebSocket.OPEN &&\n                this.socketStatus === SOCKET_STATUS.READY) {\n                // Preparing unsubscribe message to stop receiving messages for that subscription\n                const unsubscribeMessage = this._unsubscribeMessage(subscriptionId);\n                const stringToAWSRealTime = JSON.stringify(unsubscribeMessage);\n                this.awsRealTimeSocket.send(stringToAWSRealTime);\n            }\n        }\n        catch (err) {\n            // If GQL_STOP is not sent because of disconnection issue, then there is nothing the client can do\n            this.logger.debug({ err });\n        }\n    }\n    _removeSubscriptionObserver(subscriptionId) {\n        this.subscriptionObserverMap.delete(subscriptionId);\n        // Verifying 1000ms after removing subscription in case there are new subscription unmount/mount\n        if (!this.allowNoSubscriptions) {\n            setTimeout(this._closeSocketIfRequired.bind(this), 1000);\n        }\n    }\n    _closeSocketIfRequired() {\n        if (this.subscriptionObserverMap.size > 0) {\n            // Active subscriptions on the WebSocket\n            return;\n        }\n        if (!this.awsRealTimeSocket) {\n            this.socketStatus = SOCKET_STATUS.CLOSED;\n            return;\n        }\n        this.connectionStateMonitor.record(CONNECTION_CHANGE.CLOSING_CONNECTION);\n        if (this.awsRealTimeSocket.bufferedAmount > 0) {\n            // Still data on the WebSocket\n            setTimeout(this._closeSocketIfRequired.bind(this), 1000);\n        }\n        else {\n            this.logger.debug('closing WebSocket...');\n            const tempSocket = this.awsRealTimeSocket;\n            // Cleaning callbacks to avoid race condition, socket still exists\n            tempSocket.onclose = null;\n            tempSocket.onerror = null;\n            tempSocket.close(1000);\n            this.awsRealTimeSocket = undefined;\n            this.socketStatus = SOCKET_STATUS.CLOSED;\n            this._closeSocket();\n        }\n    }\n    maintainKeepAlive() {\n        this.keepAliveTimestamp = Date.now();\n    }\n    keepAliveHeartbeat(connectionTimeoutMs) {\n        const currentTime = Date.now();\n        // Check for missed KA message\n        if (currentTime - this.keepAliveTimestamp >\n            DEFAULT_KEEP_ALIVE_ALERT_TIMEOUT) {\n            this.connectionStateMonitor.record(CONNECTION_CHANGE.KEEP_ALIVE_MISSED);\n        }\n        else {\n            this.connectionStateMonitor.record(CONNECTION_CHANGE.KEEP_ALIVE);\n        }\n        // Recognize we are disconnected if we haven't seen messages in the keep alive timeout period\n        if (currentTime - this.keepAliveTimestamp > connectionTimeoutMs) {\n            this._errorDisconnect(CONTROL_MSG.TIMEOUT_DISCONNECT);\n        }\n    }\n    _handleIncomingSubscriptionMessage(message) {\n        if (typeof message.data !== 'string') {\n            return;\n        }\n        const [isData, data] = this._handleSubscriptionData(message);\n        if (isData) {\n            this.maintainKeepAlive();\n            return;\n        }\n        const { type, id, payload } = data;\n        const { observer = null, query = '', variables = {}, startAckTimeoutId, subscriptionReadyCallback, subscriptionFailedCallback, } = this.subscriptionObserverMap.get(id) || {};\n        if (type === MESSAGE_TYPES.GQL_START_ACK ||\n            type === MESSAGE_TYPES.EVENT_SUBSCRIBE_ACK) {\n            this.logger.debug(`subscription ready for ${JSON.stringify({ query, variables })}`);\n            if (typeof subscriptionReadyCallback === 'function') {\n                subscriptionReadyCallback();\n            }\n            if (startAckTimeoutId)\n                clearTimeout(startAckTimeoutId);\n            dispatchApiEvent({\n                event: CONTROL_MSG.SUBSCRIPTION_ACK,\n                data: { query, variables },\n                message: 'Connection established for subscription',\n            });\n            const subscriptionState = SUBSCRIPTION_STATUS.CONNECTED;\n            if (observer) {\n                this.subscriptionObserverMap.set(id, {\n                    observer,\n                    query,\n                    variables,\n                    startAckTimeoutId: undefined,\n                    subscriptionState,\n                    subscriptionReadyCallback,\n                    subscriptionFailedCallback,\n                });\n            }\n            this.connectionStateMonitor.record(CONNECTION_CHANGE.CONNECTION_ESTABLISHED);\n            return;\n        }\n        if (type === MESSAGE_TYPES.GQL_CONNECTION_KEEP_ALIVE) {\n            this.maintainKeepAlive();\n            return;\n        }\n        if (type === MESSAGE_TYPES.GQL_ERROR) {\n            const subscriptionState = SUBSCRIPTION_STATUS.FAILED;\n            if (observer) {\n                this.subscriptionObserverMap.set(id, {\n                    observer,\n                    query,\n                    variables,\n                    startAckTimeoutId,\n                    subscriptionReadyCallback,\n                    subscriptionFailedCallback,\n                    subscriptionState,\n                });\n                this.logger.debug(`${CONTROL_MSG.CONNECTION_FAILED}: ${JSON.stringify(payload ?? data)}`);\n                observer.error({\n                    errors: [\n                        {\n                            ...new GraphQLError(`${CONTROL_MSG.CONNECTION_FAILED}: ${JSON.stringify(payload ?? data)}`),\n                        },\n                    ],\n                });\n                if (startAckTimeoutId)\n                    clearTimeout(startAckTimeoutId);\n                if (typeof subscriptionFailedCallback === 'function') {\n                    subscriptionFailedCallback();\n                }\n            }\n        }\n    }\n    _errorDisconnect(msg) {\n        this.logger.debug(`Disconnect error: ${msg}`);\n        if (this.awsRealTimeSocket) {\n            this._closeSocket();\n            this.awsRealTimeSocket.close();\n        }\n        this.socketStatus = SOCKET_STATUS.CLOSED;\n    }\n    _closeSocket() {\n        if (this.keepAliveHeartbeatIntervalId) {\n            clearInterval(this.keepAliveHeartbeatIntervalId);\n            this.keepAliveHeartbeatIntervalId = undefined;\n        }\n        this.connectionStateMonitor.record(CONNECTION_CHANGE.CLOSED);\n    }\n    _timeoutStartSubscriptionAck(subscriptionId) {\n        const subscriptionObserver = this.subscriptionObserverMap.get(subscriptionId);\n        if (subscriptionObserver) {\n            const { observer, query, variables } = subscriptionObserver;\n            if (!observer) {\n                return;\n            }\n            this.subscriptionObserverMap.set(subscriptionId, {\n                observer,\n                query,\n                variables,\n                subscriptionState: SUBSCRIPTION_STATUS.FAILED,\n            });\n            this._closeSocket();\n            this.logger.debug('timeoutStartSubscription', JSON.stringify({ query, variables }));\n        }\n    }\n    _initializeWebSocketConnection({ appSyncGraphqlEndpoint, authenticationType, apiKey, region, additionalCustomHeaders, }) {\n        if (this.socketStatus === SOCKET_STATUS.READY) {\n            return;\n        }\n        // TODO(Eslint): refactor to now use async function as the promise executor\n        // eslint-disable-next-line no-async-promise-executor\n        return new Promise(async (resolve, reject) => {\n            this.promiseArray.push({ res: resolve, rej: reject });\n            if (this.socketStatus === SOCKET_STATUS.CLOSED) {\n                try {\n                    this.socketStatus = SOCKET_STATUS.CONNECTING;\n                    // Empty payload on connect\n                    const payloadString = '{}';\n                    const authHeader = await awsRealTimeHeaderBasedAuth({\n                        authenticationType,\n                        payload: payloadString,\n                        canonicalUri: this.wsConnectUri,\n                        apiKey,\n                        appSyncGraphqlEndpoint,\n                        region,\n                        additionalCustomHeaders,\n                    });\n                    const headerString = authHeader ? JSON.stringify(authHeader) : '';\n                    // base64url-encoded string\n                    const encodedHeader = base64Encoder.convert(headerString, {\n                        urlSafe: true,\n                        skipPadding: true,\n                    });\n                    const authTokenSubprotocol = `header-${encodedHeader}`;\n                    const queryParams = queryParamsFromCustomHeaders(additionalCustomHeaders);\n                    const awsRealTimeUrl = realtimeUrlWithQueryString(appSyncGraphqlEndpoint, queryParams);\n                    await this._establishRetryableConnection(awsRealTimeUrl, authTokenSubprotocol);\n                    this.promiseArray.forEach(({ res }) => {\n                        this.logger.debug('Notifying connection successful');\n                        res();\n                    });\n                    this.socketStatus = SOCKET_STATUS.READY;\n                    this.promiseArray = [];\n                }\n                catch (err) {\n                    this.logger.debug('Connection exited with', err);\n                    this.promiseArray.forEach(({ rej }) => {\n                        rej(err);\n                    });\n                    this.promiseArray = [];\n                    if (this.awsRealTimeSocket &&\n                        this.awsRealTimeSocket.readyState === WebSocket.OPEN) {\n                        this.awsRealTimeSocket.close(3001);\n                    }\n                    this.awsRealTimeSocket = undefined;\n                    this.socketStatus = SOCKET_STATUS.CLOSED;\n                }\n            }\n        });\n    }\n    async _establishRetryableConnection(awsRealTimeUrl, subprotocol) {\n        this.logger.debug(`Establishing retryable connection`);\n        await jitteredExponentialRetry(this._establishConnection.bind(this), [awsRealTimeUrl, subprotocol], MAX_DELAY_MS);\n    }\n    async _openConnection(awsRealTimeUrl, subprotocol) {\n        return new Promise((resolve, reject) => {\n            const newSocket = this._getNewWebSocket(awsRealTimeUrl, [\n                this.wsProtocolName,\n                subprotocol,\n            ]);\n            newSocket.onerror = () => {\n                this.logger.debug(`WebSocket connection error`);\n            };\n            newSocket.onclose = () => {\n                this._closeSocket();\n                reject(new Error('Connection handshake error'));\n            };\n            newSocket.onopen = () => {\n                this.awsRealTimeSocket = newSocket;\n                resolve();\n            };\n        });\n    }\n    _getNewWebSocket(url, protocol) {\n        return new WebSocket(url, protocol);\n    }\n    async _initiateHandshake() {\n        return new Promise((resolve, reject) => {\n            if (!this.awsRealTimeSocket) {\n                reject(new Error('awsRealTimeSocket undefined'));\n                return;\n            }\n            let ackOk = false;\n            this.awsRealTimeSocket.onerror = error => {\n                this.logger.debug(`WebSocket error ${JSON.stringify(error)}`);\n            };\n            this.awsRealTimeSocket.onclose = event => {\n                this.logger.debug(`WebSocket closed ${event.reason}`);\n                this._closeSocket();\n                reject(new Error(JSON.stringify(event)));\n            };\n            this.awsRealTimeSocket.onmessage = (message) => {\n                if (typeof message.data !== 'string') {\n                    return;\n                }\n                this.logger.debug(`subscription message from AWS AppSyncRealTime: ${message.data} `);\n                const data = JSON.parse(message.data);\n                const { type } = data;\n                const connectionTimeoutMs = this._extractConnectionTimeout(data);\n                if (type === MESSAGE_TYPES.GQL_CONNECTION_ACK) {\n                    ackOk = true;\n                    this._registerWebsocketHandlers(connectionTimeoutMs);\n                    resolve('Connected to AWS AppSyncRealTime');\n                    return;\n                }\n                if (type === MESSAGE_TYPES.GQL_CONNECTION_ERROR) {\n                    const { errorType, errorCode } = this._extractErrorCodeAndType(data);\n                    // TODO(Eslint): refactor to reject an Error object instead of a plain object\n                    // eslint-disable-next-line prefer-promise-reject-errors\n                    reject({ errorType, errorCode });\n                }\n            };\n            const gqlInit = {\n                type: MESSAGE_TYPES.GQL_CONNECTION_INIT,\n            };\n            this.awsRealTimeSocket.send(JSON.stringify(gqlInit));\n            const checkAckOk = (targetAckOk) => {\n                if (!targetAckOk) {\n                    this.connectionStateMonitor.record(CONNECTION_CHANGE.CONNECTION_FAILED);\n                    reject(new Error(`Connection timeout: ack from AWSAppSyncRealTime was not received after ${CONNECTION_INIT_TIMEOUT} ms`));\n                }\n            };\n            setTimeout(() => {\n                checkAckOk(ackOk);\n            }, CONNECTION_INIT_TIMEOUT);\n        });\n    }\n    _registerWebsocketHandlers(connectionTimeoutMs) {\n        if (!this.awsRealTimeSocket) {\n            return;\n        }\n        // Set up a keep alive heartbeat for this connection\n        this.keepAliveHeartbeatIntervalId = setInterval(() => {\n            this.keepAliveHeartbeat(connectionTimeoutMs);\n        }, DEFAULT_KEEP_ALIVE_HEARTBEAT_TIMEOUT);\n        this.awsRealTimeSocket.onmessage =\n            this._handleIncomingSubscriptionMessage.bind(this);\n        this.awsRealTimeSocket.onerror = err => {\n            this.logger.debug(err);\n            this._errorDisconnect(CONTROL_MSG.CONNECTION_CLOSED);\n        };\n        this.awsRealTimeSocket.onclose = event => {\n            this.logger.debug(`WebSocket closed ${event.reason}`);\n            this._closeSocket();\n            this._errorDisconnect(CONTROL_MSG.CONNECTION_CLOSED);\n        };\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { USER_AGENT_HEADER, getAmplifyUserAgent, } from '@aws-amplify/core/internals/utils';\nimport { DEFAULT_KEEP_ALIVE_TIMEOUT, MESSAGE_TYPES } from '../constants';\nimport { AWSWebSocketProvider } from '../AWSWebSocketProvider';\nimport { awsRealTimeHeaderBasedAuth } from '../AWSWebSocketProvider/authHeaders';\nconst PROVIDER_NAME = 'AWSAppSyncRealTimeProvider';\nconst WS_PROTOCOL_NAME = 'graphql-ws';\nconst CONNECT_URI = '/connect';\nexport class AWSAppSyncRealTimeProvider extends AWSWebSocketProvider {\n    constructor() {\n        super({\n            providerName: PROVIDER_NAME,\n            wsProtocolName: WS_PROTOCOL_NAME,\n            connectUri: CONNECT_URI,\n        });\n    }\n    getProviderName() {\n        return PROVIDER_NAME;\n    }\n    subscribe(options, customUserAgentDetails) {\n        return super.subscribe(options, customUserAgentDetails);\n    }\n    async _prepareSubscriptionPayload({ options, subscriptionId, customUserAgentDetails, additionalCustomHeaders, libraryConfigHeaders, }) {\n        const { appSyncGraphqlEndpoint, authenticationType, query, variables, apiKey, region, } = options;\n        const data = {\n            query,\n            variables,\n        };\n        const serializedData = JSON.stringify(data);\n        const headers = {\n            ...(await awsRealTimeHeaderBasedAuth({\n                apiKey,\n                appSyncGraphqlEndpoint,\n                authenticationType,\n                payload: serializedData,\n                canonicalUri: '',\n                region,\n                additionalCustomHeaders,\n            })),\n            ...libraryConfigHeaders,\n            ...additionalCustomHeaders,\n            [USER_AGENT_HEADER]: getAmplifyUserAgent(customUserAgentDetails),\n        };\n        const subscriptionMessage = {\n            id: subscriptionId,\n            payload: {\n                data: serializedData,\n                extensions: {\n                    authorization: {\n                        ...headers,\n                    },\n                },\n            },\n            type: MESSAGE_TYPES.GQL_START,\n        };\n        const serializedSubscriptionMessage = JSON.stringify(subscriptionMessage);\n        return serializedSubscriptionMessage;\n    }\n    _handleSubscriptionData(message) {\n        this.logger.debug(`subscription message from AWS AppSync RealTime: ${message.data}`);\n        const { id = '', payload, type } = JSON.parse(String(message.data));\n        const { observer = null, query = '', variables = {}, } = this.subscriptionObserverMap.get(id) || {};\n        this.logger.debug({ id, observer, query, variables });\n        if (type === MESSAGE_TYPES.DATA && payload && payload.data) {\n            if (observer) {\n                observer.next(payload);\n            }\n            else {\n                this.logger.debug(`observer not found for id: ${id}`);\n            }\n            return [true, { id, type, payload }];\n        }\n        return [false, { id, type, payload }];\n    }\n    _unsubscribeMessage(subscriptionId) {\n        return {\n            id: subscriptionId,\n            type: MESSAGE_TYPES.GQL_STOP,\n        };\n    }\n    _extractConnectionTimeout(data) {\n        const { payload: { connectionTimeoutMs = DEFAULT_KEEP_ALIVE_TIMEOUT } = {}, } = data;\n        return connectionTimeoutMs;\n    }\n    _extractErrorCodeAndType(data) {\n        const { payload: { errors: [{ errorType = '', errorCode = 0 } = {}] = [] } = {}, } = data;\n        return { errorCode, errorType };\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AmplifyError, } from '@aws-amplify/core/internals/utils';\n/**\n * @internal\n */\nexport class GraphQLApiError extends AmplifyError {\n    constructor(params) {\n        super(params);\n        // Hack for making the custom error class work when transpiled to es5\n        // TODO: Delete the following 2 lines after we change the build target to >= es2015\n        this.constructor = GraphQLApiError;\n        Object.setPrototypeOf(this, GraphQLApiError.prototype);\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport var APIValidationErrorCode;\n(function (APIValidationErrorCode) {\n    APIValidationErrorCode[\"NoAuthSession\"] = \"NoAuthSession\";\n    APIValidationErrorCode[\"NoRegion\"] = \"NoRegion\";\n    APIValidationErrorCode[\"NoCustomEndpoint\"] = \"NoCustomEndpoint\";\n})(APIValidationErrorCode || (APIValidationErrorCode = {}));\nexport const validationErrorMap = {\n    [APIValidationErrorCode.NoAuthSession]: {\n        message: 'Auth session should not be empty.',\n    },\n    // TODO: re-enable when working in all test environments:\n    // [APIValidationErrorCode.NoEndpoint]: {\n    // \tmessage: 'Missing endpoint',\n    // },\n    [APIValidationErrorCode.NoRegion]: {\n        message: 'Missing region.',\n    },\n    [APIValidationErrorCode.NoCustomEndpoint]: {\n        message: 'Custom endpoint region is present without custom endpoint.',\n    },\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { GraphQLApiError } from './GraphQLApiError';\nimport { validationErrorMap } from './validation';\n/**\n * @internal\n */\nexport function assertValidationError(assertion, name) {\n    const { message, recoverySuggestion } = validationErrorMap[name];\n    if (!assertion) {\n        throw new GraphQLApiError({ name, message, recoverySuggestion });\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { ConsoleLogger } from '@aws-amplify/core';\nimport { APIValidationErrorCode, assertValidationError } from './errors';\nconst logger = new ConsoleLogger('GraphQLAPI resolveConfig');\n/**\n * @internal\n */\nexport const resolveConfig = (amplify) => {\n    const config = amplify.getConfig();\n    if (!config.API?.GraphQL) {\n        logger.warn('The API configuration is missing. This is likely due to Amplify.configure() not being called prior to generateClient().');\n    }\n    const { apiKey, customEndpoint, customEndpointRegion, defaultAuthMode, endpoint, region, } = config.API?.GraphQL ?? {};\n    // TODO: re-enable when working in all test environments:\n    // assertValidationError(!!endpoint, APIValidationErrorCode.NoEndpoint);\n    assertValidationError(!(!customEndpoint && customEndpointRegion), APIValidationErrorCode.NoCustomEndpoint);\n    return {\n        apiKey,\n        customEndpoint,\n        customEndpointRegion,\n        defaultAuthMode,\n        endpoint,\n        region,\n    };\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nexport const resolveLibraryOptions = (amplify) => {\n    const headers = amplify.libraryOptions?.API?.GraphQL?.headers;\n    const withCredentials = amplify.libraryOptions?.API?.GraphQL?.withCredentials;\n    return { headers, withCredentials };\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Checks to see if the given response or subscription message contains an\n * Unauthorized error. If it does, it changes the error message to include instructions\n * for the app developer.\n */\nexport function repackageUnauthorizedError(content) {\n    if (content.errors && Array.isArray(content.errors)) {\n        content.errors.forEach(e => {\n            if (isUnauthorizedError(e)) {\n                e.message = 'Unauthorized';\n                e.recoverySuggestion =\n                    `If you're calling an Amplify-generated API, make sure ` +\n                        `to set the \"authMode\" in generateClient({ authMode: '...' }) to the backend authorization ` +\n                        `rule's auth provider ('apiKey', 'userPool', 'iam', 'oidc', 'lambda')`;\n            }\n        });\n    }\n    return content;\n}\nfunction isUnauthorizedError(error) {\n    // Error pattern corresponding to appsync calls\n    if (error?.originalError?.name?.startsWith('UnauthorizedException')) {\n        return true;\n    }\n    // Error pattern corresponding to appsync subscriptions\n    if (error.message?.startsWith('Connection failed:') &&\n        error.message?.includes('Permission denied')) {\n        return true;\n    }\n    return false;\n}\n", "export { CONTROL_MSG, ConnectionState } from './PubSub';\nexport var GraphQLAuthError;\n(function (GraphQLAuthError) {\n    GraphQLAuthError[\"NO_API_KEY\"] = \"No api-key configured\";\n    GraphQLAuthError[\"NO_CURRENT_USER\"] = \"No current user\";\n    GraphQLAuthError[\"NO_CREDENTIALS\"] = \"No credentials\";\n    GraphQLAuthError[\"NO_FEDERATED_JWT\"] = \"No federated jwt\";\n    GraphQLAuthError[\"NO_AUTH_TOKEN\"] = \"No auth token specified\";\n})(GraphQLAuthError || (GraphQLAuthError = {}));\nexport const __amplify = Symbol('amplify');\nexport const __authMode = Symbol('authMode');\nexport const __authToken = Symbol('authToken');\nexport const __apiKey = Symbol('apiKey');\nexport const __headers = Symbol('headers');\nexport const __endpoint = Symbol('endpoint');\nexport function getInternals(client) {\n    const c = client;\n    return {\n        amplify: c[__amplify],\n        apiKey: c[__apiKey],\n        authMode: c[__authMode],\n        authToken: c[__authToken],\n        endpoint: c[__endpoint],\n        headers: c[__headers],\n    };\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { GraphQLAuthError } from '../../types';\nexport const NO_API_KEY = {\n    name: 'NoApiKey',\n    // ideal: No API key configured.\n    message: GraphQLAuthError.NO_API_KEY,\n    recoverySuggestion: 'The API request was made with `authMode: \"apiKey\"` but no API Key was passed into `Amplify.configure()`. Review if your API key is passed into the `Amplify.configure()` function.',\n};\nexport const NO_VALID_CREDENTIALS = {\n    name: 'NoCredentials',\n    // ideal: No auth credentials available.\n    message: GraphQLAuthError.NO_CREDENTIALS,\n    recoverySuggestion: `The API request was made with \\`authMode: \"iam\"\\` but no authentication credentials are available.\n\nIf you intended to make a request using an authenticated role, review if your user is signed in before making the request.\n\nIf you intend to make a request using an unauthenticated role or also known as \"guest access\", verify if \"Auth.Cognito.allowGuestAccess\" is set to \"true\" in the \\`Amplify.configure()\\` function.`,\n};\nexport const NO_VALID_AUTH_TOKEN = {\n    name: 'NoValidAuthTokens',\n    // ideal: No valid JWT auth token provided to make the API request..\n    message: GraphQLAuthError.NO_FEDERATED_JWT,\n    recoverySuggestion: 'If you intended to make an authenticated API request, review if the current user is signed in.',\n};\nexport const NO_SIGNED_IN_USER = {\n    name: 'NoSignedUser',\n    // ideal: Couldn't retrieve authentication credentials to make the API request.\n    message: GraphQLAuthError.NO_CURRENT_USER,\n    recoverySuggestion: 'Review the underlying exception field for more details. If you intended to make an authenticated API request, review if the current user is signed in.',\n};\nexport const NO_AUTH_TOKEN_HEADER = {\n    name: 'NoAuthorizationHeader',\n    // ideal: Authorization header not specified.\n    message: GraphQLAuthError.NO_AUTH_TOKEN,\n    recoverySuggestion: 'The API request was made with `authMode: \"lambda\"` but no `authToken` is set. Review if a valid authToken is passed into the request options or in the `Amplify.configure()` function.',\n};\nexport const NO_ENDPOINT = {\n    name: 'NoEndpoint',\n    message: 'No GraphQL endpoint configured in `Amplify.configure()`.',\n    recoverySuggestion: 'Review if the GraphQL API endpoint is set in the `Amplify.configure()` function.',\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { GraphQLError } from 'graphql';\nexport const createGraphQLResultWithError = (error) => {\n    return {\n        data: {},\n        errors: [new GraphQLError(error.message, null, null, null, null, error)],\n    };\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport function isGraphQLResponseWithErrors(response) {\n    if (!response) {\n        return false;\n    }\n    const r = response;\n    return Array.isArray(r.errors) && r.errors.length > 0;\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { GraphQLApiError } from '../utils/errors';\nimport { NO_API_KEY, NO_AUTH_TOKEN_HEADER, NO_SIGNED_IN_USER, NO_VALID_AUTH_TOKEN, NO_VALID_CREDENTIALS, } from '../utils/errors/constants';\nexport async function headerBasedAuth(amplify, authMode, apiKey, additionalHeaders = {}) {\n    let headers = {};\n    switch (authMode) {\n        case 'apiKey':\n            if (!apiKey) {\n                throw new GraphQLApiError(NO_API_KEY);\n            }\n            headers = {\n                'X-Api-Key': apiKey,\n            };\n            break;\n        case 'iam': {\n            const session = await amplify.Auth.fetchAuthSession();\n            if (session.credentials === undefined) {\n                throw new GraphQLApiError(NO_VALID_CREDENTIALS);\n            }\n            break;\n        }\n        case 'oidc':\n        case 'userPool': {\n            let token;\n            try {\n                token = (await amplify.Auth.fetchAuthSession()).tokens?.accessToken.toString();\n            }\n            catch (e) {\n                // fetchAuthSession failed\n                throw new GraphQLApiError({\n                    ...NO_SIGNED_IN_USER,\n                    underlyingError: e,\n                });\n            }\n            // `fetchAuthSession()` succeeded but didn't return `tokens`.\n            // This may happen when unauthenticated access is enabled and there is\n            // no user signed in.\n            if (!token) {\n                throw new GraphQLApiError(NO_VALID_AUTH_TOKEN);\n            }\n            headers = {\n                Authorization: token,\n            };\n            break;\n        }\n        case 'lambda':\n            if (typeof additionalHeaders === 'object' &&\n                !additionalHeaders.Authorization) {\n                throw new GraphQLApiError(NO_AUTH_TOKEN_HEADER);\n            }\n            headers = {\n                Authorization: additionalHeaders.Authorization,\n            };\n            break;\n        case 'none':\n            break;\n        default:\n            break;\n    }\n    return headers;\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { parse, print, } from 'graphql';\nimport { catchError } from 'rxjs';\nimport { AmplifyUrl, getAmplifyUserAgent, } from '@aws-amplify/core/internals/utils';\nimport { isCancelError as isCancelErrorREST } from '@aws-amplify/api-rest';\nimport { cancel as cancelREST, post, updateRequestToBeCancellable, } from '@aws-amplify/api-rest/internals';\nimport { AWSAppSyncRealTimeProvider } from '../Providers/AWSAppSyncRealTimeProvider';\nimport { resolveConfig, resolveLibraryOptions } from '../utils';\nimport { repackageUnauthorizedError } from '../utils/errors/repackageAuthError';\nimport { NO_ENDPOINT } from '../utils/errors/constants';\nimport { GraphQLApiError, createGraphQLResultWithError } from '../utils/errors';\nimport { isGraphQLResponseWithErrors } from './utils/runtimeTypeGuards/isGraphQLResponseWithErrors';\nimport { headerBasedAuth } from './graphqlAuth';\nconst USER_AGENT_HEADER = 'x-amz-user-agent';\nconst isAmplifyInstance = (amplify) => {\n    return typeof amplify !== 'function';\n};\n/**\n * Export Cloud Logic APIs\n */\nexport class InternalGraphQLAPIClass {\n    constructor() {\n        /**\n         * @private\n         */\n        this.appSyncRealTime = new Map();\n        this._api = {\n            post,\n            cancelREST,\n            isCancelErrorREST,\n            updateRequestToBeCancellable,\n        };\n    }\n    getModuleName() {\n        return 'InternalGraphQLAPI';\n    }\n    /**\n     * to get the operation type\n     * @param operation\n     */\n    getGraphqlOperationType(operation) {\n        const doc = parse(operation);\n        const definitions = doc.definitions;\n        const [{ operation: operationType }] = definitions;\n        return operationType;\n    }\n    /**\n     * Executes a GraphQL operation\n     *\n     * @param options - GraphQL Options\n     * @param [additionalHeaders] - headers to merge in after any `libraryConfigHeaders` set in the config\n     * @returns An Observable if the query is a subscription query, else a promise of the graphql result.\n     */\n    graphql(amplify, { query: paramQuery, variables = {}, authMode, authToken, endpoint, apiKey, }, additionalHeaders, customUserAgentDetails) {\n        const query = typeof paramQuery === 'string'\n            ? parse(paramQuery)\n            : parse(print(paramQuery));\n        const [operationDef = {}] = query.definitions.filter(def => def.kind === 'OperationDefinition');\n        const { operation: operationType } = operationDef;\n        const headers = additionalHeaders || {};\n        switch (operationType) {\n            case 'query':\n            case 'mutation': {\n                const abortController = new AbortController();\n                let responsePromise;\n                if (isAmplifyInstance(amplify)) {\n                    responsePromise = this._graphql(amplify, { query, variables, authMode, apiKey, endpoint }, headers, abortController, customUserAgentDetails, authToken);\n                }\n                else {\n                    // NOTE: this wrapper function must be await-able so the Amplify server context manager can\n                    // destroy the context only after it completes\n                    const wrapper = async (amplifyInstance) => {\n                        const result = await this._graphql(amplifyInstance, { query, variables, authMode, apiKey, endpoint }, headers, abortController, customUserAgentDetails, authToken);\n                        return result;\n                    };\n                    responsePromise = amplify(wrapper);\n                }\n                this._api.updateRequestToBeCancellable(responsePromise, abortController);\n                return responsePromise;\n            }\n            case 'subscription':\n                return this._graphqlSubscribe(amplify, { query, variables, authMode, apiKey, endpoint }, headers, customUserAgentDetails, authToken);\n            default:\n                throw new Error(`invalid operation type: ${operationType}`);\n        }\n    }\n    async _graphql(amplify, { query, variables, authMode: authModeOverride, endpoint: endpointOverride, apiKey: apiKeyOverride, }, additionalHeaders = {}, abortController, customUserAgentDetails, authToken) {\n        const { apiKey, region, endpoint: appSyncGraphqlEndpoint, customEndpoint, customEndpointRegion, defaultAuthMode, } = resolveConfig(amplify);\n        const initialAuthMode = authModeOverride || defaultAuthMode || 'iam';\n        // identityPool is an alias for iam. TODO: remove 'iam' in v7\n        const authMode = initialAuthMode === 'identityPool' ? 'iam' : initialAuthMode;\n        /**\n         * Retrieve library options from Amplify configuration.\n         * `customHeaders` here are from the Amplify configuration options,\n         * and are for non-AppSync endpoints only. These are *not* the same as\n         * `additionalHeaders`, which are custom headers that are either 1)\n         * included when configuring the API client or 2) passed along with\n         * individual requests.\n         */\n        const { headers: customHeaders, withCredentials } = resolveLibraryOptions(amplify);\n        /**\n         * Client or request-specific custom headers that may or may not be\n         * returned by a function:\n         */\n        let additionalCustomHeaders;\n        if (typeof additionalHeaders === 'function') {\n            const requestOptions = {\n                method: 'POST',\n                url: new AmplifyUrl(endpointOverride || customEndpoint || appSyncGraphqlEndpoint || '').toString(),\n                queryString: print(query),\n            };\n            additionalCustomHeaders = await additionalHeaders(requestOptions);\n        }\n        else {\n            additionalCustomHeaders = additionalHeaders;\n        }\n        // if an authorization header is set, have the explicit authToken take precedence\n        if (authToken) {\n            additionalCustomHeaders = {\n                ...additionalCustomHeaders,\n                Authorization: authToken,\n            };\n        }\n        const authHeaders = await headerBasedAuth(amplify, authMode, apiKeyOverride ?? apiKey, additionalCustomHeaders);\n        const headers = {\n            ...(!customEndpoint && authHeaders),\n            /**\n             * Custom endpoint headers.\n             * If there is both a custom endpoint and custom region present, we get the headers.\n             * If there is a custom endpoint but no region, we return an empty object.\n             * If neither are present, we return an empty object.\n             */\n            ...((customEndpoint && (customEndpointRegion ? authHeaders : {})) || {}),\n            // Custom headers included in Amplify configuration options:\n            ...(customHeaders &&\n                (await customHeaders({\n                    query: print(query),\n                    variables,\n                }))),\n            // Custom headers from individual requests or API client configuration:\n            ...additionalCustomHeaders,\n            // User agent headers:\n            ...(!customEndpoint && {\n                [USER_AGENT_HEADER]: getAmplifyUserAgent(customUserAgentDetails),\n            }),\n        };\n        const body = {\n            query: print(query),\n            variables: variables || null,\n        };\n        let signingServiceInfo;\n        /**\n         * We do not send the signing service info to the REST API under the\n         * following conditions (i.e. it will not sign the request):\n         *   - there is a custom endpoint but no region\n         *   - the auth mode is `none`, or `apiKey`\n         *   - the auth mode is a type other than the types listed below\n         */\n        if ((customEndpoint && !customEndpointRegion) ||\n            (authMode !== 'oidc' &&\n                authMode !== 'userPool' &&\n                authMode !== 'iam' &&\n                authMode !== 'lambda')) {\n            signingServiceInfo = undefined;\n        }\n        else {\n            signingServiceInfo = {\n                service: !customEndpointRegion ? 'appsync' : 'execute-api',\n                region: !customEndpointRegion ? region : customEndpointRegion,\n            };\n        }\n        const endpoint = endpointOverride || customEndpoint || appSyncGraphqlEndpoint;\n        if (!endpoint) {\n            throw createGraphQLResultWithError(new GraphQLApiError(NO_ENDPOINT));\n        }\n        let response;\n        try {\n            // \t// // See the inline doc of the REST `post()` API for possible errors to be thrown.\n            // \t// // As these errors are catastrophic they should be caught and handled by GraphQL\n            // \t// // API consumers.\n            const { body: responseBody } = await this._api.post(amplify, {\n                url: new AmplifyUrl(endpoint),\n                options: {\n                    headers,\n                    body,\n                    signingServiceInfo,\n                    withCredentials,\n                },\n                abortController,\n            });\n            response = await responseBody.json();\n        }\n        catch (error) {\n            if (this.isCancelError(error)) {\n                throw error;\n            }\n            response = createGraphQLResultWithError(error);\n        }\n        if (isGraphQLResponseWithErrors(response)) {\n            throw repackageUnauthorizedError(response);\n        }\n        return response;\n    }\n    /**\n     * Checks to see if an error thrown is from an api request cancellation\n     * @param {any} error - Any error\n     * @return {boolean} - A boolean indicating if the error was from an api request cancellation\n     */\n    isCancelError(error) {\n        return this._api.isCancelErrorREST(error);\n    }\n    /**\n     * Cancels an inflight request. Only applicable for graphql queries and mutations\n     * @param {any} request - request to cancel\n     * @returns - A boolean indicating if the request was cancelled\n     */\n    cancel(request, message) {\n        return this._api.cancelREST(request, message);\n    }\n    _graphqlSubscribe(amplify, { query, variables, authMode: authModeOverride, apiKey: apiKeyOverride, endpoint, }, additionalHeaders = {}, customUserAgentDetails, authToken) {\n        const config = resolveConfig(amplify);\n        const initialAuthMode = authModeOverride || config?.defaultAuthMode || 'iam';\n        // identityPool is an alias for iam. TODO: remove 'iam' in v7\n        const authMode = initialAuthMode === 'identityPool' ? 'iam' : initialAuthMode;\n        /**\n         * Retrieve library options from Amplify configuration.\n         * `libraryConfigHeaders` are from the Amplify configuration options,\n         * and will not be overwritten by other custom headers. These are *not*\n         * the same as `additionalHeaders`, which are custom headers that are\n         * either 1)included when configuring the API client or 2) passed along\n         * with individual requests.\n         */\n        const { headers: libraryConfigHeaders } = resolveLibraryOptions(amplify);\n        const appSyncGraphqlEndpoint = endpoint ?? config?.endpoint;\n        // TODO: This could probably be an exception. But, lots of tests rely on\n        // attempting to connect to nowhere. So, I'm treating as the opposite of\n        // a Chesterton's fence for now. (A fence I shouldn't build, because I don't\n        // know why somethings depends on its absence!)\n        const memoKey = appSyncGraphqlEndpoint ?? 'none';\n        const realtimeProvider = this.appSyncRealTime.get(memoKey) ?? new AWSAppSyncRealTimeProvider();\n        this.appSyncRealTime.set(memoKey, realtimeProvider);\n        return realtimeProvider\n            .subscribe({\n            query: print(query),\n            variables,\n            appSyncGraphqlEndpoint,\n            region: config?.region,\n            authenticationType: authMode,\n            apiKey: apiKeyOverride ?? config?.apiKey,\n            additionalHeaders,\n            authToken,\n            libraryConfigHeaders,\n        }, customUserAgentDetails)\n            .pipe(catchError(e => {\n            if (e.errors) {\n                throw repackageUnauthorizedError(e);\n            }\n            throw e;\n        }));\n    }\n}\nexport const InternalGraphQLAPI = new InternalGraphQLAPIClass();\n", "export const __modelMeta__ = Symbol();\n", "/**\n * Given an introspection schema model, returns all owner fields.\n *\n * @param model Model from an introspection schema\n * @returns List of owner field names\n */\nexport function resolveOwnerFields(model) {\n    const ownerFields = new Set();\n    for (const attr of model.attributes || []) {\n        if (isAuthAttribute(attr)) {\n            for (const rule of attr.properties.rules) {\n                if (rule.allow === 'owner') {\n                    ownerFields.add(rule.ownerField || 'owner');\n                }\n                else if (rule.allow === 'groups' && rule.groupsField !== undefined) {\n                    // only valid for dynamic group(s)\n                    // static group auth will have an array of predefined groups in the attribute, groups: string[]\n                    // but `groupsField` will be undefined\n                    ownerFields.add(rule.groupsField);\n                }\n            }\n        }\n    }\n    return Array.from(ownerFields);\n}\n/**\n * Type guard that identifies an auth attribute with an attached rules list that\n * specifies an `allow` attribute at a minimum.\n *\n * @param attribute Any object. Ideally a model introspection schema model attribute\n * @returns True if given object is an auth attribute\n */\nfunction isAuthAttribute(attribute) {\n    if (attribute?.type === 'auth') {\n        if (typeof attribute?.properties === 'object') {\n            if (Array.isArray(attribute?.properties?.rules)) {\n                return (attribute?.properties?.rules).every((rule) => !!rule.allow);\n            }\n        }\n    }\n    return false;\n}\n", "/**\n * @param s string to capitalize\n * @returns capitalized string\n */\nexport function capitalize(s) {\n    return `${s[0].toUpperCase()}${s.slice(1)}`;\n}\n", "/**\n * Executes an `async` resolver function, providing the `Promise`-to-be-returned as the\n * first argument to the resolver so that the resolver can refer to the `Promise` that\n * external callers will see.\n *\n * ```ts\n * const outer = selfAwareAsync(async inner => {\n *  console.log(outer === inner); // true\n * });\n * ```\n *\n * This utility exists to reduce boilerplate in cases where promise resolving code needs\n * to track or register its \"own\" `Promise` *as seen by the caller* in some way. E.g.,\n * when mapping `Promise` chains for `client.cancel()`.\n *\n * @param resolver\n * @returns\n */\nexport function selfAwareAsync(resolver) {\n    let resolve;\n    let reject;\n    const resultPromise = new Promise((res, rej) => {\n        resolve = res;\n        reject = rej;\n    });\n    resolver(resultPromise)\n        .then((result) => {\n        resolve(result);\n    })\n        .catch((error) => {\n        reject(error);\n    });\n    return resultPromise;\n}\n", "/**\n * A map of cancellable promise \"extensions\".\n *\n * Each entry value must either be a directly `cancel()`-able promise, or must\n * refer to another entry.\n *\n * When cancellation of a promise is requested, cancel\n * will check to see if the promise exists in the map. If it does, it pulls\n * the value and repeats the check. If not, it will perform the underlying\n * cancel operation.\n */\nconst promiseMap = new WeakMap();\nexport function extendCancellability(existingCancellablePromise, newPromiseToRegister) {\n    promiseMap.set(newPromiseToRegister, existingCancellablePromise);\n    return existingCancellablePromise.finally(() => {\n        promiseMap.delete(newPromiseToRegister);\n    });\n}\n/**\n * Wraps the existing `cancel()` method with logic to iteratively search for\n * the corresponding base level promise, if needed, that the core graphql client\n * knows how to cancel.\n *\n * @param client\n */\nexport function upgradeClientCancellation(client) {\n    const innerCancel = client.cancel.bind(client);\n    client.cancel = function (promise, message) {\n        const visited = new Set();\n        let targetPromise = promise;\n        while (targetPromise && promiseMap.has(targetPromise)) {\n            if (visited.has(targetPromise))\n                throw new Error('A cycle was detected in the modeled graphql cancellation chain. This is a bug. Please report it!');\n            visited.add(targetPromise);\n            targetPromise = promiseMap.get(targetPromise);\n        }\n        // call `innerCancel` with `targetPromise!` to defer to existing implementation\n        // on how to handle `null | undefined` or otherwise \"non-cancellable\" objects.\n        return innerCancel(targetPromise, message);\n    };\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\nimport { resolveOwnerFields, capitalize, selfAwareAsync } from '../utils';\nimport { extendCancellability } from './cancellation';\nconst connectionType = {\n    HAS_ONE: 'HAS_ONE',\n    HAS_MANY: 'HAS_MANY',\n    BELONGS_TO: 'BELONGS_TO',\n};\n// When generating an SK's KeyConditionInput name, string-like types map to String\nconst skGraphQlFieldTypeMap = {\n    ID: 'ID',\n    String: 'String',\n    AWSDate: 'String',\n    AWSTime: 'String',\n    AWSDateTime: 'String',\n    AWSTimestamp: 'Int',\n    AWSEmail: 'String',\n    AWSPhone: 'String',\n    AWSURL: 'String',\n    AWSIPAddress: 'String',\n    AWSJSON: 'String',\n    Boolean: 'Boolean',\n    Int: 'Int',\n    Float: 'Float',\n};\n// move to util\nconst resolvedSkName = (sk) => {\n    if (sk.length === 1) {\n        return sk[0];\n    }\n    else {\n        return sk.reduce((acc, curr, idx) => {\n            if (idx === 0) {\n                return curr;\n            }\n            else {\n                return acc + capitalize(curr);\n            }\n        }, '');\n    }\n};\n/**\n * Crawls a model tree, starting with a given **individual** model instance record, looking\n * for related hasMany children to extract from their `items` containers.\n *\n * E.g., if we have a record like this:\n *\n * ```js\n * {\n *   id: 'some-id',\n *   children: {\n *     items: [\n *       { name: 'a' }\n *       { name: 'b' }\n *       { name: 'c' }\n *     ]\n *   }\n * }\n * ```\n *\n * And if `children` refers to *an array of another model* (as opposed to a custom type),\n * the `items` will be extracted. We do this because `items` is just the mechanism for nesting\n * child records -- we don't want customers to have to dig the items out in application code.\n * Ultimately, we return this \"flattened\" structure:\n *\n * ```js\n * {\n *   id: 'some-id',\n *   children: [\n *     { name: 'a' }\n *     { name: 'b' }\n *     { name: 'c' }\n *   ]\n * }\n * ```\n *\n * Notably, an identical record could be the result of a nested custom type that contains an\n * `items` property. This will *not* be flattened, because in that case the `items` property is\n * actually part of the customer's schema. Similarly if a model contains an explicit `items` field.\n *\n * @param modelIntrospection Top-level model introspection schema.\n * @param modelName The name of the model. Can be `undefined`. E.g., for customOperation return types.\n * @param modelRecord The individual \"model instance record\" to normalize.\n */\nexport const flattenItems = (modelIntrospection, modelName, modelRecord) => {\n    if (!modelRecord)\n        return null;\n    const mapped = {};\n    for (const [fieldName, value] of Object.entries(modelRecord)) {\n        const fieldDef = modelName\n            ? modelIntrospection.models[modelName]?.fields[fieldName]\n            : undefined;\n        const dvPair = { fieldDef, value };\n        if (isRelatedModelItemsArrayPair(dvPair)) {\n            mapped[fieldName] = dvPair.value.items.map((itemValue) => flattenItems(modelIntrospection, dvPair.fieldDef.type.model, itemValue));\n        }\n        else if (isRelatedModelProperty(fieldDef)) {\n            mapped[fieldName] = flattenItems(modelIntrospection, fieldDef.type.model, value);\n        }\n        else {\n            mapped[fieldName] = value;\n        }\n    }\n    return mapped;\n};\n/**\n * Determines whether the given field definition and associated result value\n * represent a related model array from a HasMany-type relationship.\n *\n * @param dv Pair of field definition and associated result value\n * @returns\n */\nfunction isRelatedModelItemsArrayPair(dv) {\n    return (typeof dv.fieldDef?.type === 'object' &&\n        'model' in dv.fieldDef.type &&\n        typeof dv.fieldDef.type.model === 'string' &&\n        dv.fieldDef.isArray &&\n        Array.isArray(dv.value?.items));\n}\n/**\n * Determines whether the given field definition represents a relationship\n * to another model.\n *\n * @param fieldDef\n * @returns\n */\nfunction isRelatedModelProperty(fieldDef) {\n    return (typeof fieldDef?.type === 'object' &&\n        'model' in fieldDef.type &&\n        typeof fieldDef.type.model === 'string');\n}\n// TODO: this should accept single result to support CRUD methods; create helper for array/list\nexport function initializeModel(client, modelName, result, modelIntrospection, authMode, authToken, context = false) {\n    const introModel = modelIntrospection.models[modelName];\n    const introModelFields = introModel.fields;\n    const modelFields = Object.entries(introModelFields)\n        .filter(([_, field]) => field?.type?.model !== undefined)\n        .map(([fieldName]) => fieldName);\n    return result.map((record) => {\n        if (record === null || record === undefined) {\n            return record;\n        }\n        const initializedRelationshipFields = {};\n        for (const fieldName of modelFields) {\n            const modelField = introModelFields[fieldName];\n            const modelFieldType = modelField?.type;\n            const relatedModelName = modelFieldType.model;\n            const relatedModel = modelIntrospection.models[relatedModelName];\n            const relatedModelPKFieldName = relatedModel.primaryKeyInfo.primaryKeyFieldName;\n            const relatedModelSKFieldNames = relatedModel.primaryKeyInfo.sortKeyFieldNames;\n            const relationType = modelField.association?.connectionType;\n            let connectionFields = [];\n            if (modelField.association &&\n                'associatedWith' in modelField.association) {\n                connectionFields = modelField.association.associatedWith;\n            }\n            const targetNames = [];\n            if (modelField.association && 'targetNames' in modelField.association) {\n                targetNames.push(...modelField.association.targetNames);\n            }\n            switch (relationType) {\n                case connectionType.BELONGS_TO: {\n                    const sortKeyValues = relatedModelSKFieldNames.reduce(\n                    // TODO(Eslint): is this implementation correct?\n                    // eslint-disable-next-line array-callback-return\n                    (acc, curVal) => {\n                        if (record[curVal]) {\n                            acc[curVal] = record[curVal];\n                        }\n                        return acc;\n                    }, {});\n                    // if get is disabled on the related model\n                    if (client.models[relatedModelName]?.get === undefined) {\n                        break;\n                    }\n                    if (context) {\n                        initializedRelationshipFields[fieldName] = (contextSpec, options) => {\n                            if (record[targetNames[0]]) {\n                                return client.models[relatedModelName].get(contextSpec, {\n                                    [relatedModelPKFieldName]: record[targetNames[0]],\n                                    ...sortKeyValues,\n                                }, {\n                                    authMode: options?.authMode || authMode,\n                                    authToken: options?.authToken || authToken,\n                                });\n                            }\n                            return { data: null };\n                        };\n                    }\n                    else {\n                        initializedRelationshipFields[fieldName] = (options) => {\n                            if (record[targetNames[0]]) {\n                                return client.models[relatedModelName].get({\n                                    [relatedModelPKFieldName]: record[targetNames[0]],\n                                    ...sortKeyValues,\n                                }, {\n                                    authMode: options?.authMode || authMode,\n                                    authToken: options?.authToken || authToken,\n                                });\n                            }\n                            return { data: null };\n                        };\n                    }\n                    break;\n                }\n                case connectionType.HAS_ONE:\n                case connectionType.HAS_MANY: {\n                    /**\n                     * If the loader is a HAS_ONE, we just need to attempt to grab the first item\n                     * from the result.\n                     */\n                    const mapResult = relationType === connectionType.HAS_ONE\n                        ? (result) => {\n                            return {\n                                data: result?.data.shift() || null,\n                                errors: result.errors,\n                                extensions: result.extensions,\n                            };\n                        }\n                        : (result) => result;\n                    const parentPk = introModel.primaryKeyInfo.primaryKeyFieldName;\n                    const parentSK = introModel.primaryKeyInfo.sortKeyFieldNames;\n                    // M:N check - TODO: refactor\n                    const relatedModelField = relatedModel.fields[connectionFields[0]];\n                    const relatedModelFieldType = relatedModelField.type;\n                    if (relatedModelFieldType.model) {\n                        let relatedTargetNames = [];\n                        if (relatedModelField.association &&\n                            'targetNames' in relatedModelField.association) {\n                            relatedTargetNames = relatedModelField.association?.targetNames;\n                        }\n                        const hasManyFilter = relatedTargetNames.map((field, idx) => {\n                            if (idx === 0) {\n                                return { [field]: { eq: record[parentPk] } };\n                            }\n                            return { [field]: { eq: record[parentSK[idx - 1]] } };\n                        });\n                        // if list is disabled on the related model\n                        if (client.models[relatedModelName]?.list === undefined) {\n                            break;\n                        }\n                        if (context) {\n                            initializedRelationshipFields[fieldName] = (contextSpec, options) => {\n                                if (record[parentPk]) {\n                                    return selfAwareAsync(async (resultPromise) => {\n                                        const basePromise = client.models[relatedModelName].list(contextSpec, {\n                                            filter: { and: hasManyFilter },\n                                            limit: options?.limit,\n                                            nextToken: options?.nextToken,\n                                            authMode: options?.authMode || authMode,\n                                            authToken: options?.authToken || authToken,\n                                        });\n                                        const extendedBase = extendCancellability(basePromise, resultPromise);\n                                        return mapResult((await extendedBase));\n                                    });\n                                }\n                                return [];\n                            };\n                        }\n                        else {\n                            initializedRelationshipFields[fieldName] = (options) => {\n                                if (record[parentPk]) {\n                                    return selfAwareAsync(async (resultPromise) => {\n                                        const basePromise = client.models[relatedModelName].list({\n                                            filter: { and: hasManyFilter },\n                                            limit: options?.limit,\n                                            nextToken: options?.nextToken,\n                                            authMode: options?.authMode || authMode,\n                                            authToken: options?.authToken || authToken,\n                                        });\n                                        const extendedBase = extendCancellability(basePromise, resultPromise);\n                                        return mapResult((await extendedBase));\n                                    });\n                                }\n                                return [];\n                            };\n                        }\n                        break;\n                    }\n                    const hasManyFilter = connectionFields.map((field, idx) => {\n                        if (idx === 0) {\n                            return { [field]: { eq: record[parentPk] } };\n                        }\n                        return { [field]: { eq: record[parentSK[idx - 1]] } };\n                    });\n                    // if list is disabled on the related model\n                    if (client.models[relatedModelName]?.list === undefined) {\n                        break;\n                    }\n                    if (context) {\n                        initializedRelationshipFields[fieldName] = (contextSpec, options) => {\n                            if (record[parentPk]) {\n                                return selfAwareAsync(async (resultPromise) => {\n                                    const basePromise = client.models[relatedModelName].list(contextSpec, {\n                                        filter: { and: hasManyFilter },\n                                        limit: options?.limit,\n                                        nextToken: options?.nextToken,\n                                        authMode: options?.authMode || authMode,\n                                        authToken: options?.authToken || authToken,\n                                    });\n                                    const extendedBase = extendCancellability(basePromise, resultPromise);\n                                    return mapResult((await extendedBase));\n                                });\n                            }\n                            return [];\n                        };\n                    }\n                    else {\n                        initializedRelationshipFields[fieldName] = (options) => {\n                            if (record[parentPk]) {\n                                return selfAwareAsync(async (resultPromise) => {\n                                    const basePromise = client.models[relatedModelName].list({\n                                        filter: { and: hasManyFilter },\n                                        limit: options?.limit,\n                                        nextToken: options?.nextToken,\n                                        authMode: options?.authMode || authMode,\n                                        authToken: options?.authToken || authToken,\n                                    });\n                                    const extendedBase = extendCancellability(basePromise, resultPromise);\n                                    return mapResult((await extendedBase));\n                                });\n                            }\n                            return [];\n                        };\n                    }\n                    break;\n                }\n                default:\n                    break;\n            }\n        }\n        return { ...record, ...initializedRelationshipFields };\n    });\n}\nexport const graphQLOperationsInfo = {\n    CREATE: { operationPrefix: 'create', usePlural: false },\n    GET: { operationPrefix: 'get', usePlural: false },\n    UPDATE: { operationPrefix: 'update', usePlural: false },\n    DELETE: { operationPrefix: 'delete', usePlural: false },\n    LIST: { operationPrefix: 'list', usePlural: true },\n    INDEX_QUERY: { operationPrefix: '', usePlural: false },\n    ONCREATE: { operationPrefix: 'onCreate', usePlural: false },\n    ONUPDATE: { operationPrefix: 'onUpdate', usePlural: false },\n    ONDELETE: { operationPrefix: 'onDelete', usePlural: false },\n    OBSERVEQUERY: { operationPrefix: 'observeQuery', usePlural: false },\n};\nconst SELECTION_SET_WILDCARD = '*';\nexport const getDefaultSelectionSetForNonModelWithIR = (nonModelDefinition, modelIntrospection) => {\n    const { fields } = nonModelDefinition;\n    const mappedFields = Object.values(fields)\n        .map(({ type, name }) => {\n        if (typeof type.enum === 'string') {\n            return [name, FIELD_IR];\n        }\n        if (typeof type.nonModel === 'string') {\n            return [\n                name,\n                getDefaultSelectionSetForNonModelWithIR(modelIntrospection.nonModels[type.nonModel], modelIntrospection),\n            ];\n        }\n        if (typeof type === 'string') {\n            return [name, FIELD_IR];\n        }\n        return undefined;\n    })\n        .filter((pair) => pair !== undefined);\n    return Object.fromEntries(mappedFields);\n};\nconst getDefaultSelectionSetForModelWithIR = (modelDefinition, modelIntrospection) => {\n    const { fields } = modelDefinition;\n    const mappedFields = Object.values(fields)\n        .map(({ type, name }) => {\n        if (typeof type.enum === 'string' ||\n            typeof type === 'string') {\n            return [name, FIELD_IR];\n        }\n        if (typeof type.nonModel === 'string') {\n            return [\n                name,\n                getDefaultSelectionSetForNonModelWithIR(modelIntrospection.nonModels[type.nonModel], modelIntrospection),\n            ];\n        }\n        return undefined;\n    })\n        .filter((pair) => pair !== undefined);\n    const ownerFields = resolveOwnerFields(modelDefinition).map((field) => [\n        field,\n        FIELD_IR,\n    ]);\n    return Object.fromEntries(mappedFields.concat(ownerFields));\n};\nfunction defaultSelectionSetForModel(modelDefinition) {\n    // fields that are explicitly part of the graphql schema; not\n    // inferred from owner auth rules.\n    const { fields } = modelDefinition;\n    const explicitFields = Object.values(fields)\n        // Default selection set omits model fields\n        .map(({ type, name }) => {\n        if (typeof type === 'string')\n            return name;\n        if (typeof type === 'object') {\n            if (typeof type?.enum === 'string') {\n                return name;\n            }\n            else if (typeof type?.nonModel === 'string') {\n                return `${name}.${SELECTION_SET_WILDCARD}`;\n            }\n        }\n        return undefined;\n    })\n        .filter(Boolean);\n    // fields used for owner auth rules that may or may not also\n    // be explicit on the model.\n    const ownerFields = resolveOwnerFields(modelDefinition);\n    return Array.from(new Set(explicitFields.concat(ownerFields)));\n}\nconst FIELD_IR = '';\n/**\n * Generates nested Custom Selection Set IR from path\n *\n * @param modelDefinitions\n * @param modelName\n * @param selectionSet - array of object paths\n * @example\n * ### Given\n * `selectionSet = ['id', 'comments.post.id']`\n * ### Returns\n * ```ts\n * {\n *   id: '',\n *   comments: {\n *     items: { post: { id: '' } }\n *   }\n * }\n * ```\n */\nexport function customSelectionSetToIR(modelIntrospection, modelName, selectionSet) {\n    const dotNotationToObject = (path, modelOrNonModelName) => {\n        const [fieldName, ...rest] = path.split('.');\n        const nested = rest[0];\n        const modelOrNonModelDefinition = modelIntrospection.models[modelOrNonModelName] ??\n            modelIntrospection.nonModels[modelOrNonModelName];\n        const modelOrNonModelFields = modelOrNonModelDefinition?.fields;\n        const relatedModel = modelOrNonModelFields?.[fieldName]?.type?.model;\n        const relatedModelDefinition = modelIntrospection.models[relatedModel];\n        const relatedNonModel = modelOrNonModelFields?.[fieldName]?.type?.nonModel;\n        const relatedNonModelDefinition = modelIntrospection.nonModels[relatedNonModel];\n        const isModelOrNonModelOrFieldType = relatedModelDefinition\n            ? 'model'\n            : relatedNonModelDefinition\n                ? 'nonModel'\n                : 'field';\n        if (isModelOrNonModelOrFieldType === 'nonModel') {\n            let result = {};\n            if (!nested) {\n                throw Error(`${fieldName} must declare a wildcard (*) or a field of custom type ${relatedNonModel}`);\n            }\n            if (nested === SELECTION_SET_WILDCARD) {\n                result = {\n                    [fieldName]: getDefaultSelectionSetForNonModelWithIR(relatedNonModelDefinition, modelIntrospection),\n                };\n            }\n            else {\n                result = {\n                    [fieldName]: dotNotationToObject(rest.join('.'), relatedNonModel),\n                };\n            }\n            return result;\n        }\n        else if (isModelOrNonModelOrFieldType === 'model') {\n            let result = {};\n            if (!nested) {\n                throw Error(`${fieldName} must declare a wildcard (*) or a field of model ${relatedModel}`);\n            }\n            if (nested === SELECTION_SET_WILDCARD) {\n                const nestedRelatedModelDefinition = modelIntrospection.models[relatedModel];\n                result = {\n                    [fieldName]: getDefaultSelectionSetForModelWithIR(nestedRelatedModelDefinition, modelIntrospection),\n                };\n            }\n            else {\n                result = {\n                    [fieldName]: dotNotationToObject(rest.join('.'), relatedModel),\n                };\n            }\n            if (modelOrNonModelFields[fieldName]?.isArray) {\n                result = {\n                    [fieldName]: {\n                        items: result[fieldName],\n                    },\n                };\n            }\n            return result;\n        }\n        else {\n            const modelField = modelOrNonModelFields?.[fieldName];\n            const nonModelDefinition = modelIntrospection.nonModels[modelOrNonModelName];\n            const nonModelField = nonModelDefinition?.fields?.[fieldName];\n            if (!nonModelDefinition) {\n                const isOwnerField = resolveOwnerFields(modelOrNonModelDefinition).includes(fieldName);\n                if (!modelField && !isOwnerField) {\n                    throw Error(`${fieldName} is not a field of model ${modelOrNonModelName}`);\n                }\n            }\n            else {\n                if (!nonModelField) {\n                    throw Error(`${fieldName} is not a field of custom type ${modelOrNonModelName}`);\n                }\n            }\n            return { [fieldName]: FIELD_IR };\n        }\n    };\n    return selectionSet.reduce((resultObj, path) => deepMergeSelectionSetObjects(dotNotationToObject(path, modelName), resultObj), {});\n}\n/**\n * Stringifies selection set IR\n * * @example\n * ### Given\n * ```ts\n * {\n *   id: '',\n *   comments: {\n *     items: { post: { id: '' } }\n *   }\n * }\n * ```\n * ### Returns\n * `'id comments { items { post { id } } }'`\n */\nexport function selectionSetIRToString(obj) {\n    const res = [];\n    Object.entries(obj).forEach(([fieldName, value]) => {\n        if (value === FIELD_IR) {\n            res.push(fieldName);\n        }\n        else if (typeof value === 'object' && value !== null) {\n            if (value?.items) {\n                res.push(fieldName, '{', 'items', '{', selectionSetIRToString(value.items), '}', '}');\n            }\n            else {\n                res.push(fieldName, '{', selectionSetIRToString(value), '}');\n            }\n        }\n    });\n    return res.join(' ');\n}\n/**\n * Recursively merges selection set objects from `source` onto `target`.\n *\n * `target` will be updated. `source` will be left alone.\n *\n * @param source The object to merge into target.\n * @param target The object to be mutated.\n */\nfunction deepMergeSelectionSetObjects(source, target) {\n    const isObject = (obj) => obj && typeof obj === 'object';\n    for (const key in source) {\n        // This verification avoids 'Prototype Pollution' issue\n        if (!Object.prototype.hasOwnProperty.call(source, key))\n            continue;\n        if (Object.prototype.hasOwnProperty.call(target, key) &&\n            isObject(target[key])) {\n            deepMergeSelectionSetObjects(source[key], target[key]);\n        }\n        else {\n            target[key] = source[key];\n        }\n    }\n    return target;\n}\nexport function generateSelectionSet(modelIntrospection, modelName, selectionSet) {\n    const modelDefinition = modelIntrospection.models[modelName];\n    const selSetIr = customSelectionSetToIR(modelIntrospection, modelName, selectionSet ?? defaultSelectionSetForModel(modelDefinition));\n    const selSetString = selectionSetIRToString(selSetIr);\n    return selSetString;\n}\nexport function generateGraphQLDocument(modelIntrospection, modelDefinition, modelOperation, listArgs, indexMeta) {\n    const { name, pluralName, fields, primaryKeyInfo: { isCustomPrimaryKey, primaryKeyFieldName, sortKeyFieldNames, }, attributes, } = modelDefinition;\n    // Use pascal case of the model name to generate the operations and the arguments.\n    // This is required to be in sync with the resources generated by the GraphQL transformers.\n    const namePascalCase = name.charAt(0).toUpperCase() + name.slice(1);\n    const pluralNamePascalCase = pluralName.charAt(0).toUpperCase() + pluralName.slice(1);\n    const { operationPrefix, usePlural } = graphQLOperationsInfo[modelOperation];\n    const { selectionSet } = listArgs || {};\n    let graphQLFieldName;\n    let indexQueryArgs;\n    if (operationPrefix) {\n        graphQLFieldName = `${operationPrefix}${usePlural ? pluralNamePascalCase : namePascalCase}`;\n    }\n    else if (indexMeta) {\n        const { queryField, pk, sk = [] } = indexMeta;\n        graphQLFieldName = queryField;\n        /**\n         * **a. Single field SK** -> single arg where name is the field name and the type is `Model${gqlFieldType}KeyConditionInput` (nullable)\n         *  Note: string-like data types e.g.,  AWSDateTime, AWSEmail, AWSPhone, etc. should map to String. See `skGraphQlFieldTypeMap` above\n         * @example\n         * ```\n         * sk1: ModelStringKeyConditionInput\n         * ```\n         *\n         * **b. Composite SK** -> single arg where the name is camelCase concatenation of all the field names that comprise the SK\n         *  and the type is `Model${modelName}${keyAttributeName}CompositeKeyConditionInput` (nullable)\n         * @example\n         * ```\n         * sk1Sk2: ModelMyModelMyModelByPkAndSk1AndSk2CompositeKeyConditionInput\n         */\n        let skQueryArgs = {};\n        if (sk.length === 1) {\n            const [skField] = sk;\n            const type = (typeof fields[skField].type === 'string'\n                ? fields[skField].type\n                : 'String');\n            const normalizedType = skGraphQlFieldTypeMap[type];\n            skQueryArgs = {\n                [skField]: `Model${normalizedType}KeyConditionInput`,\n            };\n        }\n        else if (sk.length > 1) {\n            const compositeSkArgName = resolvedSkName(sk);\n            const keyName = attributes?.find((attr) => attr?.properties?.queryField === queryField)?.properties?.name;\n            skQueryArgs = {\n                [compositeSkArgName]: `Model${capitalize(name)}${capitalize(keyName)}CompositeKeyConditionInput`,\n            };\n        }\n        indexQueryArgs = {\n            [pk]: `${Object.prototype.hasOwnProperty.call(fields[pk].type, 'enum')\n                ? fields[pk].type.enum // AppSync schema sets enum type as the type of the enum fields that's used as PK\n                : fields[pk].type}!`,\n            ...skQueryArgs,\n        };\n    }\n    else {\n        throw new Error('Error generating GraphQL Document - invalid operation name');\n    }\n    let graphQLOperationType;\n    let graphQLSelectionSet;\n    let graphQLArguments;\n    const selectionSetFields = generateSelectionSet(modelIntrospection, name, selectionSet);\n    // default PK args for get and list operations\n    // modified below for CPK\n    const getPkArgs = {\n        [primaryKeyFieldName]: `${fields[primaryKeyFieldName].type}!`,\n    };\n    const listPkArgs = {};\n    /**\n     * Generate query field args for the SK if it's defined\n     *\n     * **1. Get queries** require each SK field to be present as a separate arg where the type is the field's GraphQL scalar type (non-nullable)\n     * @example\n     * ```\n     * sk1: String!, sk2: Int!\n     * ```\n     *\n     * **2. List queries**\n     *\n     * **a. Single field SK** -> single arg where name is the field name and the type is `Model${gqlFieldType}KeyConditionInput` (nullable)\n     *      Note: string-like data types e.g.,  AWSDateTime, AWSEmail, AWSPhone, etc. should map to String. See `skGraphQlFieldTypeMap` above\n     * @example\n     * ```\n     * sk1: ModelStringKeyConditionInput\n     * ```\n     *\n     * **b. Composite SK** -> single arg where the name is camelCase concatenation of all the field names that comprise the SK\n     *  and the type is `Model${modelName}PrimaryCompositeKeyConditionInput` (nullable)\n     * @example\n     * ```\n     * sk1Sk2: ModelMyModelPrimaryCompositeKeyConditionInput\n     * ```\n     */\n    const generateSkArgs = (op) => {\n        if (sortKeyFieldNames.length === 0)\n            return {};\n        if (op === 'get') {\n            return sortKeyFieldNames.reduce((acc, fieldName) => {\n                const fieldType = fields[fieldName].type;\n                if (op === 'get') {\n                    acc[fieldName] = `${fieldType}!`; // ! - SK args are non-nullable in Get queries\n                }\n                return acc;\n            }, {});\n        }\n        else {\n            // list SK\n            if (sortKeyFieldNames.length === 1) {\n                // Single SK\n                const [sk] = sortKeyFieldNames;\n                const type = (typeof fields[sk].type === 'string' ? fields[sk].type : 'String');\n                const normalizedType = skGraphQlFieldTypeMap[type];\n                return {\n                    [sk]: `Model${normalizedType}KeyConditionInput`,\n                };\n            }\n            else {\n                // Composite SK\n                const compositeSkArgName = resolvedSkName(sortKeyFieldNames);\n                return {\n                    [compositeSkArgName]: `Model${capitalize(name)}PrimaryCompositeKeyConditionInput`,\n                };\n            }\n        }\n    };\n    if (isCustomPrimaryKey) {\n        Object.assign(getPkArgs, generateSkArgs('get'));\n        Object.assign(listPkArgs, {\n            // PK is only included in list query field args in the generated GQL\n            // when explicitly specifying PK with .identifier(['fieldName']) or @primaryKey in the schema definition\n            [primaryKeyFieldName]: `${fields[primaryKeyFieldName].type}`, // PK is always a nullable arg for list (no `!` after the type)\n            sortDirection: 'ModelSortDirection',\n        }, generateSkArgs('list'));\n    }\n    switch (modelOperation) {\n        case 'CREATE':\n        case 'UPDATE':\n        case 'DELETE':\n            graphQLArguments ??\n                (graphQLArguments = {\n                    input: `${operationPrefix.charAt(0).toLocaleUpperCase() +\n                        operationPrefix.slice(1)}${namePascalCase}Input!`,\n                });\n            graphQLOperationType ?? (graphQLOperationType = 'mutation');\n        // TODO(Eslint): this this case clause correct without the break statement?\n        // eslint-disable-next-line no-fallthrough\n        case 'GET':\n            graphQLArguments ?? (graphQLArguments = getPkArgs);\n            graphQLSelectionSet ?? (graphQLSelectionSet = selectionSetFields);\n        // TODO(Eslint): this this case clause correct without the break statement?\n        // eslint-disable-next-line no-fallthrough\n        case 'LIST':\n            graphQLArguments ??\n                (graphQLArguments = {\n                    ...listPkArgs,\n                    // eslint doesn't like the ts-ignore, because it thinks it's unnecessary.\n                    // But TS doesn't like the `filter: ...` because it think it will always be\n                    // overwritten. (it won't be.) so, we need to ignore the TS error and then\n                    // ignore the eslint error on the ts-ignore.\n                    // eslint-disable-next-line\n                    // @ts-ignore\n                    filter: `Model${namePascalCase}FilterInput`,\n                    limit: 'Int',\n                    nextToken: 'String',\n                });\n            graphQLOperationType ?? (graphQLOperationType = 'query');\n            graphQLSelectionSet ??\n                (graphQLSelectionSet = `items { ${selectionSetFields} } nextToken __typename`);\n        // TODO(Eslint): this this case clause correct without the break statement?\n        // eslint-disable-next-line no-fallthrough\n        case 'INDEX_QUERY':\n            graphQLArguments ??\n                (graphQLArguments = {\n                    ...indexQueryArgs,\n                    filter: `Model${namePascalCase}FilterInput`,\n                    sortDirection: 'ModelSortDirection',\n                    limit: 'Int',\n                    nextToken: 'String',\n                });\n            graphQLOperationType ?? (graphQLOperationType = 'query');\n            graphQLSelectionSet ??\n                (graphQLSelectionSet = `items { ${selectionSetFields} } nextToken __typename`);\n        // TODO(Eslint): this this case clause correct without the break statement?\n        // eslint-disable-next-line no-fallthrough\n        case 'ONCREATE':\n        case 'ONUPDATE':\n        case 'ONDELETE':\n            graphQLArguments ??\n                (graphQLArguments = {\n                    filter: `ModelSubscription${namePascalCase}FilterInput`,\n                });\n            graphQLOperationType ?? (graphQLOperationType = 'subscription');\n            graphQLSelectionSet ?? (graphQLSelectionSet = selectionSetFields);\n            break;\n        case 'OBSERVEQUERY':\n        default:\n            throw new Error('Internal error: Attempted to generate graphql document for observeQuery. Please report this error.');\n    }\n    const graphQLDocument = `${graphQLOperationType}${graphQLArguments\n        ? `(${Object.entries(graphQLArguments).map(([fieldName, type]) => `$${fieldName}: ${type}`)})`\n        : ''} { ${graphQLFieldName}${graphQLArguments\n        ? `(${Object.keys(graphQLArguments).map((fieldName) => `${fieldName}: $${fieldName}`)})`\n        : ''} { ${graphQLSelectionSet} } }`;\n    return graphQLDocument;\n}\nexport function buildGraphQLVariables(modelDefinition, operation, arg, modelIntrospection, indexMeta) {\n    const { fields, primaryKeyInfo: { isCustomPrimaryKey, primaryKeyFieldName, sortKeyFieldNames, }, } = modelDefinition;\n    const skName = sortKeyFieldNames?.length && resolvedSkName(sortKeyFieldNames);\n    let variables = {};\n    // TODO: process input\n    switch (operation) {\n        case 'CREATE':\n            variables = {\n                input: arg\n                    ? normalizeMutationInput(arg, modelDefinition, modelIntrospection)\n                    : {},\n            };\n            break;\n        case 'UPDATE':\n            // readonly fields are not  updated\n            variables = {\n                input: arg\n                    ? Object.fromEntries(Object.entries(normalizeMutationInput(arg, modelDefinition, modelIntrospection)).filter(([fieldName]) => {\n                        // omit field from update input\n                        // if exists in fields and marked read only\n                        // if does not exist in fields but implicitly added to schema via ownership\n                        return fields[fieldName]\n                            ? !fields[fieldName].isReadOnly\n                            : !resolveOwnerFields(modelDefinition).includes(fieldName);\n                    }))\n                    : {},\n            };\n            break;\n        case 'GET':\n        case 'DELETE':\n            // only identifiers are sent\n            if (arg) {\n                variables = isCustomPrimaryKey\n                    ? [primaryKeyFieldName, ...sortKeyFieldNames].reduce((acc, fieldName) => {\n                        acc[fieldName] = arg[fieldName];\n                        return acc;\n                    }, {})\n                    : { [primaryKeyFieldName]: arg[primaryKeyFieldName] };\n            }\n            if (operation === 'DELETE') {\n                variables = { input: variables };\n            }\n            break;\n        case 'LIST':\n            if (arg?.filter) {\n                variables.filter = arg.filter;\n            }\n            if (arg?.sortDirection) {\n                variables.sortDirection = arg.sortDirection;\n            }\n            if (arg && arg[primaryKeyFieldName]) {\n                variables[primaryKeyFieldName] = arg[primaryKeyFieldName];\n            }\n            if (skName && arg && arg[skName]) {\n                variables[skName] = arg[skName];\n            }\n            if (arg?.nextToken) {\n                variables.nextToken = arg.nextToken;\n            }\n            if (arg?.limit) {\n                variables.limit = arg.limit;\n            }\n            break;\n        case 'INDEX_QUERY': {\n            const { pk, sk = [] } = indexMeta;\n            const indexQuerySkName = sk?.length && resolvedSkName(sk);\n            variables[pk] = arg[pk];\n            if (indexQuerySkName && arg && arg[indexQuerySkName]) {\n                variables[indexQuerySkName] = arg[indexQuerySkName];\n            }\n            if (arg?.filter) {\n                variables.filter = arg.filter;\n            }\n            if (arg?.sortDirection) {\n                variables.sortDirection = arg.sortDirection;\n            }\n            if (arg?.nextToken) {\n                variables.nextToken = arg.nextToken;\n            }\n            if (arg?.limit) {\n                variables.limit = arg.limit;\n            }\n            break;\n        }\n        case 'ONCREATE':\n        case 'ONUPDATE':\n        case 'ONDELETE':\n            if (arg?.filter) {\n                variables = { filter: arg.filter };\n            }\n            break;\n        case 'OBSERVEQUERY':\n            throw new Error('Internal error: Attempted to build variables for observeQuery. Please report this error.');\n        default: {\n            const exhaustiveCheck = operation;\n            throw new Error(`Unhandled operation case: ${exhaustiveCheck}`);\n        }\n    }\n    return variables;\n}\n/**\n * Iterates over mutation input values and resolves any model inputs to their corresponding join fields/values\n *\n * @example\n * ### Usage\n * ```ts\n * const result = normalizeMutationInput({ post: post }, model, modelDefinition);\n * ```\n * ### Result\n * ```ts\n * { postId: \"abc123\" }\n * ```\n *\n */\nexport function normalizeMutationInput(mutationInput, model, modelIntrospection) {\n    const { fields } = model;\n    const normalized = {};\n    Object.entries(mutationInput).forEach(([inputFieldName, inputValue]) => {\n        const fieldType = fields[inputFieldName]?.type;\n        const relatedModelName = fieldType?.model;\n        if (relatedModelName) {\n            const association = fields[inputFieldName]?.association;\n            const relatedModelDef = modelIntrospection.models[relatedModelName];\n            const relatedModelPkInfo = relatedModelDef.primaryKeyInfo;\n            if (association?.connectionType === connectionType.HAS_ONE) {\n                const associationHasOne = association;\n                associationHasOne.targetNames.forEach((targetName, idx) => {\n                    const associatedFieldName = associationHasOne.associatedWith[idx];\n                    normalized[targetName] = inputValue[associatedFieldName];\n                });\n            }\n            if (association?.connectionType === connectionType.BELONGS_TO) {\n                const associationBelongsTo = association;\n                associationBelongsTo.targetNames.forEach((targetName, idx) => {\n                    if (idx === 0) {\n                        const associatedFieldName = relatedModelPkInfo.primaryKeyFieldName;\n                        normalized[targetName] = inputValue[associatedFieldName];\n                    }\n                    else {\n                        const associatedFieldName = relatedModelPkInfo.sortKeyFieldNames[idx - 1];\n                        normalized[targetName] = inputValue[associatedFieldName];\n                    }\n                });\n            }\n        }\n        else {\n            normalized[inputFieldName] = inputValue;\n        }\n    });\n    return normalized;\n}\n/**\n * Produces a parameter object that can contains auth mode/token overrides\n * only if present in either `options` (first) or configured on the `client`\n * as a fallback.\n *\n * @param client Configured client from `generateClient`\n * @param options Args/Options object from call site.\n * @returns\n */\nexport function authModeParams(client, getInternals, options = {}) {\n    const internals = getInternals(client);\n    return {\n        authMode: options.authMode || internals.authMode,\n        authToken: options.authToken || internals.authToken,\n    };\n}\n/**\n * Retrieves custom headers from either the client or request options.\n * @param client V6Client | V6ClientSSRRequest | V6ClientSSRCookies - for extracting client headers\n * @param requestHeaders {@link CustomHeaders} - request headers\n * @returns custom headers as {@link CustomHeaders}\n */\nexport function getCustomHeaders(client, getInternals, requestHeaders) {\n    let headers = getInternals(client).headers || {};\n    // Individual request headers will take precedence over client headers.\n    // We intentionally do *not* merge client and request headers.\n    if (requestHeaders) {\n        headers = requestHeaders;\n    }\n    return headers;\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// import { GraphQLFormattedError } from '@aws-amplify/data-schema-types';\n/**\n * Handle errors for list return types (list and index query operations)\n */\nexport function handleListGraphQlError(error) {\n    if (error?.errors) {\n        // graphql errors pass through\n        return {\n            ...error,\n            data: [],\n        };\n    }\n    else {\n        // non-graphql errors are re-thrown\n        throw error;\n    }\n}\n/**\n * Handle errors for singular return types (create, get, update, delete operations)\n */\nexport function handleSingularGraphQlError(error) {\n    if (error.errors) {\n        // graphql errors pass through\n        return {\n            ...error,\n            data: null,\n        };\n    }\n    else {\n        // non-graphql errors are re-thrown\n        throw error;\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Symbol used for internal user agent overrides.\n *\n * @internal\n * This symbol is intended for internal use within the Amplify library.\n * It may change or be removed in future versions without notice.\n * External usage of this symbol is discouraged and may lead to unexpected behavior.\n */\nexport const INTERNAL_USER_AGENT_OVERRIDE = Symbol('INTERNAL_USER_AGENT_OVERRIDE');\nexport var AiAction;\n(function (AiAction) {\n    AiAction[\"CreateConversation\"] = \"1\";\n    AiAction[\"GetConversation\"] = \"2\";\n    AiAction[\"ListConversations\"] = \"3\";\n    AiAction[\"DeleteConversation\"] = \"4\";\n    AiAction[\"SendMessage\"] = \"5\";\n    AiAction[\"ListMessages\"] = \"6\";\n    AiAction[\"OnStreamEvent\"] = \"7\";\n    AiAction[\"Generation\"] = \"8\";\n    AiAction[\"UpdateConversation\"] = \"9\";\n})(AiAction || (AiAction = {}));\nexport const getCustomUserAgentDetails = (action) => ({\n    category: 'ai',\n    action,\n});\n/**\n * Creates a user agent override object based on custom details.\n *\n * @internal\n * This function is intended for internal use within the Amplify library.\n * It may change or be removed in future versions without notice.\n *\n * @param customUserAgentDetails - Optional custom user agent details\n * @returns An object with INTERNAL_USER_AGENT_OVERRIDE symbol as key and customUserAgentDetails as value, or undefined if no details provided\n */\nexport function createUserAgentOverride(customUserAgentDetails) {\n    return customUserAgentDetails\n        ? { [INTERNAL_USER_AGENT_OVERRIDE]: customUserAgentDetails }\n        : undefined;\n}\n", "import { map } from 'rxjs';\nimport { authModeParams, getDefaultSelectionSetForNonModelWithIR, generateSelectionSet, getCustomHeaders, initializeModel, selectionSetIRToString, } from '../APIClient';\nimport { handleSingularGraphQlError } from './utils';\nimport { selfAwareAsync } from '../../utils';\nimport { extendCancellability } from '../cancellation';\nimport { createUserAgentOverride } from '../ai/getCustomUserAgentDetails';\n/**\n * Type guard for checking whether a Custom Operation argument is a contextSpec object\n */\nconst argIsContextSpec = (arg) => {\n    return typeof arg?.token?.value === 'symbol';\n};\n/**\n * Builds an operation function, embedded with all client and context data, that\n * can be attached to a client as a custom query or mutation.\n *\n * If we have this source schema:\n *\n * ```typescript\n * a.schema({\n *   echo: a.query()\n *     .arguments({input: a.string().required()})\n *     .returns(a.string())\n * })\n * ```\n *\n * Our model intro schema will contain an entry like this:\n *\n * ```ts\n * {\n *   queries: {\n *     echo: {\n *       name: \"echo\",\n *       isArray: false,\n *       type: 'String',\n *       isRequired: false,\n *       arguments: {\n *         input: {\n *           name: 'input',\n *           isArray: false,\n *           type: String,\n *           isRequired: true\n *         }\n *       }\n *     }\n *   }\n * }\n * ```\n *\n * The `echo` object is used to build the `echo' method that goes here:\n *\n * ```typescript\n * const client = generateClent()\n * const { data } = await client.queries.echo({input: 'a string'});\n * //                                    ^\n * //                                    |\n * //                                    +-- This one right here.\n * //\n * ```\n *\n *\n * @param client The client to run graphql queries through.\n * @param modelIntrospection The model introspection schema the op comes from.\n * @param operationType The broad category of graphql operation.\n * @param operation The operation definition from the introspection schema.\n * @param useContext Whether the function needs to accept an SSR context.\n * @returns The operation function to attach to query, mutations, etc.\n */\nexport function customOpFactory(client, modelIntrospection, operationType, operation, useContext, getInternals, customUserAgentDetails) {\n    // .arguments() are defined for the custom operation in the schema builder\n    // and are present in the model introspection schema\n    const argsDefined = operation.arguments !== undefined;\n    const op = (...args) => {\n        // options is always the last argument\n        const options = args[args.length - 1];\n        let contextSpec;\n        let arg;\n        if (useContext) {\n            if (argIsContextSpec(args[0])) {\n                contextSpec = args[0];\n            }\n            else {\n                throw new Error(`Invalid first argument passed to ${operation.name}. Expected contextSpec`);\n            }\n        }\n        if (argsDefined) {\n            if (useContext) {\n                arg = args[1];\n            }\n            else {\n                arg = args[0];\n            }\n        }\n        if (operationType === 'subscription') {\n            return _opSubscription(\n            // subscriptions are only enabled on the clientside\n            client, modelIntrospection, operation, getInternals, arg, options, customUserAgentDetails);\n        }\n        return _op(client, modelIntrospection, operationType, operation, getInternals, arg, options, contextSpec, customUserAgentDetails);\n    };\n    return op;\n}\n/**\n * Runtime test and type guard to check whether `o[field]` is a `String`.\n *\n * ```typescript\n * if (hasStringField(o, 'prop')) {\n *   const s = o.prop;\n *   //    ^? const s: string\n * }\n * ```\n *\n * @param o Object to inspect\n * @param field Field to look for\n * @returns Boolean: `true` if the `o[field]` is a `string`\n */\nfunction hasStringField(o, field) {\n    return typeof o[field] === 'string';\n}\nfunction isEnumType(type) {\n    return type instanceof Object && 'enum' in type;\n}\nfunction isInputType(type) {\n    return type instanceof Object && 'input' in type;\n}\n/**\n * @param argDef A single argument definition from a custom operation\n * @returns A string naming the base type including the `!` if the arg is required.\n */\nfunction argumentBaseTypeString({ type, isRequired }) {\n    const requiredFlag = isRequired ? '!' : '';\n    if (isEnumType(type)) {\n        return `${type.enum}${requiredFlag}`;\n    }\n    if (isInputType(type)) {\n        return `${type.input}${requiredFlag}`;\n    }\n    return `${type}${requiredFlag}`;\n}\n/**\n * Generates \"outer\" arguments string for a custom operation. For example,\n * in this operation:\n *\n * ```graphql\n * query MyQuery(InputString: String!) {\n *   echoString(InputString: $InputString)\n * }\n * ```\n *\n * This function returns the top/outer level arguments as a string:\n *\n * ```json\n * \"InputString: String!\"\n * ```\n *\n * @param operation Operation object from model introspection schema.\n * @returns \"outer\" arguments string\n */\nfunction outerArguments(operation) {\n    if (operation.arguments === undefined) {\n        return '';\n    }\n    const args = Object.entries(operation.arguments)\n        .map(([k, argument]) => {\n        const baseType = argumentBaseTypeString(argument);\n        const finalType = argument.isArray\n            ? `[${baseType}]${argument.isArrayNullable ? '' : '!'}`\n            : baseType;\n        return `$${k}: ${finalType}`;\n    })\n        .join(', ');\n    return args.length > 0 ? `(${args})` : '';\n}\n/**\n * Generates \"inner\" arguments string for a custom operation. For example,\n * in this operation:\n *\n * ```graphql\n * query MyQuery(InputString: String!) {\n *   echoString(InputString: $InputString)\n * }\n * ```\n *\n * This function returns the inner arguments as a string:\n *\n * ```json\n * \"InputString: $InputString\"\n * ```\n *\n * @param operation Operation object from model introspection schema.\n * @returns \"outer\" arguments string\n */\nfunction innerArguments(operation) {\n    if (operation.arguments === undefined) {\n        return '';\n    }\n    const args = Object.keys(operation.arguments)\n        .map((k) => `${k}: $${k}`)\n        .join(', ');\n    return args.length > 0 ? `(${args})` : '';\n}\n/**\n * Generates the selection set string for a custom operation. This is slightly\n * different than the selection set generation for models. If the custom op returns\n * a primitive or enum types, it doesn't require a selection set at all.\n *\n * E.g., the graphql might look like this:\n *\n * ```graphql\n * query MyQuery {\n *   echoString(inputString: \"whatever\")\n * }\n * #                                     ^\n * #                                     |\n * #                                     +-- no selection set\n * ```\n *\n * Non-primitive return type selection set generation will be similar to other\n * model operations.\n *\n * @param modelIntrospection The full code-generated introspection schema.\n * @param operation The operation object from the schema.\n * @returns The selection set as a string.\n */\nfunction operationSelectionSet(modelIntrospection, operation) {\n    if (hasStringField(operation, 'type') ||\n        hasStringField(operation.type, 'enum')) {\n        return '';\n    }\n    else if (hasStringField(operation.type, 'nonModel')) {\n        const nonModel = modelIntrospection.nonModels[operation.type.nonModel];\n        return `{${selectionSetIRToString(getDefaultSelectionSetForNonModelWithIR(nonModel, modelIntrospection))}}`;\n    }\n    else if (hasStringField(operation.type, 'model')) {\n        return `{${generateSelectionSet(modelIntrospection, operation.type.model)}}`;\n    }\n    else {\n        return '';\n    }\n}\n/**\n * Maps an arguments objec to graphql variables, removing superfluous args and\n * screaming loudly when required args are missing.\n *\n * @param operation The operation to construct graphql request variables for.\n * @param args The arguments to map variables from.\n * @returns The graphql variables object.\n */\nfunction operationVariables(operation, args = {}) {\n    const variables = {};\n    if (operation.arguments === undefined) {\n        return variables;\n    }\n    for (const argDef of Object.values(operation.arguments)) {\n        if (typeof args[argDef.name] !== 'undefined') {\n            variables[argDef.name] = args[argDef.name];\n        }\n        else if (argDef.isRequired) {\n            // At this point, the variable is both required and missing: We don't need\n            // to continue. The operation is expected to fail.\n            throw new Error(`${operation.name} requires arguments '${argDef.name}'`);\n        }\n    }\n    return variables;\n}\n/**\n * Executes an operation from the given model intro schema against a client, returning\n * a fully instantiated model when relevant.\n *\n * @param client The client to operate `graphql()` calls through.\n * @param modelIntrospection The model intro schema to construct requests from.\n * @param operationType The high level graphql operation type.\n * @param operation The specific operation name, args, return type details.\n * @param args The arguments to provide to the operation as variables.\n * @param options Request options like headers, etc.\n * @param context SSR context if relevant.\n * @returns Result from the graphql request, model-instantiated when relevant.\n */\nfunction _op(client, modelIntrospection, operationType, operation, getInternals, args, options, context, customUserAgentDetails) {\n    return selfAwareAsync(async (resultPromise) => {\n        const { name: operationName } = operation;\n        const auth = authModeParams(client, getInternals, options);\n        const headers = getCustomHeaders(client, getInternals, options?.headers);\n        const outerArgsString = outerArguments(operation);\n        const innerArgsString = innerArguments(operation);\n        const selectionSet = operationSelectionSet(modelIntrospection, operation);\n        const returnTypeModelName = hasStringField(operation.type, 'model')\n            ? operation.type.model\n            : undefined;\n        const query = `\n    ${operationType.toLocaleLowerCase()}${outerArgsString} {\n      ${operationName}${innerArgsString} ${selectionSet}\n    }\n  `;\n        const variables = operationVariables(operation, args);\n        const userAgentOverride = createUserAgentOverride(customUserAgentDetails);\n        try {\n            const basePromise = context\n                ? client.graphql(context, {\n                    ...auth,\n                    query,\n                    variables,\n                }, headers)\n                : client.graphql({\n                    ...auth,\n                    query,\n                    variables,\n                    ...userAgentOverride,\n                }, headers);\n            const extendedPromise = extendCancellability(basePromise, resultPromise);\n            const { data, extensions } = await extendedPromise;\n            // flatten response\n            if (data) {\n                const [key] = Object.keys(data);\n                const isArrayResult = Array.isArray(data[key]);\n                // TODO: when adding support for custom selection set, flattening will need\n                // to occur recursively. For now, it's expected that related models are not\n                // present in the result. Only FK's are present. Any related model properties\n                // should be replaced with lazy loaders under the current implementation.\n                const flattenedResult = isArrayResult\n                    ? data[key].filter((x) => x)\n                    : data[key];\n                // TODO: custom selection set. current selection set is default selection set only\n                // custom selection set requires data-schema-type + runtime updates above.\n                const initialized = returnTypeModelName\n                    ? initializeModel(client, returnTypeModelName, isArrayResult ? flattenedResult : [flattenedResult], modelIntrospection, auth.authMode, auth.authToken, !!context)\n                    : flattenedResult;\n                return {\n                    data: !isArrayResult && Array.isArray(initialized)\n                        ? initialized.shift()\n                        : initialized,\n                    extensions,\n                };\n            }\n            else {\n                return { data: null, extensions };\n            }\n        }\n        catch (error) {\n            /**\n             * The `data` type returned by `error` here could be:\n             * 1) `null`\n             * 2) an empty object\n             * 3) \"populated\" but with a `null` value `{ getPost: null }`\n             * 4) an actual record `{ getPost: { id: '1', title: 'Hello, World!' } }`\n             */\n            const { data, errors } = error;\n            /**\n             * `data` is not `null`, and is not an empty object:\n             */\n            if (data && Object.keys(data).length !== 0 && errors) {\n                const [key] = Object.keys(data);\n                const isArrayResult = Array.isArray(data[key]);\n                // TODO: when adding support for custom selection set, flattening will need\n                // to occur recursively. For now, it's expected that related models are not\n                // present in the result. Only FK's are present. Any related model properties\n                // should be replaced with lazy loaders under the current implementation.\n                const flattenedResult = isArrayResult\n                    ? data[key].filter((x) => x)\n                    : data[key];\n                /**\n                 * `flattenedResult` could be `null` here (e.g. `data: { getPost: null }`)\n                 * if `flattenedResult`, result is an actual record:\n                 */\n                if (flattenedResult) {\n                    // TODO: custom selection set. current selection set is default selection set only\n                    // custom selection set requires data-schema-type + runtime updates above.\n                    const initialized = returnTypeModelName\n                        ? initializeModel(client, returnTypeModelName, isArrayResult ? flattenedResult : [flattenedResult], modelIntrospection, auth.authMode, auth.authToken, !!context)\n                        : flattenedResult;\n                    return {\n                        data: !isArrayResult && Array.isArray(initialized)\n                            ? initialized.shift()\n                            : initialized,\n                        errors,\n                    };\n                }\n                else {\n                    // was `data: { getPost: null }`)\n                    return handleSingularGraphQlError(error);\n                }\n            }\n            else {\n                // `data` is `null`:\n                return handleSingularGraphQlError(error);\n            }\n        }\n    });\n}\n/**\n * Executes an operation from the given model intro schema against a client, returning\n * a fully instantiated model when relevant.\n *\n * @param client The client to operate `graphql()` calls through.\n * @param modelIntrospection The model intro schema to construct requests from.\n * @param operation The specific operation name, args, return type details.\n * @param args The arguments to provide to the operation as variables.\n * @param options Request options like headers, etc.\n * @returns Result from the graphql request, model-instantiated when relevant.\n */\nfunction _opSubscription(client, modelIntrospection, operation, getInternals, args, options, customUserAgentDetails) {\n    const operationType = 'subscription';\n    const { name: operationName } = operation;\n    const auth = authModeParams(client, getInternals, options);\n    const headers = getCustomHeaders(client, getInternals, options?.headers);\n    const outerArgsString = outerArguments(operation);\n    const innerArgsString = innerArguments(operation);\n    const selectionSet = operationSelectionSet(modelIntrospection, operation);\n    const returnTypeModelName = hasStringField(operation.type, 'model')\n        ? operation.type.model\n        : undefined;\n    const query = `\n    ${operationType.toLocaleLowerCase()}${outerArgsString} {\n      ${operationName}${innerArgsString} ${selectionSet}\n    }\n  `;\n    const variables = operationVariables(operation, args);\n    const userAgentOverride = createUserAgentOverride(customUserAgentDetails);\n    const observable = client.graphql({\n        ...auth,\n        query,\n        variables,\n        ...userAgentOverride,\n    }, headers);\n    return observable.pipe(map((value) => {\n        const [key] = Object.keys(value.data);\n        const data = value.data[key];\n        const [initialized] = returnTypeModelName\n            ? initializeModel(client, returnTypeModelName, [data], modelIntrospection, auth.authMode, auth.authToken)\n            : [data];\n        return initialized;\n    }));\n}\n", "import { customOpFactory } from './operations/custom';\nconst operationTypeMap = {\n    queries: 'query',\n    mutations: 'mutation',\n    subscriptions: 'subscription',\n};\nexport function generateCustomOperationsProperty(client, config, operationsType, getInternals) {\n    // some bundlers end up with `Amplify.configure` being called *after* generate client.\n    // if that occurs, we need to *not error* while we wait. handling for late configuration\n    // occurs in `generateClient()`. we do not need to subscribe to Hub events here.\n    if (!config) {\n        return {};\n    }\n    const modelIntrospection = config.modelIntrospection;\n    // model intro schema might be absent if there's not actually a configured GraphQL API\n    if (!modelIntrospection) {\n        return {};\n    }\n    // custom operations will be absent from model intro schema if no custom ops\n    // are present on the source schema.\n    const operations = modelIntrospection[operationsType];\n    if (!operations) {\n        return {};\n    }\n    const ops = {};\n    const useContext = getInternals(client).amplify === null;\n    for (const operation of Object.values(operations)) {\n        ops[operation.name] = customOpFactory(client, modelIntrospection, operationTypeMap[operationsType], operation, useContext, getInternals);\n    }\n    return ops;\n}\nexport function generateCustomMutationsProperty(client, config, getInternals) {\n    return generateCustomOperationsProperty(client, config, 'mutations', getInternals);\n}\nexport function generateCustomQueriesProperty(client, config, getInternals) {\n    return generateCustomOperationsProperty(client, config, 'queries', getInternals);\n}\nexport function generateCustomSubscriptionsProperty(client, config, getInternals) {\n    return generateCustomOperationsProperty(client, config, 'subscriptions', getInternals);\n}\n", "import { authModeParams, buildGraphQLVariables, flattenItems, generateGraphQLDocument, getCustomHeaders, initializeModel, } from '../APIClient';\nimport { handleSingularGraphQlError } from './utils';\nimport { selfAwareAsync } from '../../utils';\nimport { extendCancellability } from '../cancellation';\nimport { createUserAgentOverride } from '../ai/getCustomUserAgentDetails';\nexport function getFactory(client, modelIntrospection, model, operation, getInternals, useContext = false, customUserAgentDetails) {\n    const getWithContext = (contextSpec, arg, options) => {\n        return _get(client, modelIntrospection, model, arg, options, operation, getInternals, contextSpec, customUserAgentDetails);\n    };\n    const get = (arg, options) => {\n        return _get(client, modelIntrospection, model, arg, options, operation, getInternals, undefined, customUserAgentDetails);\n    };\n    return useContext ? getWithContext : get;\n}\nfunction _get(client, modelIntrospection, model, arg, options, operation, getInternals, context, customUserAgentDetails) {\n    return selfAwareAsync(async (resultPromise) => {\n        const { name } = model;\n        const query = generateGraphQLDocument(modelIntrospection, model, operation, options);\n        const variables = buildGraphQLVariables(model, operation, arg, modelIntrospection);\n        const auth = authModeParams(client, getInternals, options);\n        const headers = getCustomHeaders(client, getInternals, options?.headers);\n        const userAgentOverride = createUserAgentOverride(customUserAgentDetails);\n        try {\n            const basePromise = context\n                ? client.graphql(context, {\n                    ...auth,\n                    query,\n                    variables,\n                }, headers)\n                : client.graphql({\n                    ...auth,\n                    query,\n                    variables,\n                    ...userAgentOverride,\n                }, headers);\n            const extendedPromise = extendCancellability(basePromise, resultPromise);\n            const { data, extensions } = await extendedPromise;\n            // flatten response\n            if (data) {\n                const [key] = Object.keys(data);\n                const flattenedResult = flattenItems(modelIntrospection, name, data[key]);\n                if (flattenedResult === null) {\n                    return { data: null, extensions };\n                }\n                else if (options?.selectionSet) {\n                    return { data: flattenedResult, extensions };\n                }\n                else {\n                    // TODO: refactor to avoid destructuring here\n                    const [initialized] = initializeModel(client, name, [flattenedResult], modelIntrospection, auth.authMode, auth.authToken, !!context);\n                    return { data: initialized, extensions };\n                }\n            }\n            else {\n                return { data: null, extensions };\n            }\n        }\n        catch (error) {\n            /**\n             * The `data` type returned by `error` here could be:\n             * 1) `null`\n             * 2) an empty object\n             * 3) \"populated\" but with a `null` value `{ getPost: null }`\n             * 4) an actual record `{ getPost: { id: '1', title: 'Hello, World!' } }`\n             */\n            const { data, errors } = error;\n            /**\n             * `data` is not `null`, and is not an empty object:\n             */\n            if (data && Object.keys(data).length !== 0 && errors) {\n                const [key] = Object.keys(data);\n                const flattenedResult = flattenItems(modelIntrospection, name, data[key]);\n                /**\n                 * `flattenedResult` could be `null` here (e.g. `data: { getPost: null }`)\n                 * if `flattenedResult`, result is an actual record:\n                 */\n                if (flattenedResult) {\n                    if (options?.selectionSet) {\n                        return { data: flattenedResult, errors };\n                    }\n                    else {\n                        // TODO: refactor to avoid destructuring here\n                        const [initialized] = initializeModel(client, name, [flattenedResult], modelIntrospection, auth.authMode, auth.authToken, !!context);\n                        return { data: initialized, errors };\n                    }\n                }\n                else {\n                    // was `data: { getPost: null }`)\n                    return handleSingularGraphQlError(error);\n                }\n            }\n            else {\n                // `data` is `null`:\n                return handleSingularGraphQlError(error);\n            }\n        }\n    });\n}\n", "import { authModeParams, buildGraphQLVariables, flattenItems, generateGraphQLDocument, getCustomHeaders, initializeModel, } from '../APIClient';\nimport { handleListGraphQlError } from './utils';\nimport { selfAwareAsync } from '../../utils';\nimport { extendCancellability } from '../cancellation';\nimport { createUserAgentOverride } from '../ai/getCustomUserAgentDetails';\nexport function listFactory(client, modelIntrospection, model, getInternals, context = false, customUserAgentDetails) {\n    const listWithContext = (contextSpec, args) => {\n        return _list(client, modelIntrospection, model, getInternals, args, contextSpec, customUserAgentDetails);\n    };\n    const list = (args) => {\n        return _list(client, modelIntrospection, model, getInternals, args, undefined, customUserAgentDetails);\n    };\n    return context ? listWithContext : list;\n}\nfunction _list(client, modelIntrospection, model, getInternals, args, contextSpec, customUserAgentDetails) {\n    return selfAwareAsync(async (resultPromise) => {\n        const { name } = model;\n        const query = generateGraphQLDocument(modelIntrospection, model, 'LIST', args);\n        const variables = buildGraphQLVariables(model, 'LIST', args, modelIntrospection);\n        const auth = authModeParams(client, getInternals, args);\n        const headers = getCustomHeaders(client, getInternals, args?.headers);\n        const userAgentOverride = createUserAgentOverride(customUserAgentDetails);\n        try {\n            const basePromise = contextSpec\n                ? client.graphql(contextSpec, {\n                    ...auth,\n                    query,\n                    variables,\n                }, headers)\n                : client.graphql({\n                    ...auth,\n                    query,\n                    variables,\n                    ...userAgentOverride,\n                }, headers);\n            const extendedPromise = extendCancellability(basePromise, resultPromise);\n            const { data, extensions } = await extendedPromise;\n            // flatten response\n            if (data !== undefined) {\n                const [key] = Object.keys(data);\n                if (data[key].items) {\n                    const flattenedResult = data[key].items.map((value) => flattenItems(modelIntrospection, name, value));\n                    // don't init if custom selection set\n                    if (args?.selectionSet) {\n                        return {\n                            data: flattenedResult,\n                            nextToken: data[key].nextToken,\n                            extensions,\n                        };\n                    }\n                    else {\n                        const initialized = initializeModel(client, name, flattenedResult, modelIntrospection, auth.authMode, auth.authToken, !!contextSpec);\n                        return {\n                            data: initialized,\n                            nextToken: data[key].nextToken,\n                            extensions,\n                        };\n                    }\n                }\n                return {\n                    data: data[key],\n                    nextToken: data[key].nextToken,\n                    extensions,\n                };\n            }\n        }\n        catch (error) {\n            /**\n             * The `data` type returned by `error` here could be:\n             * 1) `null`\n             * 2) an empty object\n             * 3) \"populated\" but with a `null` value `data: { listPosts: null }`\n             * 4) actual records `data: { listPosts: items: [{ id: '1', ...etc }] }`\n             */\n            const { data, errors } = error;\n            // `data` is not `null`, and is not an empty object:\n            if (data !== undefined &&\n                data !== null &&\n                Object.keys(data).length !== 0 &&\n                errors) {\n                const [key] = Object.keys(data);\n                if (data[key]?.items) {\n                    const flattenedResult = data[key].items.map((value) => flattenItems(modelIntrospection, name, value));\n                    /**\n                     * Check exists since `flattenedResult` could be `null`.\n                     * if `flattenedResult` exists, result is an actual record.\n                     */\n                    if (flattenedResult) {\n                        // don't init if custom selection set\n                        if (args?.selectionSet) {\n                            return {\n                                data: flattenedResult,\n                                nextToken: data[key]?.nextToken,\n                                errors,\n                            };\n                        }\n                        else {\n                            const initialized = initializeModel(client, name, flattenedResult, modelIntrospection, auth.authMode, auth.authToken, !!contextSpec);\n                            // data is full record w/out selection set:\n                            return {\n                                data: initialized,\n                                nextToken: data[key]?.nextToken,\n                                errors,\n                            };\n                        }\n                    }\n                    return {\n                        data: data[key],\n                        nextToken: data[key]?.nextToken,\n                        errors,\n                    };\n                }\n                else {\n                    // response is of type `data: { getPost: null }`)\n                    return handleListGraphQlError(error);\n                }\n            }\n            else {\n                // `data` is `null` or an empty object:\n                return handleListGraphQlError(error);\n            }\n        }\n    });\n}\n", "const alphabetByEncoding = {};\r\nconst alphabetByValue = new Array(64);\r\nfor (let i = 0, start = \"A\".charCodeAt(0), limit = \"Z\".charCodeAt(0); i + start <= limit; i++) {\r\n    const char = String.fromCharCode(i + start);\r\n    alphabetByEncoding[char] = i;\r\n    alphabetByValue[i] = char;\r\n}\r\nfor (let i = 0, start = \"a\".charCodeAt(0), limit = \"z\".charCodeAt(0); i + start <= limit; i++) {\r\n    const char = String.fromCharCode(i + start);\r\n    const index = i + 26;\r\n    alphabetByEncoding[char] = index;\r\n    alphabetByValue[index] = char;\r\n}\r\nfor (let i = 0; i < 10; i++) {\r\n    alphabetByEncoding[i.toString(10)] = i + 52;\r\n    const char = i.toString(10);\r\n    const index = i + 52;\r\n    alphabetByEncoding[char] = index;\r\n    alphabetByValue[index] = char;\r\n}\r\nalphabetByEncoding[\"+\"] = 62;\r\nalphabetByValue[62] = \"+\";\r\nalphabetByEncoding[\"/\"] = 63;\r\nalphabetByValue[63] = \"/\";\r\nconst bitsPerLetter = 6;\r\nconst bitsPerByte = 8;\r\nconst maxLetterValue = 0b111111;\r\nexport { alphabetByEncoding, alphabetByValue, bitsPerLetter, bitsPerByte, maxLetterValue };\r\n", "import { alphabetByEncoding, bitsPerByte, bitsPerLetter } from \"./constants.browser\";\r\nexport const fromBase64 = (input) => {\r\n    let totalByteLength = (input.length / 4) * 3;\r\n    if (input.slice(-2) === \"==\") {\r\n        totalByteLength -= 2;\r\n    }\r\n    else if (input.slice(-1) === \"=\") {\r\n        totalByteLength--;\r\n    }\r\n    const out = new ArrayBuffer(totalByteLength);\r\n    const dataView = new DataView(out);\r\n    for (let i = 0; i < input.length; i += 4) {\r\n        let bits = 0;\r\n        let bitLength = 0;\r\n        for (let j = i, limit = i + 3; j <= limit; j++) {\r\n            if (input[j] !== \"=\") {\r\n                if (!(input[j] in alphabetByEncoding)) {\r\n                    throw new TypeError(`Invalid character ${input[j]} in base64 string.`);\r\n                }\r\n                bits |= alphabetByEncoding[input[j]] << ((limit - j) * bitsPerLetter);\r\n                bitLength += bitsPerLetter;\r\n            }\r\n            else {\r\n                bits >>= bitsPerLetter;\r\n            }\r\n        }\r\n        const chunkOffset = (i / 4) * 3;\r\n        bits >>= bitLength % bitsPerByte;\r\n        const byteLength = Math.floor(bitLength / bitsPerByte);\r\n        for (let k = 0; k < byteLength; k++) {\r\n            const offset = (byteLength - k - 1) * bitsPerByte;\r\n            dataView.setUint8(chunkOffset + k, (bits & (255 << offset)) >> offset);\r\n        }\r\n    }\r\n    return new Uint8Array(out);\r\n};\r\n", "export const fromUtf8 = (input) => new TextEncoder().encode(input);\r\n", "import { fromUtf8 } from \"@smithy/util-utf8\";\r\nimport { alphabetByValue, bitsPerByte, bitsPerLetter, maxLetterValue } from \"./constants.browser\";\r\nexport function toBase64(_input) {\r\n    let input;\r\n    if (typeof _input === \"string\") {\r\n        input = fromUtf8(_input);\r\n    }\r\n    else {\r\n        input = _input;\r\n    }\r\n    const isArrayLike = typeof input === \"object\" && typeof input.length === \"number\";\r\n    const isUint8Array = typeof input === \"object\" &&\r\n        typeof input.byteOffset === \"number\" &&\r\n        typeof input.byteLength === \"number\";\r\n    if (!isArrayLike && !isUint8Array) {\r\n        throw new Error(\"@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.\");\r\n    }\r\n    let str = \"\";\r\n    for (let i = 0; i < input.length; i += 3) {\r\n        let bits = 0;\r\n        let bitLength = 0;\r\n        for (let j = i, limit = Math.min(i + 3, input.length); j < limit; j++) {\r\n            bits |= input[j] << ((limit - j - 1) * bitsPerByte);\r\n            bitLength += bitsPerByte;\r\n        }\r\n        const bitClusterCount = Math.ceil(bitLength / bitsPerLetter);\r\n        bits <<= bitClusterCount * bitsPerLetter - bitLength;\r\n        for (let k = 1; k <= bitClusterCount; k++) {\r\n            const offset = (bitClusterCount - k) * bitsPerLetter;\r\n            str += alphabetByValue[(bits & (maxLetterValue << offset)) >> offset];\r\n        }\r\n        str += \"==\".slice(0, 4 - bitClusterCount);\r\n    }\r\n    return str;\r\n}\r\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { fromBase64 } from '@smithy/util-base64';\nexport const deserializeContent = (content) => content.map((block) => {\n    if (block.image) {\n        return deserializeImageBlock(block);\n    }\n    if (block.document) {\n        return deserializeDocumentBlock(block);\n    }\n    if (block.toolUse) {\n        return deserializeToolUseBlock(block);\n    }\n    if (block.toolResult) {\n        return deserializeToolResultBlock(block);\n    }\n    return removeNullsFromBlock(block);\n});\nconst deserializeImageBlock = ({ image }) => ({\n    image: {\n        ...image,\n        source: {\n            ...image.source,\n            bytes: fromBase64(image.source.bytes),\n        },\n    },\n});\nconst deserializeDocumentBlock = ({ document }) => ({\n    document: {\n        ...document,\n        source: {\n            ...document.source,\n            bytes: fromBase64(document.source.bytes),\n        },\n    },\n});\nconst deserializeJsonBlock = ({ json }) => ({\n    json: JSON.parse(json),\n});\nconst deserializeToolUseBlock = ({ toolUse }) => ({\n    toolUse: {\n        ...toolUse,\n        input: JSON.parse(toolUse.input),\n    },\n});\nconst deserializeToolResultBlock = ({ toolResult, }) => ({\n    toolResult: {\n        toolUseId: toolResult.toolUseId,\n        content: toolResult.content.map((toolResultBlock) => {\n            if (toolResultBlock.image) {\n                return deserializeImageBlock(toolResultBlock);\n            }\n            if (toolResultBlock.json) {\n                return deserializeJsonBlock(toolResultBlock);\n            }\n            return removeNullsFromBlock(toolResultBlock);\n        }),\n    },\n});\nconst removeNullsFromBlock = (block) => Object.fromEntries(Object.entries(block).filter(([_, v]) => v !== null));\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { deserializeContent } from './conversationMessageDeserializers';\nexport const convertItemToConversationMessage = ({ content, createdAt, id, conversationId, role, }) => ({\n    content: deserializeContent(content ?? []),\n    conversationId,\n    createdAt,\n    id,\n    role,\n});\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { listFactory } from '../operations/list';\nimport { convertItemToConversationMessage } from './convertItemToConversationMessage';\nimport { AiAction, getCustomUserAgentDetails, } from './getCustomUserAgentDetails';\nexport const createListMessagesFunction = (client, modelIntrospection, conversationId, conversationMessageModel, getInternals) => async (input) => {\n    const list = listFactory(client, modelIntrospection, conversationMessageModel, getInternals, false, getCustomUserAgentDetails(AiAction.ListMessages));\n    const { data, nextToken, errors } = await list({\n        ...input,\n        filter: { conversationId: { eq: conversationId } },\n    });\n    return {\n        data: data.map((item) => convertItemToConversationMessage(item)),\n        nextToken,\n        errors,\n    };\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport const convertItemToConversationStreamEvent = ({ id, conversationId, associatedUserMessageId, contentBlockIndex, contentBlockDoneAtIndex, contentBlockDeltaIndex, contentBlockText, contentBlockToolUse, stopReason, errors, }) => {\n    if (errors) {\n        const error = {\n            id,\n            conversationId,\n            associatedUserMessageId,\n            errors,\n        };\n        return { error };\n    }\n    const next = removeNullsFromConversationStreamEvent({\n        id,\n        conversationId,\n        associatedUserMessageId,\n        contentBlockIndex,\n        contentBlockDoneAtIndex,\n        contentBlockDeltaIndex,\n        text: contentBlockText,\n        toolUse: deserializeToolUseBlock(contentBlockToolUse),\n        stopReason,\n    });\n    return { next };\n};\nconst deserializeToolUseBlock = (contentBlockToolUse) => {\n    if (contentBlockToolUse) {\n        const toolUseBlock = {\n            ...contentBlockToolUse,\n            input: JSON.parse(contentBlockToolUse.input),\n        };\n        return toolUseBlock;\n    }\n};\nconst removeNullsFromConversationStreamEvent = (block) => Object.fromEntries(Object.entries(block).filter(([_, v]) => v !== null));\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { customOpFactory } from '../operations/custom';\nimport { AiAction, getCustomUserAgentDetails } from './getCustomUserAgentDetails';\nimport { convertItemToConversationStreamEvent } from './conversationStreamEventDeserializers';\nexport const createOnStreamEventFunction = (client, modelIntrospection, conversationId, conversationRouteName, getInternals) => (handler) => {\n    const { conversations } = modelIntrospection;\n    // Safe guard for standalone function. When called as part of client generation, this should never be falsy.\n    if (!conversations) {\n        return {};\n    }\n    const subscribeSchema = conversations[conversationRouteName].message.subscribe;\n    const subscribeOperation = customOpFactory(client, modelIntrospection, 'subscription', subscribeSchema, false, getInternals, getCustomUserAgentDetails(AiAction.OnStreamEvent));\n    return subscribeOperation({ conversationId }).subscribe((data) => {\n        const { next, error } = convertItemToConversationStreamEvent(data);\n        if (error)\n            handler.error(error);\n        if (next)\n            handler.next(next);\n    });\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { toBase64 } from '@smithy/util-base64';\nexport const serializeAiContext = (aiContext) => JSON.stringify(aiContext);\nexport const serializeContent = (content) => content.map((block) => {\n    if (block.image) {\n        return serializeImageBlock(block);\n    }\n    if (block.document) {\n        return serializeDocumentBlock(block);\n    }\n    if (block.toolResult) {\n        return serializeToolResultBlock(block);\n    }\n    return block;\n});\nexport const serializeToolConfiguration = ({ tools }) => ({\n    tools: Object.entries(tools).map(([name, tool]) => ({\n        toolSpec: {\n            name,\n            description: tool.description,\n            inputSchema: {\n                json: JSON.stringify(tool.inputSchema.json),\n            },\n        },\n    })),\n});\nconst serializeImageBlock = ({ image }) => ({\n    image: {\n        ...image,\n        source: {\n            ...image.source,\n            bytes: toBase64(image.source.bytes),\n        },\n    },\n});\nconst serializeDocumentBlock = ({ document, }) => ({\n    document: {\n        ...document,\n        source: {\n            ...document.source,\n            bytes: toBase64(document.source.bytes),\n        },\n    },\n});\nconst serializeJsonBlock = ({ json }) => ({\n    json: JSON.stringify(json),\n});\nconst serializeToolResultBlock = ({ toolResult, }) => ({\n    toolResult: {\n        ...toolResult,\n        content: toolResult.content.map((toolResultBlock) => {\n            if (toolResultBlock.image) {\n                return serializeImageBlock(toolResultBlock);\n            }\n            if (toolResultBlock.json) {\n                return serializeJsonBlock(toolResultBlock);\n            }\n            return toolResultBlock;\n        }),\n    },\n});\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { customOpFactory } from '../operations/custom';\nimport { convertItemToConversationMessage } from './convertItemToConversationMessage';\nimport { serializeAiContext, serializeContent, serializeToolConfiguration, } from './conversationMessageSerializers';\nimport { AiAction, getCustomUserAgentDetails, } from './getCustomUserAgentDetails';\nexport const createSendMessageFunction = (client, modelIntrospection, conversationId, conversationRouteName, getInternals) => async (input) => {\n    const { conversations } = modelIntrospection;\n    // Safe guard for standalone function. When called as part of client generation, this should never be falsy.\n    if (!conversations) {\n        return {};\n    }\n    const processedInput = typeof input === 'string' ? { content: [{ text: input }] } : input;\n    const { content, aiContext, toolConfiguration } = processedInput;\n    const sendSchema = conversations[conversationRouteName].message.send;\n    const sendOperation = customOpFactory(client, modelIntrospection, 'mutation', sendSchema, false, getInternals, getCustomUserAgentDetails(AiAction.SendMessage));\n    const { data, errors } = await sendOperation({\n        conversationId,\n        content: serializeContent(content),\n        ...(aiContext && { aiContext: serializeAiContext(aiContext) }),\n        ...(toolConfiguration && {\n            toolConfiguration: serializeToolConfiguration(toolConfiguration),\n        }),\n    });\n    return {\n        data: data ? convertItemToConversationMessage(data) : data,\n        errors,\n    };\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { createListMessagesFunction } from './createListMessagesFunction';\nimport { createOnStreamEventFunction } from './createOnStreamEventFunction';\nimport { createSendMessageFunction } from './createSendMessageFunction';\nexport const convertItemToConversation = (client, modelIntrospection, conversationId, conversationCreatedAt, conversationUpdatedAt, conversationRouteName, conversationMessageModel, getInternals, conversationMetadata, conversationName) => {\n    if (!conversationId) {\n        throw new Error(`An error occurred converting a ${conversationRouteName} conversation: Missing ID`);\n    }\n    return {\n        id: conversationId,\n        createdAt: conversationCreatedAt,\n        updatedAt: conversationUpdatedAt,\n        metadata: conversationMetadata,\n        name: conversationName,\n        onStreamEvent: createOnStreamEventFunction(client, modelIntrospection, conversationId, conversationRouteName, getInternals),\n        sendMessage: createSendMessageFunction(client, modelIntrospection, conversationId, conversationRouteName, getInternals),\n        listMessages: createListMessagesFunction(client, modelIntrospection, conversationId, conversationMessageModel, getInternals),\n    };\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { getFactory } from '../operations/get';\nimport { convertItemToConversation } from './convertItemToConversation';\nimport { AiAction, getCustomUserAgentDetails, } from './getCustomUserAgentDetails';\nexport const createCreateConversationFunction = (client, modelIntrospection, conversationRouteName, conversationModel, conversationMessageModel, getInternals) => async (input) => {\n    const { name, metadata: metadataObject } = input ?? {};\n    const metadata = JSON.stringify(metadataObject);\n    const createOperation = getFactory(client, modelIntrospection, conversationModel, 'CREATE', getInternals, false, getCustomUserAgentDetails(AiAction.CreateConversation));\n    const { data, errors } = await createOperation({ name, metadata });\n    return {\n        data: convertItemToConversation(client, modelIntrospection, data?.id, data?.createdAt, data?.updatedAt, conversationRouteName, conversationMessageModel, getInternals, data?.metadata, data?.name),\n        errors,\n    };\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { getFactory } from '../operations/get';\nimport { convertItemToConversation } from './convertItemToConversation';\nimport { AiAction, getCustomUserAgentDetails, } from './getCustomUserAgentDetails';\nexport const createGetConversationFunction = (client, modelIntrospection, conversationRouteName, conversationModel, conversationMessageModel, getInternals) => async ({ id }) => {\n    const get = getFactory(client, modelIntrospection, conversationModel, 'GET', getInternals, false, getCustomUserAgentDetails(AiAction.GetConversation));\n    const { data, errors } = await get({ id });\n    return {\n        data: data\n            ? convertItemToConversation(client, modelIntrospection, data.id, data.createdAt, data.updatedAt, conversationRouteName, conversationMessageModel, getInternals, data?.metadata, data?.name)\n            : data,\n        errors,\n    };\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { listFactory } from '../operations/list';\nimport { convertItemToConversation } from './convertItemToConversation';\nimport { AiAction, getCustomUserAgentDetails, } from './getCustomUserAgentDetails';\nexport const createListConversationsFunction = (client, modelIntrospection, conversationRouteName, conversationModel, conversationMessageModel, getInternals) => async (input) => {\n    const list = listFactory(client, modelIntrospection, conversationModel, getInternals, false, getCustomUserAgentDetails(AiAction.ListConversations));\n    const { data, nextToken, errors } = await list(input);\n    return {\n        data: data.map((datum) => {\n            return convertItemToConversation(client, modelIntrospection, datum.id, datum.createdAt, datum.updatedAt, conversationRouteName, conversationMessageModel, getInternals, datum?.metadata, datum?.name);\n        }),\n        nextToken,\n        errors,\n    };\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { getFactory } from '../operations/get';\nimport { convertItemToConversation } from './convertItemToConversation';\nimport { AiAction, getCustomUserAgentDetails, } from './getCustomUserAgentDetails';\nexport const createDeleteConversationFunction = (client, modelIntrospection, conversationRouteName, conversationModel, conversationMessageModel, getInternals) => async ({ id }) => {\n    const deleteOperation = getFactory(client, modelIntrospection, conversationModel, 'DELETE', getInternals, false, getCustomUserAgentDetails(AiAction.DeleteConversation));\n    const { data, errors } = await deleteOperation({ id });\n    return {\n        data: data\n            ? convertItemToConversation(client, modelIntrospection, data?.id, data?.createdAt, data?.updatedAt, conversationRouteName, conversationMessageModel, getInternals, data?.metadata, data?.name)\n            : data,\n        errors,\n    };\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { getFactory } from '../operations/get';\nimport { convertItemToConversation } from './convertItemToConversation';\nimport { AiAction, getCustomUserAgentDetails, } from './getCustomUserAgentDetails';\nexport const createUpdateConversationFunction = (client, modelIntrospection, conversationRouteName, conversationModel, conversationMessageModel, getInternals) => async ({ id, metadata: metadataObject, name }) => {\n    const metadata = JSON.stringify(metadataObject);\n    const updateOperation = getFactory(client, modelIntrospection, conversationModel, 'UPDATE', getInternals, false, getCustomUserAgentDetails(AiAction.UpdateConversation));\n    const { data, errors } = await updateOperation({ id, metadata, name });\n    return {\n        data: data\n            ? convertItemToConversation(client, modelIntrospection, data?.id, data?.createdAt, data?.updatedAt, conversationRouteName, conversationMessageModel, getInternals, data?.metadata, data?.name)\n            : data,\n        errors,\n    };\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { createCreateConversationFunction } from '../../ai/createCreateConversationFunction';\nimport { createGetConversationFunction } from '../../ai/createGetConversationFunction';\nimport { createListConversationsFunction } from '../../ai/createListConversationsFunction';\nimport { createDeleteConversationFunction } from '../../ai/createDeleteConversationFunction';\nimport { createUpdateConversationFunction } from '../../ai/createUpdateConversationFunction';\nexport function generateConversationsProperty(client, apiGraphQLConfig, getInternals) {\n    const modelIntrospection = apiGraphQLConfig?.modelIntrospection;\n    // conversations will be absent from model intro schema if no conversation routes\n    // are present on the source schema.\n    if (!modelIntrospection?.conversations) {\n        return {};\n    }\n    const conversations = {};\n    for (const { name, conversation, message, models, nonModels, enums, } of Object.values(modelIntrospection.conversations)) {\n        const conversationModel = models[conversation.modelName];\n        const conversationMessageModel = models[message.modelName];\n        if (!conversationModel || !conversationMessageModel) {\n            return {};\n        }\n        const conversationModelIntrospection = {\n            ...modelIntrospection,\n            models: {\n                ...modelIntrospection.models,\n                ...models,\n            },\n            nonModels: {\n                ...modelIntrospection.nonModels,\n                ...nonModels,\n            },\n            enums: {\n                ...modelIntrospection.enums,\n                ...enums,\n            },\n        };\n        conversations[name] = {\n            update: createUpdateConversationFunction(client, conversationModelIntrospection, name, conversationModel, conversationMessageModel, getInternals),\n            create: createCreateConversationFunction(client, conversationModelIntrospection, name, conversationModel, conversationMessageModel, getInternals),\n            get: createGetConversationFunction(client, conversationModelIntrospection, name, conversationModel, conversationMessageModel, getInternals),\n            delete: createDeleteConversationFunction(client, conversationModelIntrospection, name, conversationModel, conversationMessageModel, getInternals),\n            list: createListConversationsFunction(client, conversationModelIntrospection, name, conversationModel, conversationMessageModel, getInternals),\n        };\n    }\n    return conversations;\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { customOpFactory } from '../../operations/custom';\nimport { AiAction, getCustomUserAgentDetails, } from '../../ai/getCustomUserAgentDetails';\nexport function generateGenerationsProperty(client, apiGraphQLConfig, getInternals) {\n    const modelIntrospection = apiGraphQLConfig?.modelIntrospection;\n    // generations will be absent from model intro schema if no generation routes\n    // are present on the source schema.\n    if (!modelIntrospection?.generations) {\n        return {};\n    }\n    const generations = {};\n    for (const generation of Object.values(modelIntrospection.generations)) {\n        generations[generation.name] = customOpFactory(client, modelIntrospection, 'query', generation, false, getInternals, getCustomUserAgentDetails(AiAction.Generation));\n    }\n    return generations;\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport const generateEnumsProperty = (graphqlConfig) => {\n    const modelIntrospection = graphqlConfig.modelIntrospection;\n    if (!modelIntrospection) {\n        return {};\n    }\n    const enums = {};\n    for (const [_, enumData] of Object.entries(modelIntrospection.enums)) {\n        enums[enumData.name] = {\n            values: () => enumData.values,\n        };\n    }\n    return enums;\n};\n", "import { authModeParams, buildGraphQLVariables, flattenItems, generateGraphQLDocument, getCustomHeaders, initializeModel, } from '../APIClient';\nimport { handleListGraphQlError } from './utils';\nimport { selfAwareAsync } from '../../utils';\nimport { extendCancellability } from '../cancellation';\nexport function indexQueryFactory(client, modelIntrospection, model, indexMeta, getInternals, context = false) {\n    const indexQueryWithContext = (contextSpec, args, options) => {\n        return _indexQuery(client, modelIntrospection, model, indexMeta, getInternals, {\n            ...args,\n            ...options,\n        }, contextSpec);\n    };\n    const indexQuery = (args, options) => {\n        return _indexQuery(client, modelIntrospection, model, indexMeta, getInternals, {\n            ...args,\n            ...options,\n        });\n    };\n    return context ? indexQueryWithContext : indexQuery;\n}\nfunction processGraphQlResponse(modelIntroSchema, modelName, result, selectionSet, modelInitializer) {\n    const { data, extensions } = result;\n    const [key] = Object.keys(data);\n    if (data[key].items) {\n        const flattenedResult = data[key].items.map((value) => flattenItems(modelIntroSchema, modelName, value));\n        return {\n            data: selectionSet ? flattenedResult : modelInitializer(flattenedResult),\n            nextToken: data[key].nextToken,\n            extensions,\n        };\n    }\n    // Index queries are always list queries. No `items`? No flattening needed.\n    return {\n        data: data[key],\n        nextToken: data[key].nextToken,\n        extensions,\n    };\n}\nfunction _indexQuery(client, modelIntrospection, model, indexMeta, getInternals, args, contextSpec) {\n    return selfAwareAsync(async (resultPromise) => {\n        const { name } = model;\n        const query = generateGraphQLDocument(modelIntrospection, model, 'INDEX_QUERY', args, indexMeta);\n        const variables = buildGraphQLVariables(model, 'INDEX_QUERY', args, modelIntrospection, indexMeta);\n        const auth = authModeParams(client, getInternals, args);\n        const modelInitializer = (flattenedResult) => initializeModel(client, name, flattenedResult, modelIntrospection, auth.authMode, auth.authToken, !!contextSpec);\n        try {\n            const headers = getCustomHeaders(client, getInternals, args?.headers);\n            const graphQlParams = {\n                ...auth,\n                query,\n                variables,\n            };\n            const requestArgs = [graphQlParams, headers];\n            if (contextSpec !== undefined) {\n                requestArgs.unshift(contextSpec);\n            }\n            const basePromise = client.graphql(...requestArgs);\n            const extendedPromise = extendCancellability(basePromise, resultPromise);\n            const response = await extendedPromise;\n            if (response.data !== undefined) {\n                return processGraphQlResponse(modelIntrospection, name, response, args?.selectionSet, modelInitializer);\n            }\n        }\n        catch (error) {\n            /**\n             * The `data` type returned by `error` here could be:\n             * 1) `null`\n             * 2) an empty object\n             * 3) \"populated\" but with a `null` value:\n             *   `data: { listByExampleId: null }`\n             * 4) an actual record:\n             *   `data: { listByExampleId: items: [{ id: '1', ...etc } }]`\n             */\n            const { data, errors } = error;\n            // `data` is not `null`, and is not an empty object:\n            if (data !== undefined &&\n                data !== null &&\n                Object.keys(data).length !== 0 &&\n                errors) {\n                const [key] = Object.keys(data);\n                if (data[key]?.items) {\n                    const flattenedResult = data[key]?.items.map((value) => flattenItems(modelIntrospection, name, value));\n                    /**\n                     * Check exists since `flattenedResult` could be `null`.\n                     * if `flattenedResult` exists, result is an actual record.\n                     */\n                    if (flattenedResult) {\n                        return {\n                            data: args?.selectionSet\n                                ? flattenedResult\n                                : modelInitializer(flattenedResult),\n                            nextToken: data[key]?.nextToken,\n                        };\n                    }\n                }\n                // response is of type `data: { listByExampleId: null }`\n                return {\n                    data: data[key],\n                    nextToken: data[key]?.nextToken,\n                };\n            }\n            else {\n                // `data` is `null` or an empty object:\n                return handleListGraphQlError(error);\n            }\n        }\n    });\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { map } from 'rxjs';\nimport { authModeParams, buildGraphQLVariables, generateGraphQLDocument, getCustomHeaders, initializeModel, flattenItems, } from '../APIClient';\nexport function subscriptionFactory(client, modelIntrospection, model, operation, getInternals) {\n    const { name } = model;\n    const subscription = (args) => {\n        const query = generateGraphQLDocument(modelIntrospection, model, operation, args);\n        const variables = buildGraphQLVariables(model, operation, args, modelIntrospection);\n        const auth = authModeParams(client, getInternals, args);\n        const headers = getCustomHeaders(client, getInternals, args?.headers);\n        const observable = client.graphql({\n            ...auth,\n            query,\n            variables,\n        }, headers);\n        return observable.pipe(map((value) => {\n            const [key] = Object.keys(value.data);\n            const data = value.data[key];\n            const flattenedResult = flattenItems(modelIntrospection, name, data);\n            if (flattenedResult === null) {\n                return null;\n            }\n            else if (args?.selectionSet) {\n                return flattenedResult;\n            }\n            else {\n                const [initialized] = initializeModel(client, name, [flattenedResult], modelIntrospection, auth.authMode, auth.authToken);\n                return initialized;\n            }\n        }));\n    };\n    return subscription;\n}\n", "/**\n * Given a SchemaModel from a ModelIntrospectionSchema, returns the primary key\n * as an array of field names.\n *\n * @param model The model object\n * @returns Array of field names\n */\nexport function resolvePKFields(model) {\n    const { primaryKeyFieldName, sortKeyFieldNames } = model.primaryKeyInfo;\n    return [primaryKeyFieldName, ...sortKeyFieldNames];\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Iterates through a collection to find a matching item and returns the index.\n *\n * @param needle The item to search for\n * @param haystack The collection to search\n * @param keyFields The fields used to indicate a match\n * @returns Index of `needle` in `haystack`, otherwise -1 if not found.\n */\nexport function findIndexByFields(needle, haystack, keyFields) {\n    const searchObject = Object.fromEntries(keyFields.map((fieldName) => [fieldName, needle[fieldName]]));\n    for (let i = 0; i < haystack.length; i++) {\n        if (Object.keys(searchObject).every((k) => searchObject[k] === haystack[i][k])) {\n            return i;\n        }\n    }\n    return -1;\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Observable } from 'rxjs';\nimport { findIndexByFields, resolvePKFields } from '../../utils';\nexport function observeQueryFactory(models, model) {\n    const { name } = model;\n    const observeQuery = (arg) => new Observable((subscriber) => {\n        // what we'll be sending to our subscribers\n        const items = [];\n        // To enqueue subscription messages while we collect our initial\n        // result set.\n        const messageQueue = [];\n        // operation to take when message(s) arrive.\n        // this operation will be swapped out once initial \"sync\" is complete\n        // to immediately ingest messsages.\n        let receiveMessages = (...messages) => {\n            return messageQueue.push(...messages);\n        };\n        // start subscriptions\n        const onCreateSub = models[name].onCreate(arg).subscribe({\n            next(item) {\n                receiveMessages({ item, type: 'create' });\n            },\n            error(error) {\n                subscriber.error({ type: 'onCreate', error });\n            },\n        });\n        const onUpdateSub = models[name].onUpdate(arg).subscribe({\n            next(item) {\n                receiveMessages({ item, type: 'update' });\n            },\n            error(error) {\n                subscriber.error({ type: 'onUpdate', error });\n            },\n        });\n        const onDeleteSub = models[name].onDelete(arg).subscribe({\n            next(item) {\n                receiveMessages({ item, type: 'delete' });\n            },\n            error(error) {\n                subscriber.error({ type: 'onDelete', error });\n            },\n        });\n        // consumes a list of messages and sends a snapshot\n        function ingestMessages(messages) {\n            for (const message of messages) {\n                const idx = findIndexByFields(message.item, items, pkFields);\n                switch (message.type) {\n                    case 'create':\n                        if (idx < 0)\n                            items.push(message.item);\n                        break;\n                    case 'update':\n                        if (idx >= 0)\n                            items[idx] = message.item;\n                        break;\n                    case 'delete':\n                        if (idx >= 0)\n                            items.splice(idx, 1);\n                        break;\n                    default:\n                        console.error('Unrecognized message in observeQuery.', message);\n                }\n            }\n            subscriber.next({\n                items,\n                isSynced: true,\n            });\n        }\n        const pkFields = resolvePKFields(model);\n        // initial results\n        (async () => {\n            let firstPage = true;\n            let nextToken = null;\n            while (!subscriber.closed && (firstPage || nextToken)) {\n                firstPage = false;\n                const { data: page, errors, nextToken: _nextToken, } = await models[name].list({ ...arg, nextToken });\n                nextToken = _nextToken;\n                items.push(...page);\n                // if there are no more pages and no items we already know about\n                // that need to be merged in from sub, we're \"synced\"\n                const isSynced = messageQueue.length === 0 &&\n                    (nextToken === null || nextToken === undefined);\n                subscriber.next({\n                    items,\n                    isSynced,\n                });\n                if (Array.isArray(errors)) {\n                    for (const error of errors) {\n                        subscriber.error(error);\n                    }\n                }\n            }\n            // play through the queue\n            if (messageQueue.length > 0) {\n                ingestMessages(messageQueue);\n            }\n            // switch the queue to write directly to the items collection\n            receiveMessages = (...messages) => {\n                ingestMessages(messages);\n                return items.length;\n            };\n        })();\n        // when subscriber unsubscribes, tear down internal subs\n        return () => {\n            // 1. tear down internal subs\n            onCreateSub.unsubscribe();\n            onUpdateSub.unsubscribe();\n            onDeleteSub.unsubscribe();\n            // 2. there is no need to explicitly stop paging. instead, we\n            // just check `subscriber.closed` above before fetching each page.\n        };\n    });\n    return observeQuery;\n}\n", "import { graphQLOperationsInfo } from './APIClient';\nconst attributeIsSecondaryIndex = (attr) => {\n    return (attr.type === 'key' &&\n        // presence of `name` property distinguishes GSI from primary index\n        attr.properties?.name &&\n        attr.properties?.queryField &&\n        attr.properties?.fields.length > 0);\n};\nexport const getSecondaryIndexesFromSchemaModel = (model) => {\n    const idxs = model.attributes\n        ?.filter(attributeIsSecondaryIndex)\n        .map((attr) => {\n        const queryField = attr.properties.queryField;\n        const [pk, ...sk] = attr.properties.fields;\n        return {\n            queryField,\n            pk,\n            sk,\n        };\n    });\n    return idxs || [];\n};\n/**\n * returns graphQLOperationsInfo, but filters out operations that were disabled via model().disableOperations([...])\n */\nexport const excludeDisabledOps = (mis, modelName) => {\n    /* Example model attributes in MIS {\n      \"type\": \"model\",\n      \"properties\": {\n        \"subscriptions\": null,\n        \"mutations\": { \"delete\": null }\n        \"timestamps\": null\n      } }*/\n    const modelAttrs = mis.models[modelName].attributes?.find((attr) => attr.type === 'model');\n    const coarseToFineDict = {\n        queries: ['list', 'get', 'observeQuery'],\n        mutations: ['create', 'update', 'delete'],\n        subscriptions: ['onCreate', 'onUpdate', 'onDelete'],\n    };\n    const disabledOps = [];\n    if (!modelAttrs) {\n        return graphQLOperationsInfo;\n    }\n    if (modelAttrs.properties) {\n        for (const [key, value] of Object.entries(modelAttrs.properties)) {\n            // model.properties can contain other values that are not relevant to disabling ops, e.g. timestamps\n            if (!(key in coarseToFineDict)) {\n                continue;\n            }\n            if (value === null) {\n                // coarse-grained disable, e.g. \"subscriptions\": null,\n                disabledOps.push(...coarseToFineDict[key]);\n            }\n            else if (value instanceof Object) {\n                // fine-grained, e.g. \"mutations\": { \"delete\": null }\n                disabledOps.push(...Object.keys(value));\n            }\n        }\n    }\n    // observeQuery only exists on the client side, so can't be explicitly disabled via schema builder.\n    // It's unusable without `list`\n    if (disabledOps.includes('list')) {\n        disabledOps.push('observeQuery');\n    }\n    // graphQLOperationsInfo keys are in caps\n    const disabledOpsUpper = disabledOps.map((op) => op.toUpperCase());\n    const filteredGraphQLOperations = Object.fromEntries(Object.entries(graphQLOperationsInfo).filter(([key]) => !disabledOpsUpper.includes(key)));\n    return filteredGraphQLOperations;\n};\n", "import { listFactory } from '../../operations/list';\nimport { indexQueryFactory } from '../../operations/indexQuery';\nimport { getFactory } from '../../operations/get';\nimport { subscriptionFactory } from '../../operations/subscription';\nimport { observeQueryFactory } from '../../operations/observeQuery';\nimport { getSecondaryIndexesFromSchemaModel, excludeDisabledOps, } from '../../clientUtils';\nexport function generateModelsProperty(client, apiGraphQLConfig, getInternals) {\n    const models = {};\n    const modelIntrospection = apiGraphQLConfig.modelIntrospection;\n    if (!modelIntrospection) {\n        return {};\n    }\n    const SUBSCRIPTION_OPS = ['ONCREATE', 'ONUPDATE', 'ONDELETE'];\n    for (const model of Object.values(modelIntrospection.models)) {\n        const { name } = model;\n        models[name] = {};\n        const enabledModelOps = excludeDisabledOps(modelIntrospection, name);\n        Object.entries(enabledModelOps).forEach(([key, { operationPrefix }]) => {\n            const operation = key;\n            if (operation === 'LIST') {\n                models[name][operationPrefix] = listFactory(client, modelIntrospection, model, getInternals);\n            }\n            else if (SUBSCRIPTION_OPS.includes(operation)) {\n                models[name][operationPrefix] = subscriptionFactory(client, modelIntrospection, model, operation, getInternals);\n            }\n            else if (operation === 'OBSERVEQUERY') {\n                models[name][operationPrefix] = observeQueryFactory(models, model);\n            }\n            else {\n                models[name][operationPrefix] = getFactory(client, modelIntrospection, model, operation, getInternals);\n            }\n        });\n        const secondaryIdxs = getSecondaryIndexesFromSchemaModel(model);\n        for (const idx of secondaryIdxs) {\n            models[name][idx.queryField] = indexQueryFactory(client, modelIntrospection, model, idx, getInternals);\n        }\n    }\n    return models;\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { generateConversationsProperty, generateCustomQueriesProperty, generateCustomMutationsProperty, generateCustomSubscriptionsProperty, generateEnumsProperty, generateGenerationsProperty, generateModelsProperty, upgradeClientCancellation, } from './internals';\nexport function addSchemaToClient(client, apiGraphqlConfig, getInternals) {\n    upgradeClientCancellation(client);\n    client.models = generateModelsProperty(client, apiGraphqlConfig, getInternals);\n    client.enums = generateEnumsProperty(apiGraphqlConfig);\n    client.queries = generateCustomQueriesProperty(client, apiGraphqlConfig, getInternals);\n    client.mutations = generateCustomMutationsProperty(client, apiGraphqlConfig, getInternals);\n    client.subscriptions = generateCustomSubscriptionsProperty(client, apiGraphqlConfig, getInternals);\n    client.conversations = generateConversationsProperty(client, apiGraphqlConfig, getInternals);\n    client.generations = generateGenerationsProperty(client, apiGraphqlConfig, getInternals);\n    return client;\n}\n", "import { ApiAction, Category, } from '@aws-amplify/core/internals/utils';\nimport { INTERNAL_USER_AGENT_OVERRIDE, } from '@aws-amplify/data-schema/runtime';\nimport { InternalGraphQLAPIClass } from './internals/InternalGraphQLAPI';\nfunction isGraphQLOptionsWithOverride(options) {\n    return INTERNAL_USER_AGENT_OVERRIDE in options;\n}\nexport const graphqlOperation = (query, variables = {}, authToken) => ({\n    query,\n    variables,\n    authToken,\n});\n/**\n * Export Cloud Logic APIs\n */\nexport class GraphQLAPIClass extends InternalGraphQLAPIClass {\n    getModuleName() {\n        return 'GraphQLAPI';\n    }\n    /**\n     * Executes a GraphQL operation\n     *\n     * @param options - GraphQL Options\n     * @param [additionalHeaders] - headers to merge in after any `libraryConfigHeaders` set in the config\n     * @returns An Observable if the query is a subscription query, else a promise of the graphql result.\n     */\n    graphql(amplify, options, additionalHeaders) {\n        const userAgentDetails = {\n            category: Category.API,\n            action: ApiAction.GraphQl,\n        };\n        if (isGraphQLOptionsWithOverride(options)) {\n            const { [INTERNAL_USER_AGENT_OVERRIDE]: internalUserAgentOverride, ...cleanOptions } = options;\n            return super.graphql(amplify, cleanOptions, additionalHeaders, {\n                ...userAgentDetails,\n                ...internalUserAgentOverride,\n            });\n        }\n        return super.graphql(amplify, options, additionalHeaders, {\n            ...userAgentDetails,\n        });\n    }\n    /**\n     * Checks to see if an error thrown is from an api request cancellation\n     * @param error - Any error\n     * @returns A boolean indicating if the error was from an api request cancellation\n     */\n    isCancelError(error) {\n        return super.isCancelError(error);\n    }\n    /**\n     * Cancels an inflight request. Only applicable for graphql queries and mutations\n     * @param {any} request - request to cancel\n     * @returns A boolean indicating if the request was cancelled\n     */\n    cancel(request, message) {\n        return super.cancel(request, message);\n    }\n}\nexport const GraphQLAPI = new GraphQLAPIClass();\n", "import { GraphQLAPI } from '../GraphQLAPI';\nimport { getInternals, } from '../types';\n/**\n * Invokes graphql operations against a graphql service, providing correct input and\n * output types if Amplify-generated graphql from a recent version of the CLI/codegen\n * are used *or* correct typing is provided via the type argument.\n *\n * Amplify-generated \"branded\" graphql queries will look similar to this:\n *\n * ```ts\n *                               //\n *                               // |-- branding\n *                               // v\n * export const getModel = `...` as GeneratedQuery<\n * \tGetModelQueryVariables,\n * \tGetModelQuery\n * >;\n * ```\n *\n * If this branding is not in your generated graphql, update to a newer version of\n * CLI/codegen and regenerate your graphql using `amplify codegen`.\n *\n * ## Using Amplify-generated graphql\n *\n * ```ts\n * import * as queries from './graphql/queries';\n *\n * //\n * //    |-- correctly typed graphql response containing a Widget\n * //    v\n * const queryResult = await graphql({\n * \tquery: queries.getWidget,\n * \tvariables: {\n * \t\tid: \"abc\", // <-- type hinted/enforced\n * \t},\n * });\n *\n * //\n * //    |-- a correctly typed Widget\n * //    v\n * const fetchedWidget = queryResult.data?.getWidget!;\n * ```\n *\n * ## Custom input + result types\n *\n * To provide input types (`variables`) and result types:\n *\n * ```ts\n * type GetById_NameOnly = {\n * \tvariables: {\n * \t\tid: string\n * \t},\n * \tresult: Promise<{\n * \t\tdata: { getWidget: { name: string } }\n * \t}>\n * }\n *\n * //\n * //    |-- type is GetById_NameOnly[\"result\"]\n * //    v\n * const result = graphql<GetById_NameOnly>({\n * \tquery: \"...\",\n * \tvariables: { id: \"abc\" }  // <-- type of GetById_NameOnly[\"variables\"]\n * });\n * ```\n *\n * ## Custom result type only\n *\n * To specify result types only, use a type that is *not* in the `{variables, result}` shape:\n *\n * ```ts\n * type MyResultType = Promise<{\n * \tdata: {\n * \t\tgetWidget: { name: string }\n * \t}\n * }>\n *\n * //\n * //    |-- type is MyResultType\n * //    v\n * const result = graphql<MyResultType>({query: \"...\"});\n * ```\n *\n * @param options\n * @param additionalHeaders\n */\nexport function graphql(options, additionalHeaders) {\n    // inject client-level auth\n    const internals = getInternals(this);\n    /**\n     * The custom `endpoint` specific to the client\n     */\n    const clientEndpoint = internals.endpoint;\n    /**\n     * The `authMode` specific to the client.\n     */\n    const clientAuthMode = internals.authMode;\n    /**\n     * The `apiKey` specific to the client.\n     */\n    const clientApiKey = internals.apiKey;\n    /**\n     * The most specific `authMode` wins. Setting an `endpoint` value without also\n     * setting an `authMode` value is invalid. This helps to prevent customers apps\n     * from unexpectedly sending auth details to endpoints the auth details do not\n     * belong to.\n     *\n     * This is especially pronounced for `apiKey`. When both an `endpoint` *and*\n     * `authMode: 'apiKey'` are provided, an explicit `apiKey` override is required\n     * to prevent inadvertent sending of an API's `apiKey` to an endpoint is does\n     * not belong to.\n     */\n    options.authMode = options.authMode || clientAuthMode;\n    options.apiKey = options.apiKey ?? clientApiKey;\n    options.authToken = options.authToken || internals.authToken;\n    if (clientEndpoint && options.authMode === 'apiKey' && !options.apiKey) {\n        throw new Error(\"graphql() requires an explicit `apiKey` for a custom `endpoint` when `authMode = 'apiKey'`.\");\n    }\n    const headers = additionalHeaders || internals.headers;\n    /**\n     * The correctness of these typings depends on correct string branding or overrides.\n     * Neither of these can actually be validated at runtime. Hence, we don't perform\n     * any validation or type-guarding here.\n     */\n    const result = GraphQLAPI.graphql(\n    // TODO: move V6Client back into this package?\n    internals.amplify, {\n        ...options,\n        endpoint: clientEndpoint,\n    }, headers);\n    return result;\n}\n/**\n * Cancels an inflight request. Only applicable for graphql queries and mutations\n * @param {any} request - request to cancel\n * @returns - A boolean indicating if the request was cancelled\n */\nexport function cancel(promise, message) {\n    return GraphQLAPI.cancel(promise, message);\n}\n/**\n * Checks to see if an error thrown is from an api request cancellation\n * @param {any} error - Any error\n * @returns - A boolean indicating if the error was from an api request cancellation\n */\nexport function isCancelError(error) {\n    return GraphQLAPI.isCancelError(error);\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport function isApiGraphQLConfig(apiGraphQLConfig) {\n    return apiGraphQLConfig !== undefined;\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport function isConfigureEventWithResourceConfig(payload) {\n    return payload.event === 'configure';\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Hub } from '@aws-amplify/core';\nimport { addSchemaToClient, } from '@aws-amplify/data-schema/runtime';\nimport { __amplify, __apiKey, __authMode, __authToken, __endpoint, __headers, getInternals, } from '../types';\nimport { isApiGraphQLConfig } from './utils/runtimeTypeGuards/isApiGraphQLProviderConfig';\nimport { isConfigureEventWithResourceConfig } from './utils/runtimeTypeGuards/isConfigureEventWithResourceConfig';\nimport { cancel, graphql, isCancelError } from './v6';\n/**\n * @private\n *\n * Creates a client that can be used to make GraphQL requests, using a provided `AmplifyClassV6`\n * compatible context object for config and auth fetching.\n *\n * @param params\n * @returns\n */\nexport function generateClient(params) {\n    const client = {\n        [__amplify]: params.amplify,\n        [__authMode]: params.authMode,\n        [__authToken]: params.authToken,\n        [__apiKey]: 'apiKey' in params ? params.apiKey : undefined,\n        [__endpoint]: 'endpoint' in params ? params.endpoint : undefined,\n        [__headers]: params.headers,\n        graphql,\n        cancel,\n        isCancelError,\n        models: emptyProperty,\n        enums: emptyProperty,\n        queries: emptyProperty,\n        mutations: emptyProperty,\n        subscriptions: emptyProperty,\n    };\n    const apiGraphqlConfig = params.amplify.getConfig().API?.GraphQL;\n    if (client[__endpoint]) {\n        if (!client[__authMode]) {\n            throw new Error('generateClient() requires an explicit `authMode` when `endpoint` is provided.');\n        }\n        if (client[__authMode] === 'apiKey' && !client[__apiKey]) {\n            throw new Error(\"generateClient() requires an explicit `apiKey` when `endpoint` is provided and `authMode = 'apiKey'`.\");\n        }\n    }\n    if (!client[__endpoint]) {\n        if (isApiGraphQLConfig(apiGraphqlConfig)) {\n            addSchemaToClient(client, apiGraphqlConfig, getInternals);\n        }\n        else {\n            // This happens when the `Amplify.configure()` call gets evaluated after the `generateClient()` call.\n            //\n            // Cause: when the `generateClient()` and the `Amplify.configure()` calls are located in\n            // different source files, script bundlers may randomly arrange their orders in the production\n            // bundle.\n            //\n            // With the current implementation, the `client.models` instance created by `generateClient()`\n            // will be rebuilt on every `Amplify.configure()` call that's provided with a valid GraphQL\n            // provider configuration.\n            //\n            // TODO: revisit, and reverify this approach when enabling multiple clients for multi-endpoints\n            // configuration.\n            generateModelsPropertyOnAmplifyConfigure(client);\n        }\n    }\n    return client;\n}\nconst generateModelsPropertyOnAmplifyConfigure = (clientRef) => {\n    Hub.listen('core', coreEvent => {\n        if (!isConfigureEventWithResourceConfig(coreEvent.payload)) {\n            return;\n        }\n        const apiGraphQLConfig = coreEvent.payload.data.API?.GraphQL;\n        if (isApiGraphQLConfig(apiGraphQLConfig)) {\n            addSchemaToClient(clientRef, apiGraphQLConfig, getInternals);\n        }\n    });\n};\nconst emptyProperty = new Proxy({}, {\n    get() {\n        throw new Error('Client could not be generated. This is likely due to `Amplify.configure()` not being called prior to `generateClient()` or because the configuration passed to `Amplify.configure()` is missing GraphQL provider configuration.');\n    },\n});\n", "import { generateClient as internalGenerateClient, } from '@aws-amplify/api-graphql/internals';\nimport { Amplify } from '@aws-amplify/core';\n/**\n * Generates an API client that can work with models or raw GraphQL\n *\n * @returns {@link V6Client}\n * @throws {@link Error} - Throws error when client cannot be generated due to configuration issues.\n */\nexport function generateClient(options) {\n    return internalGenerateClient({\n        ...(options || {}),\n        amplify: Amplify,\n    });\n}\n", "// WARNING: DO NOT EDIT. This file is automatically generated by AWS Amplify. It will be overwritten.\r\n\r\nconst config =  {\r\n    API: {\r\n        GraphQL: {\r\n          endpoint: 'https://xwj5jyayprgazjpcy25pmneeoi.appsync-api.us-west-2.amazonaws.com/graphql',\r\n          region: 'us-west-2',\r\n          defaultAuthMode: 'apiKey',\r\n          apiKey: 'da2-sfsyi6zahncxdegcsl57cjptne'\r\n        }\r\n    }\r\n};\r\n\r\nexport default config;", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport var AuthValidationErrorCode;\n(function (AuthValidationErrorCode) {\n    AuthValidationErrorCode[\"EmptySignInUsername\"] = \"EmptySignInUsername\";\n    AuthValidationErrorCode[\"EmptySignInPassword\"] = \"EmptySignInPassword\";\n    AuthValidationErrorCode[\"CustomAuthSignInPassword\"] = \"CustomAuthSignInPassword\";\n    AuthValidationErrorCode[\"EmptySignUpUsername\"] = \"EmptySignUpUsername\";\n    AuthValidationErrorCode[\"EmptySignUpPassword\"] = \"EmptySignUpPassword\";\n    AuthValidationErrorCode[\"EmptyConfirmSignUpUsername\"] = \"EmptyConfirmSignUpUsername\";\n    AuthValidationErrorCode[\"EmptyConfirmSignUpCode\"] = \"EmptyConfirmSignUpCode\";\n    AuthValidationErrorCode[\"EmptyResendSignUpCodeUsername\"] = \"EmptyresendSignUpCodeUsername\";\n    AuthValidationErrorCode[\"EmptyChallengeResponse\"] = \"EmptyChallengeResponse\";\n    AuthValidationErrorCode[\"EmptyConfirmResetPasswordUsername\"] = \"EmptyConfirmResetPasswordUsername\";\n    AuthValidationErrorCode[\"EmptyConfirmResetPasswordNewPassword\"] = \"EmptyConfirmResetPasswordNewPassword\";\n    AuthValidationErrorCode[\"EmptyConfirmResetPasswordConfirmationCode\"] = \"EmptyConfirmResetPasswordConfirmationCode\";\n    AuthValidationErrorCode[\"EmptyResetPasswordUsername\"] = \"EmptyResetPasswordUsername\";\n    AuthValidationErrorCode[\"EmptyVerifyTOTPSetupCode\"] = \"EmptyVerifyTOTPSetupCode\";\n    AuthValidationErrorCode[\"EmptyConfirmUserAttributeCode\"] = \"EmptyConfirmUserAttributeCode\";\n    AuthValidationErrorCode[\"IncorrectMFAMethod\"] = \"IncorrectMFAMethod\";\n    AuthValidationErrorCode[\"EmptyUpdatePassword\"] = \"EmptyUpdatePassword\";\n})(AuthValidationErrorCode || (AuthValidationErrorCode = {}));\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AuthValidationErrorCode } from '../errors/types/validation';\nexport const validationErrorMap = {\n    [AuthValidationErrorCode.EmptyChallengeResponse]: {\n        message: 'challengeResponse is required to confirmSignIn',\n    },\n    [AuthValidationErrorCode.EmptyConfirmResetPasswordUsername]: {\n        message: 'username is required to confirmResetPassword',\n    },\n    [AuthValidationErrorCode.EmptyConfirmSignUpCode]: {\n        message: 'code is required to confirmSignUp',\n    },\n    [AuthValidationErrorCode.EmptyConfirmSignUpUsername]: {\n        message: 'username is required to confirmSignUp',\n    },\n    [AuthValidationErrorCode.EmptyConfirmResetPasswordConfirmationCode]: {\n        message: 'confirmationCode is required to confirmResetPassword',\n    },\n    [AuthValidationErrorCode.EmptyConfirmResetPasswordNewPassword]: {\n        message: 'newPassword is required to confirmResetPassword',\n    },\n    [AuthValidationErrorCode.EmptyResendSignUpCodeUsername]: {\n        message: 'username is required to confirmSignUp',\n    },\n    [AuthValidationErrorCode.EmptyResetPasswordUsername]: {\n        message: 'username is required to resetPassword',\n    },\n    [AuthValidationErrorCode.EmptySignInPassword]: {\n        message: 'password is required to signIn',\n    },\n    [AuthValidationErrorCode.EmptySignInUsername]: {\n        message: 'username is required to signIn',\n    },\n    [AuthValidationErrorCode.EmptySignUpPassword]: {\n        message: 'password is required to signUp',\n    },\n    [AuthValidationErrorCode.EmptySignUpUsername]: {\n        message: 'username is required to signUp',\n    },\n    [AuthValidationErrorCode.CustomAuthSignInPassword]: {\n        message: 'A password is not needed when signing in with CUSTOM_WITHOUT_SRP',\n        recoverySuggestion: 'Do not include a password in your signIn call.',\n    },\n    [AuthValidationErrorCode.IncorrectMFAMethod]: {\n        message: 'Incorrect MFA method was chosen. It should be either SMS, TOTP, or EMAIL',\n        recoverySuggestion: 'Try to pass SMS, TOTP, or EMAIL as the challengeResponse',\n    },\n    [AuthValidationErrorCode.EmptyVerifyTOTPSetupCode]: {\n        message: 'code is required to verifyTotpSetup',\n    },\n    [AuthValidationErrorCode.EmptyUpdatePassword]: {\n        message: 'oldPassword and newPassword are required to changePassword',\n    },\n    [AuthValidationErrorCode.EmptyConfirmUserAttributeCode]: {\n        message: 'confirmation code is required to confirmUserAttribute',\n    },\n};\n// TODO: delete this code when the Auth class is removed.\nexport var AuthErrorStrings;\n(function (AuthErrorStrings) {\n    AuthErrorStrings[\"DEFAULT_MSG\"] = \"Authentication Error\";\n    AuthErrorStrings[\"EMPTY_EMAIL\"] = \"Email cannot be empty\";\n    AuthErrorStrings[\"EMPTY_PHONE\"] = \"Phone number cannot be empty\";\n    AuthErrorStrings[\"EMPTY_USERNAME\"] = \"Username cannot be empty\";\n    AuthErrorStrings[\"INVALID_USERNAME\"] = \"The username should either be a string or one of the sign in types\";\n    AuthErrorStrings[\"EMPTY_PASSWORD\"] = \"Password cannot be empty\";\n    AuthErrorStrings[\"EMPTY_CODE\"] = \"Confirmation code cannot be empty\";\n    AuthErrorStrings[\"SIGN_UP_ERROR\"] = \"Error creating account\";\n    AuthErrorStrings[\"NO_MFA\"] = \"No valid MFA method provided\";\n    AuthErrorStrings[\"INVALID_MFA\"] = \"Invalid MFA type\";\n    AuthErrorStrings[\"EMPTY_CHALLENGE\"] = \"Challenge response cannot be empty\";\n    AuthErrorStrings[\"NO_USER_SESSION\"] = \"Failed to get the session because the user is empty\";\n    AuthErrorStrings[\"NETWORK_ERROR\"] = \"Network Error\";\n    AuthErrorStrings[\"DEVICE_CONFIG\"] = \"Device tracking has not been configured in this User Pool\";\n    AuthErrorStrings[\"AUTOSIGNIN_ERROR\"] = \"Please use your credentials to sign in\";\n    AuthErrorStrings[\"OAUTH_ERROR\"] = \"Couldn't finish OAuth flow, check your User Pool HostedUI settings\";\n})(AuthErrorStrings || (AuthErrorStrings = {}));\nexport var AuthErrorCodes;\n(function (AuthErrorCodes) {\n    AuthErrorCodes[\"SignInException\"] = \"SignInException\";\n    AuthErrorCodes[\"OAuthSignInError\"] = \"OAuthSignInException\";\n})(AuthErrorCodes || (AuthErrorCodes = {}));\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AmplifyError, } from '@aws-amplify/core/internals/utils';\nexport class AuthError extends AmplifyError {\n    constructor(params) {\n        super(params);\n        // Hack for making the custom error class work when transpiled to es5\n        // TODO: Delete the following 2 lines after we change the build target to >= es2015\n        this.constructor = AuthError;\n        Object.setPrototypeOf(this, AuthError.prototype);\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AuthError } from '../../errors/AuthError';\nexport function getRegionFromUserPoolId(userPoolId) {\n    const region = userPoolId?.split('_')[0];\n    if (!userPoolId ||\n        userPoolId.indexOf('_') < 0 ||\n        !region ||\n        typeof region !== 'string')\n        throw new AuthError({\n            name: 'InvalidUserPoolId',\n            message: 'Invalid user pool id provided.',\n        });\n    return region;\n}\nexport function getRegionFromIdentityPoolId(identityPoolId) {\n    if (!identityPoolId || !identityPoolId.includes(':')) {\n        throw new AuthError({\n            name: 'InvalidIdentityPoolIdException',\n            message: 'Invalid identity pool id provided.',\n            recoverySuggestion: 'Make sure a valid identityPoolId is given in the config.',\n        });\n    }\n    return identityPoolId.split(':')[0];\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AuthError } from './AuthError';\nexport const USER_UNAUTHENTICATED_EXCEPTION = 'UserUnAuthenticatedException';\nexport const USER_ALREADY_AUTHENTICATED_EXCEPTION = 'UserAlreadyAuthenticatedException';\nexport const DEVICE_METADATA_NOT_FOUND_EXCEPTION = 'DeviceMetadataNotFoundException';\nexport const AUTO_SIGN_IN_EXCEPTION = 'AutoSignInException';\nexport const INVALID_REDIRECT_EXCEPTION = 'InvalidRedirectException';\nexport const INVALID_APP_SCHEME_EXCEPTION = 'InvalidAppSchemeException';\nexport const INVALID_PREFERRED_REDIRECT_EXCEPTION = 'InvalidPreferredRedirectUrlException';\nexport const invalidRedirectException = new AuthError({\n    name: INVALID_REDIRECT_EXCEPTION,\n    message: 'signInRedirect or signOutRedirect had an invalid format or was not found.',\n    recoverySuggestion: 'Please make sure the signIn/Out redirect in your oauth config is valid.',\n});\nexport const invalidAppSchemeException = new AuthError({\n    name: INVALID_APP_SCHEME_EXCEPTION,\n    message: 'A valid non-http app scheme was not found in the config.',\n    recoverySuggestion: 'Please make sure a valid custom app scheme is present in the config.',\n});\nexport const invalidPreferredRedirectUrlException = new AuthError({\n    name: INVALID_PREFERRED_REDIRECT_EXCEPTION,\n    message: 'The given preferredRedirectUrl does not match any items in the redirectSignOutUrls array from the config.',\n    recoverySuggestion: 'Please make sure a matching preferredRedirectUrl is provided.',\n});\nexport const INVALID_ORIGIN_EXCEPTION = 'InvalidOriginException';\nexport const invalidOriginException = new AuthError({\n    name: INVALID_ORIGIN_EXCEPTION,\n    message: 'redirect is coming from a different origin. The oauth flow needs to be initiated from the same origin',\n    recoverySuggestion: 'Please call signInWithRedirect from the same origin.',\n});\nexport const OAUTH_SIGNOUT_EXCEPTION = 'OAuthSignOutException';\nexport const TOKEN_REFRESH_EXCEPTION = 'TokenRefreshException';\nexport const UNEXPECTED_SIGN_IN_INTERRUPTION_EXCEPTION = 'UnexpectedSignInInterruptionException';\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AuthError } from '../../../errors/AuthError';\nimport { DEVICE_METADATA_NOT_FOUND_EXCEPTION, TOKEN_REFRESH_EXCEPTION, USER_UNAUTHENTICATED_EXCEPTION, } from '../../../errors/constants';\nexport function isTypeUserPoolConfig(authConfig) {\n    if (authConfig &&\n        authConfig.Cognito.userPoolId &&\n        authConfig.Cognito.userPoolClientId) {\n        return true;\n    }\n    return false;\n}\nexport function assertAuthTokens(tokens) {\n    if (!tokens || !tokens.accessToken) {\n        throw new AuthError({\n            name: USER_UNAUTHENTICATED_EXCEPTION,\n            message: 'User needs to be authenticated to call this API.',\n            recoverySuggestion: 'Sign in before calling this API again.',\n        });\n    }\n}\nexport function assertIdTokenInAuthTokens(tokens) {\n    if (!tokens || !tokens.idToken) {\n        throw new AuthError({\n            name: USER_UNAUTHENTICATED_EXCEPTION,\n            message: 'User needs to be authenticated to call this API.',\n            recoverySuggestion: 'Sign in before calling this API again.',\n        });\n    }\n}\nexport const oAuthTokenRefreshException = new AuthError({\n    name: TOKEN_REFRESH_EXCEPTION,\n    message: `Token refresh is not supported when authenticated with the 'implicit grant' (token) oauth flow. \n\tPlease change your oauth configuration to use 'code grant' flow.`,\n    recoverySuggestion: `Please logout and change your Amplify configuration to use \"code grant\" flow. \n\tE.g { responseType: 'code' }`,\n});\nexport const tokenRefreshException = new AuthError({\n    name: USER_UNAUTHENTICATED_EXCEPTION,\n    message: 'User needs to be authenticated to call this API.',\n    recoverySuggestion: 'Sign in before calling this API again.',\n});\nexport function assertAuthTokensWithRefreshToken(tokens) {\n    if (isAuthenticatedWithImplicitOauthFlow(tokens)) {\n        throw oAuthTokenRefreshException;\n    }\n    if (!isAuthenticatedWithRefreshToken(tokens)) {\n        throw tokenRefreshException;\n    }\n}\nexport function assertDeviceMetadata(deviceMetadata) {\n    if (!deviceMetadata ||\n        !deviceMetadata.deviceKey ||\n        !deviceMetadata.deviceGroupKey ||\n        !deviceMetadata.randomPassword) {\n        throw new AuthError({\n            name: DEVICE_METADATA_NOT_FOUND_EXCEPTION,\n            message: 'Either deviceKey, deviceGroupKey or secretPassword were not found during the sign-in process.',\n            recoverySuggestion: 'Make sure to not clear storage after calling the signIn API.',\n        });\n    }\n}\nexport const OAuthStorageKeys = {\n    inflightOAuth: 'inflightOAuth',\n    oauthSignIn: 'oauthSignIn',\n    oauthPKCE: 'oauthPKCE',\n    oauthState: 'oauthState',\n};\nfunction isAuthenticated(tokens) {\n    return tokens?.accessToken || tokens?.idToken;\n}\nfunction isAuthenticatedWithRefreshToken(tokens) {\n    return isAuthenticated(tokens) && tokens?.refreshToken;\n}\nfunction isAuthenticatedWithImplicitOauthFlow(tokens) {\n    return isAuthenticated(tokens) && !tokens?.refreshToken;\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { assertTokenProviderConfig } from '@aws-amplify/core/internals/utils';\nimport { assertAuthTokens } from '../../utils/types';\nexport const getCurrentUser = async (amplify) => {\n    const authConfig = amplify.getConfig().Auth?.Cognito;\n    assertTokenProviderConfig(authConfig);\n    const tokens = await amplify.Auth.getTokens({ forceRefresh: false });\n    assertAuthTokens(tokens);\n    const { 'cognito:username': username, sub } = tokens.idToken?.payload ?? {};\n    const authUser = {\n        username: username,\n        userId: sub,\n    };\n    const signInDetails = getSignInDetailsFromTokens(tokens);\n    if (signInDetails) {\n        authUser.signInDetails = signInDetails;\n    }\n    return authUser;\n};\nfunction getSignInDetailsFromTokens(tokens) {\n    return tokens?.signInDetails;\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Amplify } from '@aws-amplify/core';\nimport { getCurrentUser as getCurrentUserInternal } from './internal/getCurrentUser';\n/**\n * Gets the current user from the idToken.\n *\n * @param input -  The GetCurrentUserInput object.\n * @returns GetCurrentUserOutput\n * @throws - {@link InitiateAuthException} - Thrown when the service fails to refresh the tokens.\n * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.\n */\nexport const getCurrentUser = async () => {\n    return getCurrentUserInternal(Amplify);\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Category, getAmplifyUserAgent, } from '@aws-amplify/core/internals/utils';\nexport const getAuthUserAgentValue = (action, customUserAgentDetails) => getAmplifyUserAgent({\n    category: Category.Auth,\n    action,\n    ...customUserAgentDetails,\n});\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport const createUserPoolSerializer = (operation) => (input, endpoint) => {\n    const headers = getSharedHeaders(operation);\n    const body = JSON.stringify(input);\n    return buildHttpRpcRequest(endpoint, headers, body);\n};\nconst getSharedHeaders = (operation) => ({\n    'content-type': 'application/x-amz-json-1.1',\n    'x-amz-target': `AWSCognitoIdentityProviderService.${operation}`,\n});\nconst buildHttpRpcRequest = ({ url }, headers, body) => ({\n    headers,\n    url,\n    body,\n    method: 'POST',\n});\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AmplifyErrorCode, } from '@aws-amplify/core/internals/utils';\nimport { AuthError } from '../AuthError';\nexport function assertServiceError(error) {\n    if (!error ||\n        error.name === 'Error' ||\n        error instanceof TypeError) {\n        throw new AuthError({\n            name: AmplifyErrorCode.Unknown,\n            message: 'An unknown error has occurred.',\n            underlyingError: error,\n        });\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { parseJsonBody, parseJsonError, } from '@aws-amplify/core/internals/aws-client-utils';\nimport { assertServiceError } from '../../../../../../errors/utils/assertServiceError';\nimport { AuthError } from '../../../../../../errors/AuthError';\nexport const createUserPoolDeserializer = () => async (response) => {\n    if (response.statusCode >= 300) {\n        const error = await parseJsonError(response);\n        assertServiceError(error);\n        throw new AuthError({\n            name: error.name,\n            message: error.message,\n            metadata: error.$metadata,\n        });\n    }\n    return parseJsonBody(response);\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { composeTransferHandler } from '@aws-amplify/core/internals/aws-client-utils/composers';\nimport { unauthenticatedHandler, } from '@aws-amplify/core/internals/aws-client-utils';\n/**\n * A Cognito Identity-specific middleware that disables caching for all requests.\n */\nconst disableCacheMiddlewareFactory = () => (next, _) => async function disableCacheMiddleware(request) {\n    request.headers['cache-control'] = 'no-store';\n    return next(request);\n};\n/**\n * A Cognito Identity-specific transfer handler that does NOT sign requests, and\n * disables caching.\n *\n * @internal\n */\nexport const cognitoUserPoolTransferHandler = composeTransferHandler(unauthenticatedHandler, [disableCacheMiddlewareFactory]);\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * The service name used to sign requests if the API requires authentication.\n */\nexport const COGNITO_IDP_SERVICE_NAME = 'cognito-idp';\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { getRetryDecider, jitteredBackoff, parseJsonError, } from '@aws-amplify/core/internals/aws-client-utils';\nimport { getAmplifyUserAgent } from '@aws-amplify/core/internals/utils';\nimport { COGNITO_IDP_SERVICE_NAME } from '../../../constants';\nexport const DEFAULT_SERVICE_CLIENT_API_CONFIG = {\n    service: COGNITO_IDP_SERVICE_NAME,\n    retryDecider: getRetryDecider(parseJsonError),\n    computeDelay: jitteredBackoff,\n    userAgentValue: getAmplifyUserAgent(),\n    cache: 'no-store',\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { composeServiceApi } from '@aws-amplify/core/internals/aws-client-utils/composers';\nimport { createUserPoolDeserializer, createUserPoolSerializer, } from './shared/serde';\nimport { cognitoUserPoolTransferHandler } from './shared/handler';\nimport { DEFAULT_SERVICE_CLIENT_API_CONFIG } from './constants';\nexport const createInitiateAuthClient = (config) => composeServiceApi(cognitoUserPoolTransferHandler, createUserPoolSerializer('InitiateAuth'), createUserPoolDeserializer(), {\n    ...DEFAULT_SERVICE_CLIENT_API_CONFIG,\n    ...config,\n});\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { getDnsSuffix, } from '@aws-amplify/core/internals/aws-client-utils';\nimport { AmplifyUrl } from '@aws-amplify/core/internals/utils';\nimport { COGNITO_IDP_SERVICE_NAME } from './constants';\nexport const cognitoUserPoolEndpointResolver = ({ region, }) => ({\n    url: new AmplifyUrl(`https://${COGNITO_IDP_SERVICE_NAME}.${region}.${getDnsSuffix(region)}`),\n});\n", "import { AmplifyUrl } from '@aws-amplify/core/internals/utils';\nimport { cognitoUserPoolEndpointResolver } from '../../../foundation/cognitoUserPoolEndpointResolver';\nexport const createCognitoUserPoolEndpointResolver = ({ endpointOverride }) => (input) => {\n    if (endpointOverride) {\n        return { url: new AmplifyUrl(endpointOverride) };\n    }\n    return cognitoUserPoolEndpointResolver(input);\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport function getUserContextData({ username, userPoolId, userPoolClientId, }) {\n    if (typeof window === 'undefined') {\n        return undefined;\n    }\n    const amazonCognitoAdvancedSecurityData = window\n        .AmazonCognitoAdvancedSecurityData;\n    if (typeof amazonCognitoAdvancedSecurityData === 'undefined') {\n        return undefined;\n    }\n    const advancedSecurityData = amazonCognitoAdvancedSecurityData.getData(username, userPoolId, userPoolClientId);\n    if (advancedSecurityData) {\n        const userContextData = {\n            EncodedData: advancedSecurityData,\n        };\n        return userContextData;\n    }\n    return {};\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { assertTokenProviderConfig, deDupeAsyncFunction, decodeJWT, } from '@aws-amplify/core/internals/utils';\nimport { getRegionFromUserPoolId } from '../../../foundation/parsers';\nimport { assertAuthTokensWithRefreshToken } from '../utils/types';\nimport { AuthError } from '../../../errors/AuthError';\nimport { createInitiateAuthClient } from '../../../foundation/factories/serviceClients/cognitoIdentityProvider';\nimport { createCognitoUserPoolEndpointResolver } from '../factories';\nimport { getUserContextData } from './userContextData';\nconst refreshAuthTokensFunction = async ({ tokens, authConfig, username, }) => {\n    assertTokenProviderConfig(authConfig?.Cognito);\n    const { userPoolId, userPoolClientId, userPoolEndpoint } = authConfig.Cognito;\n    const region = getRegionFromUserPoolId(userPoolId);\n    assertAuthTokensWithRefreshToken(tokens);\n    const refreshTokenString = tokens.refreshToken;\n    const AuthParameters = {\n        REFRESH_TOKEN: refreshTokenString,\n    };\n    if (tokens.deviceMetadata?.deviceKey) {\n        AuthParameters.DEVICE_KEY = tokens.deviceMetadata.deviceKey;\n    }\n    const UserContextData = getUserContextData({\n        username,\n        userPoolId,\n        userPoolClientId,\n    });\n    const initiateAuth = createInitiateAuthClient({\n        endpointResolver: createCognitoUserPoolEndpointResolver({\n            endpointOverride: userPoolEndpoint,\n        }),\n    });\n    const { AuthenticationResult } = await initiateAuth({ region }, {\n        ClientId: userPoolClientId,\n        AuthFlow: 'REFRESH_TOKEN_AUTH',\n        AuthParameters,\n        UserContextData,\n    });\n    const accessToken = decodeJWT(AuthenticationResult?.AccessToken ?? '');\n    const idToken = AuthenticationResult?.IdToken\n        ? decodeJWT(AuthenticationResult.IdToken)\n        : undefined;\n    const { iat } = accessToken.payload;\n    // This should never happen. If it does, it's a bug from the service.\n    if (!iat) {\n        throw new AuthError({\n            name: 'iatNotFoundException',\n            message: 'iat not found in access token',\n        });\n    }\n    const clockDrift = iat * 1000 - new Date().getTime();\n    return {\n        accessToken,\n        idToken,\n        clockDrift,\n        refreshToken: refreshTokenString,\n        username,\n    };\n};\nexport const refreshAuthTokens = deDupeAsyncFunction(refreshAuthTokensFunction);\nexport const refreshAuthTokensWithoutDedupe = refreshAuthTokensFunction;\n", "export const AuthTokenStorageKeys = {\n    accessToken: 'accessToken',\n    idToken: 'idToken',\n    oidcProvider: 'oidcProvider',\n    clockDrift: 'clockDrift',\n    refreshToken: 'refreshToken',\n    deviceKey: 'deviceKey',\n    randomPasswordKey: 'randomPasswordKey',\n    deviceGroupKey: 'deviceGroupKey',\n    signInDetails: 'signInDetails',\n    oauthMetadata: 'oauthMetadata',\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { createAssertionFunction, } from '@aws-amplify/core/internals/utils';\nexport var TokenProviderErrorCode;\n(function (TokenProviderErrorCode) {\n    TokenProviderErrorCode[\"InvalidAuthTokens\"] = \"InvalidAuthTokens\";\n})(TokenProviderErrorCode || (TokenProviderErrorCode = {}));\nconst tokenValidationErrorMap = {\n    [TokenProviderErrorCode.InvalidAuthTokens]: {\n        message: 'Invalid tokens.',\n        recoverySuggestion: 'Make sure the tokens are valid.',\n    },\n};\nexport const assert = createAssertionFunction(tokenValidationErrorMap);\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport const AUTH_KEY_PREFIX = 'CognitoIdentityServiceProvider';\n", "import { assertTokenProviderConfig, decodeJWT, } from '@aws-amplify/core/internals/utils';\nimport { AuthError } from '../../../errors/AuthError';\nimport { AuthTokenStorageKeys, } from './types';\nimport { TokenProviderErrorCode, assert } from './errorHelpers';\nimport { AUTH_KEY_PREFIX } from './constants';\nexport class DefaultTokenStore {\n    getKeyValueStorage() {\n        if (!this.keyValueStorage) {\n            throw new AuthError({\n                name: 'KeyValueStorageNotFoundException',\n                message: 'KeyValueStorage was not found in TokenStore',\n            });\n        }\n        return this.keyValueStorage;\n    }\n    setKeyValueStorage(keyValueStorage) {\n        this.keyValueStorage = keyValueStorage;\n    }\n    setAuthConfig(authConfig) {\n        this.authConfig = authConfig;\n    }\n    async loadTokens() {\n        // TODO(v6): migration logic should be here\n        // Reading V5 tokens old format\n        try {\n            const authKeys = await this.getAuthKeys();\n            const accessTokenString = await this.getKeyValueStorage().getItem(authKeys.accessToken);\n            if (!accessTokenString) {\n                throw new AuthError({\n                    name: 'NoSessionFoundException',\n                    message: 'Auth session was not found. Make sure to call signIn.',\n                });\n            }\n            const accessToken = decodeJWT(accessTokenString);\n            const itString = await this.getKeyValueStorage().getItem(authKeys.idToken);\n            const idToken = itString ? decodeJWT(itString) : undefined;\n            const refreshToken = (await this.getKeyValueStorage().getItem(authKeys.refreshToken)) ??\n                undefined;\n            const clockDriftString = (await this.getKeyValueStorage().getItem(authKeys.clockDrift)) ?? '0';\n            const clockDrift = Number.parseInt(clockDriftString);\n            const signInDetails = await this.getKeyValueStorage().getItem(authKeys.signInDetails);\n            const tokens = {\n                accessToken,\n                idToken,\n                refreshToken,\n                deviceMetadata: (await this.getDeviceMetadata()) ?? undefined,\n                clockDrift,\n                username: await this.getLastAuthUser(),\n            };\n            if (signInDetails) {\n                tokens.signInDetails = JSON.parse(signInDetails);\n            }\n            return tokens;\n        }\n        catch (err) {\n            return null;\n        }\n    }\n    async storeTokens(tokens) {\n        assert(tokens !== undefined, TokenProviderErrorCode.InvalidAuthTokens);\n        const lastAuthUser = tokens.username;\n        await this.getKeyValueStorage().setItem(this.getLastAuthUserKey(), lastAuthUser);\n        const authKeys = await this.getAuthKeys();\n        await this.getKeyValueStorage().setItem(authKeys.accessToken, tokens.accessToken.toString());\n        if (tokens.idToken) {\n            await this.getKeyValueStorage().setItem(authKeys.idToken, tokens.idToken.toString());\n        }\n        else {\n            await this.getKeyValueStorage().removeItem(authKeys.idToken);\n        }\n        if (tokens.refreshToken) {\n            await this.getKeyValueStorage().setItem(authKeys.refreshToken, tokens.refreshToken);\n        }\n        else {\n            await this.getKeyValueStorage().removeItem(authKeys.refreshToken);\n        }\n        if (tokens.deviceMetadata) {\n            if (tokens.deviceMetadata.deviceKey) {\n                await this.getKeyValueStorage().setItem(authKeys.deviceKey, tokens.deviceMetadata.deviceKey);\n            }\n            if (tokens.deviceMetadata.deviceGroupKey) {\n                await this.getKeyValueStorage().setItem(authKeys.deviceGroupKey, tokens.deviceMetadata.deviceGroupKey);\n            }\n            await this.getKeyValueStorage().setItem(authKeys.randomPasswordKey, tokens.deviceMetadata.randomPassword);\n        }\n        if (tokens.signInDetails) {\n            await this.getKeyValueStorage().setItem(authKeys.signInDetails, JSON.stringify(tokens.signInDetails));\n        }\n        else {\n            await this.getKeyValueStorage().removeItem(authKeys.signInDetails);\n        }\n        await this.getKeyValueStorage().setItem(authKeys.clockDrift, `${tokens.clockDrift}`);\n    }\n    async clearTokens() {\n        const authKeys = await this.getAuthKeys();\n        // Not calling clear because it can remove data that is not managed by AuthTokenStore\n        await Promise.all([\n            this.getKeyValueStorage().removeItem(authKeys.accessToken),\n            this.getKeyValueStorage().removeItem(authKeys.idToken),\n            this.getKeyValueStorage().removeItem(authKeys.clockDrift),\n            this.getKeyValueStorage().removeItem(authKeys.refreshToken),\n            this.getKeyValueStorage().removeItem(authKeys.signInDetails),\n            this.getKeyValueStorage().removeItem(this.getLastAuthUserKey()),\n            this.getKeyValueStorage().removeItem(authKeys.oauthMetadata),\n        ]);\n    }\n    async getDeviceMetadata(username) {\n        const authKeys = await this.getAuthKeys(username);\n        const deviceKey = await this.getKeyValueStorage().getItem(authKeys.deviceKey);\n        const deviceGroupKey = await this.getKeyValueStorage().getItem(authKeys.deviceGroupKey);\n        const randomPassword = await this.getKeyValueStorage().getItem(authKeys.randomPasswordKey);\n        return randomPassword && deviceGroupKey && deviceKey\n            ? {\n                deviceKey,\n                deviceGroupKey,\n                randomPassword,\n            }\n            : null;\n    }\n    async clearDeviceMetadata(username) {\n        const authKeys = await this.getAuthKeys(username);\n        await Promise.all([\n            this.getKeyValueStorage().removeItem(authKeys.deviceKey),\n            this.getKeyValueStorage().removeItem(authKeys.deviceGroupKey),\n            this.getKeyValueStorage().removeItem(authKeys.randomPasswordKey),\n        ]);\n    }\n    async getAuthKeys(username) {\n        assertTokenProviderConfig(this.authConfig?.Cognito);\n        const lastAuthUser = username ?? (await this.getLastAuthUser());\n        return createKeysForAuthStorage(AUTH_KEY_PREFIX, `${this.authConfig.Cognito.userPoolClientId}.${lastAuthUser}`);\n    }\n    getLastAuthUserKey() {\n        assertTokenProviderConfig(this.authConfig?.Cognito);\n        const identifier = this.authConfig.Cognito.userPoolClientId;\n        return `${AUTH_KEY_PREFIX}.${identifier}.LastAuthUser`;\n    }\n    async getLastAuthUser() {\n        const lastAuthUser = (await this.getKeyValueStorage().getItem(this.getLastAuthUserKey())) ??\n            'username';\n        return lastAuthUser;\n    }\n    async setOAuthMetadata(metadata) {\n        const { oauthMetadata: oauthMetadataKey } = await this.getAuthKeys();\n        await this.getKeyValueStorage().setItem(oauthMetadataKey, JSON.stringify(metadata));\n    }\n    async getOAuthMetadata() {\n        const { oauthMetadata: oauthMetadataKey } = await this.getAuthKeys();\n        const oauthMetadata = await this.getKeyValueStorage().getItem(oauthMetadataKey);\n        return oauthMetadata && JSON.parse(oauthMetadata);\n    }\n}\nexport const createKeysForAuthStorage = (provider, identifier) => {\n    return getAuthStorageKeys(AuthTokenStorageKeys)(`${provider}`, identifier);\n};\nexport function getAuthStorageKeys(authKeys) {\n    const keys = Object.values({ ...authKeys });\n    return (prefix, identifier) => keys.reduce((acc, authKey) => ({\n        ...acc,\n        [authKey]: `${prefix}.${identifier}.${authKey}`,\n    }), {});\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { assertTokenProviderConfig } from '@aws-amplify/core/internals/utils';\nimport { getAuthStorageKeys } from '../tokenProvider/TokenStore';\nimport { OAuthStorageKeys } from './types';\nconst V5_HOSTED_UI_KEY = 'amplify-signin-with-hostedUI';\nconst name = 'CognitoIdentityServiceProvider';\nexport class DefaultOAuthStore {\n    constructor(keyValueStorage) {\n        this.keyValueStorage = keyValueStorage;\n    }\n    async clearOAuthInflightData() {\n        assertTokenProviderConfig(this.cognitoConfig);\n        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);\n        await Promise.all([\n            this.keyValueStorage.removeItem(authKeys.inflightOAuth),\n            this.keyValueStorage.removeItem(authKeys.oauthPKCE),\n            this.keyValueStorage.removeItem(authKeys.oauthState),\n        ]);\n    }\n    async clearOAuthData() {\n        assertTokenProviderConfig(this.cognitoConfig);\n        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);\n        await this.clearOAuthInflightData();\n        await this.keyValueStorage.removeItem(V5_HOSTED_UI_KEY); // remove in case a customer migrated an App from v5 to v6\n        return this.keyValueStorage.removeItem(authKeys.oauthSignIn);\n    }\n    loadOAuthState() {\n        assertTokenProviderConfig(this.cognitoConfig);\n        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);\n        return this.keyValueStorage.getItem(authKeys.oauthState);\n    }\n    storeOAuthState(state) {\n        assertTokenProviderConfig(this.cognitoConfig);\n        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);\n        return this.keyValueStorage.setItem(authKeys.oauthState, state);\n    }\n    loadPKCE() {\n        assertTokenProviderConfig(this.cognitoConfig);\n        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);\n        return this.keyValueStorage.getItem(authKeys.oauthPKCE);\n    }\n    storePKCE(pkce) {\n        assertTokenProviderConfig(this.cognitoConfig);\n        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);\n        return this.keyValueStorage.setItem(authKeys.oauthPKCE, pkce);\n    }\n    setAuthConfig(authConfigParam) {\n        this.cognitoConfig = authConfigParam;\n    }\n    async loadOAuthInFlight() {\n        assertTokenProviderConfig(this.cognitoConfig);\n        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);\n        return ((await this.keyValueStorage.getItem(authKeys.inflightOAuth)) === 'true');\n    }\n    async storeOAuthInFlight(inflight) {\n        assertTokenProviderConfig(this.cognitoConfig);\n        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);\n        await this.keyValueStorage.setItem(authKeys.inflightOAuth, `${inflight}`);\n    }\n    async loadOAuthSignIn() {\n        assertTokenProviderConfig(this.cognitoConfig);\n        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);\n        const isLegacyHostedUISignIn = await this.keyValueStorage.getItem(V5_HOSTED_UI_KEY);\n        const [isOAuthSignIn, preferPrivateSession] = (await this.keyValueStorage.getItem(authKeys.oauthSignIn))?.split(',') ??\n            [];\n        return {\n            isOAuthSignIn: isOAuthSignIn === 'true' || isLegacyHostedUISignIn === 'true',\n            preferPrivateSession: preferPrivateSession === 'true',\n        };\n    }\n    async storeOAuthSignIn(oauthSignIn, preferPrivateSession = false) {\n        assertTokenProviderConfig(this.cognitoConfig);\n        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);\n        await this.keyValueStorage.setItem(authKeys.oauthSignIn, `${oauthSignIn},${preferPrivateSession}`);\n    }\n}\nconst createKeysForAuthStorage = (provider, identifier) => {\n    return getAuthStorageKeys(OAuthStorageKeys)(provider, identifier);\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { defaultStorage } from '@aws-amplify/core';\nimport { DefaultOAuthStore } from '../signInWithRedirectStore';\nexport const oAuthStore = new DefaultOAuthStore(defaultStorage);\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst inflightPromises = [];\nexport const addInflightPromise = (resolver) => {\n    inflightPromises.push(resolver);\n};\nexport const resolveAndClearInflightPromises = () => {\n    while (inflightPromises.length) {\n        inflightPromises.pop()?.();\n    }\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Hub, } from '@aws-amplify/core';\nimport { AMPLIFY_SYMBOL, AmplifyErrorCode, assertTokenProviderConfig, isBrowser, isTokenExpired, } from '@aws-amplify/core/internals/utils';\nimport { assertServiceError } from '../../../errors/utils/assertServiceError';\nimport { AuthError } from '../../../errors/AuthError';\nimport { oAuthStore } from '../utils/oauth/oAuthStore';\nimport { addInflightPromise } from '../utils/oauth/inflightPromise';\nexport class TokenOrchestrator {\n    constructor() {\n        this.waitForInflightOAuth = isBrowser()\n            ? async () => {\n                if (!(await oAuthStore.loadOAuthInFlight())) {\n                    return;\n                }\n                if (this.inflightPromise) {\n                    return this.inflightPromise;\n                }\n                // when there is valid oauth config and there is an inflight oauth flow, try\n                // to block async calls that require fetching tokens before the oauth flow completes\n                // e.g. getCurrentUser, fetchAuthSession etc.\n                this.inflightPromise = new Promise((resolve, _reject) => {\n                    addInflightPromise(resolve);\n                });\n                return this.inflightPromise;\n            }\n            : async () => {\n                // no-op for non-browser environments\n            };\n    }\n    setAuthConfig(authConfig) {\n        oAuthStore.setAuthConfig(authConfig.Cognito);\n        this.authConfig = authConfig;\n    }\n    setTokenRefresher(tokenRefresher) {\n        this.tokenRefresher = tokenRefresher;\n    }\n    setAuthTokenStore(tokenStore) {\n        this.tokenStore = tokenStore;\n    }\n    getTokenStore() {\n        if (!this.tokenStore) {\n            throw new AuthError({\n                name: 'EmptyTokenStoreException',\n                message: 'TokenStore not set',\n            });\n        }\n        return this.tokenStore;\n    }\n    getTokenRefresher() {\n        if (!this.tokenRefresher) {\n            throw new AuthError({\n                name: 'EmptyTokenRefresherException',\n                message: 'TokenRefresher not set',\n            });\n        }\n        return this.tokenRefresher;\n    }\n    async getTokens(options) {\n        let tokens;\n        try {\n            assertTokenProviderConfig(this.authConfig?.Cognito);\n        }\n        catch (_err) {\n            // Token provider not configured\n            return null;\n        }\n        await this.waitForInflightOAuth();\n        this.inflightPromise = undefined;\n        tokens = await this.getTokenStore().loadTokens();\n        const username = await this.getTokenStore().getLastAuthUser();\n        if (tokens === null) {\n            return null;\n        }\n        const idTokenExpired = !!tokens?.idToken &&\n            isTokenExpired({\n                expiresAt: (tokens.idToken?.payload?.exp ?? 0) * 1000,\n                clockDrift: tokens.clockDrift ?? 0,\n            });\n        const accessTokenExpired = isTokenExpired({\n            expiresAt: (tokens.accessToken?.payload?.exp ?? 0) * 1000,\n            clockDrift: tokens.clockDrift ?? 0,\n        });\n        if (options?.forceRefresh || idTokenExpired || accessTokenExpired) {\n            tokens = await this.refreshTokens({\n                tokens,\n                username,\n            });\n            if (tokens === null) {\n                return null;\n            }\n        }\n        return {\n            accessToken: tokens?.accessToken,\n            idToken: tokens?.idToken,\n            signInDetails: tokens?.signInDetails,\n        };\n    }\n    async refreshTokens({ tokens, username, }) {\n        try {\n            const { signInDetails } = tokens;\n            const newTokens = await this.getTokenRefresher()({\n                tokens,\n                authConfig: this.authConfig,\n                username,\n            });\n            newTokens.signInDetails = signInDetails;\n            await this.setTokens({ tokens: newTokens });\n            Hub.dispatch('auth', { event: 'tokenRefresh' }, 'Auth', AMPLIFY_SYMBOL);\n            return newTokens;\n        }\n        catch (err) {\n            return this.handleErrors(err);\n        }\n    }\n    handleErrors(err) {\n        assertServiceError(err);\n        if (err.name !== AmplifyErrorCode.NetworkError) {\n            // TODO(v6): Check errors on client\n            this.clearTokens();\n        }\n        Hub.dispatch('auth', {\n            event: 'tokenRefresh_failure',\n            data: { error: err },\n        }, 'Auth', AMPLIFY_SYMBOL);\n        if (err.name.startsWith('NotAuthorizedException')) {\n            return null;\n        }\n        throw err;\n    }\n    async setTokens({ tokens }) {\n        return this.getTokenStore().storeTokens(tokens);\n    }\n    async clearTokens() {\n        return this.getTokenStore().clearTokens();\n    }\n    getDeviceMetadata(username) {\n        return this.getTokenStore().getDeviceMetadata(username);\n    }\n    clearDeviceMetadata(username) {\n        return this.getTokenStore().clearDeviceMetadata(username);\n    }\n    setOAuthMetadata(metadata) {\n        return this.getTokenStore().setOAuthMetadata(metadata);\n    }\n    getOAuthMetadata() {\n        return this.getTokenStore().getOAuthMetadata();\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { defaultStorage, } from '@aws-amplify/core';\nimport { refreshAuthTokens } from '../utils/refreshAuthTokens';\nimport { DefaultTokenStore } from './TokenStore';\nimport { TokenOrchestrator } from './TokenOrchestrator';\nexport class CognitoUserPoolsTokenProvider {\n    constructor() {\n        this.authTokenStore = new DefaultTokenStore();\n        this.authTokenStore.setKeyValueStorage(defaultStorage);\n        this.tokenOrchestrator = new TokenOrchestrator();\n        this.tokenOrchestrator.setAuthTokenStore(this.authTokenStore);\n        this.tokenOrchestrator.setTokenRefresher(refreshAuthTokens);\n    }\n    getTokens({ forceRefresh } = { forceRefresh: false }) {\n        return this.tokenOrchestrator.getTokens({ forceRefresh });\n    }\n    setKeyValueStorage(keyValueStorage) {\n        this.authTokenStore.setKeyValueStorage(keyValueStorage);\n    }\n    setAuthConfig(authConfig) {\n        this.authTokenStore.setAuthConfig(authConfig);\n        this.tokenOrchestrator.setAuthConfig(authConfig);\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { CognitoUserPoolsTokenProvider } from './CognitoUserPoolsTokenProvider';\n/**\n * The default provider for the JWT access token and ID token issued from the configured Cognito user pool. It manages\n * the refresh and storage of the tokens. It stores the tokens in `window.localStorage` if available, and falls back to\n * in-memory storage if not.\n */\nexport const cognitoUserPoolsTokenProvider = new CognitoUserPoolsTokenProvider();\nexport const { tokenOrchestrator } = cognitoUserPoolsTokenProvider;\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AmplifyError, decodeJWT } from '@aws-amplify/core/internals/utils';\nimport { tokenOrchestrator } from './tokenProvider';\nexport async function cacheCognitoTokens(AuthenticationResult) {\n    if (AuthenticationResult.AccessToken) {\n        const accessToken = decodeJWT(AuthenticationResult.AccessToken);\n        const accessTokenIssuedAtInMillis = (accessToken.payload.iat || 0) * 1000;\n        const currentTime = new Date().getTime();\n        const clockDrift = accessTokenIssuedAtInMillis > 0\n            ? accessTokenIssuedAtInMillis - currentTime\n            : 0;\n        let idToken;\n        let refreshToken;\n        let deviceMetadata;\n        if (AuthenticationResult.RefreshToken) {\n            refreshToken = AuthenticationResult.RefreshToken;\n        }\n        if (AuthenticationResult.IdToken) {\n            idToken = decodeJWT(AuthenticationResult.IdToken);\n        }\n        if (AuthenticationResult?.NewDeviceMetadata) {\n            deviceMetadata = AuthenticationResult.NewDeviceMetadata;\n        }\n        const tokens = {\n            accessToken,\n            idToken,\n            refreshToken,\n            clockDrift,\n            deviceMetadata,\n            username: AuthenticationResult.username,\n        };\n        if (AuthenticationResult?.signInDetails) {\n            tokens.signInDetails = AuthenticationResult.signInDetails;\n        }\n        await tokenOrchestrator.setTokens({\n            tokens,\n        });\n    }\n    else {\n        // This would be a service error\n        throw new AmplifyError({\n            message: 'Invalid tokens',\n            name: 'InvalidTokens',\n            recoverySuggestion: 'Check Cognito UserPool settings',\n        });\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Hub } from '@aws-amplify/core';\nimport { AMPLIFY_SYMBOL } from '@aws-amplify/core/internals/utils';\nimport { getCurrentUser } from '../apis/getCurrentUser';\nimport { UNEXPECTED_SIGN_IN_INTERRUPTION_EXCEPTION, USER_UNAUTHENTICATED_EXCEPTION, } from '../../../errors/constants';\nimport { AuthError } from '../../../errors/AuthError';\nexport const ERROR_MESSAGE = 'Unable to get user session following successful sign-in.';\nexport const dispatchSignedInHubEvent = async () => {\n    try {\n        Hub.dispatch('auth', {\n            event: 'signedIn',\n            data: await getCurrentUser(),\n        }, 'Auth', AMPLIFY_SYMBOL);\n    }\n    catch (error) {\n        if (error.name === USER_UNAUTHENTICATED_EXCEPTION) {\n            throw new AuthError({\n                name: UNEXPECTED_SIGN_IN_INTERRUPTION_EXCEPTION,\n                message: ERROR_MESSAGE,\n                recoverySuggestion: 'This most likely is due to auth tokens not being persisted. If you are using cookie store, please ensure cookies can be correctly set from your server.',\n            });\n        }\n        throw error;\n    }\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// TODO: delete this module when the Auth class is removed.\nimport { ConsoleLogger } from '@aws-amplify/core';\nimport { AuthErrorStrings } from './common/AuthErrorStrings';\nconst logger = new ConsoleLogger('AuthError');\nexport class AuthError extends Error {\n    constructor(type) {\n        const { message, log } = authErrorMessages[type];\n        super(message);\n        // Hack for making the custom error class work when transpiled to es5\n        // TODO: Delete the following 2 lines after we change the build target to >= es2015\n        this.constructor = AuthError;\n        Object.setPrototypeOf(this, AuthError.prototype);\n        this.name = 'AuthError';\n        this.log = log || message;\n        logger.error(this.log);\n    }\n}\nexport class NoUserPoolError extends AuthError {\n    constructor(type) {\n        super(type);\n        // Hack for making the custom error class work when transpiled to es5\n        // TODO: Delete the following 2 lines after we change the build target to >= es2015\n        this.constructor = NoUserPoolError;\n        Object.setPrototypeOf(this, NoUserPoolError.prototype);\n        this.name = 'NoUserPoolError';\n    }\n}\nexport const authErrorMessages = {\n    oauthSignInError: {\n        message: AuthErrorStrings.OAUTH_ERROR,\n        log: 'Make sure Cognito Hosted UI has been configured correctly',\n    },\n    noConfig: {\n        message: AuthErrorStrings.DEFAULT_MSG,\n        log: `\n            Error: Amplify has not been configured correctly.\n            This error is typically caused by one of the following scenarios:\n\n            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point\n                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information\n            \n            2. There might be multiple conflicting versions of amplify packages in your node_modules.\n\t\t\t\tRefer to our docs site for help upgrading Amplify packages (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js)\n        `,\n    },\n    missingAuthConfig: {\n        message: AuthErrorStrings.DEFAULT_MSG,\n        log: `\n            Error: Amplify has not been configured correctly. \n            The configuration object is missing required auth properties.\n            This error is typically caused by one of the following scenarios:\n\n            1. Did you run \\`amplify push\\` after adding auth via \\`amplify add auth\\`?\n                See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information\n\n            2. This could also be caused by multiple conflicting versions of amplify packages, see (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js) for help upgrading Amplify packages.\n        `,\n    },\n    emptyUsername: {\n        message: AuthErrorStrings.EMPTY_USERNAME,\n    },\n    // TODO: should include a list of valid sign-in types\n    invalidUsername: {\n        message: AuthErrorStrings.INVALID_USERNAME,\n    },\n    emptyPassword: {\n        message: AuthErrorStrings.EMPTY_PASSWORD,\n    },\n    emptyCode: {\n        message: AuthErrorStrings.EMPTY_CODE,\n    },\n    signUpError: {\n        message: AuthErrorStrings.SIGN_UP_ERROR,\n        log: 'The first parameter should either be non-null string or object',\n    },\n    noMFA: {\n        message: AuthErrorStrings.NO_MFA,\n    },\n    invalidMFA: {\n        message: AuthErrorStrings.INVALID_MFA,\n    },\n    emptyChallengeResponse: {\n        message: AuthErrorStrings.EMPTY_CHALLENGE,\n    },\n    noUserSession: {\n        message: AuthErrorStrings.NO_USER_SESSION,\n    },\n    deviceConfig: {\n        message: AuthErrorStrings.DEVICE_CONFIG,\n    },\n    networkError: {\n        message: AuthErrorStrings.NETWORK_ERROR,\n    },\n    autoSignInError: {\n        message: AuthErrorStrings.AUTOSIGNIN_ERROR,\n    },\n    default: {\n        message: AuthErrorStrings.DEFAULT_MSG,\n    },\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { authErrorMessages } from '../../../../Errors';\nimport { AuthErrorCodes } from '../../../../common/AuthErrorStrings';\nimport { AuthError } from '../../../../errors/AuthError';\nexport const createOAuthError = (message, recoverySuggestion) => new AuthError({\n    message: message ?? 'An error has occurred during the oauth process.',\n    name: AuthErrorCodes.OAuthSignInError,\n    recoverySuggestion: recoverySuggestion ?? authErrorMessages.oauthSignInError.log,\n});\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport var AuthErrorTypes;\n(function (AuthErrorTypes) {\n    AuthErrorTypes[\"NoConfig\"] = \"noConfig\";\n    AuthErrorTypes[\"MissingAuthConfig\"] = \"missingAuthConfig\";\n    AuthErrorTypes[\"EmptyUsername\"] = \"emptyUsername\";\n    AuthErrorTypes[\"InvalidUsername\"] = \"invalidUsername\";\n    AuthErrorTypes[\"EmptyPassword\"] = \"emptyPassword\";\n    AuthErrorTypes[\"EmptyCode\"] = \"emptyCode\";\n    AuthErrorTypes[\"SignUpError\"] = \"signUpError\";\n    AuthErrorTypes[\"NoMFA\"] = \"noMFA\";\n    AuthErrorTypes[\"InvalidMFA\"] = \"invalidMFA\";\n    AuthErrorTypes[\"EmptyChallengeResponse\"] = \"emptyChallengeResponse\";\n    AuthErrorTypes[\"NoUserSession\"] = \"noUserSession\";\n    AuthErrorTypes[\"Default\"] = \"default\";\n    AuthErrorTypes[\"DeviceConfig\"] = \"deviceConfig\";\n    AuthErrorTypes[\"NetworkError\"] = \"networkError\";\n    AuthErrorTypes[\"AutoSignInError\"] = \"autoSignInError\";\n    AuthErrorTypes[\"OAuthSignInError\"] = \"oauthSignInError\";\n})(AuthErrorTypes || (AuthErrorTypes = {}));\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AuthError } from '../../../../errors/AuthError';\nimport { AuthErrorTypes } from '../../../../types/Auth';\nimport { oAuthStore } from './oAuthStore';\nexport const flowCancelledMessage = '`signInWithRedirect` has been canceled.';\nexport const validationFailedMessage = 'An error occurred while validating the state.';\nexport const validationRecoverySuggestion = 'Try to initiate an OAuth flow from Amplify';\nexport const validateState = async (state) => {\n    const savedState = await oAuthStore.loadOAuthState();\n    // This is because savedState only exists if the flow was initiated by Amplify\n    const validatedState = state === savedState ? savedState : undefined;\n    if (!validatedState) {\n        throw new AuthError({\n            name: AuthErrorTypes.OAuthSignInError,\n            message: state === null ? flowCancelledMessage : validationFailedMessage,\n            recoverySuggestion: state === null ? undefined : validationRecoverySuggestion,\n        });\n    }\n    return validatedState;\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AMPLIFY_SYMBOL, AmplifyUrl, USER_AGENT_HEADER, urlSafeDecode, } from '@aws-amplify/core/internals/utils';\nimport { Hub, decodeJWT } from '@aws-amplify/core';\nimport { cacheCognitoTokens } from '../../tokenProvider/cacheTokens';\nimport { dispatchSignedInHubEvent } from '../dispatchSignedInHubEvent';\nimport { tokenOrchestrator } from '../../tokenProvider';\nimport { createOAuthError } from './createOAuthError';\nimport { resolveAndClearInflightPromises } from './inflightPromise';\nimport { validateState } from './validateState';\nimport { oAuthStore } from './oAuthStore';\nexport const completeOAuthFlow = async ({ currentUrl, userAgentValue, clientId, redirectUri, responseType, domain, preferPrivateSession, }) => {\n    const urlParams = new AmplifyUrl(currentUrl);\n    const error = urlParams.searchParams.get('error');\n    const errorMessage = urlParams.searchParams.get('error_description');\n    if (error) {\n        throw createOAuthError(errorMessage ?? error);\n    }\n    if (responseType === 'code') {\n        return handleCodeFlow({\n            currentUrl,\n            userAgentValue,\n            clientId,\n            redirectUri,\n            domain,\n            preferPrivateSession,\n        });\n    }\n    return handleImplicitFlow({\n        currentUrl,\n        redirectUri,\n        preferPrivateSession,\n    });\n};\nconst handleCodeFlow = async ({ currentUrl, userAgentValue, clientId, redirectUri, domain, preferPrivateSession, }) => {\n    /* Convert URL into an object with parameters as keys\n{ redirect_uri: 'http://localhost:3000/', response_type: 'code', ...} */\n    const url = new AmplifyUrl(currentUrl);\n    const code = url.searchParams.get('code');\n    const state = url.searchParams.get('state');\n    // if `code` or `state` is not presented in the redirect url, most likely\n    // that the end user cancelled the inflight oauth flow by:\n    // 1. clicking the back button of browser\n    // 2. closing the provider hosted UI page and coming back to the app\n    if (!code || !state) {\n        throw createOAuthError('User cancelled OAuth flow.');\n    }\n    // may throw error is being caught in attemptCompleteOAuthFlow.ts\n    const validatedState = await validateState(state);\n    const oAuthTokenEndpoint = 'https://' + domain + '/oauth2/token';\n    // TODO(v6): check hub events\n    // dispatchAuthEvent(\n    // \t'codeFlow',\n    // \t{},\n    // \t`Retrieving tokens from ${oAuthTokenEndpoint}`\n    // );\n    const codeVerifier = await oAuthStore.loadPKCE();\n    const oAuthTokenBody = {\n        grant_type: 'authorization_code',\n        code,\n        client_id: clientId,\n        redirect_uri: redirectUri,\n        ...(codeVerifier ? { code_verifier: codeVerifier } : {}),\n    };\n    const body = Object.entries(oAuthTokenBody)\n        .map(([k, v]) => `${encodeURIComponent(k)}=${encodeURIComponent(v)}`)\n        .join('&');\n    const { access_token, refresh_token: refreshToken, id_token, error, error_message: errorMessage, token_type, expires_in, } = await (await fetch(oAuthTokenEndpoint, {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/x-www-form-urlencoded',\n            [USER_AGENT_HEADER]: userAgentValue,\n        },\n        body,\n    })).json();\n    if (error) {\n        // error is being caught in attemptCompleteOAuthFlow.ts\n        throw createOAuthError(errorMessage ?? error);\n    }\n    const username = (access_token && decodeJWT(access_token).payload.username) ?? 'username';\n    await cacheCognitoTokens({\n        username,\n        AccessToken: access_token,\n        IdToken: id_token,\n        RefreshToken: refreshToken,\n        TokenType: token_type,\n        ExpiresIn: expires_in,\n    });\n    return completeFlow({\n        redirectUri,\n        state: validatedState,\n        preferPrivateSession,\n    });\n};\nconst handleImplicitFlow = async ({ currentUrl, redirectUri, preferPrivateSession, }) => {\n    // hash is `null` if `#` doesn't exist on URL\n    const url = new AmplifyUrl(currentUrl);\n    const { id_token, access_token, state, token_type, expires_in, error_description, error, } = (url.hash ?? '#')\n        .substring(1) // Remove # from returned code\n        .split('&')\n        .map(pairings => pairings.split('='))\n        .reduce((accum, [k, v]) => ({ ...accum, [k]: v }), {\n        id_token: undefined,\n        access_token: undefined,\n        state: undefined,\n        token_type: undefined,\n        expires_in: undefined,\n        error_description: undefined,\n        error: undefined,\n    });\n    if (error) {\n        throw createOAuthError(error_description ?? error);\n    }\n    if (!access_token) {\n        // error is being caught in attemptCompleteOAuthFlow.ts\n        throw createOAuthError('No access token returned from OAuth flow.');\n    }\n    const validatedState = await validateState(state);\n    const username = (access_token && decodeJWT(access_token).payload.username) ?? 'username';\n    await cacheCognitoTokens({\n        username,\n        AccessToken: access_token,\n        IdToken: id_token,\n        TokenType: token_type,\n        ExpiresIn: expires_in,\n    });\n    return completeFlow({\n        redirectUri,\n        state: validatedState,\n        preferPrivateSession,\n    });\n};\nconst completeFlow = async ({ redirectUri, state, preferPrivateSession, }) => {\n    await tokenOrchestrator.setOAuthMetadata({\n        oauthSignIn: true,\n    });\n    await oAuthStore.clearOAuthData();\n    await oAuthStore.storeOAuthSignIn(true, preferPrivateSession);\n    // this should be called before any call that involves `fetchAuthSession`\n    // e.g. `getCurrentUser()` below, so it allows every inflight async calls to\n    //  `fetchAuthSession` can be resolved\n    resolveAndClearInflightPromises();\n    // clear history before sending out final Hub events\n    clearHistory(redirectUri);\n    if (isCustomState(state)) {\n        Hub.dispatch('auth', {\n            event: 'customOAuthState',\n            data: urlSafeDecode(getCustomState(state)),\n        }, 'Auth', AMPLIFY_SYMBOL);\n    }\n    Hub.dispatch('auth', { event: 'signInWithRedirect' }, 'Auth', AMPLIFY_SYMBOL);\n    await dispatchSignedInHubEvent();\n};\nconst isCustomState = (state) => {\n    return /-/.test(state);\n};\nconst getCustomState = (state) => {\n    return state.split('-').splice(1).join('-');\n};\nconst clearHistory = (redirectUri) => {\n    if (typeof window !== 'undefined' && typeof window.history !== 'undefined') {\n        window.history.replaceState(window.history.state, '', redirectUri);\n    }\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { invalidOriginException, invalidPreferredRedirectUrlException, invalidRedirectException, } from '../../../../errors/constants';\n/** @internal */\nexport function getRedirectUrl(redirects, preferredRedirectUrl) {\n    if (preferredRedirectUrl) {\n        const redirectUrl = redirects?.find(redirect => redirect === preferredRedirectUrl);\n        if (!redirectUrl) {\n            throw invalidPreferredRedirectUrlException;\n        }\n        return redirectUrl;\n    }\n    else {\n        const redirectUrlFromTheSameOrigin = redirects?.find(isSameOriginAndPathName) ??\n            redirects?.find(isTheSameDomain);\n        const redirectUrlFromDifferentOrigin = redirects?.find(isHttps) ?? redirects?.find(isHttp);\n        if (redirectUrlFromTheSameOrigin) {\n            return redirectUrlFromTheSameOrigin;\n        }\n        else if (redirectUrlFromDifferentOrigin) {\n            throw invalidOriginException;\n        }\n        throw invalidRedirectException;\n    }\n}\n// origin + pathname => https://example.com/app\nconst isSameOriginAndPathName = (redirect) => redirect.startsWith(\n// eslint-disable-next-line no-constant-binary-expression\nString(window.location.origin + window.location.pathname ?? '/'));\n// domain => outlook.live.com, github.com\nconst isTheSameDomain = (redirect) => redirect.includes(String(window.location.hostname));\nconst isHttp = (redirect) => redirect.startsWith('http://');\nconst isHttps = (redirect) => redirect.startsWith('https://');\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Hub } from '@aws-amplify/core';\nimport { AMPLIFY_SYMBOL } from '@aws-amplify/core/internals/utils';\nimport { oAuthStore } from './oAuthStore';\nimport { resolveAndClearInflightPromises } from './inflightPromise';\nexport const handleFailure = async (error) => {\n    resolveAndClearInflightPromises();\n    await oAuthStore.clearOAuthInflightData();\n    Hub.dispatch('auth', { event: 'signInWithRedirect_failure', data: { error } }, 'Auth', AMPLIFY_SYMBOL);\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AuthAction, assertOAuthConfig, assertTokenProviderConfig, } from '@aws-amplify/core/internals/utils';\nimport { getAuthUserAgentValue } from '../../../../utils';\nimport { oAuthStore } from './oAuthStore';\nimport { completeOAuthFlow } from './completeOAuthFlow';\nimport { getRedirectUrl } from './getRedirectUrl';\nimport { handleFailure } from './handleFailure';\nexport const attemptCompleteOAuthFlow = async (authConfig) => {\n    try {\n        assertTokenProviderConfig(authConfig);\n        assertOAuthConfig(authConfig);\n        oAuthStore.setAuthConfig(authConfig);\n    }\n    catch (_) {\n        // no-op\n        // This should not happen as Amplify singleton checks the oauth config key\n        // unless the oauth config object doesn't contain required properties\n        return;\n    }\n    // No inflight OAuth\n    if (!(await oAuthStore.loadOAuthInFlight())) {\n        return;\n    }\n    try {\n        const currentUrl = window.location.href;\n        const { loginWith, userPoolClientId } = authConfig;\n        const { domain, redirectSignIn, responseType } = loginWith.oauth;\n        const redirectUri = getRedirectUrl(redirectSignIn);\n        await completeOAuthFlow({\n            currentUrl,\n            clientId: userPoolClientId,\n            domain,\n            redirectUri,\n            responseType,\n            userAgentValue: getAuthUserAgentValue(AuthAction.SignInWithRedirect),\n        });\n    }\n    catch (err) {\n        await handleFailure(err);\n    }\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Amplify } from '@aws-amplify/core';\nimport { ADD_OAUTH_LISTENER, isBrowser, } from '@aws-amplify/core/internals/utils';\nimport { attemptCompleteOAuthFlow } from './attemptCompleteOAuthFlow';\n// attach the side effect for handling the completion of an inflight oauth flow\n// this side effect works only on Web\nisBrowser() &&\n    (() => {\n        // add the listener to the singleton for triggering\n        Amplify[ADD_OAUTH_LISTENER](attemptCompleteOAuthFlow);\n    })();\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport const IdentityIdStorageKeys = {\n    identityId: 'identityId',\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { ConsoleLogger, } from '@aws-amplify/core';\nimport { assertIdentityPoolIdConfig } from '@aws-amplify/core/internals/utils';\nimport { getAuthStorageKeys } from '../tokenProvider/TokenStore';\nimport { IdentityIdStorageKeys } from './types';\nconst logger = new ConsoleLogger('DefaultIdentityIdStore');\nexport class DefaultIdentityIdStore {\n    setAuthConfig(authConfigParam) {\n        assertIdentityPoolIdConfig(authConfigParam.Cognito);\n        this.authConfig = authConfigParam;\n        this._authKeys = createKeysForAuthStorage('Cognito', authConfigParam.Cognito.identityPoolId);\n    }\n    constructor(keyValueStorage) {\n        this._authKeys = {};\n        this._hasGuestIdentityId = false;\n        this.keyValueStorage = keyValueStorage;\n    }\n    async loadIdentityId() {\n        assertIdentityPoolIdConfig(this.authConfig?.Cognito);\n        try {\n            if (this._primaryIdentityId) {\n                return {\n                    id: this._primaryIdentityId,\n                    type: 'primary',\n                };\n            }\n            else {\n                const storedIdentityId = await this.keyValueStorage.getItem(this._authKeys.identityId);\n                if (storedIdentityId) {\n                    this._hasGuestIdentityId = true;\n                    return {\n                        id: storedIdentityId,\n                        type: 'guest',\n                    };\n                }\n                return null;\n            }\n        }\n        catch (err) {\n            logger.log('Error getting stored IdentityId.', err);\n            return null;\n        }\n    }\n    async storeIdentityId(identity) {\n        assertIdentityPoolIdConfig(this.authConfig?.Cognito);\n        if (identity.type === 'guest') {\n            this.keyValueStorage.setItem(this._authKeys.identityId, identity.id);\n            // Clear in-memory storage of primary identityId\n            this._primaryIdentityId = undefined;\n            this._hasGuestIdentityId = true;\n        }\n        else {\n            this._primaryIdentityId = identity.id;\n            // Clear locally stored guest id\n            if (this._hasGuestIdentityId) {\n                this.keyValueStorage.removeItem(this._authKeys.identityId);\n                this._hasGuestIdentityId = false;\n            }\n        }\n    }\n    async clearIdentityId() {\n        this._primaryIdentityId = undefined;\n        await this.keyValueStorage.removeItem(this._authKeys.identityId);\n    }\n}\nconst createKeysForAuthStorage = (provider, identifier) => {\n    return getAuthStorageKeys(IdentityIdStorageKeys)(`com.amplify.${provider}`, identifier);\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { decodeJWT } from '@aws-amplify/core/internals/utils';\nimport { AuthError } from '../../../errors/AuthError';\nexport function formLoginsMap(idToken) {\n    const issuer = decodeJWT(idToken).payload.iss;\n    const res = {};\n    if (!issuer) {\n        throw new AuthError({\n            name: 'InvalidIdTokenException',\n            message: 'Invalid Idtoken.',\n        });\n    }\n    const domainName = issuer.replace(/(^\\w+:|^)\\/\\//, '');\n    res[domainName] = idToken;\n    return res;\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { getId } from '@aws-amplify/core';\nimport { AuthError } from '../../../errors/AuthError';\nimport { assertServiceError } from '../../../errors/utils/assertServiceError';\nimport { getRegionFromIdentityPoolId } from '../../../foundation/parsers';\nimport { formLoginsMap } from './utils';\n/**\n * Provides a Cognito identityId\n *\n * @param tokens - The AuthTokens received after SignIn\n * @returns string\n * @throws configuration exceptions: `InvalidIdentityPoolIdException`\n *  - Auth errors that may arise from misconfiguration.\n * @throws service exceptions: {@link GetIdException }\n */\nexport async function cognitoIdentityIdProvider({ tokens, authConfig, identityIdStore, }) {\n    identityIdStore.setAuthConfig({ Cognito: authConfig });\n    // will return null only if there is no identityId cached or if there is an error retrieving it\n    const identityId = await identityIdStore.loadIdentityId();\n    if (identityId) {\n        return identityId.id;\n    }\n    const logins = tokens?.idToken\n        ? formLoginsMap(tokens.idToken.toString())\n        : {};\n    const generatedIdentityId = await generateIdentityId(logins, authConfig);\n    // Store generated identityId\n    identityIdStore.storeIdentityId({\n        id: generatedIdentityId,\n        type: tokens ? 'primary' : 'guest',\n    });\n    return generatedIdentityId;\n}\nasync function generateIdentityId(logins, authConfig) {\n    const identityPoolId = authConfig?.identityPoolId;\n    const region = getRegionFromIdentityPoolId(identityPoolId);\n    // IdentityId is absent so get it using IdentityPoolId with Cognito's GetId API\n    let idResult;\n    // for a first-time user, this will return a brand new identity\n    // for a returning user, this will retrieve the previous identity assocaited with the logins\n    try {\n        idResult = (await getId({\n            region,\n        }, {\n            IdentityPoolId: identityPoolId,\n            Logins: logins,\n        })).IdentityId;\n    }\n    catch (e) {\n        assertServiceError(e);\n        throw new AuthError(e);\n    }\n    if (!idResult) {\n        throw new AuthError({\n            name: 'GetIdResponseException',\n            message: 'Received undefined response from getId operation',\n            recoverySuggestion: 'Make sure to pass a valid identityPoolId in the configuration.',\n        });\n    }\n    return idResult;\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { ConsoleLogger, getCredentialsForIdentity, } from '@aws-amplify/core';\nimport { assertIdentityPoolIdConfig, } from '@aws-amplify/core/internals/utils';\nimport { AuthError } from '../../../errors/AuthError';\nimport { assertServiceError } from '../../../errors/utils/assertServiceError';\nimport { getRegionFromIdentityPoolId } from '../../../foundation/parsers';\nimport { assertIdTokenInAuthTokens } from '../utils/types';\nimport { cognitoIdentityIdProvider } from './IdentityIdProvider';\nimport { formLoginsMap } from './utils';\nconst logger = new ConsoleLogger('CognitoCredentialsProvider');\nconst CREDENTIALS_TTL = 50 * 60 * 1000; // 50 min, can be modified on config if required in the future\nexport class CognitoAWSCredentialsAndIdentityIdProvider {\n    constructor(identityIdStore) {\n        this._nextCredentialsRefresh = 0;\n        this._identityIdStore = identityIdStore;\n    }\n    async clearCredentialsAndIdentityId() {\n        logger.debug('Clearing out credentials and identityId');\n        this._credentialsAndIdentityId = undefined;\n        await this._identityIdStore.clearIdentityId();\n    }\n    async clearCredentials() {\n        logger.debug('Clearing out in-memory credentials');\n        this._credentialsAndIdentityId = undefined;\n    }\n    async getCredentialsAndIdentityId(getCredentialsOptions) {\n        const isAuthenticated = getCredentialsOptions.authenticated;\n        const { tokens } = getCredentialsOptions;\n        const { authConfig } = getCredentialsOptions;\n        try {\n            assertIdentityPoolIdConfig(authConfig?.Cognito);\n        }\n        catch {\n            // No identity pool configured, skipping\n            return;\n        }\n        if (!isAuthenticated && !authConfig.Cognito.allowGuestAccess) {\n            // TODO(V6): return partial result like Native platforms\n            return;\n        }\n        const { forceRefresh } = getCredentialsOptions;\n        const tokenHasChanged = this.hasTokenChanged(tokens);\n        const identityId = await cognitoIdentityIdProvider({\n            tokens,\n            authConfig: authConfig.Cognito,\n            identityIdStore: this._identityIdStore,\n        });\n        // Clear cached credentials when forceRefresh is true OR the cache token has changed\n        if (forceRefresh || tokenHasChanged) {\n            this.clearCredentials();\n        }\n        if (!isAuthenticated) {\n            return this.getGuestCredentials(identityId, authConfig.Cognito);\n        }\n        else {\n            assertIdTokenInAuthTokens(tokens);\n            return this.credsForOIDCTokens(authConfig.Cognito, tokens, identityId);\n        }\n    }\n    async getGuestCredentials(identityId, authConfig) {\n        // Return existing in-memory cached credentials only if it exists, is not past it's lifetime and is unauthenticated credentials\n        if (this._credentialsAndIdentityId &&\n            !this.isPastTTL() &&\n            this._credentialsAndIdentityId.isAuthenticatedCreds === false) {\n            logger.info('returning stored credentials as they neither past TTL nor expired.');\n            return this._credentialsAndIdentityId;\n        }\n        // Clear to discard if any authenticated credentials are set and start with a clean slate\n        this.clearCredentials();\n        const region = getRegionFromIdentityPoolId(authConfig.identityPoolId);\n        // use identityId to obtain guest credentials\n        // save credentials in-memory\n        // No logins params should be passed for guest creds:\n        // https://docs.aws.amazon.com/cognitoidentity/latest/APIReference/API_GetCredentialsForIdentity.html\n        let clientResult;\n        try {\n            clientResult = await getCredentialsForIdentity({ region }, {\n                IdentityId: identityId,\n            });\n        }\n        catch (e) {\n            assertServiceError(e);\n            throw new AuthError(e);\n        }\n        if (clientResult?.Credentials?.AccessKeyId &&\n            clientResult?.Credentials?.SecretKey) {\n            this._nextCredentialsRefresh = new Date().getTime() + CREDENTIALS_TTL;\n            const res = {\n                credentials: {\n                    accessKeyId: clientResult.Credentials.AccessKeyId,\n                    secretAccessKey: clientResult.Credentials.SecretKey,\n                    sessionToken: clientResult.Credentials.SessionToken,\n                    expiration: clientResult.Credentials.Expiration,\n                },\n                identityId,\n            };\n            if (clientResult.IdentityId) {\n                res.identityId = clientResult.IdentityId;\n                this._identityIdStore.storeIdentityId({\n                    id: clientResult.IdentityId,\n                    type: 'guest',\n                });\n            }\n            this._credentialsAndIdentityId = {\n                ...res,\n                isAuthenticatedCreds: false,\n            };\n            return res;\n        }\n        else {\n            throw new AuthError({\n                name: 'CredentialsNotFoundException',\n                message: `Cognito did not respond with either Credentials, AccessKeyId or SecretKey.`,\n            });\n        }\n    }\n    async credsForOIDCTokens(authConfig, authTokens, identityId) {\n        if (this._credentialsAndIdentityId &&\n            !this.isPastTTL() &&\n            this._credentialsAndIdentityId.isAuthenticatedCreds === true) {\n            logger.debug('returning stored credentials as they neither past TTL nor expired.');\n            return this._credentialsAndIdentityId;\n        }\n        // Clear to discard if any unauthenticated credentials are set and start with a clean slate\n        this.clearCredentials();\n        const logins = authTokens.idToken\n            ? formLoginsMap(authTokens.idToken.toString())\n            : {};\n        const region = getRegionFromIdentityPoolId(authConfig.identityPoolId);\n        let clientResult;\n        try {\n            clientResult = await getCredentialsForIdentity({ region }, {\n                IdentityId: identityId,\n                Logins: logins,\n            });\n        }\n        catch (e) {\n            assertServiceError(e);\n            throw new AuthError(e);\n        }\n        if (clientResult?.Credentials?.AccessKeyId &&\n            clientResult?.Credentials?.SecretKey) {\n            this._nextCredentialsRefresh = new Date().getTime() + CREDENTIALS_TTL;\n            const res = {\n                credentials: {\n                    accessKeyId: clientResult.Credentials.AccessKeyId,\n                    secretAccessKey: clientResult.Credentials.SecretKey,\n                    sessionToken: clientResult.Credentials.SessionToken,\n                    expiration: clientResult.Credentials.Expiration,\n                },\n                identityId,\n            };\n            if (clientResult.IdentityId) {\n                res.identityId = clientResult.IdentityId;\n                // note: the following call removes guest identityId from the persistent store (localStorage)\n                this._identityIdStore.storeIdentityId({\n                    id: clientResult.IdentityId,\n                    type: 'primary',\n                });\n            }\n            // Store the credentials in-memory along with the expiration\n            this._credentialsAndIdentityId = {\n                ...res,\n                isAuthenticatedCreds: true,\n                associatedIdToken: authTokens.idToken?.toString(),\n            };\n            return res;\n        }\n        else {\n            throw new AuthError({\n                name: 'CredentialsException',\n                message: `Cognito did not respond with either Credentials, AccessKeyId or SecretKey.`,\n            });\n        }\n    }\n    isPastTTL() {\n        return this._nextCredentialsRefresh === undefined\n            ? true\n            : this._nextCredentialsRefresh <= Date.now();\n    }\n    hasTokenChanged(tokens) {\n        return (!!tokens &&\n            !!this._credentialsAndIdentityId?.associatedIdToken &&\n            tokens.idToken?.toString() !==\n                this._credentialsAndIdentityId.associatedIdToken);\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { defaultStorage } from '@aws-amplify/core';\nimport { DefaultIdentityIdStore } from './IdentityIdStore';\nimport { CognitoAWSCredentialsAndIdentityIdProvider } from './credentialsProvider';\n/**\n * Cognito specific implmentation of the CredentialsProvider interface\n * that manages setting and getting of AWS Credentials.\n *\n * @throws configuration expections: `InvalidIdentityPoolIdException`\n *  - Auth errors that may arise from misconfiguration.\n * @throws service expections: {@link GetCredentialsForIdentityException}, {@link GetIdException}\n *\n */\nexport const cognitoCredentialsProvider = new CognitoAWSCredentialsAndIdentityIdProvider(new DefaultIdentityIdStore(defaultStorage));\nexport { CognitoAWSCredentialsAndIdentityIdProvider, DefaultIdentityIdStore };\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Amplify, CookieStorage, defaultStorage, } from '@aws-amplify/core';\nimport { parseAmplifyConfig, } from '@aws-amplify/core/internals/utils';\nimport { CognitoAWSCredentialsAndIdentityIdProvider, DefaultIdentityIdStore, cognitoCredentialsProvider, cognitoUserPoolsTokenProvider, } from './auth/cognito';\nexport const DefaultAmplify = {\n    /**\n     * Configures Amplify with the {@link resourceConfig} and {@link libraryOptions}.\n     *\n     * @param resourceConfig The {@link ResourcesConfig} object that is typically imported from the\n     * `amplifyconfiguration.json` file. It can also be an object literal created inline when calling `Amplify.configure`.\n     * @param libraryOptions The {@link LibraryOptions} additional options for the library.\n     *\n     * @example\n     * import config from './amplifyconfiguration.json';\n     *\n     * Amplify.configure(config);\n     */\n    configure(resourceConfig, libraryOptions) {\n        const resolvedResourceConfig = parseAmplifyConfig(resourceConfig);\n        const cookieBasedKeyValueStorage = new CookieStorage({ sameSite: 'lax' });\n        const resolvedKeyValueStorage = libraryOptions?.ssr\n            ? cookieBasedKeyValueStorage\n            : defaultStorage;\n        const resolvedCredentialsProvider = libraryOptions?.ssr\n            ? new CognitoAWSCredentialsAndIdentityIdProvider(new DefaultIdentityIdStore(cookieBasedKeyValueStorage))\n            : cognitoCredentialsProvider;\n        // If no Auth config is provided, no special handling will be required, configure as is.\n        // Otherwise, we can assume an Auth config is provided from here on.\n        if (!resolvedResourceConfig.Auth) {\n            Amplify.configure(resolvedResourceConfig, libraryOptions);\n            return;\n        }\n        // If Auth options are provided, always just configure as is.\n        // Otherwise, we can assume no Auth libraryOptions were provided from here on.\n        if (libraryOptions?.Auth) {\n            Amplify.configure(resolvedResourceConfig, libraryOptions);\n            return;\n        }\n        // If no Auth libraryOptions were previously configured, then always add default providers.\n        if (!Amplify.libraryOptions.Auth) {\n            cognitoUserPoolsTokenProvider.setAuthConfig(resolvedResourceConfig.Auth);\n            cognitoUserPoolsTokenProvider.setKeyValueStorage(\n            // TODO: allow configure with a public interface\n            resolvedKeyValueStorage);\n            Amplify.configure(resolvedResourceConfig, {\n                ...libraryOptions,\n                Auth: {\n                    tokenProvider: cognitoUserPoolsTokenProvider,\n                    credentialsProvider: resolvedCredentialsProvider,\n                },\n            });\n            return;\n        }\n        // At this point, Auth libraryOptions would have been previously configured and no overriding\n        // Auth options were given, so we should preserve the currently configured Auth libraryOptions.\n        if (libraryOptions) {\n            const authLibraryOptions = Amplify.libraryOptions.Auth;\n            // If ssr is provided through libraryOptions, we should respect the intentional reconfiguration.\n            if (libraryOptions.ssr !== undefined) {\n                cognitoUserPoolsTokenProvider.setKeyValueStorage(\n                // TODO: allow configure with a public interface\n                resolvedKeyValueStorage);\n                authLibraryOptions.credentialsProvider = resolvedCredentialsProvider;\n            }\n            Amplify.configure(resolvedResourceConfig, {\n                Auth: authLibraryOptions,\n                ...libraryOptions,\n            });\n            return;\n        }\n        // Finally, if there were no libraryOptions given at all, we should simply not touch the currently\n        // configured libraryOptions.\n        Amplify.configure(resolvedResourceConfig);\n    },\n    /**\n     * Returns the {@link ResourcesConfig} object passed in as the `resourceConfig` parameter when calling\n     * `Amplify.configure`.\n     *\n     * @returns An {@link ResourcesConfig} object.\n     */\n    getConfig() {\n        return Amplify.getConfig();\n    },\n};\n", "import { subscribeOnGameStarted } from './subscription_2.js';\r\nimport { joinQueue } from './mutation.js'\r\nimport { generateClient } from 'aws-amplify/api';\r\nimport config from './aws-exports';\r\nimport { Amplify } from 'aws-amplify';\r\nimport { v4 } from 'uuid'\r\n\r\n\r\nexport function initializeAWS() {\r\n    Amplify.configure(config);\r\n\r\n    return generateClient();\r\n}\r\n\r\nexport function gameStartedSub(client) {\r\n    subscribeOnGameStarted(client);\r\n}\r\n\r\nexport function queueforGame(client, playerId, playerName, rank) {\r\n    joinQueue(client, playerId, playerName, rank);\r\n}\r\n\r\nexport function uuid() {\r\n    return v4();\r\n}\r\n"],
  "mappings": ";AAAA,IAAM;AAAA;AAAA,EAAgD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAqB/C,SAAS,uBAAuB,QAAQ;AAC3C,SACC,QAAQ;AAAA,IACL,OAAO;AAAA,EACX,CAAC,EACA,UAAU;AAAA,IACP,MAAM,CAAC,EAAE,KAAK,MAAM;AAChB,cAAQ,IAAI,iBAAiB,IAAI,EAAE;AAAA,IACvC;AAAA,IACA,OAAO,CAAC,UAAU,QAAQ,KAAK,KAAK;AAAA,EACxC,CAAC;AAoBL;;;ACPA,IAAM,cAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASpB,eAAsB,UAAU,QAAQ,UAAUA,OAAM,YAAY;AAChE,MAAI;AAEA,YAAQ,IAAI,GAAG,QAAQ,MAAMA,KAAI,MAAM,UAAU,EAAE;AAGnD,YAAQ,IAAI,0BAA0B;AACtC,UAAM,WAAW,MAAM,OAAO,QAAQ;AAAA,MAClC,OAAO;AAAA,MACP,WAAW;AAAA,QACP,QAAQ;AAAA,QACR,YAAYA;AAAA,QACZ,MAAM;AAAA,MACV;AAAA,IACJ,CAAC;AAED,QAAI,SAAS,QAAQ;AACjB,cAAQ,MAAM,mBAAmB,SAAS,MAAM;AAChD;AAAA,IACJ;AAEA,YAAQ,IAAI,QAAQ;AAEpB,UAAM,cAAc,SAAS,MAAM;AACnC,QAAI,aAAa;AACjB,cAAQ,IAAI,6BAA6B,WAAW;AAAA,IAEpD;AAAA,EAGJ,SAAS,OAAO;AACZ,YAAQ,MAAM,0BAA0B,KAAK;AAAA,EACjD;AACJ;;;ACtFA,SAAS,QAAQ,KAAK;AAAE;AAA2B,MAAI,OAAO,WAAW,cAAc,OAAO,OAAO,aAAa,UAAU;AAAE,cAAU,SAASC,SAAQC,MAAK;AAAE,aAAO,OAAOA;AAAA,IAAK;AAAA,EAAG,OAAO;AAAE,cAAU,SAASD,SAAQC,MAAK;AAAE,aAAOA,QAAO,OAAO,WAAW,cAAcA,KAAI,gBAAgB,UAAUA,SAAQ,OAAO,YAAY,WAAW,OAAOA;AAAA,IAAK;AAAA,EAAG;AAAE,SAAO,QAAQ,GAAG;AAAG;AAM1W,SAAR,aAA8B,OAAO;AAC1C,SAAO,QAAQ,KAAK,KAAK,YAAY,UAAU;AACjD;;;ACNO,IAAI,kBAAkB,OAAO,WAAW,cAAc,OAAO,YAAY,OAAO,OAAO,WAAW;AAGlG,IAAI,wBAAwB,OAAO,WAAW,cAAc,OAAO,iBAAiB,OAAO,OAAO,gBAAgB;AAElH,IAAI,uBAAuB,OAAO,WAAW,cAAc,OAAO,eAAe,OAAO,OAAO,cAAc;;;ACC7G,SAAS,YAAY,QAAQ,UAAU;AAC5C,MAAI,aAAa;AACjB,MAAI,OAAO;AACX,MAAI,SAAS,WAAW;AACxB,MAAI;AAEJ,UAAQ,QAAQ,WAAW,KAAK,OAAO,IAAI,MAAM,MAAM,QAAQ,UAAU;AACvE,YAAQ;AACR,aAAS,WAAW,KAAK,MAAM,QAAQ,MAAM,CAAC,EAAE;AAAA,EAClD;AAEA,SAAO;AAAA,IACL;AAAA,IACA;AAAA,EACF;AACF;;;AClBO,SAAS,cAAc,UAAU;AACtC,SAAO,oBAAoB,SAAS,QAAQ,YAAY,SAAS,QAAQ,SAAS,KAAK,CAAC;AAC1F;AAKO,SAAS,oBAAoB,QAAQ,gBAAgB;AAC1D,MAAI,wBAAwB,OAAO,eAAe,SAAS;AAC3D,MAAI,OAAO,WAAW,qBAAqB,IAAI,OAAO;AACtD,MAAI,YAAY,eAAe,OAAO;AACtC,MAAI,aAAa,OAAO,eAAe,OAAO;AAC9C,MAAI,UAAU,eAAe,OAAO;AACpC,MAAI,eAAe,eAAe,SAAS,IAAI,wBAAwB;AACvE,MAAI,YAAY,eAAe,SAAS;AACxC,MAAI,cAAc,GAAG,OAAO,OAAO,MAAM,GAAG,EAAE,OAAO,SAAS,GAAG,EAAE,OAAO,WAAW,IAAI;AACzF,MAAI,QAAQ,KAAK,MAAM,cAAc;AACrC,MAAI,eAAe,MAAM,SAAS;AAElC,MAAI,aAAa,SAAS,KAAK;AAC7B,QAAI,eAAe,KAAK,MAAM,YAAY,EAAE;AAC5C,QAAI,mBAAmB,YAAY;AACnC,QAAI,WAAW,CAAC;AAEhB,aAAS,IAAI,GAAG,IAAI,aAAa,QAAQ,KAAK,IAAI;AAChD,eAAS,KAAK,aAAa,MAAM,GAAG,IAAI,EAAE,CAAC;AAAA,IAC7C;AAEA,WAAO,cAAc,mBAAmB,CAAC,CAAC,GAAG,OAAO,OAAO,GAAG,SAAS,CAAC,CAAC,CAAC,EAAE,OAAO,SAAS,MAAM,GAAG,eAAe,CAAC,EAAE,IAAI,SAAU,SAAS;AAC5I,aAAO,CAAC,IAAI,OAAO;AAAA,IACrB,CAAC,GAAG,CAAC,CAAC,KAAK,WAAW,mBAAmB,CAAC,IAAI,GAAG,GAAG,CAAC,IAAI,SAAS,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC;AAAA,EACxF;AAEA,SAAO,cAAc,mBAAmB;AAAA;AAAA,IACxC,CAAC,GAAG,OAAO,UAAU,CAAC,GAAG,MAAM,YAAY,CAAC,CAAC;AAAA,IAAG,CAAC,GAAG,OAAO,OAAO,GAAG,YAAY;AAAA,IAAG,CAAC,IAAI,WAAW,YAAY,CAAC,IAAI,GAAG;AAAA,IAAG,CAAC,GAAG,OAAO,UAAU,CAAC,GAAG,MAAM,YAAY,CAAC,CAAC;AAAA,EAAC,CAAC;AAC5K;AAEA,SAAS,mBAAmB,OAAO;AACjC,MAAI,gBAAgB,MAAM,OAAO,SAAU,MAAM;AAC/C,QAAI,IAAI,KAAK,CAAC,GACV,OAAO,KAAK,CAAC;AACjB,WAAO,SAAS;AAAA,EAClB,CAAC;AACD,MAAI,SAAS,KAAK,IAAI,MAAM,MAAM,cAAc,IAAI,SAAU,OAAO;AACnE,QAAI,SAAS,MAAM,CAAC;AACpB,WAAO,OAAO;AAAA,EAChB,CAAC,CAAC;AACF,SAAO,cAAc,IAAI,SAAU,OAAO;AACxC,QAAI,SAAS,MAAM,CAAC,GAChB,OAAO,MAAM,CAAC;AAClB,WAAO,QAAQ,QAAQ,MAAM,KAAK,OAAO,QAAQ,OAAO;AAAA,EAC1D,CAAC,EAAE,KAAK,IAAI;AACd;AAEA,SAAS,WAAW,KAAK;AACvB,SAAO,MAAM,MAAM,CAAC,EAAE,KAAK,GAAG;AAChC;AAEA,SAAS,QAAQ,KAAK,KAAK;AACzB,SAAO,WAAW,MAAM,IAAI,MAAM,IAAI;AACxC;;;ACjEA,SAASC,SAAQ,KAAK;AAAE;AAA2B,MAAI,OAAO,WAAW,cAAc,OAAO,OAAO,aAAa,UAAU;AAAE,IAAAA,WAAU,SAASA,SAAQC,MAAK;AAAE,aAAO,OAAOA;AAAA,IAAK;AAAA,EAAG,OAAO;AAAE,IAAAD,WAAU,SAASA,SAAQC,MAAK;AAAE,aAAOA,QAAO,OAAO,WAAW,cAAcA,KAAI,gBAAgB,UAAUA,SAAQ,OAAO,YAAY,WAAW,OAAOA;AAAA,IAAK;AAAA,EAAG;AAAE,SAAOD,SAAQ,GAAG;AAAG;AAEzX,SAAS,QAAQ,QAAQ,gBAAgB;AAAE,MAAI,OAAO,OAAO,KAAK,MAAM;AAAG,MAAI,OAAO,uBAAuB;AAAE,QAAI,UAAU,OAAO,sBAAsB,MAAM;AAAG,QAAI,eAAgB,WAAU,QAAQ,OAAO,SAAU,KAAK;AAAE,aAAO,OAAO,yBAAyB,QAAQ,GAAG,EAAE;AAAA,IAAY,CAAC;AAAG,SAAK,KAAK,MAAM,MAAM,OAAO;AAAA,EAAG;AAAE,SAAO;AAAM;AAEpV,SAAS,cAAc,QAAQ;AAAE,WAAS,IAAI,GAAG,IAAI,UAAU,QAAQ,KAAK;AAAE,QAAI,SAAS,UAAU,CAAC,KAAK,OAAO,UAAU,CAAC,IAAI,CAAC;AAAG,QAAI,IAAI,GAAG;AAAE,cAAQ,OAAO,MAAM,GAAG,IAAI,EAAE,QAAQ,SAAU,KAAK;AAAE,wBAAgB,QAAQ,KAAK,OAAO,GAAG,CAAC;AAAA,MAAG,CAAC;AAAA,IAAG,WAAW,OAAO,2BAA2B;AAAE,aAAO,iBAAiB,QAAQ,OAAO,0BAA0B,MAAM,CAAC;AAAA,IAAG,OAAO;AAAE,cAAQ,OAAO,MAAM,CAAC,EAAE,QAAQ,SAAU,KAAK;AAAE,eAAO,eAAe,QAAQ,KAAK,OAAO,yBAAyB,QAAQ,GAAG,CAAC;AAAA,MAAG,CAAC;AAAA,IAAG;AAAA,EAAE;AAAE,SAAO;AAAQ;AAErhB,SAAS,gBAAgB,KAAK,KAAK,OAAO;AAAE,MAAI,OAAO,KAAK;AAAE,WAAO,eAAe,KAAK,KAAK,EAAE,OAAc,YAAY,MAAM,cAAc,MAAM,UAAU,KAAK,CAAC;AAAA,EAAG,OAAO;AAAE,QAAI,GAAG,IAAI;AAAA,EAAO;AAAE,SAAO;AAAK;AAEhN,SAAS,gBAAgB,UAAU,aAAa;AAAE,MAAI,EAAE,oBAAoB,cAAc;AAAE,UAAM,IAAI,UAAU,mCAAmC;AAAA,EAAG;AAAE;AAExJ,SAAS,kBAAkB,QAAQ,OAAO;AAAE,WAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AAAE,QAAI,aAAa,MAAM,CAAC;AAAG,eAAW,aAAa,WAAW,cAAc;AAAO,eAAW,eAAe;AAAM,QAAI,WAAW,WAAY,YAAW,WAAW;AAAM,WAAO,eAAe,QAAQ,WAAW,KAAK,UAAU;AAAA,EAAG;AAAE;AAE5T,SAAS,aAAa,aAAa,YAAY,aAAa;AAAE,MAAI,WAAY,mBAAkB,YAAY,WAAW,UAAU;AAAG,MAAI,YAAa,mBAAkB,aAAa,WAAW;AAAG,SAAO;AAAa;AAEtN,SAAS,UAAU,UAAU,YAAY;AAAE,MAAI,OAAO,eAAe,cAAc,eAAe,MAAM;AAAE,UAAM,IAAI,UAAU,oDAAoD;AAAA,EAAG;AAAE,WAAS,YAAY,OAAO,OAAO,cAAc,WAAW,WAAW,EAAE,aAAa,EAAE,OAAO,UAAU,UAAU,MAAM,cAAc,KAAK,EAAE,CAAC;AAAG,MAAI,WAAY,iBAAgB,UAAU,UAAU;AAAG;AAEhY,SAAS,aAAa,SAAS;AAAE,MAAI,4BAA4B,0BAA0B;AAAG,SAAO,SAAS,uBAAuB;AAAE,QAAI,QAAQ,gBAAgB,OAAO,GAAG;AAAQ,QAAI,2BAA2B;AAAE,UAAI,YAAY,gBAAgB,IAAI,EAAE;AAAa,eAAS,QAAQ,UAAU,OAAO,WAAW,SAAS;AAAA,IAAG,OAAO;AAAE,eAAS,MAAM,MAAM,MAAM,SAAS;AAAA,IAAG;AAAE,WAAO,2BAA2B,MAAM,MAAM;AAAA,EAAG;AAAG;AAExa,SAAS,2BAA2BE,OAAM,MAAM;AAAE,MAAI,SAASF,SAAQ,IAAI,MAAM,YAAY,OAAO,SAAS,aAAa;AAAE,WAAO;AAAA,EAAM;AAAE,SAAO,uBAAuBE,KAAI;AAAG;AAEhL,SAAS,uBAAuBA,OAAM;AAAE,MAAIA,UAAS,QAAQ;AAAE,UAAM,IAAI,eAAe,2DAA2D;AAAA,EAAG;AAAE,SAAOA;AAAM;AAErK,SAAS,iBAAiB,OAAO;AAAE,MAAI,SAAS,OAAO,QAAQ,aAAa,oBAAI,IAAI,IAAI;AAAW,qBAAmB,SAASC,kBAAiBC,QAAO;AAAE,QAAIA,WAAU,QAAQ,CAAC,kBAAkBA,MAAK,EAAG,QAAOA;AAAO,QAAI,OAAOA,WAAU,YAAY;AAAE,YAAM,IAAI,UAAU,oDAAoD;AAAA,IAAG;AAAE,QAAI,OAAO,WAAW,aAAa;AAAE,UAAI,OAAO,IAAIA,MAAK,EAAG,QAAO,OAAO,IAAIA,MAAK;AAAG,aAAO,IAAIA,QAAO,OAAO;AAAA,IAAG;AAAE,aAAS,UAAU;AAAE,aAAO,WAAWA,QAAO,WAAW,gBAAgB,IAAI,EAAE,WAAW;AAAA,IAAG;AAAE,YAAQ,YAAY,OAAO,OAAOA,OAAM,WAAW,EAAE,aAAa,EAAE,OAAO,SAAS,YAAY,OAAO,UAAU,MAAM,cAAc,KAAK,EAAE,CAAC;AAAG,WAAO,gBAAgB,SAASA,MAAK;AAAA,EAAG;AAAG,SAAO,iBAAiB,KAAK;AAAG;AAEtvB,SAAS,WAAW,QAAQ,MAAM,OAAO;AAAE,MAAI,0BAA0B,GAAG;AAAE,iBAAa,QAAQ;AAAA,EAAW,OAAO;AAAE,iBAAa,SAASC,YAAWC,SAAQC,OAAMH,QAAO;AAAE,UAAI,IAAI,CAAC,IAAI;AAAG,QAAE,KAAK,MAAM,GAAGG,KAAI;AAAG,UAAI,cAAc,SAAS,KAAK,MAAMD,SAAQ,CAAC;AAAG,UAAI,WAAW,IAAI,YAAY;AAAG,UAAIF,OAAO,iBAAgB,UAAUA,OAAM,SAAS;AAAG,aAAO;AAAA,IAAU;AAAA,EAAG;AAAE,SAAO,WAAW,MAAM,MAAM,SAAS;AAAG;AAEja,SAAS,4BAA4B;AAAE,MAAI,OAAO,YAAY,eAAe,CAAC,QAAQ,UAAW,QAAO;AAAO,MAAI,QAAQ,UAAU,KAAM,QAAO;AAAO,MAAI,OAAO,UAAU,WAAY,QAAO;AAAM,MAAI;AAAE,SAAK,UAAU,SAAS,KAAK,QAAQ,UAAU,MAAM,CAAC,GAAG,WAAY;AAAA,IAAC,CAAC,CAAC;AAAG,WAAO;AAAA,EAAM,SAAS,GAAG;AAAE,WAAO;AAAA,EAAO;AAAE;AAEnU,SAAS,kBAAkB,IAAI;AAAE,SAAO,SAAS,SAAS,KAAK,EAAE,EAAE,QAAQ,eAAe,MAAM;AAAI;AAEpG,SAAS,gBAAgB,GAAG,GAAG;AAAE,oBAAkB,OAAO,kBAAkB,SAASI,iBAAgBC,IAAGC,IAAG;AAAE,IAAAD,GAAE,YAAYC;AAAG,WAAOD;AAAA,EAAG;AAAG,SAAO,gBAAgB,GAAG,CAAC;AAAG;AAEzK,SAAS,gBAAgB,GAAG;AAAE,oBAAkB,OAAO,iBAAiB,OAAO,iBAAiB,SAASE,iBAAgBF,IAAG;AAAE,WAAOA,GAAE,aAAa,OAAO,eAAeA,EAAC;AAAA,EAAG;AAAG,SAAO,gBAAgB,CAAC;AAAG;AAarM,IAAI,eAA4B,yBAAU,QAAQ;AACvD,YAAUG,eAAc,MAAM;AAE9B,MAAI,SAAS,aAAaA,aAAY;AA2CtC,WAASA,cAAa,SAAS,OAAO,QAAQ,WAAW,MAAM,eAAe,YAAY;AACxF,QAAI,gBAAgB,iBAAiB;AAErC,QAAI;AAEJ,oBAAgB,MAAMA,aAAY;AAElC,YAAQ,OAAO,KAAK,MAAM,OAAO;AACjC,UAAM,OAAO;AACb,UAAM,gBAAgB,kBAAkB,QAAQ,kBAAkB,SAAS,gBAAgB;AAE3F,UAAM,QAAQ,iBAAiB,MAAM,QAAQ,KAAK,IAAI,QAAQ,QAAQ,CAAC,KAAK,IAAI,MAAS;AACzF,QAAI,gBAAgB,CAAC;AAErB,aAAS,MAAM,GAAG,SAAS,cAAc,MAAM,WAAW,QAAQ,gBAAgB,SAAS,cAAc,CAAC,GAAG,MAAM,MAAM,QAAQ,OAAO;AACtI,UAAI;AAEJ,UAAI,QAAQ,MAAM,GAAG;AACrB,UAAI,MAAM,MAAM;AAEhB,UAAI,OAAO,MAAM;AACf,sBAAc,KAAK,GAAG;AAAA,MACxB;AAAA,IACF;AAEA,oBAAgB,iBAAiB,aAAa;AAE9C,UAAM,SAAS,WAAW,QAAQ,WAAW,SAAS,UAAU,iBAAiB,mBAAmB,QAAQ,mBAAmB,SAAS,SAAS,eAAe,CAAC,EAAE;AACnK,UAAM,YAAY,cAAc,QAAQ,cAAc,SAAS,aAAa,kBAAkB,mBAAmB,QAAQ,oBAAoB,SAAS,SAAS,gBAAgB,IAAI,SAAUC,MAAK;AAChM,aAAOA,KAAI;AAAA,IACb,CAAC;AACD,UAAM,YAAY,aAAa,SAAS,UAAU,IAAI,SAAU,KAAK;AACnE,aAAO,YAAY,QAAQ,GAAG;AAAA,IAChC,CAAC,KAAK,kBAAkB,mBAAmB,QAAQ,oBAAoB,SAAS,SAAS,gBAAgB,IAAI,SAAUA,MAAK;AAC1H,aAAO,YAAYA,KAAI,QAAQA,KAAI,KAAK;AAAA,IAC1C,CAAC;AACD,UAAM,OAAO,SAAS,QAAQ,SAAS,SAAS,OAAO;AACvD,QAAI,qBAAqB,kBAAkB,QAAQ,kBAAkB,SAAS,SAAS,cAAc;AAErG,QAAI,cAAc,QAAQ,aAAa,kBAAkB,GAAG;AAC1D,YAAM,aAAa,cAAc,CAAC,GAAG,kBAAkB;AAAA,IACzD,OAAO;AACL,YAAM,aAAa,eAAe,QAAQ,eAAe,SAAS,aAAa,CAAC;AAAA,IAClF;AAIA,WAAO,iBAAiB,uBAAuB,KAAK,GAAG;AAAA,MACrD,SAAS;AAAA,QACP,YAAY;AAAA,MACd;AAAA,MACA,WAAW;AAAA,QACT,YAAY,MAAM,aAAa;AAAA,MACjC;AAAA,MACA,MAAM;AAAA,QACJ,YAAY,MAAM,QAAQ;AAAA,MAC5B;AAAA,MACA,YAAY;AAAA,QACV,YAAY,MAAM,cAAc,QAAQ,OAAO,KAAK,MAAM,UAAU,EAAE,SAAS;AAAA,MACjF;AAAA,MACA,MAAM;AAAA,QACJ,YAAY;AAAA,MACd;AAAA,MACA,OAAO;AAAA,QACL,YAAY;AAAA,MACd;AAAA,MACA,QAAQ;AAAA,QACN,YAAY;AAAA,MACd;AAAA,MACA,WAAW;AAAA,QACT,YAAY;AAAA,MACd;AAAA,MACA,eAAe;AAAA,QACb,YAAY;AAAA,MACd;AAAA,IACF,CAAC;AAED,QAAI,kBAAkB,QAAQ,kBAAkB,UAAU,cAAc,OAAO;AAC7E,aAAO,eAAe,uBAAuB,KAAK,GAAG,SAAS;AAAA,QAC5D,OAAO,cAAc;AAAA,QACrB,UAAU;AAAA,QACV,cAAc;AAAA,MAChB,CAAC;AACD,aAAO,2BAA2B,KAAK;AAAA,IACzC;AAGA,QAAI,MAAM,mBAAmB;AAC3B,YAAM,kBAAkB,uBAAuB,KAAK,GAAGD,aAAY;AAAA,IACrE,OAAO;AACL,aAAO,eAAe,uBAAuB,KAAK,GAAG,SAAS;AAAA,QAC5D,OAAO,MAAM,EAAE;AAAA,QACf,UAAU;AAAA,QACV,cAAc;AAAA,MAChB,CAAC;AAAA,IACH;AAEA,WAAO;AAAA,EACT;AAEA,eAAaA,eAAc,CAAC;AAAA,IAC1B,KAAK;AAAA,IACL,OAAO,SAAS,WAAW;AACzB,aAAO,WAAW,IAAI;AAAA,IACxB;AAAA;AAAA;AAAA,EAGF,GAAG;AAAA,IACD,KAAK;AAAA,IACL,KAAK,SAASE,OAAM;AAClB,aAAO;AAAA,IACT;AAAA,EACF,CAAC,CAAC;AAEF,SAAOF;AACT,EAAgB,iCAAiB,KAAK,CAAC;AAEvC,SAAS,iBAAiB,OAAO;AAC/B,SAAO,UAAU,UAAa,MAAM,WAAW,IAAI,SAAY;AACjE;AAOO,SAAS,WAAW,OAAO;AAChC,MAAI,SAAS,MAAM;AAEnB,MAAI,MAAM,OAAO;AACf,aAAS,MAAM,GAAG,gBAAgB,MAAM,OAAO,MAAM,cAAc,QAAQ,OAAO;AAChF,UAAI,OAAO,cAAc,GAAG;AAE5B,UAAI,KAAK,KAAK;AACZ,kBAAU,SAAS,cAAc,KAAK,GAAG;AAAA,MAC3C;AAAA,IACF;AAAA,EACF,WAAW,MAAM,UAAU,MAAM,WAAW;AAC1C,aAAS,MAAM,GAAG,oBAAoB,MAAM,WAAW,MAAM,kBAAkB,QAAQ,OAAO;AAC5F,UAAI,WAAW,kBAAkB,GAAG;AACpC,gBAAU,SAAS,oBAAoB,MAAM,QAAQ,QAAQ;AAAA,IAC/D;AAAA,EACF;AAEA,SAAO;AACT;;;ACtOO,SAAS,YAAY,QAAQ,UAAU,aAAa;AACzD,SAAO,IAAI,aAAa,iBAAiB,OAAO,WAAW,GAAG,QAAW,QAAQ,CAAC,QAAQ,CAAC;AAC7F;;;ACLO,IAAI,OAAO,OAAO,OAAO;AAAA;AAAA,EAE9B,MAAM;AAAA;AAAA,EAEN,UAAU;AAAA,EACV,sBAAsB;AAAA,EACtB,qBAAqB;AAAA,EACrB,eAAe;AAAA,EACf,OAAO;AAAA,EACP,UAAU;AAAA;AAAA,EAEV,iBAAiB;AAAA,EACjB,iBAAiB;AAAA,EACjB,qBAAqB;AAAA;AAAA,EAErB,UAAU;AAAA,EACV,KAAK;AAAA,EACL,OAAO;AAAA,EACP,QAAQ;AAAA,EACR,SAAS;AAAA,EACT,MAAM;AAAA,EACN,MAAM;AAAA,EACN,MAAM;AAAA,EACN,QAAQ;AAAA,EACR,cAAc;AAAA;AAAA,EAEd,WAAW;AAAA;AAAA,EAEX,YAAY;AAAA,EACZ,WAAW;AAAA,EACX,eAAe;AAAA;AAAA,EAEf,mBAAmB;AAAA,EACnB,2BAA2B;AAAA;AAAA,EAE3B,wBAAwB;AAAA,EACxB,wBAAwB;AAAA,EACxB,kBAAkB;AAAA,EAClB,wBAAwB;AAAA,EACxB,2BAA2B;AAAA,EAC3B,uBAAuB;AAAA,EACvB,sBAAsB;AAAA,EACtB,uBAAuB;AAAA,EACvB,8BAA8B;AAAA;AAAA,EAE9B,sBAAsB;AAAA;AAAA,EAEtB,kBAAkB;AAAA;AAAA,EAElB,uBAAuB;AAAA,EACvB,uBAAuB;AAAA,EACvB,0BAA0B;AAAA,EAC1B,sBAAsB;AAAA,EACtB,qBAAqB;AAAA,EACrB,6BAA6B;AAC/B,CAAC;;;AC1Dc,SAAR,UAA2B,WAAW,SAAS;AACpD,MAAI,mBAAmB,QAAQ,SAAS;AAExC,MAAI,CAAC,kBAAkB;AACrB,UAAM,IAAI,MAAM,WAAW,OAAO,UAAU,iCAAiC;AAAA,EAC/E;AACF;;;ACLA,IAAI,4BAA4B,OAAO,WAAW,cAAc,OAAO,OAAO,QAAQ,aAAa,OAAO,IAAI,4BAA4B,IAAI;AAC9I,IAAO,oCAAQ;;;ACIA,SAAR,cAA+B,aAAa;AACjD,MAAI,KAAK,YAAY,UAAU;AAC/B,SAAO,OAAO,cAAc,UAAU,CAAC;AACvC,cAAY,UAAU,UAAU;AAEhC,MAAI,mCAA2B;AAC7B,gBAAY,UAAU,iCAAyB,IAAI;AAAA,EACrD;AACF;;;ACRO,IAAI,WAAwB,2BAAY;AAoB7C,WAASG,UAAS,YAAY,UAAU,QAAQ;AAC9C,SAAK,QAAQ,WAAW;AACxB,SAAK,MAAM,SAAS;AACpB,SAAK,aAAa;AAClB,SAAK,WAAW;AAChB,SAAK,SAAS;AAAA,EAChB;AAEA,MAAI,SAASA,UAAS;AAEtB,SAAO,SAAS,SAAS,SAAS;AAChC,WAAO;AAAA,MACL,OAAO,KAAK;AAAA,MACZ,KAAK,KAAK;AAAA,IACZ;AAAA,EACF;AAEA,SAAOA;AACT,EAAE;AAEF,cAAc,QAAQ;AAMf,IAAI,QAAqB,2BAAY;AA8B1C,WAASC,OAAM,MAAM,OAAO,KAAK,MAAM,QAAQ,MAAM,OAAO;AAC1D,SAAK,OAAO;AACZ,SAAK,QAAQ;AACb,SAAK,MAAM;AACX,SAAK,OAAO;AACZ,SAAK,SAAS;AACd,SAAK,QAAQ;AACb,SAAK,OAAO;AACZ,SAAK,OAAO;AAAA,EACd;AAEA,MAAI,UAAUA,OAAM;AAEpB,UAAQ,SAAS,SAAS,SAAS;AACjC,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX,OAAO,KAAK;AAAA,MACZ,MAAM,KAAK;AAAA,MACX,QAAQ,KAAK;AAAA,IACf;AAAA,EACF;AAEA,SAAOA;AACT,EAAE;AAEF,cAAc,KAAK;AAKZ,SAAS,OAAO,WAAW;AAChC,SAAO,aAAa,QAAQ,OAAO,UAAU,SAAS;AACxD;;;AC9GO,IAAI,YAAY,OAAO,OAAO;AAAA,EACnC,KAAK;AAAA,EACL,KAAK;AAAA,EACL,MAAM;AAAA,EACN,QAAQ;AAAA,EACR,KAAK;AAAA,EACL,SAAS;AAAA,EACT,SAAS;AAAA,EACT,QAAQ;AAAA,EACR,OAAO;AAAA,EACP,QAAQ;AAAA,EACR,IAAI;AAAA,EACJ,WAAW;AAAA,EACX,WAAW;AAAA,EACX,SAAS;AAAA,EACT,MAAM;AAAA,EACN,SAAS;AAAA,EACT,MAAM;AAAA,EACN,KAAK;AAAA,EACL,OAAO;AAAA,EACP,QAAQ;AAAA,EACR,cAAc;AAAA,EACd,SAAS;AACX,CAAC;;;AC3BD,SAASC,SAAQ,KAAK;AAAE;AAA2B,MAAI,OAAO,WAAW,cAAc,OAAO,OAAO,aAAa,UAAU;AAAE,IAAAA,WAAU,SAASA,SAAQC,MAAK;AAAE,aAAO,OAAOA;AAAA,IAAK;AAAA,EAAG,OAAO;AAAE,IAAAD,WAAU,SAASA,SAAQC,MAAK;AAAE,aAAOA,QAAO,OAAO,WAAW,cAAcA,KAAI,gBAAgB,UAAUA,SAAQ,OAAO,YAAY,WAAW,OAAOA;AAAA,IAAK;AAAA,EAAG;AAAE,SAAOD,SAAQ,GAAG;AAAG;AAIzX,IAAI,mBAAmB;AACvB,IAAI,sBAAsB;AAKX,SAAR,QAAyB,OAAO;AACrC,SAAO,YAAY,OAAO,CAAC,CAAC;AAC9B;AAEA,SAAS,YAAY,OAAO,YAAY;AACtC,UAAQA,SAAQ,KAAK,GAAG;AAAA,IACtB,KAAK;AACH,aAAO,KAAK,UAAU,KAAK;AAAA,IAE7B,KAAK;AACH,aAAO,MAAM,OAAO,aAAa,OAAO,MAAM,MAAM,GAAG,IAAI;AAAA,IAE7D,KAAK;AACH,UAAI,UAAU,MAAM;AAClB,eAAO;AAAA,MACT;AAEA,aAAO,kBAAkB,OAAO,UAAU;AAAA,IAE5C;AACE,aAAO,OAAO,KAAK;AAAA,EACvB;AACF;AAEA,SAAS,kBAAkB,OAAO,sBAAsB;AACtD,MAAI,qBAAqB,QAAQ,KAAK,MAAM,IAAI;AAC9C,WAAO;AAAA,EACT;AAEA,MAAI,aAAa,CAAC,EAAE,OAAO,sBAAsB,CAAC,KAAK,CAAC;AACxD,MAAI,kBAAkB,YAAY,KAAK;AAEvC,MAAI,oBAAoB,QAAW;AACjC,QAAI,cAAc,gBAAgB,KAAK,KAAK;AAE5C,QAAI,gBAAgB,OAAO;AACzB,aAAO,OAAO,gBAAgB,WAAW,cAAc,YAAY,aAAa,UAAU;AAAA,IAC5F;AAAA,EACF,WAAW,MAAM,QAAQ,KAAK,GAAG;AAC/B,WAAO,YAAY,OAAO,UAAU;AAAA,EACtC;AAEA,SAAO,aAAa,OAAO,UAAU;AACvC;AAEA,SAAS,aAAa,QAAQ,YAAY;AACxC,MAAI,OAAO,OAAO,KAAK,MAAM;AAE7B,MAAI,KAAK,WAAW,GAAG;AACrB,WAAO;AAAA,EACT;AAEA,MAAI,WAAW,SAAS,qBAAqB;AAC3C,WAAO,MAAM,aAAa,MAAM,IAAI;AAAA,EACtC;AAEA,MAAI,aAAa,KAAK,IAAI,SAAU,KAAK;AACvC,QAAI,QAAQ,YAAY,OAAO,GAAG,GAAG,UAAU;AAC/C,WAAO,MAAM,OAAO;AAAA,EACtB,CAAC;AACD,SAAO,OAAO,WAAW,KAAK,IAAI,IAAI;AACxC;AAEA,SAAS,YAAY,OAAO,YAAY;AACtC,MAAI,MAAM,WAAW,GAAG;AACtB,WAAO;AAAA,EACT;AAEA,MAAI,WAAW,SAAS,qBAAqB;AAC3C,WAAO;AAAA,EACT;AAEA,MAAI,MAAM,KAAK,IAAI,kBAAkB,MAAM,MAAM;AACjD,MAAI,YAAY,MAAM,SAAS;AAC/B,MAAI,QAAQ,CAAC;AAEb,WAAS,IAAI,GAAG,IAAI,KAAK,EAAE,GAAG;AAC5B,UAAM,KAAK,YAAY,MAAM,CAAC,GAAG,UAAU,CAAC;AAAA,EAC9C;AAEA,MAAI,cAAc,GAAG;AACnB,UAAM,KAAK,iBAAiB;AAAA,EAC9B,WAAW,YAAY,GAAG;AACxB,UAAM,KAAK,OAAO,OAAO,WAAW,aAAa,CAAC;AAAA,EACpD;AAEA,SAAO,MAAM,MAAM,KAAK,IAAI,IAAI;AAClC;AAEA,SAAS,YAAY,QAAQ;AAC3B,MAAI,kBAAkB,OAAO,OAAO,iCAAyB,CAAC;AAE9D,MAAI,OAAO,oBAAoB,YAAY;AACzC,WAAO;AAAA,EACT;AAEA,MAAI,OAAO,OAAO,YAAY,YAAY;AACxC,WAAO,OAAO;AAAA,EAChB;AACF;AAEA,SAAS,aAAa,QAAQ;AAC5B,MAAI,MAAM,OAAO,UAAU,SAAS,KAAK,MAAM,EAAE,QAAQ,cAAc,EAAE,EAAE,QAAQ,MAAM,EAAE;AAE3F,MAAI,QAAQ,YAAY,OAAO,OAAO,gBAAgB,YAAY;AAChE,QAAIE,QAAO,OAAO,YAAY;AAE9B,QAAI,OAAOA,UAAS,YAAYA,UAAS,IAAI;AAC3C,aAAOA;AAAA,IACT;AAAA,EACF;AAEA,SAAO;AACT;;;AC3He,SAAR,UAA2B,WAAW,SAAS;AACpD,MAAI,mBAAmB,QAAQ,SAAS;AAExC,MAAI,CAAC,kBAAkB;AACrB,UAAM,IAAI,MAAM,OAAO;AAAA,EACzB;AACF;;;ACNA,SAASC,SAAQ,KAAK;AAAE;AAA2B,MAAI,OAAO,WAAW,cAAc,OAAO,OAAO,aAAa,UAAU;AAAE,IAAAA,WAAU,SAASA,SAAQC,MAAK;AAAE,aAAO,OAAOA;AAAA,IAAK;AAAA,EAAG,OAAO;AAAE,IAAAD,WAAU,SAASA,SAAQC,MAAK;AAAE,aAAOA,QAAO,OAAO,WAAW,cAAcA,KAAI,gBAAgB,UAAUA,SAAQ,OAAO,YAAY,WAAW,OAAOA;AAAA,IAAK;AAAA,EAAG;AAAE,SAAOD,SAAQ,GAAG;AAAG;AAUzX,IAAO,qBAAQ;AAAA;AAAA;AAAA,EAEf,SAAS,WAAW,OAAO,aAAa;AACtC,WAAO,iBAAiB;AAAA,EAC1B;AAAA;AAAA;AAAA,EACA,SAASE,YAAW,OAAO,aAAa;AACtC,QAAI,iBAAiB,aAAa;AAChC,aAAO;AAAA,IACT;AAEA,QAAIF,SAAQ,KAAK,MAAM,YAAY,UAAU,MAAM;AACjD,UAAI;AAEJ,UAAI,YAAY,YAAY,UAAU,OAAO,WAAW;AACxD,UAAI;AAAA;AAAA,QACJ,OAAO,eAAe,QAAQ,MAAM,OAAO,WAAW,KAAK,qBAAqB,MAAM,iBAAiB,QAAQ,uBAAuB,SAAS,SAAS,mBAAmB;AAAA;AAE3K,UAAI,cAAc,gBAAgB;AAChC,YAAI,mBAAmB,QAAQ,KAAK;AACpC,cAAM,IAAI,MAAM,cAAc,OAAO,WAAW,IAAK,EAAE,OAAO,kBAAkB,wjBAAikB,CAAC;AAAA,MACppB;AAAA,IACF;AAEA,WAAO;AAAA,EACT;AAAA;;;AClCA,SAASG,mBAAkB,QAAQ,OAAO;AAAE,WAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AAAE,QAAI,aAAa,MAAM,CAAC;AAAG,eAAW,aAAa,WAAW,cAAc;AAAO,eAAW,eAAe;AAAM,QAAI,WAAW,WAAY,YAAW,WAAW;AAAM,WAAO,eAAe,QAAQ,WAAW,KAAK,UAAU;AAAA,EAAG;AAAE;AAE5T,SAASC,cAAa,aAAa,YAAY,aAAa;AAAE,MAAI,WAAY,CAAAD,mBAAkB,YAAY,WAAW,UAAU;AAAG,MAAI,YAAa,CAAAA,mBAAkB,aAAa,WAAW;AAAG,SAAO;AAAa;AAc/M,IAAI,SAAsB,2BAAY;AAC3C,WAASE,QAAO,MAAM;AACpB,QAAIC,QAAO,UAAU,SAAS,KAAK,UAAU,CAAC,MAAM,SAAY,UAAU,CAAC,IAAI;AAC/E,QAAI,iBAAiB,UAAU,SAAS,KAAK,UAAU,CAAC,MAAM,SAAY,UAAU,CAAC,IAAI;AAAA,MACvF,MAAM;AAAA,MACN,QAAQ;AAAA,IACV;AACA,WAAO,SAAS,YAAY,UAAU,GAAG,oCAAoC,OAAO,QAAQ,IAAI,GAAG,GAAG,CAAC;AACvG,SAAK,OAAO;AACZ,SAAK,OAAOA;AACZ,SAAK,iBAAiB;AACtB,SAAK,eAAe,OAAO,KAAK,UAAU,GAAG,2DAA2D;AACxG,SAAK,eAAe,SAAS,KAAK,UAAU,GAAG,6DAA6D;AAAA,EAC9G;AAGA,EAAAF,cAAaC,SAAQ,CAAC;AAAA,IACpB,KAAK;AAAA,IACL,KAAK,SAASE,OAAM;AAClB,aAAO;AAAA,IACT;AAAA,EACF,CAAC,CAAC;AAEF,SAAOF;AACT,EAAE;AAQK,SAAS,SAAS,QAAQ;AAC/B,SAAO,mBAAW,QAAQ,MAAM;AAClC;;;AC/CO,IAAI,oBAAoB,OAAO,OAAO;AAAA;AAAA,EAE3C,OAAO;AAAA,EACP,UAAU;AAAA,EACV,cAAc;AAAA,EACd,OAAO;AAAA,EACP,qBAAqB;AAAA,EACrB,iBAAiB;AAAA,EACjB,iBAAiB;AAAA,EACjB,qBAAqB;AAAA;AAAA,EAErB,QAAQ;AAAA,EACR,QAAQ;AAAA,EACR,QAAQ;AAAA,EACR,kBAAkB;AAAA,EAClB,qBAAqB;AAAA,EACrB,WAAW;AAAA,EACX,OAAO;AAAA,EACP,MAAM;AAAA,EACN,YAAY;AAAA,EACZ,cAAc;AAAA,EACd,wBAAwB;AAC1B,CAAC;;;ACjBM,SAAS,uBAAuB,WAAW;AAEhD,MAAI,QAAQ,UAAU,MAAM,cAAc;AAE1C,MAAI,eAAe,0BAA0B,SAAS;AAEtD,MAAI,iBAAiB,GAAG;AACtB,aAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACrC,YAAM,CAAC,IAAI,MAAM,CAAC,EAAE,MAAM,YAAY;AAAA,IACxC;AAAA,EACF;AAGA,MAAI,YAAY;AAEhB,SAAO,YAAY,MAAM,UAAU,QAAQ,MAAM,SAAS,CAAC,GAAG;AAC5D,MAAE;AAAA,EACJ;AAEA,MAAI,UAAU,MAAM;AAEpB,SAAO,UAAU,aAAa,QAAQ,MAAM,UAAU,CAAC,CAAC,GAAG;AACzD,MAAE;AAAA,EACJ;AAGA,SAAO,MAAM,MAAM,WAAW,OAAO,EAAE,KAAK,IAAI;AAClD;AAEA,SAAS,QAAQ,KAAK;AACpB,WAAS,IAAI,GAAG,IAAI,IAAI,QAAQ,EAAE,GAAG;AACnC,QAAI,IAAI,CAAC,MAAM,OAAO,IAAI,CAAC,MAAM,KAAM;AACrC,aAAO;AAAA,IACT;AAAA,EACF;AAEA,SAAO;AACT;AAMO,SAAS,0BAA0B,OAAO;AAC/C,MAAI;AAEJ,MAAI,cAAc;AAClB,MAAI,cAAc;AAClB,MAAIG,UAAS;AACb,MAAI,eAAe;AAEnB,WAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,EAAE,GAAG;AACrC,YAAQ,MAAM,WAAW,CAAC,GAAG;AAAA,MAC3B,KAAK;AAEH,YAAI,MAAM,WAAW,IAAI,CAAC,MAAM,IAAI;AAClC,YAAE;AAAA,QACJ;AAAA;AAAA,MAIF,KAAK;AAEH,sBAAc;AACd,sBAAc;AACd,QAAAA,UAAS;AACT;AAAA,MAEF,KAAK;AAAA;AAAA,MAEL,KAAK;AAEH,UAAEA;AACF;AAAA,MAEF;AACE,YAAI,eAAe,CAAC,gBAAgB,iBAAiB,QAAQA,UAAS,eAAe;AACnF,yBAAeA;AAAA,QACjB;AAEA,sBAAc;AAAA,IAClB;AAAA,EACF;AAEA,UAAQ,gBAAgB,kBAAkB,QAAQ,kBAAkB,SAAS,gBAAgB;AAC/F;AASO,SAAS,iBAAiB,OAAO;AACtC,MAAI,cAAc,UAAU,SAAS,KAAK,UAAU,CAAC,MAAM,SAAY,UAAU,CAAC,IAAI;AACtF,MAAI,sBAAsB,UAAU,SAAS,KAAK,UAAU,CAAC,MAAM,SAAY,UAAU,CAAC,IAAI;AAC9F,MAAI,eAAe,MAAM,QAAQ,IAAI,MAAM;AAC3C,MAAI,kBAAkB,MAAM,CAAC,MAAM,OAAO,MAAM,CAAC,MAAM;AACvD,MAAI,mBAAmB,MAAM,MAAM,SAAS,CAAC,MAAM;AACnD,MAAI,mBAAmB,MAAM,MAAM,SAAS,CAAC,MAAM;AACnD,MAAI,uBAAuB,CAAC,gBAAgB,oBAAoB,oBAAoB;AACpF,MAAI,SAAS;AAEb,MAAI,wBAAwB,EAAE,gBAAgB,kBAAkB;AAC9D,cAAU,OAAO;AAAA,EACnB;AAEA,YAAU,cAAc,MAAM,QAAQ,OAAO,OAAO,WAAW,IAAI;AAEnE,MAAI,sBAAsB;AACxB,cAAU;AAAA,EACZ;AAEA,SAAO,QAAQ,OAAO,QAAQ,QAAQ,OAAO,IAAI;AACnD;;;AC9GO,IAAI,QAAqB,2BAAY;AAgB1C,WAASC,OAAM,QAAQ;AACrB,QAAI,mBAAmB,IAAI,MAAM,UAAU,KAAK,GAAG,GAAG,GAAG,GAAG,IAAI;AAChE,SAAK,SAAS;AACd,SAAK,YAAY;AACjB,SAAK,QAAQ;AACb,SAAK,OAAO;AACZ,SAAK,YAAY;AAAA,EACnB;AAMA,MAAI,SAASA,OAAM;AAEnB,SAAO,UAAU,SAAS,UAAU;AAClC,SAAK,YAAY,KAAK;AACtB,QAAI,QAAQ,KAAK,QAAQ,KAAK,UAAU;AACxC,WAAO;AAAA,EACT;AAOA,SAAO,YAAY,SAAS,YAAY;AACtC,QAAI,QAAQ,KAAK;AAEjB,QAAI,MAAM,SAAS,UAAU,KAAK;AAChC,SAAG;AACD,YAAI;AAGJ,iBAAS,cAAc,MAAM,UAAU,QAAQ,gBAAgB,SAAS,cAAc,MAAM,OAAO,UAAU,MAAM,KAAK;AAAA,MAC1H,SAAS,MAAM,SAAS,UAAU;AAAA,IACpC;AAEA,WAAO;AAAA,EACT;AAEA,SAAOA;AACT,EAAE;AAKK,SAAS,sBAAsB,MAAM;AAC1C,SAAO,SAAS,UAAU,QAAQ,SAAS,UAAU,UAAU,SAAS,UAAU,OAAO,SAAS,UAAU,WAAW,SAAS,UAAU,WAAW,SAAS,UAAU,UAAU,SAAS,UAAU,SAAS,SAAS,UAAU,UAAU,SAAS,UAAU,MAAM,SAAS,UAAU,aAAa,SAAS,UAAU,aAAa,SAAS,UAAU,WAAW,SAAS,UAAU,QAAQ,SAAS,UAAU;AAClZ;AAEA,SAAS,cAAc,MAAM;AAC3B;AAAA;AAAA,IACE,MAAM,IAAI,IAAI,UAAU;AAAA;AAAA,MACxB,OAAO,MAAS,KAAK,UAAU,OAAO,aAAa,IAAI,CAAC;AAAA;AAAA,QACxD,OAAQ,QAAQ,OAAO,KAAK,SAAS,EAAE,EAAE,YAAY,GAAG,MAAM,EAAE,GAAG,GAAI;AAAA;AAAA;AAAA;AAE3E;AAUA,SAAS,UAAU,OAAO,MAAM;AAC9B,MAAI,SAAS,MAAM;AACnB,MAAI,OAAO,OAAO;AAClB,MAAI,aAAa,KAAK;AACtB,MAAI,MAAM,KAAK;AAEf,SAAO,MAAM,YAAY;AACvB,QAAI,OAAO,KAAK,WAAW,GAAG;AAC9B,QAAI,QAAQ,MAAM;AAElB,QAAI,OAAO,IAAI,MAAM,MAAM;AAG3B,YAAQ,MAAM;AAAA,MACZ,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAEH,UAAE;AACF;AAAA,MAEF,KAAK;AAEH,UAAE;AACF,UAAE,MAAM;AACR,cAAM,YAAY;AAClB;AAAA,MAEF,KAAK;AAEH,YAAI,KAAK,WAAW,MAAM,CAAC,MAAM,IAAI;AACnC,iBAAO;AAAA,QACT,OAAO;AACL,YAAE;AAAA,QACJ;AAEA,UAAE,MAAM;AACR,cAAM,YAAY;AAClB;AAAA,MAEF,KAAK;AAEH,eAAO,IAAI,MAAM,UAAU,MAAM,KAAK,MAAM,GAAG,OAAO,MAAM,IAAI;AAAA,MAElE,KAAK;AAEH,eAAO,YAAY,QAAQ,KAAK,OAAO,MAAM,IAAI;AAAA,MAEnD,KAAK;AAEH,eAAO,IAAI,MAAM,UAAU,QAAQ,KAAK,MAAM,GAAG,OAAO,MAAM,IAAI;AAAA,MAEpE,KAAK;AAEH,eAAO,IAAI,MAAM,UAAU,KAAK,KAAK,MAAM,GAAG,OAAO,MAAM,IAAI;AAAA,MAEjE,KAAK;AAEH,eAAO,IAAI,MAAM,UAAU,SAAS,KAAK,MAAM,GAAG,OAAO,MAAM,IAAI;AAAA,MAErE,KAAK;AAEH,eAAO,IAAI,MAAM,UAAU,SAAS,KAAK,MAAM,GAAG,OAAO,MAAM,IAAI;AAAA,MAErE,KAAK;AAEH,YAAI,KAAK,WAAW,MAAM,CAAC,MAAM,MAAM,KAAK,WAAW,MAAM,CAAC,MAAM,IAAI;AACtE,iBAAO,IAAI,MAAM,UAAU,QAAQ,KAAK,MAAM,GAAG,OAAO,MAAM,IAAI;AAAA,QACpE;AAEA;AAAA,MAEF,KAAK;AAEH,eAAO,IAAI,MAAM,UAAU,OAAO,KAAK,MAAM,GAAG,OAAO,MAAM,IAAI;AAAA,MAEnE,KAAK;AAEH,eAAO,IAAI,MAAM,UAAU,QAAQ,KAAK,MAAM,GAAG,OAAO,MAAM,IAAI;AAAA,MAEpE,KAAK;AAEH,eAAO,IAAI,MAAM,UAAU,IAAI,KAAK,MAAM,GAAG,OAAO,MAAM,IAAI;AAAA,MAEhE,KAAK;AAEH,eAAO,IAAI,MAAM,UAAU,WAAW,KAAK,MAAM,GAAG,OAAO,MAAM,IAAI;AAAA,MAEvE,KAAK;AAEH,eAAO,IAAI,MAAM,UAAU,WAAW,KAAK,MAAM,GAAG,OAAO,MAAM,IAAI;AAAA,MAEvE,KAAK;AAEH,eAAO,IAAI,MAAM,UAAU,SAAS,KAAK,MAAM,GAAG,OAAO,MAAM,IAAI;AAAA,MAErE,KAAK;AAEH,eAAO,IAAI,MAAM,UAAU,MAAM,KAAK,MAAM,GAAG,OAAO,MAAM,IAAI;AAAA,MAElE,KAAK;AAEH,eAAO,IAAI,MAAM,UAAU,SAAS,KAAK,MAAM,GAAG,OAAO,MAAM,IAAI;AAAA,MAErE,KAAK;AAEH,YAAI,KAAK,WAAW,MAAM,CAAC,MAAM,MAAM,KAAK,WAAW,MAAM,CAAC,MAAM,IAAI;AACtE,iBAAO,gBAAgB,QAAQ,KAAK,OAAO,MAAM,MAAM,KAAK;AAAA,QAC9D;AAEA,eAAO,WAAW,QAAQ,KAAK,OAAO,MAAM,IAAI;AAAA,MAElD,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAEH,eAAO,WAAW,QAAQ,KAAK,MAAM,OAAO,MAAM,IAAI;AAAA,MAExD,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAAA;AAAA,MAEL,KAAK;AAEH,eAAO,SAAS,QAAQ,KAAK,OAAO,MAAM,IAAI;AAAA,IAClD;AAEA,UAAM,YAAY,QAAQ,KAAK,2BAA2B,IAAI,CAAC;AAAA,EACjE;AAEA,MAAI,OAAO,MAAM;AACjB,MAAI,MAAM,IAAI,MAAM,MAAM;AAC1B,SAAO,IAAI,MAAM,UAAU,KAAK,YAAY,YAAY,MAAM,KAAK,IAAI;AACzE;AAMA,SAAS,2BAA2B,MAAM;AACxC,MAAI,OAAO,MAAU,SAAS,KAAU,SAAS,MAAU,SAAS,IAAQ;AAC1E,WAAO,wCAAwC,OAAO,cAAc,IAAI,GAAG,GAAG;AAAA,EAChF;AAEA,MAAI,SAAS,IAAI;AAEf,WAAO;AAAA,EACT;AAEA,SAAO,yCAAyC,OAAO,cAAc,IAAI,GAAG,GAAG;AACjF;AAQA,SAAS,YAAY,QAAQ,OAAO,MAAM,KAAK,MAAM;AACnD,MAAI,OAAO,OAAO;AAClB,MAAI;AACJ,MAAI,WAAW;AAEf,KAAG;AACD,WAAO,KAAK,WAAW,EAAE,QAAQ;AAAA,EACnC,SAAS,CAAC,MAAM,IAAI;AAAA,GACpB,OAAO,MAAU,SAAS;AAE1B,SAAO,IAAI,MAAM,UAAU,SAAS,OAAO,UAAU,MAAM,KAAK,MAAM,KAAK,MAAM,QAAQ,GAAG,QAAQ,CAAC;AACvG;AAUA,SAAS,WAAW,QAAQ,OAAO,WAAW,MAAM,KAAK,MAAM;AAC7D,MAAI,OAAO,OAAO;AAClB,MAAI,OAAO;AACX,MAAI,WAAW;AACf,MAAI,UAAU;AAEd,MAAI,SAAS,IAAI;AAEf,WAAO,KAAK,WAAW,EAAE,QAAQ;AAAA,EACnC;AAEA,MAAI,SAAS,IAAI;AAEf,WAAO,KAAK,WAAW,EAAE,QAAQ;AAEjC,QAAI,QAAQ,MAAM,QAAQ,IAAI;AAC5B,YAAM,YAAY,QAAQ,UAAU,6CAA6C,OAAO,cAAc,IAAI,GAAG,GAAG,CAAC;AAAA,IACnH;AAAA,EACF,OAAO;AACL,eAAW,WAAW,QAAQ,UAAU,IAAI;AAC5C,WAAO,KAAK,WAAW,QAAQ;AAAA,EACjC;AAEA,MAAI,SAAS,IAAI;AAEf,cAAU;AACV,WAAO,KAAK,WAAW,EAAE,QAAQ;AACjC,eAAW,WAAW,QAAQ,UAAU,IAAI;AAC5C,WAAO,KAAK,WAAW,QAAQ;AAAA,EACjC;AAEA,MAAI,SAAS,MAAM,SAAS,KAAK;AAE/B,cAAU;AACV,WAAO,KAAK,WAAW,EAAE,QAAQ;AAEjC,QAAI,SAAS,MAAM,SAAS,IAAI;AAE9B,aAAO,KAAK,WAAW,EAAE,QAAQ;AAAA,IACnC;AAEA,eAAW,WAAW,QAAQ,UAAU,IAAI;AAC5C,WAAO,KAAK,WAAW,QAAQ;AAAA,EACjC;AAGA,MAAI,SAAS,MAAM,YAAY,IAAI,GAAG;AACpC,UAAM,YAAY,QAAQ,UAAU,2CAA2C,OAAO,cAAc,IAAI,GAAG,GAAG,CAAC;AAAA,EACjH;AAEA,SAAO,IAAI,MAAM,UAAU,UAAU,QAAQ,UAAU,KAAK,OAAO,UAAU,MAAM,KAAK,MAAM,KAAK,MAAM,OAAO,QAAQ,CAAC;AAC3H;AAMA,SAAS,WAAW,QAAQ,OAAO,WAAW;AAC5C,MAAI,OAAO,OAAO;AAClB,MAAI,WAAW;AACf,MAAI,OAAO;AAEX,MAAI,QAAQ,MAAM,QAAQ,IAAI;AAE5B,OAAG;AACD,aAAO,KAAK,WAAW,EAAE,QAAQ;AAAA,IACnC,SAAS,QAAQ,MAAM,QAAQ;AAG/B,WAAO;AAAA,EACT;AAEA,QAAM,YAAY,QAAQ,UAAU,2CAA2C,OAAO,cAAc,IAAI,GAAG,GAAG,CAAC;AACjH;AAQA,SAAS,WAAW,QAAQ,OAAO,MAAM,KAAK,MAAM;AAClD,MAAI,OAAO,OAAO;AAClB,MAAI,WAAW,QAAQ;AACvB,MAAI,aAAa;AACjB,MAAI,OAAO;AACX,MAAI,QAAQ;AAEZ,SAAO,WAAW,KAAK,UAAU,CAAC,MAAM,OAAO,KAAK,WAAW,QAAQ,CAAC;AAAA,EACxE,SAAS,MAAU,SAAS,IAAQ;AAElC,QAAI,SAAS,IAAI;AACf,eAAS,KAAK,MAAM,YAAY,QAAQ;AACxC,aAAO,IAAI,MAAM,UAAU,QAAQ,OAAO,WAAW,GAAG,MAAM,KAAK,MAAM,KAAK;AAAA,IAChF;AAGA,QAAI,OAAO,MAAU,SAAS,GAAQ;AACpC,YAAM,YAAY,QAAQ,UAAU,oCAAoC,OAAO,cAAc,IAAI,GAAG,GAAG,CAAC;AAAA,IAC1G;AAEA,MAAE;AAEF,QAAI,SAAS,IAAI;AAEf,eAAS,KAAK,MAAM,YAAY,WAAW,CAAC;AAC5C,aAAO,KAAK,WAAW,QAAQ;AAE/B,cAAQ,MAAM;AAAA,QACZ,KAAK;AACH,mBAAS;AACT;AAAA,QAEF,KAAK;AACH,mBAAS;AACT;AAAA,QAEF,KAAK;AACH,mBAAS;AACT;AAAA,QAEF,KAAK;AACH,mBAAS;AACT;AAAA,QAEF,KAAK;AACH,mBAAS;AACT;AAAA,QAEF,KAAK;AACH,mBAAS;AACT;AAAA,QAEF,KAAK;AACH,mBAAS;AACT;AAAA,QAEF,KAAK;AACH,mBAAS;AACT;AAAA,QAEF,KAAK,KACH;AAEE,cAAI,WAAW,YAAY,KAAK,WAAW,WAAW,CAAC,GAAG,KAAK,WAAW,WAAW,CAAC,GAAG,KAAK,WAAW,WAAW,CAAC,GAAG,KAAK,WAAW,WAAW,CAAC,CAAC;AAErJ,cAAI,WAAW,GAAG;AAChB,gBAAI,kBAAkB,KAAK,MAAM,WAAW,GAAG,WAAW,CAAC;AAC3D,kBAAM,YAAY,QAAQ,UAAU,yCAAyC,OAAO,iBAAiB,GAAG,CAAC;AAAA,UAC3G;AAEA,mBAAS,OAAO,aAAa,QAAQ;AACrC,sBAAY;AACZ;AAAA,QACF;AAAA,QAEF;AACE,gBAAM,YAAY,QAAQ,UAAU,wCAAwC,OAAO,OAAO,aAAa,IAAI,GAAG,GAAG,CAAC;AAAA,MACtH;AAEA,QAAE;AACF,mBAAa;AAAA,IACf;AAAA,EACF;AAEA,QAAM,YAAY,QAAQ,UAAU,sBAAsB;AAC5D;AAQA,SAAS,gBAAgB,QAAQ,OAAO,MAAM,KAAK,MAAM,OAAO;AAC9D,MAAI,OAAO,OAAO;AAClB,MAAI,WAAW,QAAQ;AACvB,MAAI,aAAa;AACjB,MAAI,OAAO;AACX,MAAI,WAAW;AAEf,SAAO,WAAW,KAAK,UAAU,CAAC,MAAM,OAAO,KAAK,WAAW,QAAQ,CAAC,GAAG;AAEzE,QAAI,SAAS,MAAM,KAAK,WAAW,WAAW,CAAC,MAAM,MAAM,KAAK,WAAW,WAAW,CAAC,MAAM,IAAI;AAC/F,kBAAY,KAAK,MAAM,YAAY,QAAQ;AAC3C,aAAO,IAAI,MAAM,UAAU,cAAc,OAAO,WAAW,GAAG,MAAM,KAAK,MAAM,uBAAuB,QAAQ,CAAC;AAAA,IACjH;AAGA,QAAI,OAAO,MAAU,SAAS,KAAU,SAAS,MAAU,SAAS,IAAQ;AAC1E,YAAM,YAAY,QAAQ,UAAU,oCAAoC,OAAO,cAAc,IAAI,GAAG,GAAG,CAAC;AAAA,IAC1G;AAEA,QAAI,SAAS,IAAI;AAEf,QAAE;AACF,QAAE,MAAM;AACR,YAAM,YAAY;AAAA,IACpB,WAAW,SAAS,IAAI;AAEtB,UAAI,KAAK,WAAW,WAAW,CAAC,MAAM,IAAI;AACxC,oBAAY;AAAA,MACd,OAAO;AACL,UAAE;AAAA,MACJ;AAEA,QAAE,MAAM;AACR,YAAM,YAAY;AAAA,IACpB;AAAA;AAAA,MACA,SAAS,MAAM,KAAK,WAAW,WAAW,CAAC,MAAM,MAAM,KAAK,WAAW,WAAW,CAAC,MAAM,MAAM,KAAK,WAAW,WAAW,CAAC,MAAM;AAAA,MAAI;AACnI,kBAAY,KAAK,MAAM,YAAY,QAAQ,IAAI;AAC/C,kBAAY;AACZ,mBAAa;AAAA,IACf,OAAO;AACL,QAAE;AAAA,IACJ;AAAA,EACF;AAEA,QAAM,YAAY,QAAQ,UAAU,sBAAsB;AAC5D;AAaA,SAAS,YAAY,GAAG,GAAG,GAAG,GAAG;AAC/B,SAAO,SAAS,CAAC,KAAK,KAAK,SAAS,CAAC,KAAK,IAAI,SAAS,CAAC,KAAK,IAAI,SAAS,CAAC;AAC7E;AAWA,SAAS,SAAS,GAAG;AACnB,SAAO,KAAK,MAAM,KAAK,KAAK,IAAI,KAC9B,KAAK,MAAM,KAAK,KAAK,IAAI,KACzB,KAAK,MAAM,KAAK,MAAM,IAAI,KAC1B;AACJ;AAQA,SAAS,SAAS,QAAQ,OAAO,MAAM,KAAK,MAAM;AAChD,MAAI,OAAO,OAAO;AAClB,MAAI,aAAa,KAAK;AACtB,MAAI,WAAW,QAAQ;AACvB,MAAI,OAAO;AAEX,SAAO,aAAa,cAAc,CAAC,MAAM,OAAO,KAAK,WAAW,QAAQ,CAAC,MAAM,SAAS;AAAA,EACxF,QAAQ,MAAM,QAAQ;AAAA,EACtB,QAAQ,MAAM,QAAQ;AAAA,EACtB,QAAQ,MAAM,QAAQ,MACpB;AACA,MAAE;AAAA,EACJ;AAEA,SAAO,IAAI,MAAM,UAAU,MAAM,OAAO,UAAU,MAAM,KAAK,MAAM,KAAK,MAAM,OAAO,QAAQ,CAAC;AAChG;AAGA,SAAS,YAAY,MAAM;AACzB,SAAO,SAAS,MAAM,QAAQ,MAAM,QAAQ,MAAM,QAAQ,MAAM,QAAQ;AAC1E;;;ACppBO,SAAS,MAAM,QAAQ,SAAS;AACrC,MAAI,SAAS,IAAI,OAAO,QAAQ,OAAO;AACvC,SAAO,OAAO,cAAc;AAC9B;AAiDO,IAAI,SAAsB,2BAAY;AAC3C,WAASC,QAAO,QAAQ,SAAS;AAC/B,QAAI,YAAY,SAAS,MAAM,IAAI,SAAS,IAAI,OAAO,MAAM;AAC7D,SAAK,SAAS,IAAI,MAAM,SAAS;AACjC,SAAK,WAAW;AAAA,EAClB;AAMA,MAAI,SAASA,QAAO;AAEpB,SAAO,YAAY,SAAS,YAAY;AACtC,QAAI,QAAQ,KAAK,YAAY,UAAU,IAAI;AAC3C,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX,OAAO,MAAM;AAAA,MACb,KAAK,KAAK,IAAI,KAAK;AAAA,IACrB;AAAA,EACF;AAOA,SAAO,gBAAgB,SAAS,gBAAgB;AAC9C,QAAI,QAAQ,KAAK,OAAO;AACxB,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX,aAAa,KAAK,KAAK,UAAU,KAAK,KAAK,iBAAiB,UAAU,GAAG;AAAA,MACzE,KAAK,KAAK,IAAI,KAAK;AAAA,IACrB;AAAA,EACF;AAaA,SAAO,kBAAkB,SAAS,kBAAkB;AAClD,QAAI,KAAK,KAAK,UAAU,IAAI,GAAG;AAC7B,cAAQ,KAAK,OAAO,MAAM,OAAO;AAAA,QAC/B,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AACH,iBAAO,KAAK,yBAAyB;AAAA,QAEvC,KAAK;AACH,iBAAO,KAAK,wBAAwB;AAAA,QAEtC,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AACH,iBAAO,KAAK,0BAA0B;AAAA,QAExC,KAAK;AACH,iBAAO,KAAK,yBAAyB;AAAA,MACzC;AAAA,IACF,WAAW,KAAK,KAAK,UAAU,OAAO,GAAG;AACvC,aAAO,KAAK,yBAAyB;AAAA,IACvC,WAAW,KAAK,gBAAgB,GAAG;AACjC,aAAO,KAAK,0BAA0B;AAAA,IACxC;AAEA,UAAM,KAAK,WAAW;AAAA,EACxB;AASA,SAAO,2BAA2B,SAAS,2BAA2B;AACpE,QAAI,QAAQ,KAAK,OAAO;AAExB,QAAI,KAAK,KAAK,UAAU,OAAO,GAAG;AAChC,aAAO;AAAA,QACL,MAAM,KAAK;AAAA,QACX,WAAW;AAAA,QACX,MAAM;AAAA,QACN,qBAAqB,CAAC;AAAA,QACtB,YAAY,CAAC;AAAA,QACb,cAAc,KAAK,kBAAkB;AAAA,QACrC,KAAK,KAAK,IAAI,KAAK;AAAA,MACrB;AAAA,IACF;AAEA,QAAI,YAAY,KAAK,mBAAmB;AACxC,QAAIC;AAEJ,QAAI,KAAK,KAAK,UAAU,IAAI,GAAG;AAC7B,MAAAA,QAAO,KAAK,UAAU;AAAA,IACxB;AAEA,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX;AAAA,MACA,MAAMA;AAAA,MACN,qBAAqB,KAAK,yBAAyB;AAAA,MACnD,YAAY,KAAK,gBAAgB,KAAK;AAAA,MACtC,cAAc,KAAK,kBAAkB;AAAA,MACrC,KAAK,KAAK,IAAI,KAAK;AAAA,IACrB;AAAA,EACF;AAMA,SAAO,qBAAqB,SAAS,qBAAqB;AACxD,QAAI,iBAAiB,KAAK,YAAY,UAAU,IAAI;AAEpD,YAAQ,eAAe,OAAO;AAAA,MAC5B,KAAK;AACH,eAAO;AAAA,MAET,KAAK;AACH,eAAO;AAAA,MAET,KAAK;AACH,eAAO;AAAA,IACX;AAEA,UAAM,KAAK,WAAW,cAAc;AAAA,EACtC;AAMA,SAAO,2BAA2B,SAAS,2BAA2B;AACpE,WAAO,KAAK,aAAa,UAAU,SAAS,KAAK,yBAAyB,UAAU,OAAO;AAAA,EAC7F;AAMA,SAAO,0BAA0B,SAAS,0BAA0B;AAClE,QAAI,QAAQ,KAAK,OAAO;AACxB,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX,UAAU,KAAK,cAAc;AAAA,MAC7B,OAAO,KAAK,YAAY,UAAU,KAAK,GAAG,KAAK,mBAAmB;AAAA,MAClE,cAAc,KAAK,oBAAoB,UAAU,MAAM,IAAI,KAAK,kBAAkB,IAAI,IAAI;AAAA,MAC1F,YAAY,KAAK,gBAAgB,IAAI;AAAA,MACrC,KAAK,KAAK,IAAI,KAAK;AAAA,IACrB;AAAA,EACF;AAMA,SAAO,gBAAgB,SAAS,gBAAgB;AAC9C,QAAI,QAAQ,KAAK,OAAO;AACxB,SAAK,YAAY,UAAU,MAAM;AACjC,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX,MAAM,KAAK,UAAU;AAAA,MACrB,KAAK,KAAK,IAAI,KAAK;AAAA,IACrB;AAAA,EACF;AAMA,SAAO,oBAAoB,SAAS,oBAAoB;AACtD,QAAI,QAAQ,KAAK,OAAO;AACxB,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX,YAAY,KAAK,KAAK,UAAU,SAAS,KAAK,gBAAgB,UAAU,OAAO;AAAA,MAC/E,KAAK,KAAK,IAAI,KAAK;AAAA,IACrB;AAAA,EACF;AASA,SAAO,iBAAiB,SAAS,iBAAiB;AAChD,WAAO,KAAK,KAAK,UAAU,MAAM,IAAI,KAAK,cAAc,IAAI,KAAK,WAAW;AAAA,EAC9E;AAQA,SAAO,aAAa,SAAS,aAAa;AACxC,QAAI,QAAQ,KAAK,OAAO;AACxB,QAAI,cAAc,KAAK,UAAU;AACjC,QAAI;AACJ,QAAIA;AAEJ,QAAI,KAAK,oBAAoB,UAAU,KAAK,GAAG;AAC7C,cAAQ;AACR,MAAAA,QAAO,KAAK,UAAU;AAAA,IACxB,OAAO;AACL,MAAAA,QAAO;AAAA,IACT;AAEA,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX;AAAA,MACA,MAAMA;AAAA,MACN,WAAW,KAAK,eAAe,KAAK;AAAA,MACpC,YAAY,KAAK,gBAAgB,KAAK;AAAA,MACtC,cAAc,KAAK,KAAK,UAAU,OAAO,IAAI,KAAK,kBAAkB,IAAI;AAAA,MACxE,KAAK,KAAK,IAAI,KAAK;AAAA,IACrB;AAAA,EACF;AAMA,SAAO,iBAAiB,SAAS,eAAe,SAAS;AACvD,QAAI,OAAO,UAAU,KAAK,qBAAqB,KAAK;AACpD,WAAO,KAAK,aAAa,UAAU,SAAS,MAAM,UAAU,OAAO;AAAA,EACrE;AAMA,SAAO,gBAAgB,SAAS,gBAAgB;AAC9C,QAAI,QAAQ,KAAK,OAAO;AACxB,QAAIA,QAAO,KAAK,UAAU;AAC1B,SAAK,YAAY,UAAU,KAAK;AAChC,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX,MAAMA;AAAA,MACN,OAAO,KAAK,kBAAkB,KAAK;AAAA,MACnC,KAAK,KAAK,IAAI,KAAK;AAAA,IACrB;AAAA,EACF;AAEA,SAAO,qBAAqB,SAAS,qBAAqB;AACxD,QAAI,QAAQ,KAAK,OAAO;AACxB,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX,MAAM,KAAK,UAAU;AAAA,MACrB,QAAQ,KAAK,YAAY,UAAU,KAAK,GAAG,KAAK,kBAAkB,IAAI;AAAA,MACtE,KAAK,KAAK,IAAI,KAAK;AAAA,IACrB;AAAA,EACF;AAWA,SAAO,gBAAgB,SAAS,gBAAgB;AAC9C,QAAI,QAAQ,KAAK,OAAO;AACxB,SAAK,YAAY,UAAU,MAAM;AACjC,QAAI,mBAAmB,KAAK,sBAAsB,IAAI;AAEtD,QAAI,CAAC,oBAAoB,KAAK,KAAK,UAAU,IAAI,GAAG;AAClD,aAAO;AAAA,QACL,MAAM,KAAK;AAAA,QACX,MAAM,KAAK,kBAAkB;AAAA,QAC7B,YAAY,KAAK,gBAAgB,KAAK;AAAA,QACtC,KAAK,KAAK,IAAI,KAAK;AAAA,MACrB;AAAA,IACF;AAEA,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX,eAAe,mBAAmB,KAAK,eAAe,IAAI;AAAA,MAC1D,YAAY,KAAK,gBAAgB,KAAK;AAAA,MACtC,cAAc,KAAK,kBAAkB;AAAA,MACrC,KAAK,KAAK,IAAI,KAAK;AAAA,IACrB;AAAA,EACF;AASA,SAAO,0BAA0B,SAAS,0BAA0B;AAClE,QAAI;AAEJ,QAAI,QAAQ,KAAK,OAAO;AACxB,SAAK,cAAc,UAAU;AAI7B,UAAM,iBAAiB,KAAK,cAAc,QAAQ,mBAAmB,SAAS,SAAS,eAAe,mCAAmC,MAAM;AAC7I,aAAO;AAAA,QACL,MAAM,KAAK;AAAA,QACX,MAAM,KAAK,kBAAkB;AAAA,QAC7B,qBAAqB,KAAK,yBAAyB;AAAA,QACnD,gBAAgB,KAAK,cAAc,IAAI,GAAG,KAAK,eAAe;AAAA,QAC9D,YAAY,KAAK,gBAAgB,KAAK;AAAA,QACtC,cAAc,KAAK,kBAAkB;AAAA,QACrC,KAAK,KAAK,IAAI,KAAK;AAAA,MACrB;AAAA,IACF;AAEA,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX,MAAM,KAAK,kBAAkB;AAAA,MAC7B,gBAAgB,KAAK,cAAc,IAAI,GAAG,KAAK,eAAe;AAAA,MAC9D,YAAY,KAAK,gBAAgB,KAAK;AAAA,MACtC,cAAc,KAAK,kBAAkB;AAAA,MACrC,KAAK,KAAK,IAAI,KAAK;AAAA,IACrB;AAAA,EACF;AAMA,SAAO,oBAAoB,SAAS,oBAAoB;AACtD,QAAI,KAAK,OAAO,MAAM,UAAU,MAAM;AACpC,YAAM,KAAK,WAAW;AAAA,IACxB;AAEA,WAAO,KAAK,UAAU;AAAA,EACxB;AAsBA,SAAO,oBAAoB,SAAS,kBAAkB,SAAS;AAC7D,QAAI,QAAQ,KAAK,OAAO;AAExB,YAAQ,MAAM,MAAM;AAAA,MAClB,KAAK,UAAU;AACb,eAAO,KAAK,UAAU,OAAO;AAAA,MAE/B,KAAK,UAAU;AACb,eAAO,KAAK,YAAY,OAAO;AAAA,MAEjC,KAAK,UAAU;AACb,aAAK,OAAO,QAAQ;AAEpB,eAAO;AAAA,UACL,MAAM,KAAK;AAAA,UACX,OAAO,MAAM;AAAA,UACb,KAAK,KAAK,IAAI,KAAK;AAAA,QACrB;AAAA,MAEF,KAAK,UAAU;AACb,aAAK,OAAO,QAAQ;AAEpB,eAAO;AAAA,UACL,MAAM,KAAK;AAAA,UACX,OAAO,MAAM;AAAA,UACb,KAAK,KAAK,IAAI,KAAK;AAAA,QACrB;AAAA,MAEF,KAAK,UAAU;AAAA,MACf,KAAK,UAAU;AACb,eAAO,KAAK,mBAAmB;AAAA,MAEjC,KAAK,UAAU;AACb,aAAK,OAAO,QAAQ;AAEpB,gBAAQ,MAAM,OAAO;AAAA,UACnB,KAAK;AACH,mBAAO;AAAA,cACL,MAAM,KAAK;AAAA,cACX,OAAO;AAAA,cACP,KAAK,KAAK,IAAI,KAAK;AAAA,YACrB;AAAA,UAEF,KAAK;AACH,mBAAO;AAAA,cACL,MAAM,KAAK;AAAA,cACX,OAAO;AAAA,cACP,KAAK,KAAK,IAAI,KAAK;AAAA,YACrB;AAAA,UAEF,KAAK;AACH,mBAAO;AAAA,cACL,MAAM,KAAK;AAAA,cACX,KAAK,KAAK,IAAI,KAAK;AAAA,YACrB;AAAA,UAEF;AACE,mBAAO;AAAA,cACL,MAAM,KAAK;AAAA,cACX,OAAO,MAAM;AAAA,cACb,KAAK,KAAK,IAAI,KAAK;AAAA,YACrB;AAAA,QACJ;AAAA,MAEF,KAAK,UAAU;AACb,YAAI,CAAC,SAAS;AACZ,iBAAO,KAAK,cAAc;AAAA,QAC5B;AAEA;AAAA,IACJ;AAEA,UAAM,KAAK,WAAW;AAAA,EACxB;AAEA,SAAO,qBAAqB,SAAS,qBAAqB;AACxD,QAAI,QAAQ,KAAK,OAAO;AAExB,SAAK,OAAO,QAAQ;AAEpB,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX,OAAO,MAAM;AAAA,MACb,OAAO,MAAM,SAAS,UAAU;AAAA,MAChC,KAAK,KAAK,IAAI,KAAK;AAAA,IACrB;AAAA,EACF;AAQA,SAAO,YAAY,SAAS,UAAU,SAAS;AAC7C,QAAI,QAAQ;AAEZ,QAAI,QAAQ,KAAK,OAAO;AAExB,QAAI,OAAO,SAASC,QAAO;AACzB,aAAO,MAAM,kBAAkB,OAAO;AAAA,IACxC;AAEA,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX,QAAQ,KAAK,IAAI,UAAU,WAAW,MAAM,UAAU,SAAS;AAAA,MAC/D,KAAK,KAAK,IAAI,KAAK;AAAA,IACrB;AAAA,EACF;AAQA,SAAO,cAAc,SAAS,YAAY,SAAS;AACjD,QAAI,SAAS;AAEb,QAAI,QAAQ,KAAK,OAAO;AAExB,QAAI,OAAO,SAASA,QAAO;AACzB,aAAO,OAAO,iBAAiB,OAAO;AAAA,IACxC;AAEA,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX,QAAQ,KAAK,IAAI,UAAU,SAAS,MAAM,UAAU,OAAO;AAAA,MAC3D,KAAK,KAAK,IAAI,KAAK;AAAA,IACrB;AAAA,EACF;AAMA,SAAO,mBAAmB,SAAS,iBAAiB,SAAS;AAC3D,QAAI,QAAQ,KAAK,OAAO;AACxB,QAAID,QAAO,KAAK,UAAU;AAC1B,SAAK,YAAY,UAAU,KAAK;AAChC,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX,MAAMA;AAAA,MACN,OAAO,KAAK,kBAAkB,OAAO;AAAA,MACrC,KAAK,KAAK,IAAI,KAAK;AAAA,IACrB;AAAA,EACF;AAOA,SAAO,kBAAkB,SAAS,gBAAgB,SAAS;AACzD,QAAI,aAAa,CAAC;AAElB,WAAO,KAAK,KAAK,UAAU,EAAE,GAAG;AAC9B,iBAAW,KAAK,KAAK,eAAe,OAAO,CAAC;AAAA,IAC9C;AAEA,WAAO;AAAA,EACT;AAMA,SAAO,iBAAiB,SAAS,eAAe,SAAS;AACvD,QAAI,QAAQ,KAAK,OAAO;AACxB,SAAK,YAAY,UAAU,EAAE;AAC7B,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX,MAAM,KAAK,UAAU;AAAA,MACrB,WAAW,KAAK,eAAe,OAAO;AAAA,MACtC,KAAK,KAAK,IAAI,KAAK;AAAA,IACrB;AAAA,EACF;AAUA,SAAO,qBAAqB,SAAS,qBAAqB;AACxD,QAAI,QAAQ,KAAK,OAAO;AACxB,QAAI;AAEJ,QAAI,KAAK,oBAAoB,UAAU,SAAS,GAAG;AACjD,aAAO,KAAK,mBAAmB;AAC/B,WAAK,YAAY,UAAU,SAAS;AACpC,aAAO;AAAA,QACL,MAAM,KAAK;AAAA,QACX;AAAA,QACA,KAAK,KAAK,IAAI,KAAK;AAAA,MACrB;AAAA,IACF,OAAO;AACL,aAAO,KAAK,eAAe;AAAA,IAC7B;AAEA,QAAI,KAAK,oBAAoB,UAAU,IAAI,GAAG;AAC5C,aAAO;AAAA,QACL,MAAM,KAAK;AAAA,QACX;AAAA,QACA,KAAK,KAAK,IAAI,KAAK;AAAA,MACrB;AAAA,IACF;AAEA,WAAO;AAAA,EACT;AAMA,SAAO,iBAAiB,SAAS,iBAAiB;AAChD,QAAI,QAAQ,KAAK,OAAO;AACxB,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX,MAAM,KAAK,UAAU;AAAA,MACrB,KAAK,KAAK,IAAI,KAAK;AAAA,IACrB;AAAA,EACF;AAkBA,SAAO,4BAA4B,SAAS,4BAA4B;AAEtE,QAAI,eAAe,KAAK,gBAAgB,IAAI,KAAK,OAAO,UAAU,IAAI,KAAK,OAAO;AAElF,QAAI,aAAa,SAAS,UAAU,MAAM;AACxC,cAAQ,aAAa,OAAO;AAAA,QAC1B,KAAK;AACH,iBAAO,KAAK,sBAAsB;AAAA,QAEpC,KAAK;AACH,iBAAO,KAAK,0BAA0B;AAAA,QAExC,KAAK;AACH,iBAAO,KAAK,0BAA0B;AAAA,QAExC,KAAK;AACH,iBAAO,KAAK,6BAA6B;AAAA,QAE3C,KAAK;AACH,iBAAO,KAAK,yBAAyB;AAAA,QAEvC,KAAK;AACH,iBAAO,KAAK,wBAAwB;AAAA,QAEtC,KAAK;AACH,iBAAO,KAAK,+BAA+B;AAAA,QAE7C,KAAK;AACH,iBAAO,KAAK,yBAAyB;AAAA,MACzC;AAAA,IACF;AAEA,UAAM,KAAK,WAAW,YAAY;AAAA,EACpC;AAEA,SAAO,kBAAkB,SAAS,kBAAkB;AAClD,WAAO,KAAK,KAAK,UAAU,MAAM,KAAK,KAAK,KAAK,UAAU,YAAY;AAAA,EACxE;AAMA,SAAO,mBAAmB,SAAS,mBAAmB;AACpD,QAAI,KAAK,gBAAgB,GAAG;AAC1B,aAAO,KAAK,mBAAmB;AAAA,IACjC;AAAA,EACF;AAMA,SAAO,wBAAwB,SAAS,wBAAwB;AAC9D,QAAI,QAAQ,KAAK,OAAO;AACxB,QAAI,cAAc,KAAK,iBAAiB;AACxC,SAAK,cAAc,QAAQ;AAC3B,QAAI,aAAa,KAAK,gBAAgB,IAAI;AAC1C,QAAI,iBAAiB,KAAK,KAAK,UAAU,SAAS,KAAK,8BAA8B,UAAU,OAAO;AACtG,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX;AAAA,MACA;AAAA,MACA;AAAA,MACA,KAAK,KAAK,IAAI,KAAK;AAAA,IACrB;AAAA,EACF;AAMA,SAAO,+BAA+B,SAAS,+BAA+B;AAC5E,QAAI,QAAQ,KAAK,OAAO;AACxB,QAAI,YAAY,KAAK,mBAAmB;AACxC,SAAK,YAAY,UAAU,KAAK;AAChC,QAAI,OAAO,KAAK,eAAe;AAC/B,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX;AAAA,MACA;AAAA,MACA,KAAK,KAAK,IAAI,KAAK;AAAA,IACrB;AAAA,EACF;AAMA,SAAO,4BAA4B,SAAS,4BAA4B;AACtE,QAAI,QAAQ,KAAK,OAAO;AACxB,QAAI,cAAc,KAAK,iBAAiB;AACxC,SAAK,cAAc,QAAQ;AAC3B,QAAIA,QAAO,KAAK,UAAU;AAC1B,QAAI,aAAa,KAAK,gBAAgB,IAAI;AAC1C,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX;AAAA,MACA,MAAMA;AAAA,MACN;AAAA,MACA,KAAK,KAAK,IAAI,KAAK;AAAA,IACrB;AAAA,EACF;AAQA,SAAO,4BAA4B,SAAS,4BAA4B;AACtE,QAAI,QAAQ,KAAK,OAAO;AACxB,QAAI,cAAc,KAAK,iBAAiB;AACxC,SAAK,cAAc,MAAM;AACzB,QAAIA,QAAO,KAAK,UAAU;AAC1B,QAAI,aAAa,KAAK,0BAA0B;AAChD,QAAI,aAAa,KAAK,gBAAgB,IAAI;AAC1C,QAAI,SAAS,KAAK,sBAAsB;AACxC,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX;AAAA,MACA,MAAMA;AAAA,MACN;AAAA,MACA;AAAA,MACA;AAAA,MACA,KAAK,KAAK,IAAI,KAAK;AAAA,IACrB;AAAA,EACF;AAQA,SAAO,4BAA4B,SAAS,4BAA4B;AACtE,QAAI;AAEJ,QAAI,CAAC,KAAK,sBAAsB,YAAY,GAAG;AAC7C,aAAO,CAAC;AAAA,IACV;AAEA,UAAM,kBAAkB,KAAK,cAAc,QAAQ,oBAAoB,SAAS,SAAS,gBAAgB,wCAAwC,MAAM;AACrJ,UAAI,QAAQ,CAAC;AAEb,WAAK,oBAAoB,UAAU,GAAG;AAEtC,SAAG;AACD,cAAM,KAAK,KAAK,eAAe,CAAC;AAAA,MAClC,SAAS,KAAK,oBAAoB,UAAU,GAAG,KAAK,KAAK,KAAK,UAAU,IAAI;AAE5E,aAAO;AAAA,IACT;AAEA,WAAO,KAAK,cAAc,UAAU,KAAK,KAAK,cAAc;AAAA,EAC9D;AAMA,SAAO,wBAAwB,SAAS,wBAAwB;AAC9D,QAAI;AAGJ,UAAM,kBAAkB,KAAK,cAAc,QAAQ,oBAAoB,SAAS,SAAS,gBAAgB,+BAA+B,QAAQ,KAAK,KAAK,UAAU,OAAO,KAAK,KAAK,OAAO,UAAU,EAAE,SAAS,UAAU,SAAS;AAClO,WAAK,OAAO,QAAQ;AAEpB,WAAK,OAAO,QAAQ;AAEpB,aAAO,CAAC;AAAA,IACV;AAEA,WAAO,KAAK,aAAa,UAAU,SAAS,KAAK,sBAAsB,UAAU,OAAO;AAAA,EAC1F;AAOA,SAAO,uBAAuB,SAAS,uBAAuB;AAC5D,QAAI,QAAQ,KAAK,OAAO;AACxB,QAAI,cAAc,KAAK,iBAAiB;AACxC,QAAIA,QAAO,KAAK,UAAU;AAC1B,QAAI,OAAO,KAAK,kBAAkB;AAClC,SAAK,YAAY,UAAU,KAAK;AAChC,QAAI,OAAO,KAAK,mBAAmB;AACnC,QAAI,aAAa,KAAK,gBAAgB,IAAI;AAC1C,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX;AAAA,MACA,MAAMA;AAAA,MACN,WAAW;AAAA,MACX;AAAA,MACA;AAAA,MACA,KAAK,KAAK,IAAI,KAAK;AAAA,IACrB;AAAA,EACF;AAMA,SAAO,oBAAoB,SAAS,oBAAoB;AACtD,WAAO,KAAK,aAAa,UAAU,SAAS,KAAK,oBAAoB,UAAU,OAAO;AAAA,EACxF;AAOA,SAAO,qBAAqB,SAAS,qBAAqB;AACxD,QAAI,QAAQ,KAAK,OAAO;AACxB,QAAI,cAAc,KAAK,iBAAiB;AACxC,QAAIA,QAAO,KAAK,UAAU;AAC1B,SAAK,YAAY,UAAU,KAAK;AAChC,QAAI,OAAO,KAAK,mBAAmB;AACnC,QAAI;AAEJ,QAAI,KAAK,oBAAoB,UAAU,MAAM,GAAG;AAC9C,qBAAe,KAAK,kBAAkB,IAAI;AAAA,IAC5C;AAEA,QAAI,aAAa,KAAK,gBAAgB,IAAI;AAC1C,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX;AAAA,MACA,MAAMA;AAAA,MACN;AAAA,MACA;AAAA,MACA;AAAA,MACA,KAAK,KAAK,IAAI,KAAK;AAAA,IACrB;AAAA,EACF;AAOA,SAAO,+BAA+B,SAAS,+BAA+B;AAC5E,QAAI,QAAQ,KAAK,OAAO;AACxB,QAAI,cAAc,KAAK,iBAAiB;AACxC,SAAK,cAAc,WAAW;AAC9B,QAAIA,QAAO,KAAK,UAAU;AAC1B,QAAI,aAAa,KAAK,0BAA0B;AAChD,QAAI,aAAa,KAAK,gBAAgB,IAAI;AAC1C,QAAI,SAAS,KAAK,sBAAsB;AACxC,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX;AAAA,MACA,MAAMA;AAAA,MACN;AAAA,MACA;AAAA,MACA;AAAA,MACA,KAAK,KAAK,IAAI,KAAK;AAAA,IACrB;AAAA,EACF;AAOA,SAAO,2BAA2B,SAAS,2BAA2B;AACpE,QAAI,QAAQ,KAAK,OAAO;AACxB,QAAI,cAAc,KAAK,iBAAiB;AACxC,SAAK,cAAc,OAAO;AAC1B,QAAIA,QAAO,KAAK,UAAU;AAC1B,QAAI,aAAa,KAAK,gBAAgB,IAAI;AAC1C,QAAI,QAAQ,KAAK,sBAAsB;AACvC,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX;AAAA,MACA,MAAMA;AAAA,MACN;AAAA,MACA;AAAA,MACA,KAAK,KAAK,IAAI,KAAK;AAAA,IACrB;AAAA,EACF;AAQA,SAAO,wBAAwB,SAAS,wBAAwB;AAC9D,WAAO,KAAK,oBAAoB,UAAU,MAAM,IAAI,KAAK,cAAc,UAAU,MAAM,KAAK,cAAc,IAAI,CAAC;AAAA,EACjH;AAOA,SAAO,0BAA0B,SAAS,0BAA0B;AAClE,QAAI,QAAQ,KAAK,OAAO;AACxB,QAAI,cAAc,KAAK,iBAAiB;AACxC,SAAK,cAAc,MAAM;AACzB,QAAIA,QAAO,KAAK,UAAU;AAC1B,QAAI,aAAa,KAAK,gBAAgB,IAAI;AAC1C,QAAI,SAAS,KAAK,0BAA0B;AAC5C,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX;AAAA,MACA,MAAMA;AAAA,MACN;AAAA,MACA;AAAA,MACA,KAAK,KAAK,IAAI,KAAK;AAAA,IACrB;AAAA,EACF;AAMA,SAAO,4BAA4B,SAAS,4BAA4B;AACtE,WAAO,KAAK,aAAa,UAAU,SAAS,KAAK,0BAA0B,UAAU,OAAO;AAAA,EAC9F;AAQA,SAAO,2BAA2B,SAAS,2BAA2B;AACpE,QAAI,QAAQ,KAAK,OAAO;AACxB,QAAI,cAAc,KAAK,iBAAiB;AACxC,QAAIA,QAAO,KAAK,UAAU;AAC1B,QAAI,aAAa,KAAK,gBAAgB,IAAI;AAC1C,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX;AAAA,MACA,MAAMA;AAAA,MACN;AAAA,MACA,KAAK,KAAK,IAAI,KAAK;AAAA,IACrB;AAAA,EACF;AAOA,SAAO,iCAAiC,SAAS,iCAAiC;AAChF,QAAI,QAAQ,KAAK,OAAO;AACxB,QAAI,cAAc,KAAK,iBAAiB;AACxC,SAAK,cAAc,OAAO;AAC1B,QAAIA,QAAO,KAAK,UAAU;AAC1B,QAAI,aAAa,KAAK,gBAAgB,IAAI;AAC1C,QAAI,SAAS,KAAK,2BAA2B;AAC7C,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX;AAAA,MACA,MAAMA;AAAA,MACN;AAAA,MACA;AAAA,MACA,KAAK,KAAK,IAAI,KAAK;AAAA,IACrB;AAAA,EACF;AAMA,SAAO,6BAA6B,SAAS,6BAA6B;AACxE,WAAO,KAAK,aAAa,UAAU,SAAS,KAAK,oBAAoB,UAAU,OAAO;AAAA,EACxF;AAgBA,SAAO,2BAA2B,SAAS,2BAA2B;AACpE,QAAI,eAAe,KAAK,OAAO,UAAU;AAEzC,QAAI,aAAa,SAAS,UAAU,MAAM;AACxC,cAAQ,aAAa,OAAO;AAAA,QAC1B,KAAK;AACH,iBAAO,KAAK,qBAAqB;AAAA,QAEnC,KAAK;AACH,iBAAO,KAAK,yBAAyB;AAAA,QAEvC,KAAK;AACH,iBAAO,KAAK,yBAAyB;AAAA,QAEvC,KAAK;AACH,iBAAO,KAAK,4BAA4B;AAAA,QAE1C,KAAK;AACH,iBAAO,KAAK,wBAAwB;AAAA,QAEtC,KAAK;AACH,iBAAO,KAAK,uBAAuB;AAAA,QAErC,KAAK;AACH,iBAAO,KAAK,8BAA8B;AAAA,MAC9C;AAAA,IACF;AAEA,UAAM,KAAK,WAAW,YAAY;AAAA,EACpC;AAQA,SAAO,uBAAuB,SAAS,uBAAuB;AAC5D,QAAI,QAAQ,KAAK,OAAO;AACxB,SAAK,cAAc,QAAQ;AAC3B,SAAK,cAAc,QAAQ;AAC3B,QAAI,aAAa,KAAK,gBAAgB,IAAI;AAC1C,QAAI,iBAAiB,KAAK,aAAa,UAAU,SAAS,KAAK,8BAA8B,UAAU,OAAO;AAE9G,QAAI,WAAW,WAAW,KAAK,eAAe,WAAW,GAAG;AAC1D,YAAM,KAAK,WAAW;AAAA,IACxB;AAEA,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX;AAAA,MACA;AAAA,MACA,KAAK,KAAK,IAAI,KAAK;AAAA,IACrB;AAAA,EACF;AAOA,SAAO,2BAA2B,SAAS,2BAA2B;AACpE,QAAI,QAAQ,KAAK,OAAO;AACxB,SAAK,cAAc,QAAQ;AAC3B,SAAK,cAAc,QAAQ;AAC3B,QAAIA,QAAO,KAAK,UAAU;AAC1B,QAAI,aAAa,KAAK,gBAAgB,IAAI;AAE1C,QAAI,WAAW,WAAW,GAAG;AAC3B,YAAM,KAAK,WAAW;AAAA,IACxB;AAEA,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX,MAAMA;AAAA,MACN;AAAA,MACA,KAAK,KAAK,IAAI,KAAK;AAAA,IACrB;AAAA,EACF;AASA,SAAO,2BAA2B,SAAS,2BAA2B;AACpE,QAAI,QAAQ,KAAK,OAAO;AACxB,SAAK,cAAc,QAAQ;AAC3B,SAAK,cAAc,MAAM;AACzB,QAAIA,QAAO,KAAK,UAAU;AAC1B,QAAI,aAAa,KAAK,0BAA0B;AAChD,QAAI,aAAa,KAAK,gBAAgB,IAAI;AAC1C,QAAI,SAAS,KAAK,sBAAsB;AAExC,QAAI,WAAW,WAAW,KAAK,WAAW,WAAW,KAAK,OAAO,WAAW,GAAG;AAC7E,YAAM,KAAK,WAAW;AAAA,IACxB;AAEA,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX,MAAMA;AAAA,MACN;AAAA,MACA;AAAA,MACA;AAAA,MACA,KAAK,KAAK,IAAI,KAAK;AAAA,IACrB;AAAA,EACF;AASA,SAAO,8BAA8B,SAAS,8BAA8B;AAC1E,QAAI,QAAQ,KAAK,OAAO;AACxB,SAAK,cAAc,QAAQ;AAC3B,SAAK,cAAc,WAAW;AAC9B,QAAIA,QAAO,KAAK,UAAU;AAC1B,QAAI,aAAa,KAAK,0BAA0B;AAChD,QAAI,aAAa,KAAK,gBAAgB,IAAI;AAC1C,QAAI,SAAS,KAAK,sBAAsB;AAExC,QAAI,WAAW,WAAW,KAAK,WAAW,WAAW,KAAK,OAAO,WAAW,GAAG;AAC7E,YAAM,KAAK,WAAW;AAAA,IACxB;AAEA,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX,MAAMA;AAAA,MACN;AAAA,MACA;AAAA,MACA;AAAA,MACA,KAAK,KAAK,IAAI,KAAK;AAAA,IACrB;AAAA,EACF;AAQA,SAAO,0BAA0B,SAAS,0BAA0B;AAClE,QAAI,QAAQ,KAAK,OAAO;AACxB,SAAK,cAAc,QAAQ;AAC3B,SAAK,cAAc,OAAO;AAC1B,QAAIA,QAAO,KAAK,UAAU;AAC1B,QAAI,aAAa,KAAK,gBAAgB,IAAI;AAC1C,QAAI,QAAQ,KAAK,sBAAsB;AAEvC,QAAI,WAAW,WAAW,KAAK,MAAM,WAAW,GAAG;AACjD,YAAM,KAAK,WAAW;AAAA,IACxB;AAEA,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX,MAAMA;AAAA,MACN;AAAA,MACA;AAAA,MACA,KAAK,KAAK,IAAI,KAAK;AAAA,IACrB;AAAA,EACF;AAQA,SAAO,yBAAyB,SAAS,yBAAyB;AAChE,QAAI,QAAQ,KAAK,OAAO;AACxB,SAAK,cAAc,QAAQ;AAC3B,SAAK,cAAc,MAAM;AACzB,QAAIA,QAAO,KAAK,UAAU;AAC1B,QAAI,aAAa,KAAK,gBAAgB,IAAI;AAC1C,QAAI,SAAS,KAAK,0BAA0B;AAE5C,QAAI,WAAW,WAAW,KAAK,OAAO,WAAW,GAAG;AAClD,YAAM,KAAK,WAAW;AAAA,IACxB;AAEA,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX,MAAMA;AAAA,MACN;AAAA,MACA;AAAA,MACA,KAAK,KAAK,IAAI,KAAK;AAAA,IACrB;AAAA,EACF;AAQA,SAAO,gCAAgC,SAAS,gCAAgC;AAC9E,QAAI,QAAQ,KAAK,OAAO;AACxB,SAAK,cAAc,QAAQ;AAC3B,SAAK,cAAc,OAAO;AAC1B,QAAIA,QAAO,KAAK,UAAU;AAC1B,QAAI,aAAa,KAAK,gBAAgB,IAAI;AAC1C,QAAI,SAAS,KAAK,2BAA2B;AAE7C,QAAI,WAAW,WAAW,KAAK,OAAO,WAAW,GAAG;AAClD,YAAM,KAAK,WAAW;AAAA,IACxB;AAEA,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX,MAAMA;AAAA,MACN;AAAA,MACA;AAAA,MACA,KAAK,KAAK,IAAI,KAAK;AAAA,IACrB;AAAA,EACF;AAOA,SAAO,2BAA2B,SAAS,2BAA2B;AACpE,QAAI,QAAQ,KAAK,OAAO;AACxB,QAAI,cAAc,KAAK,iBAAiB;AACxC,SAAK,cAAc,WAAW;AAC9B,SAAK,YAAY,UAAU,EAAE;AAC7B,QAAIA,QAAO,KAAK,UAAU;AAC1B,QAAI,OAAO,KAAK,kBAAkB;AAClC,QAAI,aAAa,KAAK,sBAAsB,YAAY;AACxD,SAAK,cAAc,IAAI;AACvB,QAAI,YAAY,KAAK,wBAAwB;AAC7C,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX;AAAA,MACA,MAAMA;AAAA,MACN,WAAW;AAAA,MACX;AAAA,MACA;AAAA,MACA,KAAK,KAAK,IAAI,KAAK;AAAA,IACrB;AAAA,EACF;AAQA,SAAO,0BAA0B,SAAS,0BAA0B;AAClE,WAAO,KAAK,cAAc,UAAU,MAAM,KAAK,sBAAsB;AAAA,EACvE;AA8BA,SAAO,yBAAyB,SAAS,yBAAyB;AAChE,QAAI,QAAQ,KAAK,OAAO;AACxB,QAAIA,QAAO,KAAK,UAAU;AAE1B,QAAI,kBAAkBA,MAAK,KAAK,MAAM,QAAW;AAC/C,aAAOA;AAAA,IACT;AAEA,UAAM,KAAK,WAAW,KAAK;AAAA,EAC7B;AAOA,SAAO,MAAM,SAAS,IAAI,YAAY;AACpC,QAAI;AAEJ,UAAM,kBAAkB,KAAK,cAAc,QAAQ,oBAAoB,SAAS,SAAS,gBAAgB,gBAAgB,MAAM;AAC7H,aAAO,IAAI,SAAS,YAAY,KAAK,OAAO,WAAW,KAAK,OAAO,MAAM;AAAA,IAC3E;AAAA,EACF;AAMA,SAAO,OAAO,SAAS,KAAK,MAAM;AAChC,WAAO,KAAK,OAAO,MAAM,SAAS;AAAA,EACpC;AAOA,SAAO,cAAc,SAAS,YAAY,MAAM;AAC9C,QAAI,QAAQ,KAAK,OAAO;AAExB,QAAI,MAAM,SAAS,MAAM;AACvB,WAAK,OAAO,QAAQ;AAEpB,aAAO;AAAA,IACT;AAEA,UAAM,YAAY,KAAK,OAAO,QAAQ,MAAM,OAAO,YAAY,OAAO,iBAAiB,IAAI,GAAG,UAAU,EAAE,OAAO,aAAa,KAAK,GAAG,GAAG,CAAC;AAAA,EAC5I;AAOA,SAAO,sBAAsB,SAAS,oBAAoB,MAAM;AAC9D,QAAI,QAAQ,KAAK,OAAO;AAExB,QAAI,MAAM,SAAS,MAAM;AACvB,WAAK,OAAO,QAAQ;AAEpB,aAAO;AAAA,IACT;AAEA,WAAO;AAAA,EACT;AAOA,SAAO,gBAAgB,SAAS,cAAc,OAAO;AACnD,QAAI,QAAQ,KAAK,OAAO;AAExB,QAAI,MAAM,SAAS,UAAU,QAAQ,MAAM,UAAU,OAAO;AAC1D,WAAK,OAAO,QAAQ;AAAA,IACtB,OAAO;AACL,YAAM,YAAY,KAAK,OAAO,QAAQ,MAAM,OAAO,aAAc,OAAO,OAAO,WAAY,EAAE,OAAO,aAAa,KAAK,GAAG,GAAG,CAAC;AAAA,IAC/H;AAAA,EACF;AAOA,SAAO,wBAAwB,SAAS,sBAAsB,OAAO;AACnE,QAAI,QAAQ,KAAK,OAAO;AAExB,QAAI,MAAM,SAAS,UAAU,QAAQ,MAAM,UAAU,OAAO;AAC1D,WAAK,OAAO,QAAQ;AAEpB,aAAO;AAAA,IACT;AAEA,WAAO;AAAA,EACT;AAMA,SAAO,aAAa,SAAS,WAAW,SAAS;AAC/C,QAAI,QAAQ,YAAY,QAAQ,YAAY,SAAS,UAAU,KAAK,OAAO;AAC3E,WAAO,YAAY,KAAK,OAAO,QAAQ,MAAM,OAAO,cAAc,OAAO,aAAa,KAAK,GAAG,GAAG,CAAC;AAAA,EACpG;AAQA,SAAO,MAAM,SAAS,IAAI,UAAU,SAAS,WAAW;AACtD,SAAK,YAAY,QAAQ;AACzB,QAAI,QAAQ,CAAC;AAEb,WAAO,CAAC,KAAK,oBAAoB,SAAS,GAAG;AAC3C,YAAM,KAAK,QAAQ,KAAK,IAAI,CAAC;AAAA,IAC/B;AAEA,WAAO;AAAA,EACT;AASA,SAAO,eAAe,SAAS,aAAa,UAAU,SAAS,WAAW;AACxE,QAAI,KAAK,oBAAoB,QAAQ,GAAG;AACtC,UAAI,QAAQ,CAAC;AAEb,SAAG;AACD,cAAM,KAAK,QAAQ,KAAK,IAAI,CAAC;AAAA,MAC/B,SAAS,CAAC,KAAK,oBAAoB,SAAS;AAE5C,aAAO;AAAA,IACT;AAEA,WAAO,CAAC;AAAA,EACV;AAQA,SAAO,OAAO,SAAS,KAAK,UAAU,SAAS,WAAW;AACxD,SAAK,YAAY,QAAQ;AACzB,QAAI,QAAQ,CAAC;AAEb,OAAG;AACD,YAAM,KAAK,QAAQ,KAAK,IAAI,CAAC;AAAA,IAC/B,SAAS,CAAC,KAAK,oBAAoB,SAAS;AAE5C,WAAO;AAAA,EACT;AAQA,SAAO,gBAAgB,SAAS,cAAc,eAAe,SAAS;AACpE,SAAK,oBAAoB,aAAa;AACtC,QAAI,QAAQ,CAAC;AAEb,OAAG;AACD,YAAM,KAAK,QAAQ,KAAK,IAAI,CAAC;AAAA,IAC/B,SAAS,KAAK,oBAAoB,aAAa;AAE/C,WAAO;AAAA,EACT;AAEA,SAAOD;AACT,EAAE;AAKF,SAAS,aAAa,OAAO;AAC3B,MAAI,QAAQ,MAAM;AAClB,SAAO,iBAAiB,MAAM,IAAI,KAAK,SAAS,OAAO,KAAM,OAAO,OAAO,GAAI,IAAI;AACrF;AAMA,SAAS,iBAAiB,MAAM;AAC9B,SAAO,sBAAsB,IAAI,IAAI,IAAK,OAAO,MAAM,GAAI,IAAI;AACjE;;;ACngDO,IAAI,oBAAoB;AAAA,EAC7B,MAAM,CAAC;AAAA,EACP,UAAU,CAAC,aAAa;AAAA,EACxB,qBAAqB,CAAC,QAAQ,uBAAuB,cAAc,cAAc;AAAA,EACjF,oBAAoB,CAAC,YAAY,QAAQ,gBAAgB,YAAY;AAAA,EACrE,UAAU,CAAC,MAAM;AAAA,EACjB,cAAc,CAAC,YAAY;AAAA,EAC3B,OAAO,CAAC,SAAS,QAAQ,aAAa,cAAc,cAAc;AAAA,EAClE,UAAU,CAAC,QAAQ,OAAO;AAAA,EAC1B,gBAAgB,CAAC,QAAQ,YAAY;AAAA,EACrC,gBAAgB,CAAC,iBAAiB,cAAc,cAAc;AAAA,EAC9D,oBAAoB;AAAA,IAAC;AAAA;AAAA;AAAA,IAErB;AAAA,IAAuB;AAAA,IAAiB;AAAA,IAAc;AAAA,EAAc;AAAA,EACpE,UAAU,CAAC;AAAA,EACX,YAAY,CAAC;AAAA,EACb,aAAa,CAAC;AAAA,EACd,cAAc,CAAC;AAAA,EACf,WAAW,CAAC;AAAA,EACZ,WAAW,CAAC;AAAA,EACZ,WAAW,CAAC,QAAQ;AAAA,EACpB,aAAa,CAAC,QAAQ;AAAA,EACtB,aAAa,CAAC,QAAQ,OAAO;AAAA,EAC7B,WAAW,CAAC,QAAQ,WAAW;AAAA,EAC/B,WAAW,CAAC,MAAM;AAAA,EAClB,UAAU,CAAC,MAAM;AAAA,EACjB,aAAa,CAAC,MAAM;AAAA,EACpB,kBAAkB,CAAC,eAAe,cAAc,gBAAgB;AAAA,EAChE,yBAAyB,CAAC,MAAM;AAAA,EAChC,sBAAsB,CAAC,eAAe,QAAQ,YAAY;AAAA,EAC1D,sBAAsB,CAAC,eAAe,QAAQ,cAAc,cAAc,QAAQ;AAAA,EAClF,iBAAiB,CAAC,eAAe,QAAQ,aAAa,QAAQ,YAAY;AAAA,EAC1E,sBAAsB,CAAC,eAAe,QAAQ,QAAQ,gBAAgB,YAAY;AAAA,EAClF,yBAAyB,CAAC,eAAe,QAAQ,cAAc,cAAc,QAAQ;AAAA,EACrF,qBAAqB,CAAC,eAAe,QAAQ,cAAc,OAAO;AAAA,EAClE,oBAAoB,CAAC,eAAe,QAAQ,cAAc,QAAQ;AAAA,EAClE,qBAAqB,CAAC,eAAe,QAAQ,YAAY;AAAA,EACzD,2BAA2B,CAAC,eAAe,QAAQ,cAAc,QAAQ;AAAA,EACzE,qBAAqB,CAAC,eAAe,QAAQ,aAAa,WAAW;AAAA,EACrE,iBAAiB,CAAC,cAAc,gBAAgB;AAAA,EAChD,qBAAqB,CAAC,QAAQ,YAAY;AAAA,EAC1C,qBAAqB,CAAC,QAAQ,cAAc,cAAc,QAAQ;AAAA,EAClE,wBAAwB,CAAC,QAAQ,cAAc,cAAc,QAAQ;AAAA,EACrE,oBAAoB,CAAC,QAAQ,cAAc,OAAO;AAAA,EAClD,mBAAmB,CAAC,QAAQ,cAAc,QAAQ;AAAA,EAClD,0BAA0B,CAAC,QAAQ,cAAc,QAAQ;AAC3D;AACO,IAAI,QAAQ,OAAO,OAAO,CAAC,CAAC;AAwF5B,SAAS,MAAM,MAAM,SAAS;AACnC,MAAI,cAAc,UAAU,SAAS,KAAK,UAAU,CAAC,MAAM,SAAY,UAAU,CAAC,IAAI;AAGtF,MAAI,QAAQ;AACZ,MAAI,UAAU,MAAM,QAAQ,IAAI;AAChC,MAAI,OAAO,CAAC,IAAI;AAChB,MAAI,QAAQ;AACZ,MAAI,QAAQ,CAAC;AACb,MAAI,OAAO;AACX,MAAI,MAAM;AACV,MAAI,SAAS;AACb,MAAI,OAAO,CAAC;AACZ,MAAI,YAAY,CAAC;AACjB,MAAI,UAAU;AAGd,KAAG;AACD;AACA,QAAI,YAAY,UAAU,KAAK;AAC/B,QAAI,WAAW,aAAa,MAAM,WAAW;AAE7C,QAAI,WAAW;AACb,YAAM,UAAU,WAAW,IAAI,SAAY,KAAK,KAAK,SAAS,CAAC;AAC/D,aAAO;AACP,eAAS,UAAU,IAAI;AAEvB,UAAI,UAAU;AACZ,YAAI,SAAS;AACX,iBAAO,KAAK,MAAM;AAAA,QACpB,OAAO;AACL,cAAI,QAAQ,CAAC;AAEb,mBAAS,MAAM,GAAG,gBAAgB,OAAO,KAAK,IAAI,GAAG,MAAM,cAAc,QAAQ,OAAO;AACtF,gBAAI,IAAI,cAAc,GAAG;AACzB,kBAAM,CAAC,IAAI,KAAK,CAAC;AAAA,UACnB;AAEA,iBAAO;AAAA,QACT;AAEA,YAAI,aAAa;AAEjB,iBAAS,KAAK,GAAG,KAAK,MAAM,QAAQ,MAAM;AACxC,cAAI,UAAU,MAAM,EAAE,EAAE,CAAC;AACzB,cAAI,YAAY,MAAM,EAAE,EAAE,CAAC;AAE3B,cAAI,SAAS;AACX,uBAAW;AAAA,UACb;AAEA,cAAI,WAAW,cAAc,MAAM;AACjC,iBAAK,OAAO,SAAS,CAAC;AACtB;AAAA,UACF,OAAO;AACL,iBAAK,OAAO,IAAI;AAAA,UAClB;AAAA,QACF;AAAA,MACF;AAEA,cAAQ,MAAM;AACd,aAAO,MAAM;AACb,cAAQ,MAAM;AACd,gBAAU,MAAM;AAChB,cAAQ,MAAM;AAAA,IAChB,OAAO;AACL,YAAM,SAAS,UAAU,QAAQ,KAAK,KAAK,IAAI;AAC/C,aAAO,SAAS,OAAO,GAAG,IAAI;AAE9B,UAAI,SAAS,QAAQ,SAAS,QAAW;AACvC;AAAA,MACF;AAEA,UAAI,QAAQ;AACV,aAAK,KAAK,GAAG;AAAA,MACf;AAAA,IACF;AAEA,QAAI,SAAS;AAEb,QAAI,CAAC,MAAM,QAAQ,IAAI,GAAG;AACxB,UAAI,CAAC,OAAO,IAAI,GAAG;AACjB,cAAM,IAAI,MAAM,qBAAqB,OAAO,QAAQ,IAAI,GAAG,GAAG,CAAC;AAAA,MACjE;AAEA,UAAI,UAAU,WAAW,SAAS,KAAK,MAAM,SAAS;AAEtD,UAAI,SAAS;AACX,iBAAS,QAAQ,KAAK,SAAS,MAAM,KAAK,QAAQ,MAAM,SAAS;AAEjE,YAAI,WAAW,OAAO;AACpB;AAAA,QACF;AAEA,YAAI,WAAW,OAAO;AACpB,cAAI,CAAC,WAAW;AACd,iBAAK,IAAI;AACT;AAAA,UACF;AAAA,QACF,WAAW,WAAW,QAAW;AAC/B,gBAAM,KAAK,CAAC,KAAK,MAAM,CAAC;AAExB,cAAI,CAAC,WAAW;AACd,gBAAI,OAAO,MAAM,GAAG;AAClB,qBAAO;AAAA,YACT,OAAO;AACL,mBAAK,IAAI;AACT;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAEA,QAAI,WAAW,UAAa,UAAU;AACpC,YAAM,KAAK,CAAC,KAAK,IAAI,CAAC;AAAA,IACxB;AAEA,QAAI,WAAW;AACb,WAAK,IAAI;AAAA,IACX,OAAO;AACL,UAAI;AAEJ,cAAQ;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,MAAM;AAAA,MACR;AACA,gBAAU,MAAM,QAAQ,IAAI;AAC5B,aAAO,UAAU,QAAQ,wBAAwB,YAAY,KAAK,IAAI,OAAO,QAAQ,0BAA0B,SAAS,wBAAwB,CAAC;AACjJ,cAAQ;AACR,cAAQ,CAAC;AAET,UAAI,QAAQ;AACV,kBAAU,KAAK,MAAM;AAAA,MACvB;AAEA,eAAS;AAAA,IACX;AAAA,EACF,SAAS,UAAU;AAEnB,MAAI,MAAM,WAAW,GAAG;AACtB,cAAU,MAAM,MAAM,SAAS,CAAC,EAAE,CAAC;AAAA,EACrC;AAEA,SAAO;AACT;AA4DO,SAAS,WAAW,SAAS,MAAM,WAAW;AACnD,MAAI,cAAc,QAAQ,IAAI;AAE9B,MAAI,aAAa;AACf,QAAI,CAAC,aAAa,OAAO,gBAAgB,YAAY;AAEnD,aAAO;AAAA,IACT;AAEA,QAAI,sBAAsB,YAAY,YAAY,QAAQ,YAAY;AAEtE,QAAI,OAAO,wBAAwB,YAAY;AAE7C,aAAO;AAAA,IACT;AAAA,EACF,OAAO;AACL,QAAI,kBAAkB,YAAY,QAAQ,QAAQ,QAAQ;AAE1D,QAAI,iBAAiB;AACnB,UAAI,OAAO,oBAAoB,YAAY;AAEzC,eAAO;AAAA,MACT;AAEA,UAAI,sBAAsB,gBAAgB,IAAI;AAE9C,UAAI,OAAO,wBAAwB,YAAY;AAE7C,eAAO;AAAA,MACT;AAAA,IACF;AAAA,EACF;AACF;;;ACvXO,SAAS,MAAM,KAAK;AACzB,SAAO,MAAM,KAAK;AAAA,IAChB,OAAO;AAAA,EACT,CAAC;AACH;AACA,IAAI,kBAAkB;AAEtB,IAAI,qBAAqB;AAAA,EACvB,MAAM,SAAS,KAAK,MAAM;AACxB,WAAO,KAAK;AAAA,EACd;AAAA,EACA,UAAU,SAAS,SAAS,MAAM;AAChC,WAAO,MAAM,KAAK;AAAA,EACpB;AAAA;AAAA,EAEA,UAAU,SAAS,SAAS,MAAM;AAChC,WAAO,KAAK,KAAK,aAAa,MAAM,IAAI;AAAA,EAC1C;AAAA,EACA,qBAAqB,SAAS,oBAAoB,MAAM;AACtD,QAAI,KAAK,KAAK;AACd,QAAIG,QAAO,KAAK;AAChB,QAAI,UAAU,KAAK,KAAK,KAAK,KAAK,qBAAqB,IAAI,GAAG,GAAG;AACjE,QAAI,aAAa,KAAK,KAAK,YAAY,GAAG;AAC1C,QAAI,eAAe,KAAK;AAGxB,WAAO,CAACA,SAAQ,CAAC,cAAc,CAAC,WAAW,OAAO,UAAU,eAAe,KAAK,CAAC,IAAI,KAAK,CAACA,OAAM,OAAO,CAAC,GAAG,YAAY,YAAY,GAAG,GAAG;AAAA,EAC5I;AAAA,EACA,oBAAoB,SAAS,mBAAmB,MAAM;AACpD,QAAI,WAAW,KAAK,UAChB,OAAO,KAAK,MACZ,eAAe,KAAK,cACpB,aAAa,KAAK;AACtB,WAAO,WAAW,OAAO,OAAO,KAAK,OAAO,YAAY,IAAI,KAAK,KAAK,KAAK,YAAY,GAAG,CAAC;AAAA,EAC7F;AAAA,EACA,cAAc,SAAS,aAAa,OAAO;AACzC,QAAI,aAAa,MAAM;AACvB,WAAO,MAAM,UAAU;AAAA,EACzB;AAAA,EACA,OAAO,SAAS,MAAM,OAAO;AAC3B,QAAI,QAAQ,MAAM,OACdA,QAAO,MAAM,MACb,OAAO,MAAM,WACb,aAAa,MAAM,YACnB,eAAe,MAAM;AACzB,QAAI,SAAS,KAAK,IAAI,OAAO,IAAI,IAAIA;AACrC,QAAI,WAAW,SAAS,KAAK,KAAK,KAAK,MAAM,IAAI,GAAG,GAAG;AAEvD,QAAI,SAAS,SAAS,iBAAiB;AACrC,iBAAW,SAAS,KAAK,OAAO,OAAO,KAAK,MAAM,IAAI,CAAC,GAAG,KAAK;AAAA,IACjE;AAEA,WAAO,KAAK,CAAC,UAAU,KAAK,YAAY,GAAG,GAAG,YAAY,GAAG,GAAG;AAAA,EAClE;AAAA,EACA,UAAU,SAAS,SAAS,OAAO;AACjC,QAAIA,QAAO,MAAM,MACb,QAAQ,MAAM;AAClB,WAAOA,QAAO,OAAO;AAAA,EACvB;AAAA;AAAA,EAEA,gBAAgB,SAAS,eAAe,OAAO;AAC7C,QAAIA,QAAO,MAAM,MACb,aAAa,MAAM;AACvB,WAAO,QAAQA,QAAO,KAAK,KAAK,KAAK,YAAY,GAAG,CAAC;AAAA,EACvD;AAAA,EACA,gBAAgB,SAAS,eAAe,OAAO;AAC7C,QAAI,gBAAgB,MAAM,eACtB,aAAa,MAAM,YACnB,eAAe,MAAM;AACzB,WAAO,KAAK,CAAC,OAAO,KAAK,OAAO,aAAa,GAAG,KAAK,YAAY,GAAG,GAAG,YAAY,GAAG,GAAG;AAAA,EAC3F;AAAA,EACA,oBAAoB,SAAS,mBAAmB,OAAO;AACrD,QAAIA,QAAO,MAAM,MACb,gBAAgB,MAAM,eACtB,sBAAsB,MAAM,qBAC5B,aAAa,MAAM,YACnB,eAAe,MAAM;AACzB;AAAA;AAAA;AAAA,MAEE,YAAY,OAAOA,KAAI,EAAE,OAAO,KAAK,KAAK,KAAK,qBAAqB,IAAI,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,OAAO,eAAe,GAAG,EAAE,OAAO,KAAK,IAAI,KAAK,YAAY,GAAG,GAAG,GAAG,CAAC,IAAI;AAAA;AAAA,EAE5K;AAAA;AAAA,EAEA,UAAU,SAAS,SAAS,OAAO;AACjC,QAAI,QAAQ,MAAM;AAClB,WAAO;AAAA,EACT;AAAA,EACA,YAAY,SAAS,WAAW,OAAO;AACrC,QAAI,QAAQ,MAAM;AAClB,WAAO;AAAA,EACT;AAAA,EACA,aAAa,SAAS,YAAY,QAAQ,KAAK;AAC7C,QAAI,QAAQ,OAAO,OACf,gBAAgB,OAAO;AAC3B,WAAO,gBAAgB,iBAAiB,OAAO,QAAQ,gBAAgB,KAAK,IAAI,IAAI,KAAK,UAAU,KAAK;AAAA,EAC1G;AAAA,EACA,cAAc,SAAS,aAAa,QAAQ;AAC1C,QAAI,QAAQ,OAAO;AACnB,WAAO,QAAQ,SAAS;AAAA,EAC1B;AAAA,EACA,WAAW,SAAS,YAAY;AAC9B,WAAO;AAAA,EACT;AAAA,EACA,WAAW,SAAS,UAAU,QAAQ;AACpC,QAAI,QAAQ,OAAO;AACnB,WAAO;AAAA,EACT;AAAA,EACA,WAAW,SAAS,UAAU,QAAQ;AACpC,QAAI,SAAS,OAAO;AACpB,WAAO,MAAM,KAAK,QAAQ,IAAI,IAAI;AAAA,EACpC;AAAA,EACA,aAAa,SAAS,YAAY,QAAQ;AACxC,QAAI,SAAS,OAAO;AACpB,WAAO,MAAM,KAAK,QAAQ,IAAI,IAAI;AAAA,EACpC;AAAA,EACA,aAAa,SAAS,YAAY,QAAQ;AACxC,QAAIA,QAAO,OAAO,MACd,QAAQ,OAAO;AACnB,WAAOA,QAAO,OAAO;AAAA,EACvB;AAAA;AAAA,EAEA,WAAW,SAAS,UAAU,QAAQ;AACpC,QAAIA,QAAO,OAAO,MACd,OAAO,OAAO;AAClB,WAAO,MAAMA,QAAO,KAAK,KAAK,KAAK,MAAM,IAAI,GAAG,GAAG;AAAA,EACrD;AAAA;AAAA,EAEA,WAAW,SAAS,UAAU,QAAQ;AACpC,QAAIA,QAAO,OAAO;AAClB,WAAOA;AAAA,EACT;AAAA,EACA,UAAU,SAAS,SAAS,QAAQ;AAClC,QAAI,OAAO,OAAO;AAClB,WAAO,MAAM,OAAO;AAAA,EACtB;AAAA,EACA,aAAa,SAAS,YAAY,QAAQ;AACxC,QAAI,OAAO,OAAO;AAClB,WAAO,OAAO;AAAA,EAChB;AAAA;AAAA,EAEA,kBAAkB,eAAe,SAAU,QAAQ;AACjD,QAAI,aAAa,OAAO,YACpB,iBAAiB,OAAO;AAC5B,WAAO,KAAK,CAAC,UAAU,KAAK,YAAY,GAAG,GAAG,MAAM,cAAc,CAAC,GAAG,GAAG;AAAA,EAC3E,CAAC;AAAA,EACD,yBAAyB,SAAS,wBAAwB,QAAQ;AAChE,QAAI,YAAY,OAAO,WACnB,OAAO,OAAO;AAClB,WAAO,YAAY,OAAO;AAAA,EAC5B;AAAA,EACA,sBAAsB,eAAe,SAAU,QAAQ;AACrD,QAAIA,QAAO,OAAO,MACd,aAAa,OAAO;AACxB,WAAO,KAAK,CAAC,UAAUA,OAAM,KAAK,YAAY,GAAG,CAAC,GAAG,GAAG;AAAA,EAC1D,CAAC;AAAA,EACD,sBAAsB,eAAe,SAAU,QAAQ;AACrD,QAAIA,QAAO,OAAO,MACd,aAAa,OAAO,YACpB,aAAa,OAAO,YACpB,SAAS,OAAO;AACpB,WAAO,KAAK,CAAC,QAAQA,OAAM,KAAK,eAAe,KAAK,YAAY,KAAK,CAAC,GAAG,KAAK,YAAY,GAAG,GAAG,MAAM,MAAM,CAAC,GAAG,GAAG;AAAA,EACrH,CAAC;AAAA,EACD,iBAAiB,eAAe,SAAU,QAAQ;AAChD,QAAIA,QAAO,OAAO,MACd,OAAO,OAAO,WACd,OAAO,OAAO,MACd,aAAa,OAAO;AACxB,WAAOA,SAAQ,kBAAkB,IAAI,IAAI,KAAK,OAAO,OAAO,KAAK,MAAM,IAAI,CAAC,GAAG,KAAK,IAAI,KAAK,KAAK,KAAK,MAAM,IAAI,GAAG,GAAG,KAAK,OAAO,OAAO,KAAK,KAAK,KAAK,YAAY,GAAG,CAAC;AAAA,EAC3K,CAAC;AAAA,EACD,sBAAsB,eAAe,SAAU,QAAQ;AACrD,QAAIA,QAAO,OAAO,MACd,OAAO,OAAO,MACd,eAAe,OAAO,cACtB,aAAa,OAAO;AACxB,WAAO,KAAK,CAACA,QAAO,OAAO,MAAM,KAAK,MAAM,YAAY,GAAG,KAAK,YAAY,GAAG,CAAC,GAAG,GAAG;AAAA,EACxF,CAAC;AAAA,EACD,yBAAyB,eAAe,SAAU,QAAQ;AACxD,QAAIA,QAAO,OAAO,MACd,aAAa,OAAO,YACpB,aAAa,OAAO,YACpB,SAAS,OAAO;AACpB,WAAO,KAAK,CAAC,aAAaA,OAAM,KAAK,eAAe,KAAK,YAAY,KAAK,CAAC,GAAG,KAAK,YAAY,GAAG,GAAG,MAAM,MAAM,CAAC,GAAG,GAAG;AAAA,EAC1H,CAAC;AAAA,EACD,qBAAqB,eAAe,SAAU,QAAQ;AACpD,QAAIA,QAAO,OAAO,MACd,aAAa,OAAO,YACpB,QAAQ,OAAO;AACnB,WAAO,KAAK,CAAC,SAASA,OAAM,KAAK,YAAY,GAAG,GAAG,SAAS,MAAM,WAAW,IAAI,OAAO,KAAK,OAAO,KAAK,IAAI,EAAE,GAAG,GAAG;AAAA,EACvH,CAAC;AAAA,EACD,oBAAoB,eAAe,SAAU,QAAQ;AACnD,QAAIA,QAAO,OAAO,MACd,aAAa,OAAO,YACpB,SAAS,OAAO;AACpB,WAAO,KAAK,CAAC,QAAQA,OAAM,KAAK,YAAY,GAAG,GAAG,MAAM,MAAM,CAAC,GAAG,GAAG;AAAA,EACvE,CAAC;AAAA,EACD,qBAAqB,eAAe,SAAU,QAAQ;AACpD,QAAIA,QAAO,OAAO,MACd,aAAa,OAAO;AACxB,WAAO,KAAK,CAACA,OAAM,KAAK,YAAY,GAAG,CAAC,GAAG,GAAG;AAAA,EAChD,CAAC;AAAA,EACD,2BAA2B,eAAe,SAAU,QAAQ;AAC1D,QAAIA,QAAO,OAAO,MACd,aAAa,OAAO,YACpB,SAAS,OAAO;AACpB,WAAO,KAAK,CAAC,SAASA,OAAM,KAAK,YAAY,GAAG,GAAG,MAAM,MAAM,CAAC,GAAG,GAAG;AAAA,EACxE,CAAC;AAAA,EACD,qBAAqB,eAAe,SAAU,QAAQ;AACpD,QAAIA,QAAO,OAAO,MACd,OAAO,OAAO,WACd,aAAa,OAAO,YACpB,YAAY,OAAO;AACvB,WAAO,gBAAgBA,SAAQ,kBAAkB,IAAI,IAAI,KAAK,OAAO,OAAO,KAAK,MAAM,IAAI,CAAC,GAAG,KAAK,IAAI,KAAK,KAAK,KAAK,MAAM,IAAI,GAAG,GAAG,MAAM,aAAa,gBAAgB,MAAM,SAAS,KAAK,WAAW,KAAK;AAAA,EAChN,CAAC;AAAA,EACD,iBAAiB,SAAS,gBAAgB,QAAQ;AAChD,QAAI,aAAa,OAAO,YACpB,iBAAiB,OAAO;AAC5B,WAAO,KAAK,CAAC,iBAAiB,KAAK,YAAY,GAAG,GAAG,MAAM,cAAc,CAAC,GAAG,GAAG;AAAA,EAClF;AAAA,EACA,qBAAqB,SAAS,oBAAoB,QAAQ;AACxD,QAAIA,QAAO,OAAO,MACd,aAAa,OAAO;AACxB,WAAO,KAAK,CAAC,iBAAiBA,OAAM,KAAK,YAAY,GAAG,CAAC,GAAG,GAAG;AAAA,EACjE;AAAA,EACA,qBAAqB,SAAS,oBAAoB,QAAQ;AACxD,QAAIA,QAAO,OAAO,MACd,aAAa,OAAO,YACpB,aAAa,OAAO,YACpB,SAAS,OAAO;AACpB,WAAO,KAAK,CAAC,eAAeA,OAAM,KAAK,eAAe,KAAK,YAAY,KAAK,CAAC,GAAG,KAAK,YAAY,GAAG,GAAG,MAAM,MAAM,CAAC,GAAG,GAAG;AAAA,EAC5H;AAAA,EACA,wBAAwB,SAAS,uBAAuB,QAAQ;AAC9D,QAAIA,QAAO,OAAO,MACd,aAAa,OAAO,YACpB,aAAa,OAAO,YACpB,SAAS,OAAO;AACpB,WAAO,KAAK,CAAC,oBAAoBA,OAAM,KAAK,eAAe,KAAK,YAAY,KAAK,CAAC,GAAG,KAAK,YAAY,GAAG,GAAG,MAAM,MAAM,CAAC,GAAG,GAAG;AAAA,EACjI;AAAA,EACA,oBAAoB,SAAS,mBAAmB,QAAQ;AACtD,QAAIA,QAAO,OAAO,MACd,aAAa,OAAO,YACpB,QAAQ,OAAO;AACnB,WAAO,KAAK,CAAC,gBAAgBA,OAAM,KAAK,YAAY,GAAG,GAAG,SAAS,MAAM,WAAW,IAAI,OAAO,KAAK,OAAO,KAAK,IAAI,EAAE,GAAG,GAAG;AAAA,EAC9H;AAAA,EACA,mBAAmB,SAAS,kBAAkB,QAAQ;AACpD,QAAIA,QAAO,OAAO,MACd,aAAa,OAAO,YACpB,SAAS,OAAO;AACpB,WAAO,KAAK,CAAC,eAAeA,OAAM,KAAK,YAAY,GAAG,GAAG,MAAM,MAAM,CAAC,GAAG,GAAG;AAAA,EAC9E;AAAA,EACA,0BAA0B,SAAS,yBAAyB,QAAQ;AAClE,QAAIA,QAAO,OAAO,MACd,aAAa,OAAO,YACpB,SAAS,OAAO;AACpB,WAAO,KAAK,CAAC,gBAAgBA,OAAM,KAAK,YAAY,GAAG,GAAG,MAAM,MAAM,CAAC,GAAG,GAAG;AAAA,EAC/E;AACF;AAEA,SAAS,eAAe,IAAI;AAC1B,SAAO,SAAU,MAAM;AACrB,WAAO,KAAK,CAAC,KAAK,aAAa,GAAG,IAAI,CAAC,GAAG,IAAI;AAAA,EAChD;AACF;AAOA,SAAS,KAAK,YAAY;AACxB,MAAI;AAEJ,MAAI,YAAY,UAAU,SAAS,KAAK,UAAU,CAAC,MAAM,SAAY,UAAU,CAAC,IAAI;AACpF,UAAQ,wBAAwB,eAAe,QAAQ,eAAe,SAAS,SAAS,WAAW,OAAO,SAAU,GAAG;AACrH,WAAO;AAAA,EACT,CAAC,EAAE,KAAK,SAAS,OAAO,QAAQ,0BAA0B,SAAS,wBAAwB;AAC7F;AAOA,SAAS,MAAM,OAAO;AACpB,SAAO,KAAK,OAAO,OAAO,KAAK,OAAO,IAAI,CAAC,GAAG,KAAK;AACrD;AAMA,SAAS,KAAK,OAAO,aAAa;AAChC,MAAI,MAAM,UAAU,SAAS,KAAK,UAAU,CAAC,MAAM,SAAY,UAAU,CAAC,IAAI;AAC9E,SAAO,eAAe,QAAQ,gBAAgB,KAAK,QAAQ,cAAc,MAAM;AACjF;AAEA,SAAS,OAAO,KAAK;AACnB,SAAO,KAAK,MAAM,IAAI,QAAQ,OAAO,MAAM,CAAC;AAC9C;AAEA,SAAS,YAAY,KAAK;AACxB,SAAO,IAAI,QAAQ,IAAI,MAAM;AAC/B;AAEA,SAAS,kBAAkB,YAAY;AACrC,SAAO,cAAc,QAAQ,WAAW,KAAK,WAAW;AAC1D;;;ACxSA,IAAI,gBAAgB,SAAS,GAAG,GAAG;AACjC,kBAAgB,OAAO,kBAClB,EAAE,WAAW,CAAC,EAAE,aAAa,SAAS,SAAUC,IAAGC,IAAG;AAAE,IAAAD,GAAE,YAAYC;AAAA,EAAG,KAC1E,SAAUD,IAAGC,IAAG;AAAE,aAAS,KAAKA,GAAG,KAAI,OAAO,UAAU,eAAe,KAAKA,IAAG,CAAC,EAAG,CAAAD,GAAE,CAAC,IAAIC,GAAE,CAAC;AAAA,EAAG;AACpG,SAAO,cAAc,GAAG,CAAC;AAC3B;AAEO,SAAS,UAAU,GAAG,GAAG;AAC9B,MAAI,OAAO,MAAM,cAAc,MAAM;AACjC,UAAM,IAAI,UAAU,yBAAyB,OAAO,CAAC,IAAI,+BAA+B;AAC5F,gBAAc,GAAG,CAAC;AAClB,WAAS,KAAK;AAAE,SAAK,cAAc;AAAA,EAAG;AACtC,IAAE,YAAY,MAAM,OAAO,OAAO,OAAO,CAAC,KAAK,GAAG,YAAY,EAAE,WAAW,IAAI,GAAG;AACpF;AAqFO,SAAS,UAAU,SAAS,YAAY,GAAG,WAAW;AAC3D,WAAS,MAAM,OAAO;AAAE,WAAO,iBAAiB,IAAI,QAAQ,IAAI,EAAE,SAAU,SAAS;AAAE,cAAQ,KAAK;AAAA,IAAG,CAAC;AAAA,EAAG;AAC3G,SAAO,KAAK,MAAM,IAAI,UAAU,SAAU,SAAS,QAAQ;AACvD,aAAS,UAAU,OAAO;AAAE,UAAI;AAAE,aAAK,UAAU,KAAK,KAAK,CAAC;AAAA,MAAG,SAAS,GAAG;AAAE,eAAO,CAAC;AAAA,MAAG;AAAA,IAAE;AAC1F,aAAS,SAAS,OAAO;AAAE,UAAI;AAAE,aAAK,UAAU,OAAO,EAAE,KAAK,CAAC;AAAA,MAAG,SAAS,GAAG;AAAE,eAAO,CAAC;AAAA,MAAG;AAAA,IAAE;AAC7F,aAAS,KAAK,QAAQ;AAAE,aAAO,OAAO,QAAQ,OAAO,KAAK,IAAI,MAAM,OAAO,KAAK,EAAE,KAAK,WAAW,QAAQ;AAAA,IAAG;AAC7G,UAAM,YAAY,UAAU,MAAM,SAAS,cAAc,CAAC,CAAC,GAAG,KAAK,CAAC;AAAA,EACxE,CAAC;AACH;AAEO,SAAS,YAAY,SAAS,MAAM;AACzC,MAAI,IAAI,EAAE,OAAO,GAAG,MAAM,WAAW;AAAE,QAAI,EAAE,CAAC,IAAI,EAAG,OAAM,EAAE,CAAC;AAAG,WAAO,EAAE,CAAC;AAAA,EAAG,GAAG,MAAM,CAAC,GAAG,KAAK,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,OAAO,QAAQ,OAAO,aAAa,aAAa,WAAW,QAAQ,SAAS;AAC/L,SAAO,EAAE,OAAO,KAAK,CAAC,GAAG,EAAE,OAAO,IAAI,KAAK,CAAC,GAAG,EAAE,QAAQ,IAAI,KAAK,CAAC,GAAG,OAAO,WAAW,eAAe,EAAE,OAAO,QAAQ,IAAI,WAAW;AAAE,WAAO;AAAA,EAAM,IAAI;AAC1J,WAAS,KAAK,GAAG;AAAE,WAAO,SAAU,GAAG;AAAE,aAAO,KAAK,CAAC,GAAG,CAAC,CAAC;AAAA,IAAG;AAAA,EAAG;AACjE,WAAS,KAAK,IAAI;AACd,QAAI,EAAG,OAAM,IAAI,UAAU,iCAAiC;AAC5D,WAAO,MAAM,IAAI,GAAG,GAAG,CAAC,MAAM,IAAI,KAAK,EAAG,KAAI;AAC1C,UAAI,IAAI,GAAG,MAAM,IAAI,GAAG,CAAC,IAAI,IAAI,EAAE,QAAQ,IAAI,GAAG,CAAC,IAAI,EAAE,OAAO,OAAO,IAAI,EAAE,QAAQ,MAAM,EAAE,KAAK,CAAC,GAAG,KAAK,EAAE,SAAS,EAAE,IAAI,EAAE,KAAK,GAAG,GAAG,CAAC,CAAC,GAAG,KAAM,QAAO;AAC3J,UAAI,IAAI,GAAG,EAAG,MAAK,CAAC,GAAG,CAAC,IAAI,GAAG,EAAE,KAAK;AACtC,cAAQ,GAAG,CAAC,GAAG;AAAA,QACX,KAAK;AAAA,QAAG,KAAK;AAAG,cAAI;AAAI;AAAA,QACxB,KAAK;AAAG,YAAE;AAAS,iBAAO,EAAE,OAAO,GAAG,CAAC,GAAG,MAAM,MAAM;AAAA,QACtD,KAAK;AAAG,YAAE;AAAS,cAAI,GAAG,CAAC;AAAG,eAAK,CAAC,CAAC;AAAG;AAAA,QACxC,KAAK;AAAG,eAAK,EAAE,IAAI,IAAI;AAAG,YAAE,KAAK,IAAI;AAAG;AAAA,QACxC;AACI,cAAI,EAAE,IAAI,EAAE,MAAM,IAAI,EAAE,SAAS,KAAK,EAAE,EAAE,SAAS,CAAC,OAAO,GAAG,CAAC,MAAM,KAAK,GAAG,CAAC,MAAM,IAAI;AAAE,gBAAI;AAAG;AAAA,UAAU;AAC3G,cAAI,GAAG,CAAC,MAAM,MAAM,CAAC,KAAM,GAAG,CAAC,IAAI,EAAE,CAAC,KAAK,GAAG,CAAC,IAAI,EAAE,CAAC,IAAK;AAAE,cAAE,QAAQ,GAAG,CAAC;AAAG;AAAA,UAAO;AACrF,cAAI,GAAG,CAAC,MAAM,KAAK,EAAE,QAAQ,EAAE,CAAC,GAAG;AAAE,cAAE,QAAQ,EAAE,CAAC;AAAG,gBAAI;AAAI;AAAA,UAAO;AACpE,cAAI,KAAK,EAAE,QAAQ,EAAE,CAAC,GAAG;AAAE,cAAE,QAAQ,EAAE,CAAC;AAAG,cAAE,IAAI,KAAK,EAAE;AAAG;AAAA,UAAO;AAClE,cAAI,EAAE,CAAC,EAAG,GAAE,IAAI,IAAI;AACpB,YAAE,KAAK,IAAI;AAAG;AAAA,MACtB;AACA,WAAK,KAAK,KAAK,SAAS,CAAC;AAAA,IAC7B,SAAS,GAAG;AAAE,WAAK,CAAC,GAAG,CAAC;AAAG,UAAI;AAAA,IAAG,UAAE;AAAU,UAAI,IAAI;AAAA,IAAG;AACzD,QAAI,GAAG,CAAC,IAAI,EAAG,OAAM,GAAG,CAAC;AAAG,WAAO,EAAE,OAAO,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,QAAQ,MAAM,KAAK;AAAA,EACnF;AACF;AAkBO,SAAS,SAAS,GAAG;AAC1B,MAAI,IAAI,OAAO,WAAW,cAAc,OAAO,UAAU,IAAI,KAAK,EAAE,CAAC,GAAG,IAAI;AAC5E,MAAI,EAAG,QAAO,EAAE,KAAK,CAAC;AACtB,MAAI,KAAK,OAAO,EAAE,WAAW,SAAU,QAAO;AAAA,IAC1C,MAAM,WAAY;AACd,UAAI,KAAK,KAAK,EAAE,OAAQ,KAAI;AAC5B,aAAO,EAAE,OAAO,KAAK,EAAE,GAAG,GAAG,MAAM,CAAC,EAAE;AAAA,IAC1C;AAAA,EACJ;AACA,QAAM,IAAI,UAAU,IAAI,4BAA4B,iCAAiC;AACvF;AAEO,SAAS,OAAO,GAAG,GAAG;AAC3B,MAAI,IAAI,OAAO,WAAW,cAAc,EAAE,OAAO,QAAQ;AACzD,MAAI,CAAC,EAAG,QAAO;AACf,MAAI,IAAI,EAAE,KAAK,CAAC,GAAG,GAAG,KAAK,CAAC,GAAG;AAC/B,MAAI;AACA,YAAQ,MAAM,UAAU,MAAM,MAAM,EAAE,IAAI,EAAE,KAAK,GAAG,KAAM,IAAG,KAAK,EAAE,KAAK;AAAA,EAC7E,SACO,OAAO;AAAE,QAAI,EAAE,MAAa;AAAA,EAAG,UACtC;AACI,QAAI;AACA,UAAI,KAAK,CAAC,EAAE,SAAS,IAAI,EAAE,QAAQ,GAAI,GAAE,KAAK,CAAC;AAAA,IACnD,UACA;AAAU,UAAI,EAAG,OAAM,EAAE;AAAA,IAAO;AAAA,EACpC;AACA,SAAO;AACT;AAkBO,SAAS,cAAc,IAAIC,OAAM,MAAM;AAC5C,MAAI,QAAQ,UAAU,WAAW,EAAG,UAAS,IAAI,GAAG,IAAIA,MAAK,QAAQ,IAAI,IAAI,GAAG,KAAK;AACjF,QAAI,MAAM,EAAE,KAAKA,QAAO;AACpB,UAAI,CAAC,GAAI,MAAK,MAAM,UAAU,MAAM,KAAKA,OAAM,GAAG,CAAC;AACnD,SAAG,CAAC,IAAIA,MAAK,CAAC;AAAA,IAClB;AAAA,EACJ;AACA,SAAO,GAAG,OAAO,MAAM,MAAM,UAAU,MAAM,KAAKA,KAAI,CAAC;AACzD;AAEO,SAAS,QAAQ,GAAG;AACzB,SAAO,gBAAgB,WAAW,KAAK,IAAI,GAAG,QAAQ,IAAI,QAAQ,CAAC;AACrE;AAEO,SAAS,iBAAiB,SAAS,YAAY,WAAW;AAC/D,MAAI,CAAC,OAAO,cAAe,OAAM,IAAI,UAAU,sCAAsC;AACrF,MAAI,IAAI,UAAU,MAAM,SAAS,cAAc,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC;AAC5D,SAAO,IAAI,OAAO,QAAQ,OAAO,kBAAkB,aAAa,gBAAgB,QAAQ,SAAS,GAAG,KAAK,MAAM,GAAG,KAAK,OAAO,GAAG,KAAK,UAAU,WAAW,GAAG,EAAE,OAAO,aAAa,IAAI,WAAY;AAAE,WAAO;AAAA,EAAM,GAAG;AACtN,WAAS,YAAY,GAAG;AAAE,WAAO,SAAU,GAAG;AAAE,aAAO,QAAQ,QAAQ,CAAC,EAAE,KAAK,GAAG,MAAM;AAAA,IAAG;AAAA,EAAG;AAC9F,WAAS,KAAK,GAAG,GAAG;AAAE,QAAI,EAAE,CAAC,GAAG;AAAE,QAAE,CAAC,IAAI,SAAU,GAAG;AAAE,eAAO,IAAI,QAAQ,SAAU,GAAG,GAAG;AAAE,YAAE,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,IAAI,KAAK,OAAO,GAAG,CAAC;AAAA,QAAG,CAAC;AAAA,MAAG;AAAG,UAAI,EAAG,GAAE,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;AAAA,IAAG;AAAA,EAAE;AACvK,WAAS,OAAO,GAAG,GAAG;AAAE,QAAI;AAAE,WAAK,EAAE,CAAC,EAAE,CAAC,CAAC;AAAA,IAAG,SAAS,GAAG;AAAE,aAAO,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC;AAAA,IAAG;AAAA,EAAE;AACjF,WAAS,KAAK,GAAG;AAAE,MAAE,iBAAiB,UAAU,QAAQ,QAAQ,EAAE,MAAM,CAAC,EAAE,KAAK,SAAS,MAAM,IAAI,OAAO,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC;AAAA,EAAG;AACvH,WAAS,QAAQ,OAAO;AAAE,WAAO,QAAQ,KAAK;AAAA,EAAG;AACjD,WAAS,OAAO,OAAO;AAAE,WAAO,SAAS,KAAK;AAAA,EAAG;AACjD,WAAS,OAAO,GAAG,GAAG;AAAE,QAAI,EAAE,CAAC,GAAG,EAAE,MAAM,GAAG,EAAE,OAAQ,QAAO,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;AAAA,EAAG;AACnF;AAQO,SAAS,cAAc,GAAG;AAC/B,MAAI,CAAC,OAAO,cAAe,OAAM,IAAI,UAAU,sCAAsC;AACrF,MAAI,IAAI,EAAE,OAAO,aAAa,GAAG;AACjC,SAAO,IAAI,EAAE,KAAK,CAAC,KAAK,IAAI,OAAO,aAAa,aAAa,SAAS,CAAC,IAAI,EAAE,OAAO,QAAQ,EAAE,GAAG,IAAI,CAAC,GAAG,KAAK,MAAM,GAAG,KAAK,OAAO,GAAG,KAAK,QAAQ,GAAG,EAAE,OAAO,aAAa,IAAI,WAAY;AAAE,WAAO;AAAA,EAAM,GAAG;AAC9M,WAAS,KAAK,GAAG;AAAE,MAAE,CAAC,IAAI,EAAE,CAAC,KAAK,SAAU,GAAG;AAAE,aAAO,IAAI,QAAQ,SAAU,SAAS,QAAQ;AAAE,YAAI,EAAE,CAAC,EAAE,CAAC,GAAG,OAAO,SAAS,QAAQ,EAAE,MAAM,EAAE,KAAK;AAAA,MAAG,CAAC;AAAA,IAAG;AAAA,EAAG;AAC/J,WAAS,OAAO,SAAS,QAAQ,GAAG,GAAG;AAAE,YAAQ,QAAQ,CAAC,EAAE,KAAK,SAASC,IAAG;AAAE,cAAQ,EAAE,OAAOA,IAAG,MAAM,EAAE,CAAC;AAAA,IAAG,GAAG,MAAM;AAAA,EAAG;AAC7H;;;ACxPM,SAAU,WAAW,OAAU;AACnC,SAAO,OAAO,UAAU;AAC1B;;;ACGM,SAAU,iBAAoB,YAAgC;AAClE,MAAM,SAAS,SAAC,UAAa;AAC3B,UAAM,KAAK,QAAQ;AACnB,aAAS,QAAQ,IAAI,MAAK,EAAG;EAC/B;AAEA,MAAM,WAAW,WAAW,MAAM;AAClC,WAAS,YAAY,OAAO,OAAO,MAAM,SAAS;AAClD,WAAS,UAAU,cAAc;AACjC,SAAO;AACT;;;ACDO,IAAM,sBAA+C,iBAC1D,SAAC,QAAM;AACL,SAAA,SAAS,wBAAmC,QAA0B;AACpE,WAAO,IAAI;AACX,SAAK,UAAU,SACR,OAAO,SAAM,8CACxB,OAAO,IAAI,SAAC,KAAK,GAAC;AAAK,aAAG,IAAI,IAAC,OAAK,IAAI,SAAQ;IAAzB,CAA6B,EAAE,KAAK,MAAM,IACzD;AACJ,SAAK,OAAO;AACZ,SAAK,SAAS;EAChB;AARA,CAQC;;;ACvBC,SAAU,UAAa,KAA6B,MAAO;AAC/D,MAAI,KAAK;AACP,QAAM,QAAQ,IAAI,QAAQ,IAAI;AAC9B,SAAK,SAAS,IAAI,OAAO,OAAO,CAAC;;AAErC;;;ACKA,IAAA,eAAA,WAAA;AAwBE,WAAAC,cAAoB,iBAA4B;AAA5B,SAAA,kBAAA;AAdb,SAAA,SAAS;AAER,SAAA,aAAmD;AAMnD,SAAA,cAAqD;EAMV;AAOnD,EAAAA,cAAA,UAAA,cAAA,WAAA;;AACE,QAAI;AAEJ,QAAI,CAAC,KAAK,QAAQ;AAChB,WAAK,SAAS;AAGN,UAAA,aAAe,KAAI;AAC3B,UAAI,YAAY;AACd,aAAK,aAAa;AAClB,YAAI,MAAM,QAAQ,UAAU,GAAG;;AAC7B,qBAAqB,eAAA,SAAA,UAAU,GAAA,iBAAA,aAAA,KAAA,GAAA,CAAA,eAAA,MAAA,iBAAA,aAAA,KAAA,GAAE;AAA5B,kBAAM,WAAM,eAAA;AACf,uBAAO,OAAO,IAAI;;;;;;;;;;;eAEf;AACL,qBAAW,OAAO,IAAI;;;AAIlB,UAAiB,mBAAqB,KAAI;AAClD,UAAI,WAAW,gBAAgB,GAAG;AAChC,YAAI;AACF,2BAAgB;iBACT,GAAG;AACV,mBAAS,aAAa,sBAAsB,EAAE,SAAS,CAAC,CAAC;;;AAIrD,UAAA,cAAgB,KAAI;AAC5B,UAAI,aAAa;AACf,aAAK,cAAc;;AACnB,mBAAwB,gBAAA,SAAA,WAAW,GAAA,kBAAA,cAAA,KAAA,GAAA,CAAA,gBAAA,MAAA,kBAAA,cAAA,KAAA,GAAE;AAAhC,gBAAM,YAAS,gBAAA;AAClB,gBAAI;AACF,4BAAc,SAAS;qBAChB,KAAK;AACZ,uBAAS,WAAM,QAAN,WAAM,SAAN,SAAU,CAAA;AACnB,kBAAI,eAAe,qBAAqB;AACtC,yBAAM,cAAA,cAAA,CAAA,GAAA,OAAO,MAAM,CAAA,GAAA,OAAK,IAAI,MAAM,CAAA;qBAC7B;AACL,uBAAO,KAAK,GAAG;;;;;;;;;;;;;;AAMvB,UAAI,QAAQ;AACV,cAAM,IAAI,oBAAoB,MAAM;;;EAG1C;AAoBA,EAAAA,cAAA,UAAA,MAAA,SAAI,UAAuB;;AAGzB,QAAI,YAAY,aAAa,MAAM;AACjC,UAAI,KAAK,QAAQ;AAGf,sBAAc,QAAQ;aACjB;AACL,YAAI,oBAAoBA,eAAc;AAGpC,cAAI,SAAS,UAAU,SAAS,WAAW,IAAI,GAAG;AAChD;;AAEF,mBAAS,WAAW,IAAI;;AAE1B,SAAC,KAAK,eAAc,KAAA,KAAK,iBAAW,QAAA,OAAA,SAAA,KAAI,CAAA,GAAI,KAAK,QAAQ;;;EAG/D;AAOQ,EAAAA,cAAA,UAAA,aAAR,SAAmB,QAAoB;AAC7B,QAAA,aAAe,KAAI;AAC3B,WAAO,eAAe,UAAW,MAAM,QAAQ,UAAU,KAAK,WAAW,SAAS,MAAM;EAC1F;AASQ,EAAAA,cAAA,UAAA,aAAR,SAAmB,QAAoB;AAC7B,QAAA,aAAe,KAAI;AAC3B,SAAK,aAAa,MAAM,QAAQ,UAAU,KAAK,WAAW,KAAK,MAAM,GAAG,cAAc,aAAa,CAAC,YAAY,MAAM,IAAI;EAC5H;AAMQ,EAAAA,cAAA,UAAA,gBAAR,SAAsB,QAAoB;AAChC,QAAA,aAAe,KAAI;AAC3B,QAAI,eAAe,QAAQ;AACzB,WAAK,aAAa;eACT,MAAM,QAAQ,UAAU,GAAG;AACpC,gBAAU,YAAY,MAAM;;EAEhC;AAgBA,EAAAA,cAAA,UAAA,SAAA,SAAO,UAAsC;AACnC,QAAA,cAAgB,KAAI;AAC5B,mBAAe,UAAU,aAAa,QAAQ;AAE9C,QAAI,oBAAoBA,eAAc;AACpC,eAAS,cAAc,IAAI;;EAE/B;AAjLc,EAAAA,cAAA,QAAS,WAAA;AACrB,QAAM,QAAQ,IAAIA,cAAY;AAC9B,UAAM,SAAS;AACf,WAAO;EACT,EAAE;AA8KJ,SAAAA;EAnLA;AAqLO,IAAM,qBAAqB,aAAa;AAEzC,SAAU,eAAe,OAAU;AACvC,SACE,iBAAiB,gBAChB,SAAS,YAAY,SAAS,WAAW,MAAM,MAAM,KAAK,WAAW,MAAM,GAAG,KAAK,WAAW,MAAM,WAAW;AAEpH;AAEA,SAAS,cAAc,WAAwC;AAC7D,MAAI,WAAW,SAAS,GAAG;AACzB,cAAS;SACJ;AACL,cAAU,YAAW;;AAEzB;;;AC5MO,IAAM,SAAuB;EAClC,kBAAkB;EAClB,uBAAuB;EACvB,SAAS;EACT,uCAAuC;EACvC,0BAA0B;;;;ACGrB,IAAM,kBAAmC;EAG9C,YAAA,SAAW,SAAqB,SAAgB;AAAE,QAAA,OAAA,CAAA;aAAA,KAAA,GAAA,KAAA,UAAA,QAAA,MAAO;AAAP,WAAA,KAAA,CAAA,IAAA,UAAA,EAAA;;AACxC,QAAA,WAAa,gBAAe;AACpC,QAAI,aAAQ,QAAR,aAAQ,SAAA,SAAR,SAAU,YAAY;AACxB,aAAO,SAAS,WAAU,MAAnB,UAAQ,cAAA,CAAY,SAAS,OAAO,GAAA,OAAK,IAAI,CAAA,CAAA;;AAEtD,WAAO,WAAU,MAAA,QAAA,cAAA,CAAC,SAAS,OAAO,GAAA,OAAK,IAAI,CAAA,CAAA;EAC7C;EACA,cAAA,SAAa,QAAM;AACT,QAAA,WAAa,gBAAe;AACpC,aAAQ,aAAQ,QAAR,aAAQ,SAAA,SAAR,SAAU,iBAAgB,cAAc,MAAa;EAC/D;EACA,UAAU;;;;ACjBN,SAAU,qBAAqB,KAAQ;AAC3C,kBAAgB,WAAW,WAAA;AACjB,QAAA,mBAAqB,OAAM;AACnC,QAAI,kBAAkB;AAEpB,uBAAiB,GAAG;WACf;AAEL,YAAM;;EAEV,CAAC;AACH;;;ACtBM,SAAU,OAAI;AAAK;;;ACMlB,IAAM,wBAAyB,WAAA;AAAM,SAAA,mBAAmB,KAAK,QAAW,MAAS;AAA5C,EAAsE;AAO5G,SAAU,kBAAkB,OAAU;AAC1C,SAAO,mBAAmB,KAAK,QAAW,KAAK;AACjD;AAOM,SAAU,iBAAoB,OAAQ;AAC1C,SAAO,mBAAmB,KAAK,OAAO,MAAS;AACjD;AAQM,SAAU,mBAAmB,MAAuB,OAAY,OAAU;AAC9E,SAAO;IACL;IACA;IACA;;AAEJ;;;ACrCA,IAAI,UAAuD;AASrD,SAAU,aAAa,IAAc;AACzC,MAAI,OAAO,uCAAuC;AAChD,QAAM,SAAS,CAAC;AAChB,QAAI,QAAQ;AACV,gBAAU,EAAE,aAAa,OAAO,OAAO,KAAI;;AAE7C,OAAE;AACF,QAAI,QAAQ;AACJ,UAAA,KAAyB,SAAvB,cAAW,GAAA,aAAE,QAAK,GAAA;AAC1B,gBAAU;AACV,UAAI,aAAa;AACf,cAAM;;;SAGL;AAGL,OAAE;;AAEN;AAMM,SAAU,aAAa,KAAQ;AACnC,MAAI,OAAO,yCAAyC,SAAS;AAC3D,YAAQ,cAAc;AACtB,YAAQ,QAAQ;;AAEpB;;;ACvBA,IAAA,aAAA,SAAA,QAAA;AAAmC,YAAAC,aAAA,MAAA;AA4BjC,WAAAA,YAAY,aAA6C;AAAzD,QAAA,QACE,OAAA,KAAA,IAAA,KAAO;AATC,UAAA,YAAqB;AAU7B,QAAI,aAAa;AACf,YAAK,cAAc;AAGnB,UAAI,eAAe,WAAW,GAAG;AAC/B,oBAAY,IAAI,KAAI;;WAEjB;AACL,YAAK,cAAc;;;EAEvB;AAzBO,EAAAA,YAAA,SAAP,SAAiB,MAAwB,OAA2B,UAAqB;AACvF,WAAO,IAAI,eAAe,MAAM,OAAO,QAAQ;EACjD;AA+BA,EAAAA,YAAA,UAAA,OAAA,SAAK,OAAQ;AACX,QAAI,KAAK,WAAW;AAClB,gCAA0B,iBAAiB,KAAK,GAAG,IAAI;WAClD;AACL,WAAK,MAAM,KAAM;;EAErB;AAQA,EAAAA,YAAA,UAAA,QAAA,SAAM,KAAS;AACb,QAAI,KAAK,WAAW;AAClB,gCAA0B,kBAAkB,GAAG,GAAG,IAAI;WACjD;AACL,WAAK,YAAY;AACjB,WAAK,OAAO,GAAG;;EAEnB;AAOA,EAAAA,YAAA,UAAA,WAAA,WAAA;AACE,QAAI,KAAK,WAAW;AAClB,gCAA0B,uBAAuB,IAAI;WAChD;AACL,WAAK,YAAY;AACjB,WAAK,UAAS;;EAElB;AAEA,EAAAA,YAAA,UAAA,cAAA,WAAA;AACE,QAAI,CAAC,KAAK,QAAQ;AAChB,WAAK,YAAY;AACjB,aAAA,UAAM,YAAW,KAAA,IAAA;AACjB,WAAK,cAAc;;EAEvB;AAEU,EAAAA,YAAA,UAAA,QAAV,SAAgB,OAAQ;AACtB,SAAK,YAAY,KAAK,KAAK;EAC7B;AAEU,EAAAA,YAAA,UAAA,SAAV,SAAiB,KAAQ;AACvB,QAAI;AACF,WAAK,YAAY,MAAM,GAAG;;AAE1B,WAAK,YAAW;;EAEpB;AAEU,EAAAA,YAAA,UAAA,YAAV,WAAA;AACE,QAAI;AACF,WAAK,YAAY,SAAQ;;AAEzB,WAAK,YAAW;;EAEpB;AACF,SAAAA;AAAA,EAhHmC,YAAY;AAuH/C,IAAM,QAAQ,SAAS,UAAU;AAEjC,SAAS,KAAyC,IAAQ,SAAY;AACpE,SAAO,MAAM,KAAK,IAAI,OAAO;AAC/B;AAMA,IAAA,mBAAA,WAAA;AACE,WAAAC,kBAAoB,iBAAqC;AAArC,SAAA,kBAAA;EAAwC;AAE5D,EAAAA,kBAAA,UAAA,OAAA,SAAK,OAAQ;AACH,QAAA,kBAAoB,KAAI;AAChC,QAAI,gBAAgB,MAAM;AACxB,UAAI;AACF,wBAAgB,KAAK,KAAK;eACnB,OAAO;AACd,6BAAqB,KAAK;;;EAGhC;AAEA,EAAAA,kBAAA,UAAA,QAAA,SAAM,KAAQ;AACJ,QAAA,kBAAoB,KAAI;AAChC,QAAI,gBAAgB,OAAO;AACzB,UAAI;AACF,wBAAgB,MAAM,GAAG;eAClB,OAAO;AACd,6BAAqB,KAAK;;WAEvB;AACL,2BAAqB,GAAG;;EAE5B;AAEA,EAAAA,kBAAA,UAAA,WAAA,WAAA;AACU,QAAA,kBAAoB,KAAI;AAChC,QAAI,gBAAgB,UAAU;AAC5B,UAAI;AACF,wBAAgB,SAAQ;eACjB,OAAO;AACd,6BAAqB,KAAK;;;EAGhC;AACF,SAAAA;AAAA,EArCA;AAuCA,IAAA,iBAAA,SAAA,QAAA;AAAuC,YAAAC,iBAAA,MAAA;AACrC,WAAAA,gBACE,gBACA,OACA,UAA8B;AAHhC,QAAA,QAKE,OAAA,KAAA,IAAA,KAAO;AAEP,QAAI;AACJ,QAAI,WAAW,cAAc,KAAK,CAAC,gBAAgB;AAGjD,wBAAkB;QAChB,MAAO,mBAAc,QAAd,mBAAc,SAAd,iBAAkB;QACzB,OAAO,UAAK,QAAL,UAAK,SAAL,QAAS;QAChB,UAAU,aAAQ,QAAR,aAAQ,SAAR,WAAY;;WAEnB;AAEL,UAAI;AACJ,UAAI,SAAQ,OAAO,0BAA0B;AAI3C,oBAAU,OAAO,OAAO,cAAc;AACtC,kBAAQ,cAAc,WAAA;AAAM,iBAAA,MAAK,YAAW;QAAhB;AAC5B,0BAAkB;UAChB,MAAM,eAAe,QAAQ,KAAK,eAAe,MAAM,SAAO;UAC9D,OAAO,eAAe,SAAS,KAAK,eAAe,OAAO,SAAO;UACjE,UAAU,eAAe,YAAY,KAAK,eAAe,UAAU,SAAO;;aAEvE;AAEL,0BAAkB;;;AAMtB,UAAK,cAAc,IAAI,iBAAiB,eAAe;;EACzD;AACF,SAAAA;AAAA,EAzCuC,UAAU;AA2CjD,SAAS,qBAAqB,OAAU;AACtC,MAAI,OAAO,uCAAuC;AAChD,iBAAa,KAAK;SACb;AAGL,yBAAqB,KAAK;;AAE9B;AAQA,SAAS,oBAAoB,KAAQ;AACnC,QAAM;AACR;AAOA,SAAS,0BAA0B,cAA2C,YAA2B;AAC/F,MAAA,wBAA0B,OAAM;AACxC,2BAAyB,gBAAgB,WAAW,WAAA;AAAM,WAAA,sBAAsB,cAAc,UAAU;EAA9C,CAA+C;AAC3G;AAOO,IAAM,iBAA6D;EACxE,QAAQ;EACR,MAAM;EACN,OAAO;EACP,UAAU;;;;ACtQL,IAAM,aAA+B,WAAA;AAAM,SAAC,OAAO,WAAW,cAAc,OAAO,cAAe;AAAvD,EAAsE;;;ACoClH,SAAU,SAAY,GAAI;AAC9B,SAAO;AACT;;;ACsCM,SAAU,cAAoB,KAA+B;AACjE,MAAI,IAAI,WAAW,GAAG;AACpB,WAAO;;AAGT,MAAI,IAAI,WAAW,GAAG;AACpB,WAAO,IAAI,CAAC;;AAGd,SAAO,SAAS,MAAM,OAAQ;AAC5B,WAAO,IAAI,OAAO,SAAC,MAAW,IAAuB;AAAK,aAAA,GAAG,IAAI;IAAP,GAAU,KAAY;EAClF;AACF;;;AChFA,IAAA,aAAA,WAAA;AAiBE,WAAAC,YAAY,WAA6E;AACvF,QAAI,WAAW;AACb,WAAK,aAAa;;EAEtB;AAwBA,EAAAA,YAAA,UAAA,OAAA,SAAQ,UAAyB;AAC/B,QAAMC,cAAa,IAAID,YAAU;AACjC,IAAAC,YAAW,SAAS;AACpB,IAAAA,YAAW,WAAW;AACtB,WAAOA;EACT;AA2IA,EAAAD,YAAA,UAAA,YAAA,SACE,gBACA,OACA,UAA8B;AAHhC,QAAA,QAAA;AAKE,QAAM,aAAa,aAAa,cAAc,IAAI,iBAAiB,IAAI,eAAe,gBAAgB,OAAO,QAAQ;AAErH,iBAAa,WAAA;AACL,UAAA,KAAuB,OAArB,WAAQ,GAAA,UAAE,SAAM,GAAA;AACxB,iBAAW,IACT,WAGI,SAAS,KAAK,YAAY,MAAM,IAChC,SAIA,MAAK,WAAW,UAAU,IAG1B,MAAK,cAAc,UAAU,CAAC;IAEtC,CAAC;AAED,WAAO;EACT;AAGU,EAAAA,YAAA,UAAA,gBAAV,SAAwB,MAAmB;AACzC,QAAI;AACF,aAAO,KAAK,WAAW,IAAI;aACpB,KAAK;AAIZ,WAAK,MAAM,GAAG;;EAElB;AA6DA,EAAAA,YAAA,UAAA,UAAA,SAAQ,MAA0B,aAAoC;AAAtE,QAAA,QAAA;AACE,kBAAc,eAAe,WAAW;AAExC,WAAO,IAAI,YAAkB,SAAC,SAAS,QAAM;AAC3C,UAAM,aAAa,IAAI,eAAkB;QACvC,MAAM,SAAC,OAAK;AACV,cAAI;AACF,iBAAK,KAAK;mBACH,KAAK;AACZ,mBAAO,GAAG;AACV,uBAAW,YAAW;;QAE1B;QACA,OAAO;QACP,UAAU;OACX;AACD,YAAK,UAAU,UAAU;IAC3B,CAAC;EACH;AAGU,EAAAA,YAAA,UAAA,aAAV,SAAqB,YAA2B;;AAC9C,YAAO,KAAA,KAAK,YAAM,QAAA,OAAA,SAAA,SAAA,GAAE,UAAU,UAAU;EAC1C;AAMA,EAAAA,YAAA,UAAC,UAAiB,IAAlB,WAAA;AACE,WAAO;EACT;AA4FA,EAAAA,YAAA,UAAA,OAAA,WAAA;AAAK,QAAA,aAAA,CAAA;aAAA,KAAA,GAAA,KAAA,UAAA,QAAA,MAA2C;AAA3C,iBAAA,EAAA,IAAA,UAAA,EAAA;;AACH,WAAO,cAAc,UAAU,EAAE,IAAI;EACvC;AA4BA,EAAAA,YAAA,UAAA,YAAA,SAAU,aAAoC;AAA9C,QAAA,QAAA;AACE,kBAAc,eAAe,WAAW;AAExC,WAAO,IAAI,YAAY,SAAC,SAAS,QAAM;AACrC,UAAI;AACJ,YAAK,UACH,SAAC,GAAI;AAAK,eAAC,QAAQ;MAAT,GACV,SAAC,KAAQ;AAAK,eAAA,OAAO,GAAG;MAAV,GACd,WAAA;AAAM,eAAA,QAAQ,KAAK;MAAb,CAAc;IAExB,CAAC;EACH;AAraO,EAAAA,YAAA,SAAkC,SAAI,WAAwD;AACnG,WAAO,IAAIA,YAAc,SAAS;EACpC;AAoaF,SAAAA;EArcA;AA8cA,SAAS,eAAe,aAA+C;;AACrE,UAAO,KAAA,gBAAW,QAAX,gBAAW,SAAX,cAAe,OAAO,aAAO,QAAA,OAAA,SAAA,KAAI;AAC1C;AAEA,SAAS,WAAc,OAAU;AAC/B,SAAO,SAAS,WAAW,MAAM,IAAI,KAAK,WAAW,MAAM,KAAK,KAAK,WAAW,MAAM,QAAQ;AAChG;AAEA,SAAS,aAAgB,OAAU;AACjC,SAAQ,SAAS,iBAAiB,cAAgB,WAAW,KAAK,KAAK,eAAe,KAAK;AAC7F;;;AC9dM,SAAU,QAAQ,QAAW;AACjC,SAAO,WAAW,WAAM,QAAN,WAAM,SAAA,SAAN,OAAQ,IAAI;AAChC;AAMM,SAAU,QACdE,OAAqF;AAErF,SAAO,SAAC,QAAqB;AAC3B,QAAI,QAAQ,MAAM,GAAG;AACnB,aAAO,OAAO,KAAK,SAA+B,cAA2B;AAC3E,YAAI;AACF,iBAAOA,MAAK,cAAc,IAAI;iBACvB,KAAK;AACZ,eAAK,MAAM,GAAG;;MAElB,CAAC;;AAEH,UAAM,IAAI,UAAU,wCAAwC;EAC9D;AACF;;;ACjBM,SAAU,yBACd,aACA,QACA,YACA,SACA,YAAuB;AAEvB,SAAO,IAAI,mBAAmB,aAAa,QAAQ,YAAY,SAAS,UAAU;AACpF;AAMA,IAAA,qBAAA,SAAA,QAAA;AAA2C,YAAAC,qBAAA,MAAA;AAiBzC,WAAAA,oBACE,aACA,QACA,YACA,SACQ,YACA,mBAAiC;AAN3C,QAAA,QAoBE,OAAA,KAAA,MAAM,WAAW,KAAC;AAfV,UAAA,aAAA;AACA,UAAA,oBAAA;AAeR,UAAK,QAAQ,SACT,SAAuC,OAAQ;AAC7C,UAAI;AACF,eAAO,KAAK;eACL,KAAK;AACZ,oBAAY,MAAM,GAAG;;IAEzB,IACA,OAAA,UAAM;AACV,UAAK,SAAS,UACV,SAAuC,KAAQ;AAC7C,UAAI;AACF,gBAAQ,GAAG;eACJC,MAAK;AAEZ,oBAAY,MAAMA,IAAG;;AAGrB,aAAK,YAAW;;IAEpB,IACA,OAAA,UAAM;AACV,UAAK,YAAY,aACb,WAAA;AACE,UAAI;AACF,mBAAU;eACH,KAAK;AAEZ,oBAAY,MAAM,GAAG;;AAGrB,aAAK,YAAW;;IAEpB,IACA,OAAA,UAAM;;EACZ;AAEA,EAAAD,oBAAA,UAAA,cAAA,WAAA;;AACE,QAAI,CAAC,KAAK,qBAAqB,KAAK,kBAAiB,GAAI;AAC/C,UAAA,WAAW,KAAI;AACvB,aAAA,UAAM,YAAW,KAAA,IAAA;AAEjB,OAAC,cAAU,KAAA,KAAK,gBAAU,QAAA,OAAA,SAAA,SAAA,GAAA,KAAf,IAAI;;EAEnB;AACF,SAAAA;AAAA,EAnF2C,UAAU;;;AC5B9C,IAAM,cAAe,SAAI,GAAM;AAAwB,SAAA,KAAK,OAAO,EAAE,WAAW,YAAY,OAAO,MAAM;AAAlD;;;ACMxD,SAAU,UAAU,OAAU;AAClC,SAAO,WAAW,UAAK,QAAL,UAAK,SAAA,SAAL,MAAO,IAAI;AAC/B;;;ACHM,SAAU,oBAAoB,OAAU;AAC5C,SAAO,WAAW,MAAM,UAAiB,CAAC;AAC5C;;;ACLM,SAAU,gBAAmB,KAAQ;AACzC,SAAO,OAAO,iBAAiB,WAAW,QAAG,QAAH,QAAG,SAAA,SAAH,IAAM,OAAO,aAAa,CAAC;AACvE;;;ACAM,SAAU,iCAAiC,OAAU;AAEzD,SAAO,IAAI,UACT,mBACE,UAAU,QAAQ,OAAO,UAAU,WAAW,sBAAsB,MAAI,QAAK,OAAG,0HACwC;AAE9H;;;ACXM,SAAU,oBAAiB;AAC/B,MAAI,OAAO,WAAW,cAAc,CAAC,OAAO,UAAU;AACpD,WAAO;;AAGT,SAAO,OAAO;AAChB;AAEO,IAAM,WAAW,kBAAiB;;;ACJnC,SAAU,WAAW,OAAU;AACnC,SAAO,WAAW,UAAK,QAAL,UAAK,SAAA,SAAL,MAAQ,QAAe,CAAC;AAC5C;;;ACHM,SAAiB,mCAAsC,gBAAqC;;;;;;AAC1F,mBAAS,eAAe,UAAS;;;;;;oBAE1B,QAAA,CAAA,GAAA,CAAA;AACe,iBAAA,CAAA,GAAA,QAAM,OAAO,KAAI,CAAE,CAAA;;AAArC,eAAkB,GAAA,KAAA,GAAhB,QAAK,GAAA,OAAE,OAAI,GAAA;eACf,KAAA,QAAA,CAAA,GAAA,CAAA;;;AACF,iBAAA,CAAA,GAAA,GAAA,KAAA,CAAA;;6BAEI,KAAM,CAAA;;AAAZ,iBAAA,CAAA,GAAA,GAAA,KAAA,CAAA;;AAAA,aAAA,KAAA;;;;;AAGF,iBAAO,YAAW;;;;;;;;AAIhB,SAAU,qBAAwB,KAAQ;AAG9C,SAAO,WAAW,QAAG,QAAH,QAAG,SAAA,SAAH,IAAK,SAAS;AAClC;;;ACPM,SAAU,UAAa,OAAyB;AACpD,MAAI,iBAAiB,YAAY;AAC/B,WAAO;;AAET,MAAI,SAAS,MAAM;AACjB,QAAI,oBAAoB,KAAK,GAAG;AAC9B,aAAO,sBAAsB,KAAK;;AAEpC,QAAI,YAAY,KAAK,GAAG;AACtB,aAAO,cAAc,KAAK;;AAE5B,QAAI,UAAU,KAAK,GAAG;AACpB,aAAO,YAAY,KAAK;;AAE1B,QAAI,gBAAgB,KAAK,GAAG;AAC1B,aAAO,kBAAkB,KAAK;;AAEhC,QAAI,WAAW,KAAK,GAAG;AACrB,aAAO,aAAa,KAAK;;AAE3B,QAAI,qBAAqB,KAAK,GAAG;AAC/B,aAAO,uBAAuB,KAAK;;;AAIvC,QAAM,iCAAiC,KAAK;AAC9C;AAMM,SAAU,sBAAyB,KAAQ;AAC/C,SAAO,IAAI,WAAW,SAAC,YAAyB;AAC9C,QAAM,MAAM,IAAI,UAAiB,EAAC;AAClC,QAAI,WAAW,IAAI,SAAS,GAAG;AAC7B,aAAO,IAAI,UAAU,UAAU;;AAGjC,UAAM,IAAI,UAAU,gEAAgE;EACtF,CAAC;AACH;AASM,SAAU,cAAiB,OAAmB;AAClD,SAAO,IAAI,WAAW,SAAC,YAAyB;AAU9C,aAAS,IAAI,GAAG,IAAI,MAAM,UAAU,CAAC,WAAW,QAAQ,KAAK;AAC3D,iBAAW,KAAK,MAAM,CAAC,CAAC;;AAE1B,eAAW,SAAQ;EACrB,CAAC;AACH;AAEM,SAAU,YAAe,SAAuB;AACpD,SAAO,IAAI,WAAW,SAAC,YAAyB;AAC9C,YACG,KACC,SAAC,OAAK;AACJ,UAAI,CAAC,WAAW,QAAQ;AACtB,mBAAW,KAAK,KAAK;AACrB,mBAAW,SAAQ;;IAEvB,GACA,SAAC,KAAQ;AAAK,aAAA,WAAW,MAAM,GAAG;IAApB,CAAqB,EAEpC,KAAK,MAAM,oBAAoB;EACpC,CAAC;AACH;AAEM,SAAU,aAAgB,UAAqB;AACnD,SAAO,IAAI,WAAW,SAAC,YAAyB;;;AAC9C,eAAoB,aAAA,SAAA,QAAQ,GAAA,eAAA,WAAA,KAAA,GAAA,CAAA,aAAA,MAAA,eAAA,WAAA,KAAA,GAAE;AAAzB,YAAM,QAAK,aAAA;AACd,mBAAW,KAAK,KAAK;AACrB,YAAI,WAAW,QAAQ;AACrB;;;;;;;;;;;;AAGJ,eAAW,SAAQ;EACrB,CAAC;AACH;AAEM,SAAU,kBAAqB,eAA+B;AAClE,SAAO,IAAI,WAAW,SAAC,YAAyB;AAC9C,IAAAE,SAAQ,eAAe,UAAU,EAAE,MAAM,SAAC,KAAG;AAAK,aAAA,WAAW,MAAM,GAAG;IAApB,CAAqB;EACzE,CAAC;AACH;AAEM,SAAU,uBAA0B,gBAAqC;AAC7E,SAAO,kBAAkB,mCAAmC,cAAc,CAAC;AAC7E;AAEA,SAAeA,SAAW,eAAiC,YAAyB;;;;;;;;;AACxD,4BAAA,cAAA,aAAa;;;;;;AAAtB,kBAAK,kBAAA;AACpB,qBAAW,KAAK,KAAK;AAGrB,cAAI,WAAW,QAAQ;AACrB,mBAAA,CAAA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;AAGJ,qBAAW,SAAQ;;;;;;;;AChHf,SAAU,gBACd,oBACA,WACA,MACA,OACA,QAAc;AADd,MAAA,UAAA,QAAA;AAAA,YAAA;EAAS;AACT,MAAA,WAAA,QAAA;AAAA,aAAA;EAAc;AAEd,MAAM,uBAAuB,UAAU,SAAS,WAAA;AAC9C,SAAI;AACJ,QAAI,QAAQ;AACV,yBAAmB,IAAI,KAAK,SAAS,MAAM,KAAK,CAAC;WAC5C;AACL,WAAK,YAAW;;EAEpB,GAAG,KAAK;AAER,qBAAmB,IAAI,oBAAoB;AAE3C,MAAI,CAAC,QAAQ;AAKX,WAAO;;AAEX;;;ACeM,SAAU,UAAa,WAA0B,OAAS;AAAT,MAAA,UAAA,QAAA;AAAA,YAAA;EAAS;AAC9D,SAAO,QAAQ,SAAC,QAAQ,YAAU;AAChC,WAAO,UACL,yBACE,YACA,SAAC,OAAK;AAAK,aAAA,gBAAgB,YAAY,WAAW,WAAA;AAAM,eAAA,WAAW,KAAK,KAAK;MAArB,GAAwB,KAAK;IAA1E,GACX,WAAA;AAAM,aAAA,gBAAgB,YAAY,WAAW,WAAA;AAAM,eAAA,WAAW,SAAQ;MAAnB,GAAuB,KAAK;IAAzE,GACN,SAAC,KAAG;AAAK,aAAA,gBAAgB,YAAY,WAAW,WAAA;AAAM,eAAA,WAAW,MAAM,GAAG;MAApB,GAAuB,KAAK;IAAzE,CAA0E,CACpF;EAEL,CAAC;AACH;;;ACPM,SAAU,YAAe,WAA0B,OAAiB;AAAjB,MAAA,UAAA,QAAA;AAAA,YAAA;EAAiB;AACxE,SAAO,QAAQ,SAAC,QAAQ,YAAU;AAChC,eAAW,IAAI,UAAU,SAAS,WAAA;AAAM,aAAA,OAAO,UAAU,UAAU;IAA3B,GAA8B,KAAK,CAAC;EAC9E,CAAC;AACH;;;AC7DM,SAAU,mBAAsB,OAA6B,WAAwB;AACzF,SAAO,UAAU,KAAK,EAAE,KAAK,YAAY,SAAS,GAAG,UAAU,SAAS,CAAC;AAC3E;;;ACFM,SAAU,gBAAmB,OAAuB,WAAwB;AAChF,SAAO,UAAU,KAAK,EAAE,KAAK,YAAY,SAAS,GAAG,UAAU,SAAS,CAAC;AAC3E;;;ACJM,SAAU,cAAiB,OAAqB,WAAwB;AAC5E,SAAO,IAAI,WAAc,SAAC,YAAU;AAElC,QAAI,IAAI;AAER,WAAO,UAAU,SAAS,WAAA;AACxB,UAAI,MAAM,MAAM,QAAQ;AAGtB,mBAAW,SAAQ;aACd;AAGL,mBAAW,KAAK,MAAM,GAAG,CAAC;AAI1B,YAAI,CAAC,WAAW,QAAQ;AACtB,eAAK,SAAQ;;;IAGnB,CAAC;EACH,CAAC;AACH;;;ACfM,SAAU,iBAAoB,OAAoB,WAAwB;AAC9E,SAAO,IAAI,WAAc,SAAC,YAAU;AAClC,QAAIC;AAKJ,oBAAgB,YAAY,WAAW,WAAA;AAErC,MAAAA,YAAY,MAAc,QAAe,EAAC;AAE1C,sBACE,YACA,WACA,WAAA;;AACE,YAAI;AACJ,YAAI;AACJ,YAAI;AAEF,UAAC,KAAkBA,UAAS,KAAI,GAA7B,QAAK,GAAA,OAAE,OAAI,GAAA;iBACP,KAAK;AAEZ,qBAAW,MAAM,GAAG;AACpB;;AAGF,YAAI,MAAM;AAKR,qBAAW,SAAQ;eACd;AAEL,qBAAW,KAAK,KAAK;;MAEzB,GACA,GACA,IAAI;IAER,CAAC;AAMD,WAAO,WAAA;AAAM,aAAA,WAAWA,cAAQ,QAARA,cAAQ,SAAA,SAARA,UAAU,MAAM,KAAKA,UAAS,OAAM;IAA/C;EACf,CAAC;AACH;;;ACvDM,SAAU,sBAAyB,OAAyB,WAAwB;AACxF,MAAI,CAAC,OAAO;AACV,UAAM,IAAI,MAAM,yBAAyB;;AAE3C,SAAO,IAAI,WAAc,SAAC,YAAU;AAClC,oBAAgB,YAAY,WAAW,WAAA;AACrC,UAAMC,YAAW,MAAM,OAAO,aAAa,EAAC;AAC5C,sBACE,YACA,WACA,WAAA;AACE,QAAAA,UAAS,KAAI,EAAG,KAAK,SAAC,QAAM;AAC1B,cAAI,OAAO,MAAM;AAGf,uBAAW,SAAQ;iBACd;AACL,uBAAW,KAAK,OAAO,KAAK;;QAEhC,CAAC;MACH,GACA,GACA,IAAI;IAER,CAAC;EACH,CAAC;AACH;;;ACzBM,SAAU,2BAA8B,OAA8B,WAAwB;AAClG,SAAO,sBAAsB,mCAAmC,KAAK,GAAG,SAAS;AACnF;;;ACoBM,SAAU,UAAa,OAA2B,WAAwB;AAC9E,MAAI,SAAS,MAAM;AACjB,QAAI,oBAAoB,KAAK,GAAG;AAC9B,aAAO,mBAAmB,OAAO,SAAS;;AAE5C,QAAI,YAAY,KAAK,GAAG;AACtB,aAAO,cAAc,OAAO,SAAS;;AAEvC,QAAI,UAAU,KAAK,GAAG;AACpB,aAAO,gBAAgB,OAAO,SAAS;;AAEzC,QAAI,gBAAgB,KAAK,GAAG;AAC1B,aAAO,sBAAsB,OAAO,SAAS;;AAE/C,QAAI,WAAW,KAAK,GAAG;AACrB,aAAO,iBAAiB,OAAO,SAAS;;AAE1C,QAAI,qBAAqB,KAAK,GAAG;AAC/B,aAAO,2BAA2B,OAAO,SAAS;;;AAGtD,QAAM,iCAAiC,KAAK;AAC9C;;;ACoDM,SAAU,KAAQ,OAA2B,WAAyB;AAC1E,SAAO,YAAY,UAAU,OAAO,SAAS,IAAI,UAAU,KAAK;AAClE;;;ACzDM,SAAU,IAAU,SAAyC,SAAa;AAC9E,SAAO,QAAQ,SAAC,QAAQ,YAAU;AAEhC,QAAI,QAAQ;AAGZ,WAAO,UACL,yBAAyB,YAAY,SAAC,OAAQ;AAG5C,iBAAW,KAAK,QAAQ,KAAK,SAAS,OAAO,OAAO,CAAC;IACvD,CAAC,CAAC;EAEN,CAAC;AACH;;;ACAM,SAAU,OAAU,WAAiD,SAAa;AACtF,SAAO,QAAQ,SAAC,QAAQ,YAAU;AAEhC,QAAI,QAAQ;AAIZ,WAAO,UAIL,yBAAyB,YAAY,SAAC,OAAK;AAAK,aAAA,UAAU,KAAK,SAAS,OAAO,OAAO,KAAK,WAAW,KAAK,KAAK;IAAhE,CAAiE,CAAC;EAEtH,CAAC;AACH;;;AC8BM,SAAU,WACd,UAAgD;AAEhD,SAAO,QAAQ,SAAC,QAAQ,YAAU;AAChC,QAAI,WAAgC;AACpC,QAAI,YAAY;AAChB,QAAI;AAEJ,eAAW,OAAO,UAChB,yBAAyB,YAAY,QAAW,QAAW,SAAC,KAAG;AAC7D,sBAAgB,UAAU,SAAS,KAAK,WAAW,QAAQ,EAAE,MAAM,CAAC,CAAC;AACrE,UAAI,UAAU;AACZ,iBAAS,YAAW;AACpB,mBAAW;AACX,sBAAc,UAAU,UAAU;aAC7B;AAGL,oBAAY;;IAEhB,CAAC,CAAC;AAGJ,QAAI,WAAW;AAMb,eAAS,YAAW;AACpB,iBAAW;AACX,oBAAe,UAAU,UAAU;;EAEvC,CAAC;AACH;;;AC1IO,IAAM,eAAN,MAAM,sBAAqB,MAAM;;;;;;;;;EASpC,YAAY,EAAE,SAAS,MAAAC,OAAM,oBAAoB,iBAAiB,SAAQ,GAAK;AAC3E,UAAM,OAAO;AACb,SAAK,OAAOA;AACZ,SAAK,kBAAkB;AACvB,SAAK,qBAAqB;AAC1B,QAAI,UAAU;AAEV,YAAM,EAAE,mBAAmB,gBAAgB,UAAS,IAAK;AACzD,WAAK,WAAW,EAAE,mBAAmB,gBAAgB,UAAS;IAC1E;AAGQ,SAAK,cAAc;AACnB,WAAO,eAAe,MAAM,cAAa,SAAS;EAC1D;AACA;;;ACxBU,IAAC;CACV,SAAUC,mBAAkB;AACzB,EAAAA,kBAAiB,cAAc,IAAI;AACnC,EAAAA,kBAAiB,sBAAsB,IAAI;AAC3C,EAAAA,kBAAiB,SAAS,IAAI;AAC9B,EAAAA,kBAAiB,cAAc,IAAI;AACvC,GAAG,qBAAqB,mBAAmB,CAAA,EAAG;;;ACHlC,IAAC,0BAA0B,CAAC,UAAU,iBAAiB,iBAAiB,CAAC,WAAWC,OAAM,sBAAsB;AACxH,QAAM,EAAE,SAAS,mBAAkB,IAAK,SAASA,KAAI;AACrD,MAAI,CAAC,WAAW;AACZ,UAAM,IAAI,eAAe;MACrB,MAAAA;MACA,SAAS,oBACH,GAAG,OAAO,IAAI,iBAAiB,KAC/B;MACN;IACZ,CAAS;EACT;AACA;;;ACEY,IAAC,UAAU,MAAM;AAEzB,MAAI,OAAO,WAAW,eAAe,OAAO,OAAO,SAAS,YAAY;AACpE,WAAO,OAAO;EACtB;AAEI,MAAI,OAAO,SAAS,YAAY;AAC5B,WAAO;EACf;AACI,QAAM,IAAI,aAAa;IACnB,MAAM;IACN,SAAS;EACjB,CAAK;AACL;AACY,IAAC,UAAU,MAAM;AAEzB,MAAI,OAAO,WAAW,eAAe,OAAO,OAAO,SAAS,YAAY;AACpE,WAAO,OAAO;EACtB;AAEI,MAAI,OAAO,SAAS,YAAY;AAC5B,WAAO;EACf;AACI,QAAM,IAAI,aAAa;IACnB,MAAM;IACN,SAAS;EACjB,CAAK;AACL;;;ACxCY,IAAC,0BAA0B;AAC3B,IAAC,oBAAoB;AAErB,IAAC,oCAAoC;;;ACJvC,IAAC;CACV,SAAUC,UAAS;AAChB,EAAAA,SAAQ,OAAO,IAAI;AACnB,EAAAA,SAAQ,OAAO,IAAI;AACnB,EAAAA,SAAQ,MAAM,IAAI;AAClB,EAAAA,SAAQ,MAAM,IAAI;AAClB,EAAAA,SAAQ,SAAS,IAAI;AACrB,EAAAA,SAAQ,MAAM,IAAI;AACtB,GAAG,YAAY,UAAU,CAAA,EAAG;;;ACL5B,IAAM,aAAa;EACf,SAAS;EACT,OAAO;EACP,MAAM;EACN,MAAM;EACN,OAAO;EACP,MAAM;AACV;AAKO,IAAM,gBAAN,MAAM,eAAc;;;;;EAKvB,YAAYC,OAAM,QAAQ,QAAQ,MAAM;AACpC,SAAK,OAAOA;AACZ,SAAK,QAAQ;AACb,SAAK,cAAc,CAAA;EAC3B;EACI,SAAS,GAAG;AACR,WAAO,IAAI,KAAK,MAAM,IAAI,KAAK;EACvC;EACI,MAAM;AACF,UAAM,KAAK,oBAAI,KAAI;AACnB,WAAQ,CAAC,KAAK,SAAS,GAAG,WAAU,CAAE,GAAG,KAAK,SAAS,GAAG,WAAU,CAAE,CAAC,EAAE,KAAK,GAAG,IAC7E,MACA,GAAG,gBAAe;EAC9B;EACI,UAAUC,SAAQ;AACd,QAAI,CAACA;AACD,aAAO,KAAK;AAChB,SAAK,UAAUA;AACf,WAAO,KAAK;EACpB;;;;;;;;EAQI,KAAK,SAAS,KAAK;AACf,QAAI,kBAAkB,KAAK;AAC3B,QAAI,eAAc,WAAW;AACzB,wBAAkB,eAAc;IAC5C;AACQ,QAAI,OAAO,WAAW,eAAe,OAAO,WAAW;AACnD,wBAAkB,OAAO;IACrC;AACQ,UAAM,cAAc,WAAW,eAAe;AAC9C,UAAM,YAAY,WAAW,IAAI;AACjC,QAAI,EAAE,aAAa,cAAc;AAE7B;IACZ;AACQ,QAAI,MAAM,QAAQ,IAAI,KAAK,OAAO;AAClC,QAAI,SAAS,QAAQ,SAAS,QAAQ,OAAO;AACzC,YAAM,QAAQ,MAAM,KAAK,OAAO;IAC5C;AACQ,QAAI,SAAS,QAAQ,QAAQ,QAAQ,MAAM;AACvC,YAAM,QAAQ,KAAK,KAAK,OAAO;IAC3C;AACQ,QAAI,eAAc,qBAAqB;AACnC,UAAI,SAAS,QAAQ,QAAQ,QAAQ,MAAM;AACvC,cAAM,QAAQ,KAAK,KAAK,OAAO;MAC/C;AACY,UAAI,SAAS,QAAQ,SAAS,QAAQ,OAAO;AACzC,cAAM,QAAQ,MAAM,KAAK,OAAO;MAChD;IACA;AACQ,UAAM,SAAS,IAAI,IAAI,KAAK,KAAK,IAAG,CAAE,IAAI,KAAK,IAAI;AACnD,QAAI,UAAU;AACd,QAAI,IAAI,WAAW,KAAK,OAAO,IAAI,CAAC,MAAM,UAAU;AAChD,gBAAU,GAAG,MAAM,MAAM,IAAI,CAAC,CAAC;AAC/B,UAAI,OAAO;IACvB,WACiB,IAAI,WAAW,GAAG;AACvB,gBAAU,GAAG,MAAM,IAAI,IAAI,CAAC,CAAC;AAC7B,UAAI,QAAQ,IAAI,CAAC,CAAC;IAC9B,WACiB,OAAO,IAAI,CAAC,MAAM,UAAU;AACjC,UAAI,MAAM,IAAI,MAAM,CAAC;AACrB,UAAI,IAAI,WAAW,GAAG;AAClB,cAAM,IAAI,CAAC;MAC3B;AACY,gBAAU,GAAG,MAAM,MAAM,IAAI,CAAC,CAAC,IAAI,GAAG;AACtC,UAAI,GAAG,MAAM,MAAM,IAAI,CAAC,CAAC,IAAI,GAAG;IAC5C,OACa;AACD,gBAAU,GAAG,MAAM,IAAI,GAAG;AAC1B,UAAI,QAAQ,GAAG;IAC3B;AACQ,eAAW,UAAU,KAAK,aAAa;AACnC,YAAM,WAAW,EAAE,SAAS,WAAW,KAAK,IAAG,EAAE;AACjD,aAAO,SAAS,CAAC,QAAQ,CAAC;IACtC;EACA;;;;;;;EAOI,OAAO,KAAK;AACR,SAAK,KAAK,QAAQ,MAAM,GAAG,GAAG;EACtC;;;;;;;EAOI,QAAQ,KAAK;AACT,SAAK,KAAK,QAAQ,MAAM,GAAG,GAAG;EACtC;;;;;;;EAOI,QAAQ,KAAK;AACT,SAAK,KAAK,QAAQ,MAAM,GAAG,GAAG;EACtC;;;;;;;EAOI,SAAS,KAAK;AACV,SAAK,KAAK,QAAQ,OAAO,GAAG,GAAG;EACvC;;;;;;;EAOI,SAAS,KAAK;AACV,SAAK,KAAK,QAAQ,OAAO,GAAG,GAAG;EACvC;;;;;;;EAOI,WAAW,KAAK;AACZ,SAAK,KAAK,QAAQ,SAAS,GAAG,GAAG;EACzC;EACI,aAAa,WAAW;AACpB,QAAI,aAAa,UAAU,gBAAe,MAAO,yBAAyB;AACtE,WAAK,YAAY,KAAK,SAAS;AAC/B,gBAAU,UAAU,KAAK,OAAO;IAC5C;EACA;EACI,iBAAiB;AACb,WAAO,KAAK;EACpB;AACA;AACA,cAAc,YAAY;AAC1B,cAAc,sBAAsB;;;ACxKxB,IAAC,YAAY,MAAM,OAAO,WAAW,eAAe,OAAO,OAAO,aAAa;;;ACA/E,IAAC,cAAc,MAAM;AAC7B,MAAI,OAAO,SAAS,aAAa;AAC7B,WAAO;EACf;AACI,QAAM,cAAc;AACpB,SAAQ,OAAO,YAAY,sBAAsB,eAC7C,gBAAgB,YAAY;AACpC;;;ACPO,IAAM,oBAAN,cAAgC,MAAM;EACzC,cAAc;AACV,UAAM,GAAG,SAAS;AAClB,SAAK,eAAe;EAC5B;AACA;;;ACLY,IAAC,sBAAsB,CAAC,QAAQ;AACxC,QAAM,MAAM;AACZ,SAAO,OAAO,IAAI,GAAG;AACzB;;;ACHY,IAAC,eAAe,IAAI,KAAK;;;ACK9B,SAAS,gBAAgB,aAAa,cAAc;AACvD,QAAM,eAAe;AACrB,QAAM,gBAAgB;AACtB,SAAO,aAAW;AACd,UAAM,QAAQ,KAAK,UAAU,eAAe,gBAAgB,KAAK,OAAM;AACvE,WAAO,QAAQ,aAAa,QAAQ;EAC5C;AACA;;;ACVA,IAAM,SAAS,IAAI,cAAc,WAAW;AAKrC,eAAe,MAAM,iBAAiB,MAAM,SAAS,aAAa;AACrE,MAAI,OAAO,oBAAoB,YAAY;AACvC,UAAM,MAAM,oCAAoC;EACxD;AAGI,SAAO,IAAI,QAAQ,OAAO,SAAS,WAAW;AAC1C,QAAI,UAAU;AACd,QAAI,aAAa;AACjB,QAAI;AACJ,QAAI,SAAS,MAAM;IAE3B;AAEQ,QAAI;AACJ,mBACI,YAAY,KAAK,MAAM;AAEnB,mBAAa;AAEb,mBAAa,OAAO;AACpB,aAAM;IACtB,CAAa;AAGL,WAAO,CAAC,YAAY;AAChB;AACA,aAAO,MAAM,GAAG,gBAAgB,IAAI,aAAa,OAAO,oBAAoB,KAAK,UAAU,IAAI,CAAC,EAAE;AAClG,UAAI;AACA,gBAAQ,MAAM,gBAAgB,GAAG,IAAI,CAAC;AACtC;MAChB,SACmB,KAAK;AACR,oBAAY;AACZ,eAAO,MAAM,YAAY,gBAAgB,IAAI,IAAI,GAAG;AACpD,YAAI,oBAAoB,GAAG,GAAG;AAC1B,iBAAO,MAAM,GAAG,gBAAgB,IAAI,wBAAwB,GAAG;AAC/D,iBAAO,GAAG;AACV;QACpB;AACgB,cAAM,UAAU,QAAQ,SAAS,MAAM,GAAG;AAC1C,eAAO,MAAM,GAAG,gBAAgB,IAAI,gBAAgB,OAAO,KAAK;AAGhE,YAAI,YAAY,SAAS,YAAY;AACjC,iBAAO,GAAG;AACV;QACpB,OACqB;AACD,gBAAM,IAAI,QAAQ,cAAY;AAC1B,qBAAS;AACT,sBAAU,WAAW,QAAQ,OAAO;UAC5D,CAAqB;QACrB;MACA;IACA;AAEQ,WAAO,SAAS;EACxB,CAAK;AACL;;;AC3DY,IAAC,2BAA2B,CAAC,iBAAiB,MAAM,aAAa,cAAc,gBAAgB,MAAM,iBAAiB,MAAM,gBAAgB,UAAU,GAAG,WAAW;;;ACPzK,SAAS,cAAc,KAAK;AAC/B,QAAM,WAAW,IAAI,MAAM,OAAO,KAAK,CAAA;AACvC,SAAO,SAAS,IAAI,UAAQ,OAAO,aAAa,SAAS,MAAM,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE;AAChF;;;ACGY,IAAC,sBAAsB,CAAC,kBAAkB;AAClD,MAAI;AACJ,SAAO,UAAU,SAAS;AACtB,QAAI;AACA,aAAO;AACX,sBAAkB,IAAI,QAAQ,CAAC,SAAS,WAAW;AAC/C,oBAAc,GAAG,IAAI,EAChB,KAAK,YAAU;AAChB,gBAAQ,MAAM;MAC9B,CAAa,EACI,MAAM,WAAS;AAChB,eAAO,KAAK;MAC5B,CAAa,EACI,QAAQ,MAAM;AACf,0BAAkB;MAClC,CAAa;IACb,CAAS;AACD,WAAO;EACf;AACA;;;ACzBO,SAAS,eAAe,EAAE,WAAW,YAAY,YAAY,IAAI,GAAK;AACzE,QAAM,cAAc,KAAK,IAAG;AAC5B,SAAO,cAAc,aAAa,YAAY;AAClD;;;ACDA,IAAMC,UAAS,IAAI,cAAc,iBAAiB;AAClD,IAAM,kBAAkB;EACpB,SAAS;EACT,SAAS;EACT,2BAA2B;EAC3B,gBAAgB;EAChB,MAAM;EACN,YAAY;;;;;;EAMZ,QAAQ;AACZ;AASY,IAAC,kBAAkB,CAACC,UAAS,CAAA,MAAO;AAC5C,MAAI,CAAC,OAAO,UAAU,eAAe,KAAKA,SAAQ,oBAAoB,GAAG;AACrE,UAAM,IAAI,aAAa;MACnB,MAAM;MACN,SAAS;MACT,oBAAoB;IAChC,CAAS;EACT;AACI,QAAM,EAAE,oBAAoB,gCAAgC,6BAA6B,oBAAoB,iBAAiB,8BAA8B,yCAAyC,+BAA+B,uBAAuB,0CAA0C,qCAAqC,+BAA+B,8BAA8B,iCAAiC,uBAAuB,6BAA6B,iCAAiC,0BAA0B,iCAAiC,oEAAoE,mBAAmB,8BAA8B,KAAK,OAAO,aAAa,wBAAwB,eAAe,mBAAkB,IAAMA;AACrwB,QAAM,gBAAgB,CAAA;AAEtB,MAAI,6BAA6B;AAC7B,kBAAc,YAAY;MACtB,UAAU;QACN,OAAO;QACP,QAAQ;MACxB;IACA;EACA;AAEI,QAAM,EAAE,gBAAgB,KAAI,IAAK,iBAAiB,CAAA;AAClD,MAAI,gBAAgB,eAAe,MAAM,aAAa;AAClD,QAAI,gBAAgB,aAAa;AAC7B,YAAM,EAAE,OAAO,OAAM,IAAK,eAAe;AACzC,oBAAc,gBAAgB;QAC1B,gBAAgB;UACZ,UAAU;YACN;YACA;UACxB;QACA;MACA;IACA;AACQ,QAAI,MAAM,aAAa;AACnB,YAAM,EAAE,OAAO,OAAM,IAAK,KAAK;AAC/B,oBAAc,gBAAgB;QAC1B,GAAG,cAAc;QACjB,kBAAkB;UACd,UAAU;YACN;YACA;UACxB;QACA;MACA;IACA;EACA;AAEI,MAAI,MAAM,QAAQ,eAAe,GAAG;AAChC,kBAAc,eAAe;MACzB,OAAO,OAAO,YAAY,gBAAgB,IAAI,SAAO,CAAC,IAAI,MAAM,GAAG,CAAC,CAAC;IACjF;EACA;AAEI,MAAI,6BAA6B;AAC7B,UAAM,kBAAkB,gBAAgB,8BAA8B;AACtE,QAAI,CAAC,iBAAiB;AAClB,MAAAD,QAAO,MAAM,+BAA+B,8BAA8B,wBAAwB;IAC9G;AACQ,kBAAc,MAAM;MAChB,SAAS;QACL,UAAU;QACV,QAAQ;QACR,QAAQ;QACR,iBAAiB,mBAAmB;MACpD;IACA;AACQ,QAAI,oBAAoB;AACpB,oBAAc,IAAI,QAAQ,qBAAqB;IAC3D;EACA;AAEI,QAAM,YAAY,gCACZ;IACE,QAAQ,iCACJ,8BAA8B,YAAW;IAC7C,aAAa,uBAAuB,SAAS,MAAM,KAAK;IACxD,YAAY,uBAAuB,SAAS,KAAK,KAAK;EAClE,IACU;AACN,QAAM,uBAAuB,2CACvB;IACE,WAAW,yCAAyC;IACpD,kBAAkB,yCAAyC,0BAA0B,SAAS,oBAAoB,KAAK;IACvH,kBAAkB,yCAAyC,0BAA0B,SAAS,oBAAoB,KAAK;IACvH,gBAAgB,yCAAyC,0BAA0B,SAAS,kBAAkB,KAAK;IACnH,0BAA0B,yCAAyC,0BAA0B,SAAS,kBAAkB,KAAK;EACzI,IACU;AACN,QAAM,uBAAuB,MAAM,KAAK,oBAAI,IAAI;IAC5C,GAAI,uCAAuC,CAAA;IAC3C,GAAI,iCAAiC,CAAA;EAC7C,CAAK,CAAC;AACF,QAAM,iBAAiB,qBAAqB,OAAO,CAAC,YAAY,SAAS;IACrE,GAAG;;IAEH,CAAC,IAAI,YAAW,CAAE,GAAG,EAAE,UAAU,KAAI;EAC7C,IAAQ,CAAA,CAAE;AACN,QAAM,wBAAwB,iCAAiC,SAAS,OAAO,KAAK;AACpF,QAAM,wBAAwB,iCAAiC,SAAS,cAAc,KAAK;AAC3F,MAAI,gCAAgC,mBAAmB;AACnD,kBAAc,OAAO;MACjB,SAAS;QACL,gBAAgB;QAChB,kBAAkB,0BAA0B;QAC5C,0BAA0B;QAC1B;QACA,kBAAkB;QAClB,YAAY;QACZ,KAAK;QACL,gBAAgB;QAChB,WAAW;UACP,UAAU,EAAE,yBAAyB;UACrC,OAAO;UACP,OAAO;QAC3B;MACA;IACA;EACA;AACI,QAAM,iBAAiB,QAAQ,OAAO,KAAK,KAAK,EAAE,SAAS,IAAI;AAC/D,QAAM,0BAA0B,+BAC1B,6BAA6B,SAAS,IACtC;AACN,MAAI,cAAc,QAAQ,gBAAgB;AACtC,kBAAc,KAAK,QAAQ,YAAY;MACnC,GAAG,cAAc,KAAK,QAAQ;MAC9B,OAAO;QACH,GAAG,eAAe,KAAK;QACvB,GAAI,2BAA2B;UAC3B,WAAW,qBAAqB,4BAA4B;QAChF;MACA;IACA;EACA;AAEI,MAAI,0BAA0B;AAC1B,kBAAc,UAAU;MACpB,IAAI;QACA,QAAQ;QACR,QAAQ;QACR,4CAA4C;MAC5D;IACA;EACA;AAEI,MAAI,KAAK;AACL,UAAM,EAAE,wBAAuB,IAAK;AACpC,kBAAc,MAAM;MAChB,iBAAiB;QACb,MAAM,wBAAwB;QAC9B,qBAAqB,wBAAwB;QAC7C,eAAe,wBAAwB;QACvC,QAAQ,wBAAwB;MAChD;IACA;EACA;AAEI,MAAI,wBAAwB;AACxB,kBAAc,MAAM;MAChB,GAAG,cAAc;MACjB,MAAM,uBAAuB,OAAO,CAAC,KAAKE,SAAQ;AAC9C,cAAM,EAAE,MAAAC,OAAM,UAAU,QAAQ,QAAO,IAAKD;AAC5C,eAAO;UACH,GAAG;UACH,CAACC,KAAI,GAAG;YACJ;YACA,GAAI,UAAU,EAAE,QAAO,IAAK;YAC5B,GAAI,SAAS,EAAE,OAAM,IAAK;UAClD;QACA;MACA,GAAe,CAAA,CAAE;IACjB;EACA;AAEI,MAAI,aAAa;AAEb,UAAM,EAAE,SAAS,QAAO,IAAK,aAAa,SAAS,iBAAiB,YAAY,CAAA;AAChF,kBAAc,cAAc,UACtB;MACE,GAAG;MACH,SAAS;QACL,GAAG,YAAY;QACf,iBAAiB;UACb,GAAG,YAAY,QAAQ;UACvB,UAAU,EAAE,QAAO;QAC3C;MACA;IACA,IACc;EACd;AACI,SAAO;AACX;AACA,IAAM,iBAAiB,CAAC,gBAAgB,aAAa,MAAM,GAAG,KAAK,CAAA;AACnE,IAAM,iBAAiB,CAAC,EAAE,QAAQ,OAAO,gBAAgB,iBAAiB,aAAY,OAAS;EAC3F;EACA,QAAQ;EACR,gBAAgB,eAAe,cAAc;EAC7C,iBAAiB,eAAe,eAAe;EAC/C;AACJ;AACA,IAAM,uBAAuB,CAAC,iCAAiC;AAC3D,SAAO,6BAA6B,IAAI,CAAC,aAAa;AAClD,UAAM,kBAAkB,SAAS,YAAW;AAC5C,WAAO,gBAAgB,OAAO,CAAC,EAAE,YAAW,IAAK,gBAAgB,MAAM,CAAC;EAChF,CAAK;AACL;;;ACrOO,SAAS,iBAAiBC,SAAQ;AAErC,QAAM,EAAE,SAAAC,SAAO,IAAKD;AACpB,MAAI,CAACC,UAAS;AACV,WAAO;EACf;AACI,SAAOA,SAAQ,WAAW,GAAG;AACjC;AACA,SAAS,aAAa,iCAAiC;AACnD,MAAI,CAAC,iCAAiC;AAClC,WAAO;EACf;AACI,QAAM,EAAE,aAAa,YAAY,QAAO,IAAK;AAC7C,SAAO;IACH,IAAI;MACA,QAAQ;MACR,QAAQ;MACR,SAAS,WAAW,oBAAoB,OAAO;IAC3D;EACA;AACA;AACA,SAAS,UAAU,8BAA8B;AAC7C,MAAI,CAAC,8BAA8B;AAC/B,WAAO;EACf;AACI,QAAM,EAAE,cAAc,qBAAqB,kBAAkB,iBAAiB,mBAAmB,aAAa,oCAAoC,OAAO,qBAAqB,8BAA8B,OAAM,IAAM;AACxN,QAAM,aAAa;IACf,SAAS;MACL,YAAY;MACZ,kBAAkB;MAClB;IACZ;EACA;AACI,MAAI,kBAAkB;AAClB,eAAW,UAAU;MACjB,GAAG,WAAW;MACd,gBAAgB;IAC5B;EACA;AACI,MAAI,iBAAiB;AACjB,eAAW,QAAQ,iBAAiB;MAChC,kBAAkB,gBAAgB;MAClC,gBAAgB,gBAAgB;MAChC,kBAAkB,gBAAgB;MAClC,0BAA0B,gBAAgB;MAC1C,WAAW,gBAAgB,cAAc;IACrD;EACA;AACI,MAAI,mBAAmB;AACnB,eAAW,QAAQ,MAAM;MACrB,QAAQ,aAAa,iBAAiB;MACtC,YAAY,aAAa,SAAS,KAAK;MACvC,aAAa,aAAa,SAAS,MAAM;IACrD;EACA;AACI,MAAI,oCAAoC;AACpC,eAAW,QAAQ,mBAAmB;EAC9C;AACI,MAAI,OAAO;AACP,eAAW,QAAQ,YAAY;MAC3B,OAAO;QACH,QAAQ,MAAM;QACd,gBAAgB,MAAM;QACtB,iBAAiB,MAAM;QACvB,cAAc,MAAM,kBAAkB,UAAU,UAAU;QAC1D,QAAQ,MAAM;QACd,WAAW,kBAAkB,MAAM,kBAAkB;MACrE;IACA;EACA;AACI,MAAI,qBAAqB;AACrB,eAAW,QAAQ,YAAY;MAC3B,GAAG,WAAW,QAAQ;MACtB,OAAO,oBAAoB,SAAS,OAAO;MAC3C,OAAO,oBAAoB,SAAS,cAAc;;MAElD,UAAU,oBAAoB,SAAS,UAAU;IAC7D;EACA;AACI,MAAI,8BAA8B;AAC9B,eAAW,QAAQ,iBAAiB,6BAA6B,OAAO,CAAC,KAAK,UAAU,EAAE,GAAG,KAAK,CAAC,IAAI,GAAG,EAAE,UAAU,KAAI,EAAE,IAAK,CAAA,CAAE;EAC3I;AACI,SAAO;AACX;AACO,SAAS,eAAe,mCAAmC;AAC9D,MAAI,CAAC,mCAAmC,iBAAiB;AACrD,WAAO;EACf;AACI,QAAM,EAAE,gBAAe,IAAK;AAC5B,SAAO;IACH,UAAU;MACN,OAAO,gBAAgB;MACvB,QAAQ,gBAAgB;IACpC;EACA;AACA;AACA,SAAS,SAAS,mCAAmC;AACjD,MAAI,CAAC,mCAAmC;AACpC,WAAO;EACf;AACI,QAAM,EAAE,YAAY,sBAAsB,MAAM,eAAc,IAAK;AACnE,SAAO;IACH,iBAAiB;MACb,QAAQ;MACR,eAAe;MACf,qBAAqB;MACrB;IACZ;EACA;AACA;AACA,SAAS,UAAU,8BAA8B;AAC7C,MAAI,CAAC,8BAA8B;AAC/B,WAAO;EACf;AACI,QAAM,EAAE,YAAY,4BAA4B,KAAK,SAAS,oBAAmB,IAAM;AACvF,QAAM,UAAU;IACZ,UAAU;IACV,iBAAiB,mBAAmB,0BAA0B;IAC9D,QAAQ;IACR,QAAQ;IACR,oBAAoB;EAC5B;AACI,SAAO;IACH;EACR;AACA;AACA,SAAS,YAAY,gCAAgC;AACjD,MAAI,CAAC,gCAAgC,QAAQ;AACzC,WAAO;EACf;AACI,QAAM,EAAE,KAAK,YAAY,SAAS,2BAA0B,IAAK,+BAA+B;AAChG,QAAM,SAAS;IACX,UAAU;IACV,iBAAiB,mBAAmB,0BAA0B;IAC9D,QAAQ;IACR,QAAQ;EAChB;AACI,SAAO;IACH;EACR;AACA;AACA,SAAS,mBAAmB,uCAAuC;AAC/D,MAAI,CAAC,uCAAuC;AACxC,WAAO;EACf;AACI,QAAM,EAAE,YAAY,UAAU,uBAAsB,IAAK;AACzD,QAAM,oBAAoB,SAAS,SAAS,kBAAkB;AAC9D,QAAM,sBAAsB,SAAS,SAAS,MAAM,KAAK,SAAS,SAAS,KAAK;AAChF,MAAI,EAAE,qBAAqB,sBAAsB;AAC7C,WAAO;EACf;AAEI,QAAM,sBAAsB,CAAA;AAC5B,MAAI,mBAAmB;AACnB,wBAAoB,iBAAiB;MACjC,UAAU;QACN,OAAO;QACP,QAAQ;MACxB;IACA;EACA;AACI,MAAI,qBAAqB;AACrB,wBAAoB,mBAAmB;MACnC,UAAU;QACN,OAAO;QACP,QAAQ;MACxB;IACA;EACA;AACI,SAAO;AACX;AACO,SAAS,oBAAoB,gBAAgB;AAChD,QAAM,kBAAkB,CAAA;AACxB,MAAI,eAAe,SAAS;AACxB,oBAAgB,UAAU,aAAa,eAAe,OAAO;EACrE;AACI,MAAI,eAAe,MAAM;AACrB,oBAAgB,OAAO,UAAU,eAAe,IAAI;EAC5D;AACI,MAAI,eAAe,WAAW;AAC1B,oBAAgB,YAAY,eAAe,eAAe,SAAS;EAC3E;AACI,MAAI,eAAe,KAAK;AACpB,oBAAgB,MAAM,SAAS,eAAe,GAAG;EACzD;AACI,MAAI,eAAe,MAAM;AACrB,oBAAgB,MAAM,UAAU,eAAe,IAAI;EAC3D;AACI,MAAI,eAAe,QAAQ;AACvB,UAAM,eAAe,YAAY,eAAe,MAAM;AACtD,QAAI,gBAAgB,YAAY,cAAc;AAC1C,sBAAgB,MAAM,EAAE,GAAG,gBAAgB,KAAK,GAAG,aAAY;IAC3E;EACA;AACI,MAAI,eAAe,eAAe;AAC9B,oBAAgB,gBAAgB,mBAAmB,eAAe,aAAa;EACvF;AACI,SAAO;AACX;AACA,IAAM,gBAAgB;EAClB,2BAA2B;EAC3B,SAAS;EACT,SAAS;EACT,YAAY;EACZ,gBAAgB;AACpB;AACA,SAAS,mBAAmB,UAAU;AAClC,SAAO,cAAc,QAAQ;AACjC;AACA,IAAM,gBAAgB;EAClB,QAAQ;EACR,mBAAmB;EACnB,UAAU;EACV,oBAAoB;AACxB;AACA,SAAS,kBAAkB,YAAY,CAAA,GAAI;AACvC,SAAO,UAAU,OAAO,CAAC,gBAAgB,aAAa;AAClD,QAAI,cAAc,QAAQ,MAAM,QAAW;AACvC,qBAAe,KAAK,cAAc,QAAQ,CAAC;IACvD;AACQ,WAAO;EACf,GAAO,CAAA,CAAE;AACT;AACA,SAAS,aAAa,kBAAkB;AACpC,MAAI,qBAAqB;AACrB,WAAO;AACX,MAAI,qBAAqB;AACrB,WAAO;AACX,SAAO;AACX;AACA,SAAS,oBAAoB,SAAS;AAClC,QAAM,gBAAgB,CAAA;AACtB,UAAQ,QAAQ,CAAC,EAAE,MAAAC,OAAM,aAAa,YAAY,YAAY,QAAQ,MAAK,MAAO;AAC9E,QAAIA,SAAQ,eAAe;AACvB,YAAM,IAAI,MAAM,kCAAkCA,KAAI,wBAAwB;IAC1F;AACQ,UAAM,iBAAiB,QACjB,OAAO,QAAQ,KAAK,EAAE,OAAO,CAAC,KAAK,CAAC,KAAK,KAAK,MAAM;AAClD,UAAI,UAAU,QAAW;AACrB,YAAI,GAAG,IAAI;MAC/B;AACgB,aAAO;IACvB,GAAe,CAAA,CAAE,IACH;AACN,kBAAcA,KAAI,IAAI;MAClB;MACA;MACA,OAAO;IACnB;EACA,CAAK;AACD,SAAO;AACX;;;AC3PY,IAAC,qBAAqB,OAAO,gBAAgB;;;ACCzD,IAAI;AACJ,IAAM,QAAQ,IAAI,WAAW,EAAE;AAChB,SAAR,MAAuB;AAE5B,MAAI,CAAC,iBAAiB;AAEpB,sBAAkB,OAAO,WAAW,eAAe,OAAO,mBAAmB,OAAO,gBAAgB,KAAK,MAAM;AAE/G,QAAI,CAAC,iBAAiB;AACpB,YAAM,IAAI,MAAM,0GAA0G;AAAA,IAC5H;AAAA,EACF;AAEA,SAAO,gBAAgB,KAAK;AAC9B;;;ACXA,IAAM,YAAY,CAAC;AAEnB,SAAS,IAAI,GAAG,IAAI,KAAK,EAAE,GAAG;AAC5B,YAAU,MAAM,IAAI,KAAO,SAAS,EAAE,EAAE,MAAM,CAAC,CAAC;AAClD;AAEO,SAAS,gBAAgB,KAAK,SAAS,GAAG;AAG/C,SAAO,UAAU,IAAI,SAAS,CAAC,CAAC,IAAI,UAAU,IAAI,SAAS,CAAC,CAAC,IAAI,UAAU,IAAI,SAAS,CAAC,CAAC,IAAI,UAAU,IAAI,SAAS,CAAC,CAAC,IAAI,MAAM,UAAU,IAAI,SAAS,CAAC,CAAC,IAAI,UAAU,IAAI,SAAS,CAAC,CAAC,IAAI,MAAM,UAAU,IAAI,SAAS,CAAC,CAAC,IAAI,UAAU,IAAI,SAAS,CAAC,CAAC,IAAI,MAAM,UAAU,IAAI,SAAS,CAAC,CAAC,IAAI,UAAU,IAAI,SAAS,CAAC,CAAC,IAAI,MAAM,UAAU,IAAI,SAAS,EAAE,CAAC,IAAI,UAAU,IAAI,SAAS,EAAE,CAAC,IAAI,UAAU,IAAI,SAAS,EAAE,CAAC,IAAI,UAAU,IAAI,SAAS,EAAE,CAAC,IAAI,UAAU,IAAI,SAAS,EAAE,CAAC,IAAI,UAAU,IAAI,SAAS,EAAE,CAAC;AACnf;;;AChBA,IAAM,aAAa,OAAO,WAAW,eAAe,OAAO,cAAc,OAAO,WAAW,KAAK,MAAM;AACtG,IAAO,iBAAQ;AAAA,EACb;AACF;;;ACCA,SAAS,GAAG,SAAS,KAAK,QAAQ;AAChC,MAAI,eAAO,cAAc,CAAC,OAAO,CAAC,SAAS;AACzC,WAAO,eAAO,WAAW;AAAA,EAC3B;AAEA,YAAU,WAAW,CAAC;AACtB,QAAM,OAAO,QAAQ,WAAW,QAAQ,OAAO,KAAK;AAEpD,OAAK,CAAC,IAAI,KAAK,CAAC,IAAI,KAAO;AAC3B,OAAK,CAAC,IAAI,KAAK,CAAC,IAAI,KAAO;AAE3B,MAAI,KAAK;AACP,aAAS,UAAU;AAEnB,aAAS,IAAI,GAAG,IAAI,IAAI,EAAE,GAAG;AAC3B,UAAI,SAAS,CAAC,IAAI,KAAK,CAAC;AAAA,IAC1B;AAEA,WAAO;AAAA,EACT;AAEA,SAAO,gBAAgB,IAAI;AAC7B;AAEA,IAAO,aAAQ;;;ACzBV,IAAC,cAAc;;;ACDf,IAAC,aAAa;AACd,IAAC,yBAAyB;;;ACOnB,IAAC,qBAAqB,CAAC,kBAAkB;AACjD,MAAI,OAAO,KAAK,aAAa,EAAE,KAAK,SAAO,IAAI,WAAW,MAAM,CAAC,GAAG;AAChE,WAAO,gBAAgB,aAAa;EAC5C,WACa,iBAAiB,aAAa,GAAG;AACtC,WAAO,oBAAoB,aAAa;EAChD,OACS;AACD,WAAO;EACf;AACA;;;ACjBY,IAAC,gBAAgB;EACzB,QAAQ,OAAO,SAAS;AACpB,QAAI,WAAW;AAGf,QAAI,SAAS,SAAS;AAClB,iBAAW,SAAS,QAAQ,MAAM,GAAG,EAAE,QAAQ,MAAM,GAAG;IACpE;AACQ,WAAO,QAAO,EAAG,QAAQ;EACjC;AACA;;;ACVU,IAAC;CACV,SAAUC,6BAA4B;AACnC,EAAAA,4BAA2B,0BAA0B,IAAI;AACzD,EAAAA,4BAA2B,sCAAsC,IAAI;AACrE,EAAAA,4BAA2B,uBAAuB,IAAI;AACtD,EAAAA,4BAA2B,gCAAgC,IAAI;AAC/D,EAAAA,4BAA2B,4BAA4B,IAAI;AAC/D,GAAG,+BAA+B,6BAA6B,CAAA,EAAG;AAClE,IAAM,4BAA4B;EAC9B,CAAC,2BAA2B,wBAAwB,GAAG;IACnD,SAAS;IACT,oBAAoB;EAC5B;EACI,CAAC,2BAA2B,oCAAoC,GAAG;IAC/D,SAAS;IACT,oBAAoB;EAC5B;EACI,CAAC,2BAA2B,qBAAqB,GAAG;IAChD,SAAS;IACT,oBAAoB;EAC5B;EACI,CAAC,2BAA2B,8BAA8B,GAAG;IACzD,SAAS;IACT,oBAAoB;EAC5B;EACI,CAAC,2BAA2B,0BAA0B,GAAG;IACrD,SAAS;IACT,oBAAoB;EAC5B;AACA;AACY,IAAC,SAAS,wBAAwB,yBAAyB;;;AC7BhE,SAAS,0BAA0B,eAAe;AACrD,MAAI,iBAAiB;AACrB,MAAI,CAAC,eAAe;AAChB,qBAAiB;EACzB,OACS;AACD,qBACI,CAAC,CAAC,cAAc,cAAc,CAAC,CAAC,cAAc;EAC1D;AACI,SAAO,gBAAgB,2BAA2B,qBAAqB;AAC3E;AACO,SAAS,kBAAkB,eAAe;AAC7C,QAAM,mBAAmB,CAAC,CAAC,eAAe,WAAW,OAAO,UACxD,CAAC,CAAC,eAAe,WAAW,OAAO,mBACnC,CAAC,CAAC,eAAe,WAAW,OAAO,kBACnC,CAAC,CAAC,eAAe,WAAW,OAAO;AACvC,SAAO,kBAAkB,2BAA2B,0BAA0B;AAClF;AACO,SAAS,2BAA2B,eAAe;AACtD,QAAM,cAAc,CAAC,CAAC,eAAe;AACrC,SAAO,aAAa,2BAA2B,8BAA8B;AACjF;AAOO,SAAS,UAAU,OAAO;AAC7B,QAAM,aAAa,MAAM,MAAM,GAAG;AAClC,MAAI,WAAW,WAAW,GAAG;AACzB,UAAM,IAAI,MAAM,eAAe;EACvC;AACI,MAAI;AACA,UAAM,oBAAoB,WAAW,CAAC;AACtC,UAAM,SAAS,kBAAkB,QAAQ,MAAM,GAAG,EAAE,QAAQ,MAAM,GAAG;AACrE,UAAM,UAAU,mBAAmB,cAC9B,QAAQ,MAAM,EACd,MAAM,EAAE,EACR,IAAI,UAAQ,IAAI,KAAK,KAAK,WAAW,CAAC,EAAE,SAAS,EAAE,CAAC,GAAG,MAAM,EAAE,CAAC,EAAE,EAClE,KAAK,EAAE,CAAC;AACb,UAAM,UAAU,KAAK,MAAM,OAAO;AAClC,WAAO;MACH,UAAU,MAAM;MAChB;IACZ;EACA,SACW,KAAK;AACR,UAAM,IAAI,MAAM,uBAAuB;EAC/C;AACA;;;AC3CY,IAAC,mBAAmB,CAAC,YAAY,OAAO,KAAK,OAAO,EAC3D,IAAI,SAAO,IAAI,YAAW,CAAE,EAC5B,KAAI,EACJ,KAAK,GAAG;;;ACVD,IAAC,uBAAuB;AAMxB,IAAC,oBAAoB;AAErB,IAAC,cAAc;AACf,IAAC,cAAc;AACf,IAAC,kBAAkB,qBAAqB,YAAW;AACnD,IAAC,eAAe,kBAAkB,YAAW;AAE7C,IAAC,sBAAsB;AACvB,IAAC,8BAA8B;AAC/B,IAAC,uBAAuB;AAExB,IAAC,aAAa;AACd,IAAC,mBAAmB;;;ACRpB,IAAC,qBAAqB,CAAC,MAAM,QAAQ,YAAY,GAAG,IAAI,IAAI,MAAM,IAAI,OAAO,IAAI,mBAAmB;;;ACFpG,IAAC,oBAAoB,CAAC,SAAS;AACvC,QAAM,WAAW,KAAK,YAAW,EAAG,QAAQ,iBAAiB,EAAE;AAC/D,SAAO;IACH;IACA,WAAW,SAAS,MAAM,GAAG,CAAC;EACtC;AACA;;;ACNY,IAAC,mBAAmB,CAAC,EAAE,aAAa,cAAc,oBAAI,KAAI,GAAI,eAAe,gBAAgB,gBAAgB,KAAI,MAAQ;AAEjI,QAAM,EAAE,aAAa,iBAAiB,aAAY,IAAK;AAEvD,QAAM,EAAE,UAAU,UAAS,IAAK,kBAAkB,WAAW;AAE7D,QAAM,kBAAkB,mBAAmB,WAAW,eAAe,cAAc;AACnF,SAAO;IACH;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACR;AACA;;;AC3BO,IAAM,aAAqB;AAK3B,IAAM,gBAAwB;AAK9B,IAAM,MAAM,IAAI,YAAY;EACjC;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;CACD;AAKM,IAAM,OAAO;EAClB;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;AAMK,IAAM,sBAAsB,KAAA,IAAA,GAAK,EAAE,IAAG;;;ACtF7C,IAAA;;EAAA,WAAA;AAAA,aAAAC,aAAA;AACU,WAAA,QAAoB,WAAW,KAAK,IAAI;AACxC,WAAA,OAAmB,IAAI,WAAW,EAAE;AACpC,WAAA,SAAqB,IAAI,WAAW,EAAE;AACtC,WAAA,eAAuB;AACvB,WAAA,cAAsB;AAK9B,WAAA,WAAoB;IA8ItB;AA5IE,IAAAA,WAAA,UAAA,SAAA,SAAO,MAAgB;AACrB,UAAI,KAAK,UAAU;AACjB,cAAM,IAAI,MAAM,+CAA+C;;AAGjE,UAAI,WAAW;AACT,UAAA,aAAe,KAAI;AACzB,WAAK,eAAe;AAEpB,UAAI,KAAK,cAAc,IAAI,qBAAqB;AAC9C,cAAM,IAAI,MAAM,qCAAqC;;AAGvD,aAAO,aAAa,GAAG;AACrB,aAAK,OAAO,KAAK,cAAc,IAAI,KAAK,UAAU;AAClD;AAEA,YAAI,KAAK,iBAAiB,YAAY;AACpC,eAAK,WAAU;AACf,eAAK,eAAe;;;IAG1B;AAEA,IAAAA,WAAA,UAAA,SAAA,WAAA;AACE,UAAI,CAAC,KAAK,UAAU;AAClB,YAAM,aAAa,KAAK,cAAc;AACtC,YAAM,aAAa,IAAI,SACrB,KAAK,OAAO,QACZ,KAAK,OAAO,YACZ,KAAK,OAAO,UAAU;AAGxB,YAAM,oBAAoB,KAAK;AAC/B,mBAAW,SAAS,KAAK,gBAAgB,GAAI;AAG7C,YAAI,oBAAoB,cAAc,aAAa,GAAG;AACpD,mBAAS,IAAI,KAAK,cAAc,IAAI,YAAY,KAAK;AACnD,uBAAW,SAAS,GAAG,CAAC;;AAE1B,eAAK,WAAU;AACf,eAAK,eAAe;;AAGtB,iBAAS,IAAI,KAAK,cAAc,IAAI,aAAa,GAAG,KAAK;AACvD,qBAAW,SAAS,GAAG,CAAC;;AAE1B,mBAAW,UACT,aAAa,GACb,KAAK,MAAM,aAAa,UAAW,GACnC,IAAI;AAEN,mBAAW,UAAU,aAAa,GAAG,UAAU;AAE/C,aAAK,WAAU;AAEf,aAAK,WAAW;;AAKlB,UAAM,MAAM,IAAI,WAAW,aAAa;AACxC,eAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,YAAI,IAAI,CAAC,IAAK,KAAK,MAAM,CAAC,MAAM,KAAM;AACtC,YAAI,IAAI,IAAI,CAAC,IAAK,KAAK,MAAM,CAAC,MAAM,KAAM;AAC1C,YAAI,IAAI,IAAI,CAAC,IAAK,KAAK,MAAM,CAAC,MAAM,IAAK;AACzC,YAAI,IAAI,IAAI,CAAC,IAAK,KAAK,MAAM,CAAC,MAAM,IAAK;;AAG3C,aAAO;IACT;AAEQ,IAAAA,WAAA,UAAA,aAAR,WAAA;AACQ,UAAA,KAAoB,MAAlB,SAAM,GAAA,QAAE,QAAK,GAAA;AAErB,UAAI,SAAS,MAAM,CAAC,GAClB,SAAS,MAAM,CAAC,GAChB,SAAS,MAAM,CAAC,GAChB,SAAS,MAAM,CAAC,GAChB,SAAS,MAAM,CAAC,GAChB,SAAS,MAAM,CAAC,GAChB,SAAS,MAAM,CAAC,GAChB,SAAS,MAAM,CAAC;AAElB,eAAS,IAAI,GAAG,IAAI,YAAY,KAAK;AACnC,YAAI,IAAI,IAAI;AACV,eAAK,KAAK,CAAC,KACP,OAAO,IAAI,CAAC,IAAI,QAAS,MACzB,OAAO,IAAI,IAAI,CAAC,IAAI,QAAS,MAC7B,OAAO,IAAI,IAAI,CAAC,IAAI,QAAS,IAC9B,OAAO,IAAI,IAAI,CAAC,IAAI;eAClB;AACL,cAAI,IAAI,KAAK,KAAK,IAAI,CAAC;AACvB,cAAM,QACF,MAAM,KAAO,KAAK,OAAS,MAAM,KAAO,KAAK,MAAQ,MAAM;AAE/D,cAAI,KAAK,KAAK,IAAI,EAAE;AACpB,cAAM,QACF,MAAM,IAAM,KAAK,OAAS,MAAM,KAAO,KAAK,MAAQ,MAAM;AAE9D,eAAK,KAAK,CAAC,KACP,OAAK,KAAK,KAAK,IAAI,CAAC,IAAK,MAAO,OAAK,KAAK,KAAK,IAAI,EAAE,IAAK;;AAGhE,YAAM,QACE,WAAW,IAAM,UAAU,OAC7B,WAAW,KAAO,UAAU,OAC5B,WAAW,KAAO,UAAU,OAC5B,SAAS,SAAW,CAAC,SAAS,UAChC,MACE,UAAW,IAAI,CAAC,IAAI,KAAK,KAAK,CAAC,IAAK,KAAM,KAC9C;AAEF,YAAM,OACA,WAAW,IAAM,UAAU,OAC3B,WAAW,KAAO,UAAU,OAC5B,WAAW,KAAO,UAAU,QAC5B,SAAS,SAAW,SAAS,SAAW,SAAS,UACrD;AAEF,iBAAS;AACT,iBAAS;AACT,iBAAS;AACT,iBAAU,SAAS,KAAM;AACzB,iBAAS;AACT,iBAAS;AACT,iBAAS;AACT,iBAAU,KAAK,KAAM;;AAGvB,YAAM,CAAC,KAAK;AACZ,YAAM,CAAC,KAAK;AACZ,YAAM,CAAC,KAAK;AACZ,YAAM,CAAC,KAAK;AACZ,YAAM,CAAC,KAAK;AACZ,YAAM,CAAC,KAAK;AACZ,YAAM,CAAC,KAAK;AACZ,YAAM,CAAC,KAAK;IACd;AACF,WAAAA;EAAA,EAxJA;;;;ACXO,IAAM,WAAW,CAAC,UAAU,IAAI,YAAY,EAAE,OAAO,KAAK;;;ACOjE,IAAMC,YACJ,OAAO,WAAW,eAAe,OAAO,OACpC,SAAC,OAAa;AAAK,SAAA,OAAO,KAAK,OAAO,MAAM;AAAzB,IACnB;AAEA,SAAU,gBAAgB,MAAgB;AAE9C,MAAI,gBAAgB;AAAY,WAAO;AAEvC,MAAI,OAAO,SAAS,UAAU;AAC5B,WAAOA,UAAS,IAAI;;AAGtB,MAAI,YAAY,OAAO,IAAI,GAAG;AAC5B,WAAO,IAAI,WACT,KAAK,QACL,KAAK,YACL,KAAK,aAAa,WAAW,iBAAiB;;AAIlD,SAAO,IAAI,WAAW,IAAI;AAC5B;;;ACxBM,SAAU,YAAY,MAAgB;AAC1C,MAAI,OAAO,SAAS,UAAU;AAC5B,WAAO,KAAK,WAAW;;AAGzB,SAAO,KAAK,eAAe;AAC7B;;;ACNA,IAAA;;EAAA,WAAA;AAME,aAAAC,QAAY,QAAmB;AAC7B,WAAK,SAAS;AACd,WAAK,OAAO,IAAI,UAAS;AACzB,WAAK,MAAK;IACZ;AAEA,IAAAA,QAAA,UAAA,SAAA,SAAO,QAAkB;AACvB,UAAI,YAAY,MAAM,KAAK,KAAK,OAAO;AACrC;;AAGF,UAAI;AACF,aAAK,KAAK,OAAO,gBAAgB,MAAM,CAAC;eACjC,GAAG;AACV,aAAK,QAAQ;;IAEjB;AAKA,IAAAA,QAAA,UAAA,aAAA,WAAA;AACE,UAAI,KAAK,OAAO;AACd,cAAM,KAAK;;AAGb,UAAI,KAAK,OAAO;AACd,YAAI,CAAC,KAAK,MAAM,UAAU;AACxB,eAAK,MAAM,OAAO,KAAK,KAAK,OAAM,CAAE;;AAGtC,eAAO,KAAK,MAAM,OAAM;;AAG1B,aAAO,KAAK,KAAK,OAAM;IACzB;AAOM,IAAAA,QAAA,UAAA,SAAN,WAAA;;;AACE,iBAAA,CAAA,GAAO,KAAK,WAAU,CAAE;;;;AAG1B,IAAAA,QAAA,UAAA,QAAA,WAAA;AACE,WAAK,OAAO,IAAI,UAAS;AACzB,UAAI,KAAK,QAAQ;AACf,aAAK,QAAQ,IAAI,UAAS;AAC1B,YAAM,QAAQ,iBAAiB,KAAK,MAAM;AAC1C,YAAM,QAAQ,IAAI,WAAW,UAAU;AACvC,cAAM,IAAI,KAAK;AAEf,iBAAS,IAAI,GAAG,IAAI,YAAY,KAAK;AACnC,gBAAM,CAAC,KAAK;AACZ,gBAAM,CAAC,KAAK;;AAGd,aAAK,KAAK,OAAO,KAAK;AACtB,aAAK,MAAM,OAAO,KAAK;AAGvB,iBAAS,IAAI,GAAG,IAAI,MAAM,YAAY,KAAK;AACzC,gBAAM,CAAC,IAAI;;;IAGjB;AACF,WAAAA;EAAA,EA1EA;;AA4EA,SAAS,iBAAiB,QAAkB;AAC1C,MAAI,QAAQ,gBAAgB,MAAM;AAElC,MAAI,MAAM,aAAa,YAAY;AACjC,QAAM,aAAa,IAAI,UAAS;AAChC,eAAW,OAAO,KAAK;AACvB,YAAQ,WAAW,OAAM;;AAG3B,MAAM,SAAS,IAAI,WAAW,UAAU;AACxC,SAAO,IAAI,KAAK;AAChB,SAAO;AACT;;;AC7FA,IAAM,eAAe,CAAC;AACtB,IAAM,eAAe,CAAC;AACtB,SAAS,IAAI,GAAG,IAAI,KAAK,KAAK;AAC1B,MAAI,cAAc,EAAE,SAAS,EAAE,EAAE,YAAY;AAC7C,MAAI,YAAY,WAAW,GAAG;AAC1B,kBAAc,IAAI,WAAW;AAAA,EACjC;AACA,eAAa,CAAC,IAAI;AAClB,eAAa,WAAW,IAAI;AAChC;AAiBO,SAAS,MAAM,OAAO;AACzB,MAAI,MAAM;AACV,WAAS,IAAI,GAAG,IAAI,MAAM,YAAY,KAAK;AACvC,WAAO,aAAa,MAAM,CAAC,CAAC;AAAA,EAChC;AACA,SAAO;AACX;;;ACpBY,IAAC,gBAAgB,CAAC,KAAK,SAAS;AACxC,QAAM,SAAS,IAAI,OAAO,OAAO,MAAS;AAC1C,SAAO,OAAO,IAAI;AAElB,QAAM,aAAa,OAAO,WAAU;AACpC,SAAO;AACX;AAUY,IAAC,qBAAqB,CAAC,KAAK,SAAS;AAC7C,QAAM,aAAa,cAAc,KAAK,IAAI;AAC1C,SAAO,MAAM,UAAU;AAC3B;;;AClBY,IAAC,sBAAsB,CAAC,YAAY,OAAO,QAAQ,OAAO,EACjE,IAAI,CAAC,CAAC,KAAK,KAAK,OAAO;EACxB,KAAK,IAAI,YAAW;EACpB,OAAO,OAAO,KAAI,EAAG,QAAQ,QAAQ,GAAG,KAAK;AACjD,EAAE,EACG,KAAK,CAAC,GAAG,MAAO,EAAE,MAAM,EAAE,MAAM,KAAK,CAAE,EACvC,IAAI,WAAS,GAAG,MAAM,GAAG,IAAI,MAAM,KAAK;CAAI,EAC5C,KAAK,EAAE;;;ACPA,IAAC,0BAA0B,CAAC,iBAAiB,MAAM,KAAK,YAAY,EAC3E,KAAK,CAAC,CAAC,MAAM,IAAI,GAAG,CAAC,MAAM,IAAI,MAAM;AACtC,MAAI,SAAS,MAAM;AACf,WAAO,OAAO,OAAO,KAAK;EAClC;AACI,SAAO,OAAO,OAAO,KAAK;AAC9B,CAAC,EACI,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM,GAAG,UAAU,GAAG,CAAC,IAAI,UAAU,GAAG,CAAC,EAAE,EACzD,KAAK,GAAG;AACb,IAAM,YAAY,CAAC,QAAQ,mBAAmB,GAAG,EAAE,QAAQ,YAAY,SAAS;AAChF,IAAM,YAAY,CAAC,MAAM,IAAI,EAAE,WAAW,CAAC,EAAE,SAAS,EAAE,EAAE,YAAW,CAAE;;;ACV3D,IAAC,kBAAkB,CAAC,UAAU,gBAAgB,SAAS,WAC7D,gBACI,mBAAmB,QAAQ,EAAE,QAAQ,QAAQ,GAAG,IAChD,WACJ;;;ACJM,IAAC,mBAAmB,CAAC,SAAS;AAEtC,MAAI,QAAQ,MAAM;AACd,WAAO;EACf;AACI,MAAI,aAAa,IAAI,GAAG;AACpB,UAAM,aAAa,mBAAmB,MAAM,IAAI;AAChD,WAAO;EACf;AAEI,SAAO;AACX;AACA,IAAM,eAAe,CAAC,SAAS,OAAO,SAAS,YAAY,YAAY,OAAO,IAAI,KAAK,cAAc,IAAI;AACzG,IAAM,gBAAgB,CAAC,QAAS,OAAO,gBAAgB,cAAc,eAAe,eAChF,OAAO,UAAU,SAAS,KAAK,GAAG,MAAM;;;ACJhC,IAAC,sBAAsB,CAAC,EAAE,MAAM,SAAS,QAAQ,IAAG,GAAI,gBAAgB,SAAS;EACzF;EACA,gBAAgB,IAAI,UAAU,aAAa;EAC3C,wBAAwB,IAAI,YAAY;EACxC,oBAAoB,OAAO;EAC3B,iBAAiB,OAAO;EACxB,iBAAiB,IAAI;AACzB,EAAE,KAAK,IAAI;;;ACdC,IAAC,gBAAgB,CAAC,iBAAiB,MAAM,QAAQ,YAAY;AACrE,QAAM,MAAM,GAAG,oBAAoB,GAAG,eAAe;AACrD,QAAM,UAAU,cAAc,KAAK,IAAI;AACvC,QAAM,YAAY,cAAc,SAAS,MAAM;AAC/C,QAAM,aAAa,cAAc,WAAW,OAAO;AACnD,QAAM,aAAa,cAAc,YAAY,mBAAmB;AAChE,SAAO;AACX;;;ACLY,IAAC,kBAAkB,CAAC,MAAM,iBAAiB,kBAAkB,CAAC,6BAA6B,MAAM,iBAAiB,aAAa,EAAE,KAAK,IAAI;;;ACF1I,IAAC,eAAe,CAAC,SAAS,EAAE,iBAAiB,UAAU,iBAAiB,WAAW,eAAe,gBAAgB,cAAa,MAAQ;AAE/I,QAAM,mBAAmB,oBAAoB,SAAS,aAAa;AAEnE,QAAM,gBAAgB,mBAAmB,MAAM,gBAAgB;AAE/D,QAAM,eAAe,gBAAgB,UAAU,iBAAiB,aAAa;AAE7E,QAAM,YAAY,mBAAmB,cAAc,iBAAiB,WAAW,eAAe,cAAc,GAAG,YAAY;AAC3H,SAAO;AACX;;;ACbY,IAAC,cAAc,CAAC,SAAS,YAAY;AAC7C,QAAM,gBAAgB,iBAAiB,OAAO;AAC9C,QAAM,EAAE,aAAa,iBAAiB,UAAU,aAAY,IAAK;AAEjE,QAAM,UAAU,EAAE,GAAG,QAAQ,QAAO;AACpC,UAAQ,WAAW,IAAI,QAAQ,IAAI;AACnC,UAAQ,eAAe,IAAI;AAC3B,MAAI,cAAc;AACd,YAAQ,YAAY,IAAI;EAChC;AACI,QAAM,gBAAgB,EAAE,GAAG,SAAS,QAAO;AAE3C,QAAM,YAAY,aAAa,eAAe,aAAa;AAC3D,QAAM,kBAAkB,cAAc,WAAW,IAAI,eAAe;AACpE,QAAM,qBAAqB,iBAAiB,iBAAiB,OAAO,CAAC;AACrE,QAAM,iBAAiB,aAAa,SAAS;AAC7C,UAAQ,WAAW,IACf,GAAG,2BAA2B,IAAI,eAAe,KAAK,kBAAkB,KAAK,cAAc;AAC/F,SAAO;AACX;;;AC9BU,IAAC;CACV,SAAUC,YAAW;AAElB,EAAAA,WAAU,YAAY,IAAI;AAC1B,EAAAA,WAAU,OAAO,IAAI;AACrB,EAAAA,WAAU,QAAQ,IAAI;AACtB,EAAAA,WAAU,SAAS,IAAI;AACvB,EAAAA,WAAU,OAAO,IAAI;AACrB,EAAAA,WAAU,MAAM,IAAI;AACpB,EAAAA,WAAU,QAAQ,IAAI;AAEtB,EAAAA,WAAU,mBAAmB,IAAI;AACjC,EAAAA,WAAU,UAAU,IAAI;AACxB,EAAAA,WAAU,WAAW,IAAI;AACzB,EAAAA,WAAU,YAAY,IAAI;AAC1B,EAAAA,WAAU,UAAU,IAAI;AACxB,EAAAA,WAAU,SAAS,IAAI;AACvB,EAAAA,WAAU,WAAW,IAAI;AAEzB,EAAAA,WAAU,aAAa,IAAI;AAC3B,EAAAA,WAAU,MAAM,IAAI;AACxB,GAAG,cAAc,YAAY,CAAA,EAAG;AACtB,IAAC;CACV,SAAUC,WAAU;AACjB,EAAAA,UAAS,IAAI,IAAI;AACjB,EAAAA,UAAS,KAAK,IAAI;AAClB,EAAAA,UAAS,MAAM,IAAI;AACnB,EAAAA,UAAS,WAAW,IAAI;AACxB,EAAAA,UAAS,WAAW,IAAI;AACxB,EAAAA,UAAS,KAAK,IAAI;AAClB,EAAAA,UAAS,gBAAgB,IAAI;AAC7B,EAAAA,UAAS,cAAc,IAAI;AAC3B,EAAAA,UAAS,aAAa,IAAI;AAC1B,EAAAA,UAAS,QAAQ,IAAI;AACrB,EAAAA,UAAS,kBAAkB,IAAI;AAC/B,EAAAA,UAAS,SAAS,IAAI;AAC1B,GAAG,aAAa,WAAW,CAAA,EAAG;AACpB,IAAC;CACV,SAAUC,WAAU;AACjB,EAAAA,UAAS,oBAAoB,IAAI;AACjC,EAAAA,UAAS,iBAAiB,IAAI;AAC9B,EAAAA,UAAS,mBAAmB,IAAI;AAChC,EAAAA,UAAS,oBAAoB,IAAI;AACjC,EAAAA,UAAS,aAAa,IAAI;AAC1B,EAAAA,UAAS,cAAc,IAAI;AAC3B,EAAAA,UAAS,WAAW,IAAI;AACxB,EAAAA,UAAS,YAAY,IAAI;AACzB,EAAAA,UAAS,oBAAoB,IAAI;AACrC,GAAG,aAAa,WAAW,CAAA,EAAG;AACpB,IAAC;CACV,SAAUC,kBAAiB;AACxB,EAAAA,iBAAgB,QAAQ,IAAI;AAC5B,EAAAA,iBAAgB,cAAc,IAAI;AACtC,GAAG,oBAAoB,kBAAkB,CAAA,EAAG;AAClC,IAAC;CACV,SAAUC,YAAW;AAClB,EAAAA,WAAU,SAAS,IAAI;AACvB,EAAAA,WAAU,KAAK,IAAI;AACnB,EAAAA,WAAU,MAAM,IAAI;AACpB,EAAAA,WAAU,KAAK,IAAI;AACnB,EAAAA,WAAU,OAAO,IAAI;AACrB,EAAAA,WAAU,KAAK,IAAI;AACnB,EAAAA,WAAU,MAAM,IAAI;AACxB,GAAG,cAAc,YAAY,CAAA,EAAG;AACtB,IAAC;CACV,SAAUC,aAAY;AACnB,EAAAA,YAAW,QAAQ,IAAI;AACvB,EAAAA,YAAW,eAAe,IAAI;AAC9B,EAAAA,YAAW,kBAAkB,IAAI;AACjC,EAAAA,YAAW,QAAQ,IAAI;AACvB,EAAAA,YAAW,oBAAoB,IAAI;AACnC,EAAAA,YAAW,qBAAqB,IAAI;AACpC,EAAAA,YAAW,WAAW,IAAI;AAC1B,EAAAA,YAAW,iBAAiB,IAAI;AAChC,EAAAA,YAAW,eAAe,IAAI;AAC9B,EAAAA,YAAW,sBAAsB,IAAI;AACrC,EAAAA,YAAW,YAAY,IAAI;AAC3B,EAAAA,YAAW,sBAAsB,IAAI;AACrC,EAAAA,YAAW,qBAAqB,IAAI;AACpC,EAAAA,YAAW,sBAAsB,IAAI;AACrC,EAAAA,YAAW,SAAS,IAAI;AACxB,EAAAA,YAAW,gBAAgB,IAAI;AAC/B,EAAAA,YAAW,eAAe,IAAI;AAC9B,EAAAA,YAAW,sBAAsB,IAAI;AACrC,EAAAA,YAAW,iBAAiB,IAAI;AAChC,EAAAA,YAAW,gBAAgB,IAAI;AAC/B,EAAAA,YAAW,cAAc,IAAI;AAC7B,EAAAA,YAAW,cAAc,IAAI;AAC7B,EAAAA,YAAW,mCAAmC,IAAI;AAClD,EAAAA,YAAW,oBAAoB,IAAI;AACnC,EAAAA,YAAW,2BAA2B,IAAI;AAC1C,EAAAA,YAAW,8BAA8B,IAAI;AAC7C,EAAAA,YAAW,yBAAyB,IAAI;AACxC,EAAAA,YAAW,0BAA0B,IAAI;AAC7C,GAAG,eAAe,aAAa,CAAA,EAAG;AACxB,IAAC;CACV,SAAUC,kBAAiB;AACxB,EAAAA,iBAAgB,WAAW,IAAI;AAC/B,EAAAA,iBAAgB,SAAS,IAAI;AACjC,GAAG,oBAAoB,kBAAkB,CAAA,EAAG;AAClC,IAAC;CACV,SAAUC,YAAW;AAClB,EAAAA,WAAU,cAAc,IAAI;AAC5B,EAAAA,WAAU,qBAAqB,IAAI;AACnC,EAAAA,WAAU,sBAAsB,IAAI;AACpC,EAAAA,WAAU,iBAAiB,IAAI;AAC/B,EAAAA,WAAU,eAAe,IAAI;AAC7B,EAAAA,WAAU,aAAa,IAAI;AAC3B,EAAAA,WAAU,eAAe,IAAI;AAC7B,EAAAA,WAAU,iBAAiB,IAAI;AACnC,GAAG,cAAc,YAAY,CAAA,EAAG;AACtB,IAAC;CACV,SAAUC,uBAAsB;AAC7B,EAAAA,sBAAqB,cAAc,IAAI;AACvC,EAAAA,sBAAqB,cAAc,IAAI;AACvC,EAAAA,sBAAqB,0BAA0B,IAAI;AACvD,GAAG,yBAAyB,uBAAuB,CAAA,EAAG;AAC5C,IAAC;CACV,SAAUC,qBAAoB;AAC3B,EAAAA,oBAAmB,MAAM,IAAI;AACjC,GAAG,uBAAuB,qBAAqB,CAAA,EAAG;AACxC,IAAC;CACV,SAAUC,oBAAmB;AAC1B,EAAAA,mBAAkB,SAAS,IAAI;AAC/B,EAAAA,mBAAkB,UAAU,IAAI;AAChC,EAAAA,mBAAkB,WAAW,IAAI;AACrC,GAAG,sBAAsB,oBAAoB,CAAA,EAAG;AACtC,IAAC;CACV,SAAUC,eAAc;AACrB,EAAAA,cAAa,WAAW,IAAI;AAChC,GAAG,iBAAiB,eAAe,CAAA,EAAG;AAC5B,IAAC;CACV,SAAUC,yBAAwB;AAC/B,EAAAA,wBAAuB,6BAA6B,IAAI;AACxD,EAAAA,wBAAuB,cAAc,IAAI;AAC7C,GAAG,2BAA2B,yBAAyB,CAAA,EAAG;AAChD,IAAC;CACV,SAAUC,gBAAe;AACtB,EAAAA,eAAc,YAAY,IAAI;AAC9B,EAAAA,eAAc,cAAc,IAAI;AAChC,EAAAA,eAAc,MAAM,IAAI;AACxB,EAAAA,eAAc,MAAM,IAAI;AACxB,EAAAA,eAAc,QAAQ,IAAI;AAC1B,EAAAA,eAAc,eAAe,IAAI;AACjC,EAAAA,eAAc,QAAQ,IAAI;AAC1B,EAAAA,eAAc,eAAe,IAAI;AACjC,EAAAA,eAAc,wBAAwB,IAAI;AAC9C,GAAG,kBAAkB,gBAAgB,CAAA,EAAG;;;ACpJ5B,IAAC,UAAU;;;ACCX,IAAC,eAAe,MAAM;AAC9B,SAAO,OAAO,WAAW;AAC7B;AAIY,IAAC,eAAe,MAAM;AAC9B,SAAO,OAAO,WAAW;AAC7B;AACY,IAAC,iBAAiB,MAAM;AAChC,SAAO,OAAO,aAAa;AAC/B;AACY,IAAC,gBAAgB,MAAM;AAC/B,SAAO,OAAO,YAAY;AAC9B;AACY,IAAC,iBAAiB,CAAC,QAAQ,WAAW;AAC9C,SAAO,CAAC,CAAC,OAAO,KAAK,MAAM,EAAE,KAAK,SAAO,IAAI,WAAW,MAAM,CAAC;AACnE;;;ACfO,SAAS,iBAAiB;AAC7B,QAAM,8BAA8B,CAAC,QAAQ;AACzC,WAAO,IAAI,WAAW,QAAQ,KAAK,IAAI,WAAW,SAAS;EACnE;AACI,QAAM,wBAAwB,CAAC,YAAY;AACvC,WAAO,OAAO,KAAK,OAAO,EAAE,KAAK,2BAA2B;EACpE;AACI,QAAM,oBAAoB,MAAM,MAAM,KAAK,SAAS,iBAAiB,MAAM,CAAC;AAC5E,SAAO,eAAc,KAAM,kBAAiB,EAAG,KAAK,qBAAqB;AAC7E;AACO,SAAS,iBAAiB;AAC7B,SAAQ,cAAa,KACjB,OAAO,QAAQ,QAAQ,eACvB,CAAC,CAAC,OAAO,KAAK,QAAQ,GAAG,EAAE,KAAK,SAAO,IAAI,SAAS,OAAO,CAAC;AACpE;;;ACdO,SAAS,eAAe;AAC3B,SAAO,aAAY,KAAM,eAAe,QAAQ,OAAO;AAC3D;AACO,SAAS,eAAe;AAC3B,SAAO,aAAY,KAAM,eAAe,QAAQ,OAAO;AAC3D;;;ACLO,SAAS,kBAAkB;AAC9B,SAAO,aAAY,KAAM,eAAe,QAAQ,UAAU;AAC9D;AACO,SAAS,kBAAkB;AAC9B,SAAQ,cAAa,KACjB,OAAO,QAAQ,QAAQ,eACvB,CAAC,CAAC,OAAO,KAAK,QAAQ,GAAG,EAAE,KAAK,SAAO,IAAI,SAAS,QAAQ,CAAC;AACrE;;;ACPO,SAAS,gBAAgB;AAC5B,SAAQ,aAAY,KAChB,OAAO,QACP,OAAO,OAAO,SAAS;AAC/B;AACO,SAAS,gBAAgB;AAC5B,SAAQ,aAAY,MACf,eAAe,QAAQ,QAAQ,KAAK,eAAe,QAAQ,QAAQ;AAC5E;;;ACRO,SAAS,gBAAgB;AAC5B,SAAQ,aAAY,MACf,OAAO,aAAa,UACjB,OAAO,UAAU;AAC7B;AACO,SAAS,gBAAgB;AAC5B,SAAQ,aAAY,KAAM,OAAO,OAAO,mBAAmB;AAC/D;;;ACPO,SAAS,mBAAmB;AAC/B,QAAM,8BAA8B,QAAQ,eAAc,KAAM,SAAS,cAAc,cAAc,CAAC;AACtG,QAAM,4BAA4B,QAAQ,aAAY,KAAM,OAAO,OAAO,OAAO,WAAW;AAC5F,SAAO,+BAA+B;AAC1C;AACO,SAAS,mBAAmB;AAC/B,SAAS,cAAa,KAClB,OAAO,QAAQ,QAAQ,YACvB,QAAQ,IAAI,sBAAsB,WAAW,KAAK,KAClD;AACR;;;ACXO,SAAS,oBAAoB;AAChC,SAAQ,OAAO,cAAc,eACzB,OAAO,UAAU,YAAY,eAC7B,UAAU,YAAY;AAC9B;;;ACHO,SAAS,aAAa;AACzB,SAAO,aAAY,KAAM,OAAO,OAAO,SAAS;AACpD;;;ACHO,SAAS,YAAY;AACxB,SAAO,aAAY;AACvB;;;ACQA,IAAM,eAAe;;EAEjB,EAAE,UAAU,UAAU,MAAM,iBAAiB,WAAU;EACvD,EAAE,UAAU,UAAU,aAAa,iBAAiB,kBAAiB;;EAErE,EAAE,UAAU,UAAU,QAAQ,iBAAiB,cAAa;EAC5D,EAAE,UAAU,UAAU,MAAM,iBAAiB,cAAa;EAC1D,EAAE,UAAU,UAAU,SAAS,iBAAiB,iBAAgB;EAChE,EAAE,UAAU,UAAU,OAAO,iBAAiB,eAAc;EAC5D,EAAE,UAAU,UAAU,OAAO,iBAAiB,aAAY;EAC1D,EAAE,UAAU,UAAU,QAAQ,iBAAiB,gBAAe;EAC9D,EAAE,UAAU,UAAU,YAAY,iBAAiB,UAAS;;EAE5D,EAAE,UAAU,UAAU,WAAW,iBAAiB,cAAa;EAC/D,EAAE,UAAU,UAAU,SAAS,iBAAiB,cAAa;EAC7D,EAAE,UAAU,UAAU,UAAU,iBAAiB,eAAc;EAC/D,EAAE,UAAU,UAAU,UAAU,iBAAiB,aAAY;EAC7D,EAAE,UAAU,UAAU,YAAY,iBAAiB,iBAAgB;EACnE,EAAE,UAAU,UAAU,WAAW,iBAAiB,gBAAe;AACrE;AACO,SAAS,SAAS;AACrB,SAAQ,aAAa,KAAK,oBAAkB,eAAe,gBAAe,CAAE,GACtE,YAAY,UAAU;AAChC;;;AC/BA,IAAI;AACQ,IAAC,2BAA2B,CAAA;AAExC,IAAI,iBAAiB;AACrB,IAAM,oBAAoB;AAC1B,IAAM,oBAAoB;AAC1B,IAAM,wBAAwB;AAClB,IAAC,kBAAkB,MAAM;AACjC,MAAI,CAAC,gBAAgB;AACjB,qBAAiB,OAAM;AACvB,QAAI,gBAAgB;AAKhB,aAAO,yBAAyB,QAAQ;AACpC,iCAAyB,IAAG,IAAE;MAC9C;IACA,OACa;AAGD,+BAAyB,QAAQ,SAAO;AACpC,YAAG;MACnB,CAAa;IACb;AAEQ,iBAAa,UAAU,mBAAmB,iBAAiB;AAC3D,iBAAa,UAAU,YAAY,iBAAiB;EAC5D;AACI,SAAO;AACX;AAIY,IAAC,0BAA0B,CAAC,QAAQ;AAG5C,MAAI,gBAAgB;AAChB;EACR;AACI,2BAAyB,KAAK,GAAG;AACrC;AACO,SAAS,aAAa;AACzB,mBAAiB;AACrB;AAOA,SAAS,aAAa,WAAW,OAAO;AACpC,MAAI,mBAAmB,aAAa,CAAC,gBAAgB;AACjD,eAAW,MAAM;AACb,iBAAU;AACV,uBAAiB;AACjB,iBAAW,iBAAiB,qBAAqB;IAC7D,GAAW,KAAK;EAChB;AACA;;;AC9DA,IAAM,uBAAuB,CAAA;AAgDjB,IAAC,qBAAqB,CAAC,UAAUC,SAAQ,qBAAqB,QAAQ,IAAIA,IAAG,GAAG;;;AC7C5F,IAAM,kBAAkB;AAEZ,IAAC,yBAAyB,CAAC,mBAAmB,eAAe,QAAQ,QAAQ,EAAE;AAC3F,IAAM,kBAAN,MAAsB;EAClB,cAAc;AACV,SAAK,YAAY,GAAG,eAAe,IAAI,uBAAuB,OAAO,CAAC;EAC9E;EACI,IAAI,YAAY;AACZ,WAAO,gBAAe;EAC9B;EACI,IAAI,gBAAgB;AAChB,WAAQ,KAAK,cAAc,UAAU,eACjC,KAAK,cAAc,UAAU;EACzC;EACI,wBAAwB,KAAK;AACzB,4BAAwB,GAAG;EACnC;AACA;AACY,IAAC,WAAW,IAAI,gBAAe;AAC/B,IAAC,4BAA4B,CAAC,EAAE,UAAU,OAAM,IAAM,CAAA,MAAO;AACrE,QAAM,YAAY;IACd,CAAC,iBAAiB,uBAAuB,OAAO,CAAC;EACzD;AACI,MAAI,UAAU;AACV,cAAU,KAAK,CAAC,UAAU,MAAM,CAAC;EACzC;AACI,YAAU,KAAK,CAAC,aAAa,gBAAe,CAAE,CAAC;AAC/C,MAAI,YAAY,QAAQ;AACpB,UAAM,cAAc,mBAAmB,UAAU,MAAM;AACvD,QAAI,aAAa;AACb,kBAAY,QAAQ,WAAS;AACzB,kBAAU,KAAK,KAAK;MACpC,CAAa;IACb;EACA;AACI,SAAO;AACX;AACY,IAAC,sBAAsB,CAAC,2BAA2B;AAC3D,QAAM,YAAY,0BAA0B,sBAAsB;AAClE,QAAM,kBAAkB,UACnB,IAAI,CAAC,CAAC,UAAU,UAAU,MAAM,YAAY,aAAa,GAAG,QAAQ,IAAI,UAAU,KAAK,QAAQ,EAC/F,KAAK,GAAG;AACb,SAAO;AACX;;;AC1CO,IAAM,WAAN,MAAM,kBAAiB,aAAa;;;;EAIvC,IAAI,WAAW;AACX,WAAO,KAAK,YACN,0BAA0B,KAAK,SAAS,IACxC;EACd;EACI,YAAY,QAAQ;AAChB,UAAM,MAAM;AAEZ,SAAK,cAAc;AACnB,WAAO,eAAe,MAAM,UAAS,SAAS;AAC9C,QAAI,OAAO,UAAU;AACjB,WAAK,YAAY,OAAO;IACpC;EACA;AACA;AACA,IAAM,4BAA4B,CAAC,cAAc;EAC7C,GAAG;EACH,SAAS,EAAE,GAAG,SAAS,QAAO;AAClC;;;ACzBO,IAAM,4BAAN,cAAwC,aAAa;EACxD,cAAc;AACV,UAAM;MACF,MAAM,iBAAiB;MACvB,SAAS;IACrB,CAAS;EACT;AACA;;;ACPO,IAAM,eAAN,MAAM,cAAa;EACtB,eAAe,GAAG;AACd,UAAM,YAAY,YAAW,IACvB,OACA,OAAO,WAAW,eAAe;AACvC,QAAI,CAAC,WAAW;AACZ,aAAO,KAAK,CAAC,EAAE,QAAQ,KAAI,CAAE,CAAC;IAC1C;AACQ,WAAO,IAAI,WAAW,cAAY;AAC9B,eAAS,KAAK,EAAE,QAAQ,UAAU,UAAU,OAAM,CAAE;AACpD,YAAM,eAAe,MAAM;AACvB,iBAAS,KAAK,EAAE,QAAQ,KAAI,CAAE;MAC9C;AACY,YAAM,gBAAgB,MAAM;AACxB,iBAAS,KAAK,EAAE,QAAQ,MAAK,CAAE;MAC/C;AACY,gBAAU,iBAAiB,UAAU,YAAY;AACjD,gBAAU,iBAAiB,WAAW,aAAa;AACnD,oBAAa,WAAW,KAAK,QAAQ;AACrC,aAAO,MAAM;AACT,kBAAU,oBAAoB,UAAU,YAAY;AACpD,kBAAU,oBAAoB,WAAW,aAAa;AACtD,sBAAa,aAAa,cAAa,WAAW,OAAO,eAAa,cAAc,QAAQ;MAC5G;IACA,CAAS;EACT;;EAEI,OAAO,kBAAkB,QAAQ;AAC7B,eAAW,YAAY,KAAK,YAAY;AACpC,UAAI,SAAS,QAAQ;AACjB,aAAK,aAAa,KAAK,WAAW,OAAO,eAAa,cAAc,QAAQ;AAC5E;MAChB;AACY,gBAAU,QAAQ,SAAS,KAAK,MAAM;IAClD;EACA;AACA;AACA,aAAa,aAAa,CAAA;;;ACvCd,IAAC,mBAAmB,CAAC,SAAS,YAAY;AAClD,SAAO,QAAQ,KAAK,iBAAiB,OAAO;AAChD;;;ACCY,IAAC,iBAAkB,OAAO,WAAW,cAC3C,OAAO,iBAAiB,IACxB;AACN,IAAMC,UAAS,IAAI,cAAc,KAAK;AAC/B,IAAM,WAAN,MAAe;EAClB,YAAYC,OAAM;AACd,SAAK,YAAY,oBAAI,IAAG;AACxB,SAAK,oBAAoB;MACrB;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACZ;AACQ,SAAK,OAAOA;EACpB;;;;;;;EAOI,QAAQ,SAAS,UAAU;AACvB,UAAM,SAAS,KAAK,UAAU,IAAI,OAAO;AACzC,QAAI,CAAC,QAAQ;AACT,MAAAD,QAAO,KAAK,oBAAoB,OAAO,EAAE;AACzC;IACZ;AACQ,SAAK,UAAU,IAAI,SAAS;MACxB,GAAG,OAAO,OAAO,CAAC,EAAE,SAAQ,MAAO,aAAa,QAAQ;IACpE,CAAS;EACT;EACI,SAAS,SAAS,SAAS,QAAQ,WAAW;AAC1C,QAAI,OAAO,YAAY,YACnB,KAAK,kBAAkB,QAAQ,OAAO,IAAI,IAAI;AAC9C,YAAM,YAAY,cAAc;AAChC,UAAI,CAAC,WAAW;AACZ,QAAAA,QAAO,KAAK,YAAY,OAAO,sEAAsE;MACrH;IACA;AACQ,UAAM,UAAU;MACZ;MACA,SAAS,EAAE,GAAG,QAAO;MACrB;MACA,aAAa,CAAA;IACzB;AACQ,QAAI;AACA,WAAK,aAAa,OAAO;IACrC,SACe,GAAG;AACN,MAAAA,QAAO,MAAM,CAAC;IAC1B;EACA;EACI,OAAO,SAAS,UAAU,eAAe,UAAU;AAC/C,QAAI;AACJ,QAAI,OAAO,aAAa,YAAY;AAChC,YAAM,IAAI,aAAa;QACnB,MAAM;QACN,SAAS;MACzB,CAAa;IACb,OACa;AAED,WAAK;IACjB;AACQ,QAAI,SAAS,KAAK,UAAU,IAAI,OAAO;AACvC,QAAI,CAAC,QAAQ;AACT,eAAS,CAAA;AACT,WAAK,UAAU,IAAI,SAAS,MAAM;IAC9C;AACQ,WAAO,KAAK;MACR,MAAM;MACN,UAAU;IACtB,CAAS;AACD,WAAO,MAAM;AACT,WAAK,QAAQ,SAAS,EAAE;IACpC;EACA;EACI,aAAa,SAAS;AAClB,UAAM,EAAE,SAAS,QAAO,IAAK;AAC7B,UAAM,SAAS,KAAK,UAAU,IAAI,OAAO;AACzC,QAAI,QAAQ;AACR,aAAO,QAAQ,cAAY;AACvB,QAAAA,QAAO,MAAM,kBAAkB,OAAO,UAAU,OAAO;AACvD,YAAI;AACA,mBAAS,SAAS,OAAO;QAC7C,SACuB,GAAG;AACN,UAAAA,QAAO,MAAM,CAAC;QAClC;MACA,CAAa;IACb;EACA;AACA;AAIY,IAAC,MAAM,IAAI,SAAS,aAAa;AAOjC,IAAC,cAAc,IAAI,SAAS,cAAc;;;AC/G/C,SAAS,cAAc,OAAO;AACjC,SAAO,MAAM,KAAK,OAAO,UAAQ,OAAO,cAAc,IAAI,CAAC,EAAE,KAAK,EAAE;AACxE;;;ACAY,IAAC,gBAAgB;;;;;;;EAOzB,QAAQ,OAAO,UAAU;IACrB,SAAS;IACT,aAAa;EACrB,GAAO;AACC,UAAM,WAAW,OAAO,UAAU,WAAW,QAAQ,cAAc,KAAK;AACxE,QAAI,aAAa,QAAO,EAAG,QAAQ;AAGnC,QAAI,QAAQ,SAAS;AACjB,mBAAa,WAAW,QAAQ,OAAO,GAAG,EAAE,QAAQ,OAAO,GAAG;IAC1E;AACQ,QAAI,QAAQ,aAAa;AACrB,mBAAa,WAAW,QAAQ,MAAM,EAAE;IACpD;AACQ,WAAO;EACf;AACA;;;ACxBO,IAAM,eAAN,MAAM,sBAAqB,SAAS;EACvC,YAAY,QAAQ;AAChB,UAAM,MAAM;AAEZ,SAAK,cAAc;AACnB,WAAO,eAAe,MAAM,cAAa,SAAS;EAC1D;AACA;;;ACFO,IAAM,gBAAN,MAAM,uBAAsB,aAAa;EAC5C,YAAY,SAAS,CAAA,GAAI;AACrB,UAAM;MACF,MAAM;MACN,SAAS;MACT,GAAG;IACf,CAAS;AAED,SAAK,cAAc;AACnB,WAAO,eAAe,MAAM,eAAc,SAAS;EAC3D;AACA;AAUY,IAAC,gBAAgB,CAAC,UAAU,CAAC,CAAC,SAAS,iBAAiB;;;AC3BxD,IAAC,aAAa,CAAC,WAAW;AAClC,QAAM,YAAY,QAAQ,QAAQ,MAAM;AACxC,aAAWE,SAAQ,WAAW;AAC1B,UAAM,QAAQ,OAAOA,KAAI;AACzB,QAAK,SAAS,OAAO,UAAU,YAAa,OAAO,UAAU,YAAY;AACrE,iBAAW,KAAK;IAC5B;EACA;AACI,SAAO,OAAO,OAAO,MAAM;AAC/B;;;ACXO,IAAM,YAAN,MAAgB;;;;;;;;;;;EAWnB,UAAU,qBAAqB,aAAa;AACxC,SAAK,aAAa;AAClB,SAAK,cAAc;EAC3B;;;;;;;;;;EAUI,MAAM,iBAAiB,UAAU,CAAA,GAAI;AACjC,QAAI;AACJ,QAAI;AAEJ,UAAM,SAAS,MAAM,KAAK,UAAU,OAAO;AAC3C,QAAI,QAAQ;AACR,gBAAU,OAAO,aAAa,SAAS;AAEvC,iCACI,MAAM,KAAK,aAAa,qBAAqB,4BAA4B;QACrE,YAAY,KAAK;QACjB;QACA,eAAe;QACf,cAAc,QAAQ;MAC1C,CAAiB;IACjB,OACa;AAED,iCACI,MAAM,KAAK,aAAa,qBAAqB,4BAA4B;QACrE,YAAY,KAAK;QACjB,eAAe;QACf,cAAc,QAAQ;MAC1C,CAAiB;IACjB;AACQ,WAAO;MACH;MACA,aAAa,0BAA0B;MACvC,YAAY,0BAA0B;MACtC;IACZ;EACA;EACI,MAAM,mBAAmB;AACrB,UAAM,KAAK,aAAa,qBAAqB,8BAA6B;EAClF;EACI,MAAM,UAAU,SAAS;AACrB,WAAS,MAAM,KAAK,aAAa,eAAe,UAAU,OAAO,KAAM;EAC/E;AACA;;;ACvDO,IAAM,eAAN,MAAmB;EACtB,cAAc;AACV,SAAK,gBAAgB;AACrB,SAAK,kBAAkB,CAAA;AACvB,SAAK,iBAAiB,CAAA;AACtB,SAAK,OAAO,IAAI,UAAS;EACjC;;;;;;;;;;;;;;EAcI,UAAU,iBAAiB,gBAAgB;AACvC,UAAM,yBAAyB,mBAAmB,eAAe;AACjE,SAAK,kBAAkB;AACvB,QAAI,gBAAgB;AAChB,WAAK,iBAAiB;IAClC;AAEQ,SAAK,kBAAkB,WAAW,KAAK,eAAe;AACtD,SAAK,KAAK,UAAU,KAAK,gBAAgB,MAAM,KAAK,eAAe,IAAI;AACvE,QAAI,SAAS,QAAQ;MACjB,OAAO;MACP,MAAM,KAAK;IACvB,GAAW,aAAa,cAAc;AAC9B,SAAK,oBAAmB;EAChC;;;;;;EAMI,YAAY;AACR,WAAO,KAAK;EACpB;;EAEI,CAAC,kBAAkB,EAAE,UAAU;AAC3B,QAAI,KAAK,gBAAgB,MAAM,QAAQ,WAAW,OAAO;AAErD,eAAS,KAAK,gBAAgB,MAAM,OAAO;IACvD,OACa;AAED,WAAK,gBAAgB;IACjC;EACA;EACI,sBAAsB;AAClB,QAAI,CAAC,KAAK,gBAAgB,MAAM,QAAQ,WAAW,SAC/C,CAAC,KAAK,eAAe;AACrB;IACZ;AACQ,SAAK,cAAc,KAAK,gBAAgB,MAAM,OAAO;AAErD,SAAK,gBAAgB;EAC7B;AACA;AAOY,IAAC,UAAU,IAAI,aAAY;;;AChE3B,IAACC,oBAAmB,CAAC,YAAY;AACzC,SAAOC,iBAAyB,SAAS,OAAO;AACpD;;;ACbY,IAAC,gBAAgB,CAAC,aAAa;AACvC,QAAM,EAAE,SAAS,WAAU,IAAK;AAChC,SAAO;IACH,GAAI,iBAAiB,QAAQ,IAAI,SAAS,YAAY,CAAA;IACtD,gBAAgB;IAChB,WAAW,QAAQ,kBAAkB,KACjC,QAAQ,mBAAmB,KAC3B,QAAQ,kBAAkB;IAC9B,mBAAmB,QAAQ,YAAY;IACvC,MAAM,QAAQ,aAAa;EACnC;AACA;AACA,IAAM,mBAAmB,CAAC,aAAa,OAAO,UAAU,cAAc;;;ACL1D,IAAC,iBAAiB,OAAO,aAAa;AAC9C,MAAI,CAAC,YAAY,SAAS,aAAa,KAAK;AACxC;EACR;AACI,QAAM,OAAO,MAAM,cAAc,QAAQ;AACzC,QAAM,oBAAoB,CAAC,aAAa;AACpC,UAAM,CAAC,UAAU,IAAI,SAAS,SAAQ,EAAG,MAAM,OAAO;AACtD,QAAI,WAAW,SAAS,GAAG,GAAG;AAC1B,aAAO,WAAW,MAAM,GAAG,EAAE,CAAC;IAC1C;AACQ,WAAO;EACf;AACI,QAAM,OAAO,kBAAkB,SAAS,QAAQ,kBAAkB,KAC9D,KAAK,QACL,KAAK,UACL,cAAc;AAClB,QAAM,UAAU,KAAK,WAAW,KAAK,WAAW;AAChD,QAAM,QAAQ,IAAI,MAAM,OAAO;AAC/B,SAAO,OAAO,OAAO,OAAO;IACxB,MAAM;IACN,WAAW,cAAc,QAAQ;EACzC,CAAK;AACL;AAIY,IAAC,gBAAgB,OAAO,aAAa;AAC7C,MAAI,CAAC,SAAS,MAAM;AAChB,UAAM,IAAI,MAAM,0BAA0B;EAClD;AACI,QAAM,SAAS,MAAM,SAAS,KAAK,KAAI;AACvC,SAAO,OAAO,OAAO,QAAQ;IACzB,WAAW,cAAc,QAAQ;EACzC,CAAK;AACL;;;ACLY,IAAC,oBAAoB,CAACC,kBAAiB,YAAY,cAAcC,mBAAkB;AAC3F,SAAO,OAAOC,SAAQ,UAAU;AAC5B,UAAM,iBAAiB;MACnB,GAAGD;MACH,GAAGC;IACf;AAGQ,UAAM,WAAW,MAAM,eAAe,iBAAiB,gBAAgB,KAAK;AAI5E,UAAM,UAAU,MAAM,WAAW,OAAO,QAAQ;AAChD,UAAM,WAAW,MAAMF,iBAAgB,SAAS;MAC5C,GAAG;IACf,CAAS;AACD,WAAO,aAAa,QAAQ;EACpC;AACA;;;ACjDY,IAAC,mBAAmB;EAC5B,IAAI;EACJ,SAAS;IACL,WAAW;EACnB;EACI,aAAa;EACb,SAAS,CAAC,YAAY;AAC1B;AAWY,IAAC,iBAAiB;EAC1B,YAAY;IACR;IACA;MACI,IAAI;MACJ,SAAS;QACL,WAAW;MAC3B;MACY,aAAa;MACb,SAAS,CAAC,eAAe;IACrC;EACA;AACA;;;ACxBY,IAAC,eAAe,CAAC,WAAW;AACpC,QAAM,EAAE,WAAU,IAAK;AACvB,aAAW,EAAE,SAAS,SAAS,YAAW,KAAM,YAAY;AACxD,UAAM,QAAQ,IAAI,OAAO,WAAW;AACpC,QAAI,QAAQ,SAAS,MAAM,KAAK,MAAM,KAAK,MAAM,GAAG;AAChD,aAAO,QAAQ;IAC3B;EACA;AACI,SAAO,iBAAiB,QAAQ;AACpC;;;ACpBY,IAAC,yBAAyB;AAC1B,IAAC,+BAA+B;AAChC,IAAC,yBAAyB;AAC1B,IAAC,uBAAuB,IAAI,KAAK;;;ACDjC,IAAC,yBAAyB,CAAC,EAAE,cAAc,wBAAwB,cAAc,cAAc,YAAW,MAAQ;AAC1H,MAAI,cAAc,GAAG;AACjB,UAAM,IAAI,MAAM,oCAAoC;EAC5D;AACI,SAAO,CAAC,MAAMG,aAAY,eAAe,gBAAgB,SAAS;AAC9D,QAAI;AACJ,QAAI,gBAAgBA,SAAQ,iBAAiB;AAC7C,QAAI;AAEJ,UAAM,gCAAgC,MAAM;AACxC,UAAI,UAAU;AACV,uCAA+B,UAAU,aAAa;AACtD,eAAO;MACvB,OACiB;AACD,uCAA+B,OAAO,aAAa;AACnD,cAAM;MACtB;IACA;AACQ,WAAO,CAAC,aAAa,WAAW,gBAAgB,aAAa;AACzD,UAAI;AACA,mBAAW,MAAM,KAAK,OAAO;AAC7B,gBAAQ;MACxB,SACmB,GAAG;AACN,gBAAQ;AACR,mBAAW;MAC3B;AAEY,uBACKA,SAAQ,iBAAiB,KAAK,gBACxBA,SAAQ,iBAAiB,IAC1B,gBAAgB;AAC1B,MAAAA,SAAQ,gBAAgB;AACxB,YAAM,EAAE,2BAA2B,UAAS,IAAK,MAAM,aAAa,UAAU,OAAOA,QAAO;AAC5F,UAAI,WAAW;AAEX,QAAAA,SAAQ,uBAAuB,CAAC,CAAC;AACjC,YAAI,CAAC,aAAa,WAAW,gBAAgB,aAAa;AAEtD,gBAAM,QAAQ,aAAa,aAAa;AACxC,gBAAM,iBAAiB,OAAO,WAAW;QAC7D;AACgB;MAChB,OACiB;AACD,eAAO,8BAA6B;MACpD;IACA;AACQ,QAAI,aAAa,SAAS;AACtB,YAAM,IAAI,MAAM,kBAAkB;IAC9C,OACa;AACD,aAAO,8BAA6B;IAChD;EACA;AACA;AACA,IAAM,mBAAmB,CAAC,WAAW,gBAAgB;AACjD,MAAI,aAAa,SAAS;AACtB,WAAO,QAAQ,QAAO;EAC9B;AACI,MAAI;AACJ,MAAI;AACJ,QAAM,eAAe,IAAI,QAAQ,aAAW;AACxC,4BAAwB;AACxB,gBAAY,WAAW,SAAS,SAAS;EACjD,CAAK;AACD,eAAa,iBAAiB,SAAS,SAAS,YAAY,GAAG;AAC3D,iBAAa,SAAS;AACtB,iBAAa,oBAAoB,SAAS,WAAW;AACrD,0BAAqB;EAC7B,CAAK;AACD,SAAO;AACX;AACA,IAAM,iCAAiC,CAAC,mBAAmB,aAAa;AACpE,MAAI,OAAO,UAAU,SAAS,KAAK,iBAAiB,MAAM,mBAAmB;AACzE;EACR;AACI,oBAAkB,YAAY;IAC1B,GAAI,kBAAkB,aAAa,CAAA;IACnC;EACR;AACA;;;ACxEY,IAAC,4CAA4C,MAAM,UAAQ;AACnE,SAAO,eAAe,mCAAmC,SAAS;AAC9D,QAAI,CAAC,QAAQ,QAAQ,4BAA4B,GAAG;AAChD,cAAQ,QAAQ,4BAA4B,IAAI,YAAW;IACvE;AACQ,WAAO,KAAK,OAAO;EAC3B;AACA;;;ACRY,IAAC,uCAAuC,CAAC,EAAE,cAAc,uBAAsB,MAAO,CAAC,MAAMC,aAAY;AACjH,SAAO,eAAe,8BAA8B,SAAS;AACzD,UAAM,gBAAgBA,SAAQ,iBAAiB;AAC/C,YAAQ,QAAQ,sBAAsB,IAClC,WAAW,gBAAgB,CAAC,SAAS,WAAW;AACpD,WAAO,KAAK,OAAO;EAC3B;AACA;;;ACZY,IAAC,6BAA6B,CAAC,EAAE,kBAAkB,oBAAoB,iBAAiB,GAAE,MAAQ,UAAQ;AAClH,SAAO,eAAe,oBAAoB,SAAS;AAC/C,QAAI,eAAe,KAAI,EAAG,WAAW,GAAG;AACpC,YAAM,SAAS,MAAM,KAAK,OAAO;AACjC,aAAO;IACnB,OACa;AACD,YAAM,aAAa,gBAAgB,YAAW;AAC9C,cAAQ,QAAQ,UAAU,IAAI,QAAQ,QAAQ,UAAU,IAClD,GAAG,QAAQ,QAAQ,UAAU,CAAC,IAAI,cAAc,KAChD;AACN,YAAM,WAAW,MAAM,KAAK,OAAO;AACnC,aAAO;IACnB;EACA;AACA;;;ACbY,IAAC,yBAAyB,CAAC,aAAa,eAAe,CAAC,SAAS,YAAY;AACrF,QAAMC,WAAU,CAAA;AAChB,MAAI,kBAAkB,CAAC,0BAA0B,YAAY,uBAAuB,OAAO;AAC3F,WAAS,IAAI,WAAW,SAAS,GAAG,KAAK,GAAG,KAAK;AAC7C,UAAM,IAAI,WAAW,CAAC;AACtB,UAAM,qBAAqB,EAAE,OAAO;AACpC,sBAAkB,mBAAmB,iBAAiBA,QAAO;EACrE;AACI,SAAO,gBAAgB,OAAO;AAClC;;;ACTY,IAAC,kBAAkB,CAAC,oBAAoB;AAChD,MAAI;AACJ,SAAO,MAAM;AACT,QAAI,CAAC,QAAQ;AAIT,eAAS,gBAAe;IACpC;AACQ,WAAO;EACf;AACA;;;AChBA,IAAM,iBAAiB,CAAC,WAAW,CAAC,CAAC,QAAQ,OAAO,QAAQ,EAAE,SAAS,OAAO,YAAW,CAAE;AAE/E,IAAC,uBAAuB,OAAO,EAAE,KAAK,QAAQ,SAAS,KAAI,GAAI,EAAE,aAAa,OAAO,2BAA0B,MAAO;AAC9H,MAAI;AACJ,MAAI;AACA,WAAO,MAAM,MAAM,KAAK;MACpB;MACA;MACA,MAAM,eAAe,MAAM,IAAI,OAAO;MACtC,QAAQ;MACR;MACA,aAAa,6BAA6B,YAAY;IAClE,CAAS;EACT,SACW,GAAG;AACN,QAAI,aAAa,WAAW;AACxB,YAAM,IAAI,aAAa;QACnB,MAAM,iBAAiB;QACvB,SAAS;QACT,iBAAiB;MACjC,CAAa;IACb;AACQ,UAAM;EACd;AACI,QAAM,kBAAkB,CAAA;AACxB,OAAK,SAAS,QAAQ,CAAC,OAAO,QAAQ;AAClC,oBAAgB,IAAI,YAAW,CAAE,IAAI;EAC7C,CAAK;AACD,QAAM,eAAe;IACjB,YAAY,KAAK;IACjB,SAAS;IACT,MAAM;EACd;AAGI,QAAM,gBAAgB,OAAO,OAAO,KAAK,QAAQ,CAAA,GAAI;IACjD,MAAM,gBAAgB,MAAM,KAAK,KAAI,CAAE;IACvC,MAAM,gBAAgB,MAAM,KAAK,KAAI,CAAE;IACvC,MAAM,gBAAgB,MAAM,KAAK,KAAI,CAAE;EAC/C,CAAK;AACD,SAAO;IACH,GAAG;IACH,MAAM;EACd;AACA;;;AC3CY,IAAC,yBAAyB,uBAAuB,sBAAsB;EAC/E;EACA;EACA;EACA;AACJ,CAAC;;;ACNW,IAACC,mBAAkB,aAAW;AACtC,QAAM,gBAAgBC,gBAAoB,oBAAoB;AAC9D,QAAM,QAAQ,cAAc,OAAO;AAGnC,SAAO,UAAU,QAAQ,uBAAuB;AACpD;;;ACRA,IAAM,yBAAyB;EAC3B;EACA;EACA;EACA;EACA;EACA;EACA;;AACJ;AASY,IAAC,mBAAmB,CAAC,cAAc,CAAC,CAAC,aAAa,uBAAuB,SAAS,SAAS;;;ACZ3F,IAAC,kBAAkB,CAAC,gBAAgB,OAAO,UAAU,UAAU;AACvE,QAAM,cAAc,SACf,MAAM,YAAY,QAAQ,KAC3B;AACJ,QAAM,YAAY,aAAa,QAAQ,aAAa;AACpD,QAAM,aAAa,UAAU;AAC7B,QAAM,cAAc,kBAAkB,KAAK,KACvC,kBAAkB,YAAY,SAAS,KACvC,iBAAiB,SAAS,KAC1B,kBAAkB,YAAY,SAAS;AAC3C,SAAO;IACH,WAAW;EACnB;AACA;AAEA,IAAM,yBAAyB;EAC3B;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;AACJ;AACA,IAAM,sBAAsB;EACxB;EACA;EACA;AACJ;AACA,IAAM,oBAAoB,CAAC,YAAY,cAAc,eAAe,OAC/D,CAAC,CAAC,aAAa,uBAAuB,SAAS,SAAS;AAC7D,IAAM,oBAAoB,CAAC,UAAU;EACjC,iBAAiB;;EAEjB;AACJ,EAAE,SAAS,OAAO,IAAI;AACtB,IAAM,oBAAoB,CAAC,YAAY,cAAe,CAAC,CAAC,cAAc,CAAC,KAAK,KAAK,KAAK,GAAG,EAAE,SAAS,UAAU,KACzG,CAAC,CAAC,aAAa,oBAAoB,SAAS,SAAS;;;ACxC1D,IAAM,eAAe;AAIrB,IAAM,mBAAmB,CAAC,EAAE,OAAM,OAAQ;EACtC,KAAK,IAAI,WAAW,4BAA4B,MAAM,IAAI,aAAa,MAAM,CAAC,EAAE;AACpF;AAIA,IAAM,gCAAgC,MAAM,UAAQ,eAAe,uBAAuB,SAAS;AAC/F,UAAQ,QAAQ,eAAe,IAAI;AACnC,SAAO,KAAK,OAAO;AACvB;AAOY,IAAC,iCAAiC,uBAAuB,wBAAwB,CAAC,6BAA6B,CAAC;AAIhH,IAAC,gBAAgB;EACzB,SAAS;EACT;EACA,cAAc,gBAAgB,cAAc;EAC5C,cAAcC;EACd,gBAAgB,oBAAmB;EACnC,OAAO;AACX;AACA,wBAAwB,MAAM;AAC1B,gBAAc,iBAAiB,oBAAmB;AACtD,CAAC;AAIW,IAAC,mBAAmB,CAAC,eAAe;EAC5C,gBAAgB;EAChB,gBAAgB,6BAA6B,SAAS;AAC1D;AAIY,IAAC,sBAAsB,CAAC,EAAE,IAAG,GAAI,SAAS,UAAU;EAC5D;EACA;EACA;EACA,QAAQ;AACZ;;;ACxDA,IAAM,kBAAkB,CAAC,OAAO,aAAa;AACzC,QAAM,UAAU,iBAAiB,OAAO;AACxC,QAAM,OAAO,KAAK,UAAU,KAAK;AACjC,SAAO,oBAAoB,UAAU,SAAS,IAAI;AACtD;AACA,IAAM,oBAAoB,OAAO,aAAa;AAC1C,MAAI,SAAS,cAAc,KAAK;AAC5B,UAAM,QAAQ,MAAM,eAAe,QAAQ;AAC3C,UAAM;EACd,OACS;AACD,UAAM,OAAO,MAAM,cAAc,QAAQ;AACzC,WAAO;MACH,YAAY,KAAK;MACjB,WAAW,cAAc,QAAQ;IAC7C;EACA;AACA;AAIY,IAAC,QAAQ,kBAAkB,gCAAgC,iBAAiB,mBAAmB,aAAa;;;ACrBxH,IAAM,sCAAsC,CAAC,OAAO,aAAa;AAC7D,QAAM,UAAU,iBAAiB,2BAA2B;AAC5D,QAAM,OAAO,KAAK,UAAU,KAAK;AACjC,SAAO,oBAAoB,UAAU,SAAS,IAAI;AACtD;AACA,IAAM,wCAAwC,OAAO,aAAa;AAC9D,MAAI,SAAS,cAAc,KAAK;AAC5B,UAAM,QAAQ,MAAM,eAAe,QAAQ;AAC3C,UAAM;EACd,OACS;AACD,UAAM,OAAO,MAAM,cAAc,QAAQ;AACzC,WAAO;MACH,YAAY,KAAK;MACjB,aAAa,uBAAuB,KAAK,WAAW;MACpD,WAAW,cAAc,QAAQ;IAC7C;EACA;AACA;AACA,IAAM,yBAAyB,CAAC,EAAE,aAAa,WAAW,cAAc,WAAU,IAAM,CAAA,MAAO;AAC3F,SAAO;IACH;IACA;IACA;IACA,YAAY,cAAc,IAAI,KAAK,aAAa,GAAI;EAC5D;AACA;AAIY,IAAC,4BAA4B,kBAAkB,gCAAgC,qCAAqC,uCAAuC,aAAa;;;AC7B7K,IAAM,kBAAN,MAAsB;EACzB,YAAY,SAAS;AACjB,SAAK,UAAU;EACvB;;;;;;;EAOI,MAAM,QAAQ,KAAK,OAAO;AACtB,QAAI,CAAC,KAAK;AACN,YAAM,IAAI,0BAAyB;AACvC,SAAK,QAAQ,QAAQ,KAAK,KAAK;EACvC;;;;;;;EAOI,MAAM,QAAQ,KAAK;AACf,QAAI,CAAC,KAAK;AACN,YAAM,IAAI,0BAAyB;AACvC,WAAO,KAAK,QAAQ,QAAQ,GAAG;EACvC;;;;;;EAMI,MAAM,WAAW,KAAK;AAClB,QAAI,CAAC,KAAK;AACN,YAAM,IAAI,0BAAyB;AACvC,SAAK,QAAQ,WAAW,GAAG;EACnC;;;;;EAKI,MAAM,QAAQ;AACV,QAAI,CAAC,KAAK;AACN,YAAM,IAAI,0BAAyB;AACvC,SAAK,QAAQ,MAAK;EAC1B;AACA;;;AC9CO,IAAM,kBAAN,MAAsB;EACzB,cAAc;AACV,SAAK,UAAU,oBAAI,IAAG;EAC9B;EACI,IAAI,SAAS;AACT,WAAO,KAAK,QAAQ;EAC5B;EACI,IAAI,OAAO;AACP,QAAI,QAAQ,KAAK,SAAS,GAAG;AACzB,aAAO;IACnB;AACQ,WAAO,MAAM,KAAK,KAAK,QAAQ,KAAI,CAAE,EAAE,KAAK;EACpD;EACI,QAAQ,KAAK,OAAO;AAChB,SAAK,QAAQ,IAAI,KAAK,KAAK;EACnC;EACI,QAAQ,KAAK;AACT,WAAO,KAAK,QAAQ,IAAI,GAAG,KAAK;EACxC;EACI,WAAW,KAAK;AACZ,SAAK,QAAQ,OAAO,GAAG;EAC/B;EACI,QAAQ;AACJ,SAAK,QAAQ,MAAK;EAC1B;AACA;;;ACtBA,IAAMC,UAAS,IAAI,cAAc,kBAAkB;AACvC,IAAC,8BAA8B,MAAM;AAC7C,MAAI;AAEA,QAAI,OAAO,WAAW,eAAe,OAAO,cAAc;AACtD,aAAO,OAAO;IAC1B;EACA,SACW,GAAG;AAEN,IAAAA,QAAO,KAAK,gEAAgE;EACpF;AAEI,SAAO,IAAI,gBAAe;AAC9B;AAKY,IAAC,gCAAgC,MAAM;AAC/C,MAAI;AAEA,QAAI,OAAO,WAAW,eAAe,OAAO,gBAAgB;AAExD,aAAO,eAAe,QAAQ,MAAM;AACpC,aAAO,OAAO;IAC1B;AACQ,UAAM,IAAI,MAAM,+BAA+B;EACvD,SACW,GAAG;AAEN,IAAAA,QAAO,KAAK,kEAAkE;AAC9E,WAAO,IAAI,gBAAe;EAClC;AACA;;;ACnCO,IAAM,iBAAN,cAA6B,gBAAgB;EAChD,cAAc;AACV,UAAM,4BAA2B,CAAE;EAC3C;AACA;;;ACJO,IAAM,iBAAN,cAA6B,gBAAgB;EAChD,cAAc;AACV,UAAM,8BAA6B,CAAE;EAC7C;AACA;;;ACLO,IAAM,sBAAN,MAA0B;EAC7B,YAAY,SAAS;AACjB,SAAK,WAAW;EACxB;EACI,IAAI,UAAU;AACV,QAAI,CAAC,KAAK;AACN,YAAM,IAAI,0BAAyB;AACvC,WAAO,KAAK;EACpB;;;;;;;EAOI,QAAQ,KAAK,OAAO;AAChB,SAAK,QAAQ,QAAQ,KAAK,KAAK;EACvC;;;;;;;EAOI,QAAQ,KAAK;AACT,WAAO,KAAK,QAAQ,QAAQ,GAAG;EACvC;;;;;;EAMI,WAAW,KAAK;AACZ,SAAK,QAAQ,WAAW,GAAG;EACnC;;;;;EAKI,QAAQ;AACJ,SAAK,QAAQ,MAAK;EAC1B;AACA;;;ACzCO,IAAM,qBAAN,cAAiC,oBAAoB;EACxD,cAAc;AACV,UAAM,8BAA6B,CAAE;EAC7C;AACA;;;ACTA,SAAS,OAAQ,QAAQ;AACvB,WAAS,IAAI,GAAG,IAAI,UAAU,QAAQ,KAAK;AACzC,QAAI,SAAS,UAAU,CAAC;AACxB,aAAS,OAAO,QAAQ;AACtB,aAAO,GAAG,IAAI,OAAO,GAAG;AAAA,IAC1B;AAAA,EACF;AACA,SAAO;AACT;AAIA,IAAI,mBAAmB;AAAA,EACrB,MAAM,SAAU,OAAO;AACrB,QAAI,MAAM,CAAC,MAAM,KAAK;AACpB,cAAQ,MAAM,MAAM,GAAG,EAAE;AAAA,IAC3B;AACA,WAAO,MAAM,QAAQ,oBAAoB,kBAAkB;AAAA,EAC7D;AAAA,EACA,OAAO,SAAU,OAAO;AACtB,WAAO,mBAAmB,KAAK,EAAE;AAAA,MAC/B;AAAA,MACA;AAAA,IACF;AAAA,EACF;AACF;AAKA,SAAS,KAAM,WAAW,mBAAmB;AAC3C,WAAS,IAAKC,OAAM,OAAO,YAAY;AACrC,QAAI,OAAO,aAAa,aAAa;AACnC;AAAA,IACF;AAEA,iBAAa,OAAO,CAAC,GAAG,mBAAmB,UAAU;AAErD,QAAI,OAAO,WAAW,YAAY,UAAU;AAC1C,iBAAW,UAAU,IAAI,KAAK,KAAK,IAAI,IAAI,WAAW,UAAU,KAAK;AAAA,IACvE;AACA,QAAI,WAAW,SAAS;AACtB,iBAAW,UAAU,WAAW,QAAQ,YAAY;AAAA,IACtD;AAEA,IAAAA,QAAO,mBAAmBA,KAAI,EAC3B,QAAQ,wBAAwB,kBAAkB,EAClD,QAAQ,SAAS,MAAM;AAE1B,QAAI,wBAAwB;AAC5B,aAAS,iBAAiB,YAAY;AACpC,UAAI,CAAC,WAAW,aAAa,GAAG;AAC9B;AAAA,MACF;AAEA,+BAAyB,OAAO;AAEhC,UAAI,WAAW,aAAa,MAAM,MAAM;AACtC;AAAA,MACF;AASA,+BAAyB,MAAM,WAAW,aAAa,EAAE,MAAM,GAAG,EAAE,CAAC;AAAA,IACvE;AAEA,WAAQ,SAAS,SACfA,QAAO,MAAM,UAAU,MAAM,OAAOA,KAAI,IAAI;AAAA,EAChD;AAEA,WAASC,KAAKD,OAAM;AAClB,QAAI,OAAO,aAAa,eAAgB,UAAU,UAAU,CAACA,OAAO;AAClE;AAAA,IACF;AAIA,QAAI,UAAU,SAAS,SAAS,SAAS,OAAO,MAAM,IAAI,IAAI,CAAC;AAC/D,QAAI,MAAM,CAAC;AACX,aAAS,IAAI,GAAG,IAAI,QAAQ,QAAQ,KAAK;AACvC,UAAI,QAAQ,QAAQ,CAAC,EAAE,MAAM,GAAG;AAChC,UAAI,QAAQ,MAAM,MAAM,CAAC,EAAE,KAAK,GAAG;AAEnC,UAAI;AACF,YAAI,QAAQ,mBAAmB,MAAM,CAAC,CAAC;AACvC,YAAI,KAAK,IAAI,UAAU,KAAK,OAAO,KAAK;AAExC,YAAIA,UAAS,OAAO;AAClB;AAAA,QACF;AAAA,MACF,SAAS,GAAG;AAAA,MAAC;AAAA,IACf;AAEA,WAAOA,QAAO,IAAIA,KAAI,IAAI;AAAA,EAC5B;AAEA,SAAO,OAAO;AAAA,IACZ;AAAA,MACE;AAAA,MACA,KAAAC;AAAA,MACA,QAAQ,SAAUD,OAAM,YAAY;AAClC;AAAA,UACEA;AAAA,UACA;AAAA,UACA,OAAO,CAAC,GAAG,YAAY;AAAA,YACrB,SAAS;AAAA,UACX,CAAC;AAAA,QACH;AAAA,MACF;AAAA,MACA,gBAAgB,SAAU,YAAY;AACpC,eAAO,KAAK,KAAK,WAAW,OAAO,CAAC,GAAG,KAAK,YAAY,UAAU,CAAC;AAAA,MACrE;AAAA,MACA,eAAe,SAAUE,YAAW;AAClC,eAAO,KAAK,OAAO,CAAC,GAAG,KAAK,WAAWA,UAAS,GAAG,KAAK,UAAU;AAAA,MACpE;AAAA,IACF;AAAA,IACA;AAAA,MACE,YAAY,EAAE,OAAO,OAAO,OAAO,iBAAiB,EAAE;AAAA,MACtD,WAAW,EAAE,OAAO,OAAO,OAAO,SAAS,EAAE;AAAA,IAC/C;AAAA,EACF;AACF;AAEA,IAAI,MAAM,KAAK,kBAAkB,EAAE,MAAM,IAAI,CAAC;;;AC/HvC,IAAM,gBAAN,MAAoB;EACvB,YAAY,OAAO,CAAA,GAAI;AACnB,UAAM,EAAE,MAAM,QAAQ,SAAS,UAAU,OAAM,IAAK;AACpD,SAAK,SAAS;AACd,SAAK,OAAO,QAAQ;AACpB,SAAK,UAAU,OAAO,UAAU,eAAe,KAAK,MAAM,SAAS,IAC7D,UACA;AACN,SAAK,SAAS,OAAO,UAAU,eAAe,KAAK,MAAM,QAAQ,IAC3D,SACA;AACN,QAAI,OAAO,UAAU,eAAe,KAAK,MAAM,UAAU,GAAG;AACxD,UAAI,CAAC,YAAY,CAAC,CAAC,UAAU,OAAO,MAAM,EAAE,SAAS,QAAQ,GAAG;AAC5D,cAAM,IAAI,MAAM,wEAAwE;MACxG;AACY,UAAI,aAAa,UAAU,CAAC,KAAK,QAAQ;AACrC,cAAM,IAAI,MAAM,2EAA2E;MAC3G;AACY,WAAK,WAAW;IAC5B;EACA;EACI,MAAM,QAAQ,KAAK,OAAO;AACtB,QAAS,IAAI,KAAK,OAAO,KAAK,QAAO,CAAE;EAC/C;EACI,MAAM,QAAQ,KAAK;AACf,UAAM,OAAO,IAAS,IAAI,GAAG;AAC7B,WAAO,QAAQ;EACvB;EACI,MAAM,WAAW,KAAK;AAClB,QAAS,OAAO,KAAK,KAAK,QAAO,CAAE;EAC3C;EACI,MAAM,QAAQ;AACV,UAAM,SAAS,IAAS,IAAG;AAC3B,UAAM,WAAW,OAAO,KAAK,MAAM,EAAE,IAAI,SAAO,KAAK,WAAW,GAAG,CAAC;AACpE,UAAM,QAAQ,IAAI,QAAQ;EAClC;EACI,UAAU;AACN,WAAO;MACH,MAAM,KAAK;MACX,SAAS,KAAK;MACd,QAAQ,KAAK;MACb,QAAQ,KAAK;MACb,GAAI,KAAK,YAAY,EAAE,UAAU,KAAK,SAAQ;IAC1D;EACA;AACA;;;ACxCY,IAAC,iBAAiB,IAAI,eAAc;AACpC,IAAC,iBAAiB,IAAI,eAAc;AACpC,IAAC,qBAAqB,IAAI,mBAAkB;AAC5C,IAAC,wBAAwB,IAAI,gBAAgB,IAAI,gBAAe,CAAE;;;ACNlE,IAACC,iBAAgB;EACzB,WAAW;EACX,iBAAiB;EACjB,aAAa;EACb,YAAY;EACZ,iBAAiB;EACjB,kBAAkB;AACtB;AACY,IAAC,iBAAiB;;;ACNvB,SAAS,cAAc,KAAK;AAC/B,MAAI,MAAM;AACV,QAAM,IAAI;AACV,WAAS,IAAI,IAAI,QAAQ,KAAK,GAAG,KAAK,GAAG;AACrC,UAAM,WAAW,IAAI,WAAW,CAAC;AACjC,QAAI,WAAW,OAAQ,YAAY,MAAO;AACtC,aAAO;IACnB,WACiB,WAAW,QAAS,YAAY,OAAQ;AAC7C,aAAO;IACnB;AAEQ,QAAI,YAAY,SAAU,YAAY,OAAQ;AAC1C,WAAK;IACjB;EACA;AACI,SAAO;AACX;AAIO,SAAS,iBAAiB;AAC7B,QAAM,cAAc,oBAAI,KAAI;AAC5B,SAAO,YAAY,QAAO;AAC9B;AAUY,IAAC,oBAAoB,CAAC,cAAc,GAAG,SAAS,GAAG,cAAc;;;ACtCnE,IAAC;CACV,SAAUC,iBAAgB;AACvB,EAAAA,gBAAe,aAAa,IAAI;AAChC,EAAAA,gBAAe,cAAc,IAAI;AACjC,EAAAA,gBAAe,kBAAkB,IAAI;AACzC,GAAG,mBAAmB,iBAAiB,CAAA,EAAG;AAC1C,IAAM,gBAAgB;EAClB,CAAC,eAAe,WAAW,GAAG;IAC1B,SAAS;EACjB;EACI,CAAC,eAAe,YAAY,GAAG;IAC3B,SAAS;EACjB;EACI,CAAC,eAAe,gBAAgB,GAAG;IAC/B,SAAS;EACjB;AACA;AACY,IAACC,UAAS,wBAAwB,aAAa;;;ACd3D,IAAMC,UAAS,IAAI,cAAc,cAAc;AAKxC,IAAM,qBAAN,MAAyB;;;;;;EAM5B,YAAY,EAAE,QAAAC,SAAQ,gBAAe,GAAK;AACtC,SAAK,SAAS;MACV,GAAGC;MACH,GAAGD;IACf;AACQ,SAAK,kBAAkB;AACvB,SAAK,eAAc;EAC3B;EACI,gBAAgB;AACZ,WAAO;EACf;;;;;;;;EAQI,UAAUA,SAAQ;AACd,QAAIA,SAAQ;AACR,UAAIA,QAAO,WAAW;AAClB,QAAAD,QAAO,KAAK,mEAAmE;MAC/F;AACY,WAAK,SAAS;QACV,GAAG,KAAK;QACR,GAAGC;MACnB;IACA;AACQ,SAAK,eAAc;AACnB,WAAO,KAAK;EACpB;;;;;EAKI,MAAM,sBAAsB;AACxB,QAAI,OAAO,MAAM,KAAK,WAAU,EAAG,QAAQ,kBAAkB,KAAK,OAAO,SAAS,CAAC;AACnF,QAAI,CAAC,MAAM;AACP,YAAM,KAAK,WAAU,EAAG,QAAQ,kBAAkB,KAAK,OAAO,SAAS,GAAG,GAAG;AAC7E,aAAO;IACnB;AACQ,WAAO,OAAO,IAAI;EAC1B;;;;;;;;;;;;;;;;;;;EAmBI,MAAM,QAAQ,KAAK,OAAO,SAAS;AAC/B,IAAAD,QAAO,MAAM,oBAAoB,GAAG,cAAc,KAAK,kBAAkB,OAAO,EAAE;AAClF,QAAI,CAAC,OAAO,QAAQ,gBAAgB;AAChC,MAAAA,QAAO,KAAK,sDAAsD,cAAc,GAAG;AACnF;IACZ;AACQ,QAAI,OAAO,UAAU,aAAa;AAC9B,MAAAA,QAAO,KAAK,4CAA4C;AACxD;IACZ;AACQ,UAAM,mBAAmB;MACrB,UAAU,SAAS,aAAa,SAC1B,QAAQ,WACR,KAAK,OAAO;MAClB,SAAS,SAAS,YAAY,SACxB,QAAQ,UACR,KAAK,OAAO,aAAa,eAAc;IACzD;AACQ,QAAI,iBAAiB,WAAW,KAAK,iBAAiB,WAAW,GAAG;AAChE,MAAAA,QAAO,KAAK,+EAA+E;AAC3F;IACZ;AACQ,UAAM,cAAc,GAAG,KAAK,OAAO,SAAS,GAAG,GAAG;AAClD,UAAM,OAAO,KAAK,cAAc,aAAa,OAAO,gBAAgB;AAEpE,QAAI,KAAK,WAAW,KAAK,OAAO,aAAa;AACzC,MAAAA,QAAO,KAAK,kBAAkB,GAAG,yCAAyC;AAC1E;IACZ;AACQ,QAAI;AAEA,YAAM,MAAM,MAAM,KAAK,WAAU,EAAG,QAAQ,WAAW;AACvD,UAAI,KAAK;AACL,cAAM,KAAK,gBAAgB,aAAa,KAAK,MAAM,GAAG,EAAE,QAAQ;MAChF;AAEY,UAAI,MAAM,KAAK,YAAY,KAAK,QAAQ,GAAG;AACvC,cAAM,YAAY,MAAM,KAAK,gCAA+B;AAC5D,YAAI,MAAM,KAAK,YAAY,KAAK,QAAQ,GAAG;AACvC,gBAAM,YAAY,MAAM,KAAK,UAAU,KAAK,QAAQ;AACpD,gBAAM,KAAK,YAAY,WAAW,SAAS;QAC/D;MACA;AAEY,aAAO,KAAK,aAAa,aAAa,IAAI;IACtD,SACe,GAAG;AACN,MAAAA,QAAO,KAAK,mBAAmB,CAAC,EAAE;IAC9C;EACA;;;;;;;;;;;;;;;;EAgBI,MAAM,QAAQ,KAAK,SAAS;AACxB,IAAAA,QAAO,MAAM,oBAAoB,GAAG,iBAAiB,OAAO,EAAE;AAC9D,QAAI;AACJ,QAAI,CAAC,OAAO,QAAQ,gBAAgB;AAChC,MAAAA,QAAO,KAAK,sDAAsD,cAAc,GAAG;AACnF,aAAO;IACnB;AACQ,UAAM,cAAc,GAAG,KAAK,OAAO,SAAS,GAAG,GAAG;AAClD,QAAI;AACA,eAAS,MAAM,KAAK,WAAU,EAAG,QAAQ,WAAW;AACpD,UAAI,UAAU,MAAM;AAChB,YAAI,MAAM,KAAK,UAAU,WAAW,GAAG;AAEnC,gBAAM,KAAK,gBAAgB,aAAa,KAAK,MAAM,MAAM,EAAE,QAAQ;QACvF,OACqB;AAED,gBAAM,OAAO,MAAM,KAAK,kBAAkB,KAAK,MAAM,MAAM,GAAG,WAAW;AACzE,iBAAO,KAAK;QAChC;MACA;AACY,UAAI,SAAS,UAAU;AACnB,cAAM,MAAM,QAAQ,SAAQ;AAC5B,YAAI,QAAQ,MAAM;AACd,gBAAM,KAAK,QAAQ,KAAK,KAAK,OAAO;QACxD;AACgB,eAAO;MACvB;AACY,aAAO;IACnB,SACe,GAAG;AACN,MAAAA,QAAO,KAAK,mBAAmB,CAAC,EAAE;AAClC,aAAO;IACnB;EACA;;;;;;;;EAQI,MAAM,WAAW,KAAK;AAClB,IAAAA,QAAO,MAAM,uBAAuB,GAAG,EAAE;AACzC,QAAI,CAAC,OAAO,QAAQ,gBAAgB;AAChC,MAAAA,QAAO,KAAK,sDAAsD,cAAc,GAAG;AACnF;IACZ;AACQ,UAAM,cAAc,GAAG,KAAK,OAAO,SAAS,GAAG,GAAG;AAClD,QAAI;AACA,YAAM,MAAM,MAAM,KAAK,WAAU,EAAG,QAAQ,WAAW;AACvD,UAAI,KAAK;AACL,cAAM,KAAK,gBAAgB,aAAa,KAAK,MAAM,GAAG,EAAE,QAAQ;MAChF;IACA,SACe,GAAG;AACN,MAAAA,QAAO,KAAK,sBAAsB,CAAC,EAAE;IACjD;EACA;;;;;;;EAOI,MAAM,aAAa;AACf,QAAI;AACA,aAAO,MAAM,KAAK,gBAAe;IAC7C,SACe,GAAG;AACN,MAAAA,QAAO,KAAK,sBAAsB,CAAC,EAAE;AACrC,aAAO,CAAA;IACnB;EACA;EACI,aAAa;AACT,WAAO,KAAK;EACpB;;;;;;;;EAQI,MAAM,UAAU,KAAK;AACjB,UAAM,OAAO,MAAM,KAAK,WAAU,EAAG,QAAQ,GAAG;AAChD,IAAAG,QAAO,SAAS,MAAM,eAAe,aAAa,QAAQ,GAAG,EAAE;AAC/D,UAAM,OAAO,KAAK,MAAM,IAAI;AAC5B,QAAI,eAAc,KAAM,KAAK,SAAS;AAClC,aAAO;IACnB;AACQ,WAAO;EACf;;;;;;;EAOI,MAAM,gBAAgB,aAAa,MAAM;AACrC,UAAM,OAAO,MAAM,KAAK,WAAU,EAAG,QAAQ,WAAW;AACxD,IAAAA,QAAO,SAAS,MAAM,eAAe,aAAa,QAAQ,WAAW,EAAE;AACvE,UAAM,WAAW,QAAQ,KAAK,MAAM,IAAI,EAAE;AAE1C,UAAM,KAAK,2BAA2B,QAAQ;AAE9C,QAAI;AACA,YAAM,KAAK,WAAU,EAAG,WAAW,WAAW;IAC1D,SACe,iBAAiB;AAEpB,YAAM,KAAK,2BAA2B,QAAQ;AAC9C,MAAAH,QAAO,MAAM,0BAA0B,eAAe,EAAE;IACpE;EACA;;;;;;;;EAQI,cAAc,KAAK,OAAO,SAAS;AAC/B,UAAM,OAAO;MACT;MACA,MAAM;MACN,WAAW,eAAc;MACzB,aAAa,eAAc;MAC3B,UAAU,QAAQ,YAAY;MAC9B,SAAS,QAAQ,WAAW;MAC5B,MAAM,OAAO;MACb,UAAU;IACtB;AAEQ,SAAK,WAAW,cAAc,KAAK,UAAU,IAAI,CAAC;AAElD,SAAK,WAAW,cAAc,KAAK,UAAU,IAAI,CAAC;AAClD,WAAO;EACf;EACI,iBAAiB;AACb,QAAI,KAAK,OAAO,cAAc,KAAK,OAAO,iBAAiB;AACvD,MAAAA,QAAO,MAAM,qGAAqG;AAClH,WAAK,OAAO,cAAcE,eAAc;IACpD;AACQ,QAAI,KAAK,OAAO,kBAAkB,KAAK,KAAK,OAAO,kBAAkB,GAAG;AACpE,MAAAF,QAAO,MAAM,4FAA4F;AACzG,WAAK,OAAO,kBAAkBE,eAAc;IACxD;AACQ,QAAI,OAAO,KAAK,OAAO,gBAAgB,IAAI,KACvC,OAAO,KAAK,OAAO,gBAAgB,IAAI,GAAG;AAC1C,MAAAF,QAAO,MAAM,6FAA6F;AAC1G,WAAK,OAAO,mBAAmBE,eAAc;IACzD;AAEQ,UAAM,aAAa,IAAI,OAAO;AAC9B,QAAI,KAAK,OAAO,kBAAkB,YAAY;AAC1C,MAAAF,QAAO,MAAM,2FAA2F;AACxG,WAAK,OAAO,kBAAkBE,eAAc;IACxD;EACA;;;;;;EAMI,MAAM,2BAA2B,QAAQ;AACrC,UAAM,OAAO,MAAM,KAAK,oBAAmB;AAC3C,UAAM,KAAK,WAAU,EAAG,QAAQ,kBAAkB,KAAK,OAAO,SAAS,IAAI,OAAO,QAAQ,SAAQ,CAAE;EAC5G;;;;;;EAMI,MAAM,2BAA2B,QAAQ;AACrC,UAAM,OAAO,MAAM,KAAK,oBAAmB;AAC3C,UAAM,KAAK,WAAU,EAAG,QAAQ,kBAAkB,KAAK,OAAO,SAAS,IAAI,OAAO,QAAQ,SAAQ,CAAE;EAC5G;;;;;;;;;EASI,MAAM,kBAAkB,MAAM,aAAa;AACvC,SAAK,cAAc,eAAc;AACjC,UAAM,KAAK,WAAU,EAAG,QAAQ,aAAa,KAAK,UAAU,IAAI,CAAC;AACjE,WAAO;EACf;;;;;;;;EAQI,MAAM,aAAa,aAAa,MAAM;AAElC,UAAM,KAAK,2BAA2B,KAAK,QAAQ;AAEnD,QAAI;AACA,YAAM,KAAK,WAAU,EAAG,QAAQ,aAAa,KAAK,UAAU,IAAI,CAAC;IAC7E,SACe,YAAY;AAEf,YAAM,KAAK,2BAA2B,KAAK,QAAQ;AACnD,MAAAF,QAAO,MAAM,sBAAsB,UAAU,EAAE;IAC3D;EACA;;;;;;;;EAQI,MAAM,UAAU,UAAU;AACtB,UAAM,MAAM,MAAM,KAAK,oBAAmB;AAC1C,UAAM,gBAAgB,MAAM,WAAW,KAAK,OAAO;AACnD,UAAM,uBAAuB,IAAI,KAAK,OAAO,oBAAoB,KAAK,OAAO;AAC7E,WAAO,gBAAgB,sBACjB,gBACA;EACd;;;;;;;;EAQI,MAAM,YAAY,UAAU;AACxB,UAAM,MAAM,MAAM,KAAK,oBAAmB;AAC1C,WAAO,WAAW,MAAM,KAAK,OAAO;EAC5C;;;;;;;;;EASI,MAAM,YAAY,MAAM,WAAW;AAC/B,UAAM,QAAQ,CAAA;AACd,QAAI,eAAe;AACnB,eAAW,OAAO,MAAM;AACpB,YAAM,MAAM,MAAM,KAAK,WAAU,EAAG,QAAQ,GAAG;AAC/C,UAAI,OAAO,MAAM;AACb,cAAM,OAAO,KAAK,MAAM,GAAG;AAC3B,cAAM,KAAK,IAAI;MAC/B;IACA;AAGQ,UAAM,KAAK,CAAC,GAAG,MAAM;AACjB,UAAI,EAAE,WAAW,EAAE,UAAU;AACzB,eAAO;MACvB,WACqB,EAAE,WAAW,EAAE,UAAU;AAC9B,eAAO;MACvB,OACiB;AACD,YAAI,EAAE,cAAc,EAAE,aAAa;AAC/B,iBAAO;QAC3B;AAEoB,iBAAO;MAC3B;IACA,CAAS;AACD,eAAW,QAAQ,OAAO;AAEtB,YAAM,KAAK,gBAAgB,KAAK,KAAK,KAAK,QAAQ;AAClD,sBAAgB,KAAK;AACrB,UAAI,gBAAgB,GAAG;AACnB;MAChB;IACA;EACA;;;;;;;;EAQI,MAAM,kCAAkC;AACpC,UAAM,gBAAgB,CAAA;AACtB,UAAM,OAAO,MAAM,KAAK,gBAAgB;MACpC,aAAa;IACzB,CAAS;AACD,eAAW,OAAO,MAAM;AACpB,UAAI,MAAM,KAAK,UAAU,GAAG,GAAG;AAC3B,cAAM,KAAK,gBAAgB,GAAG;MAC9C,OACiB;AACD,sBAAc,KAAK,GAAG;MACtC;IACA;AACQ,WAAO;EACf;;;;;;EAMI,MAAM,QAAQ;AACV,IAAAA,QAAO,MAAM,aAAa;AAC1B,QAAI;AACA,YAAM,OAAO,MAAM,KAAK,WAAU;AAClC,iBAAW,OAAO,MAAM;AACpB,cAAM,cAAc,GAAG,KAAK,OAAO,SAAS,GAAG,GAAG;AAClD,cAAM,KAAK,WAAU,EAAG,WAAW,WAAW;MAC9D;IACA,SACe,GAAG;AACN,MAAAA,QAAO,KAAK,iBAAiB,CAAC,EAAE;IAC5C;EACA;AACA;;;ACxcA,IAAMI,UAAS,IAAI,cAAc,cAAc;AAIxC,IAAM,eAAN,MAAM,sBAAqB,mBAAmB;;;;;EAKjD,YAAYC,SAAQ;AAChB,UAAM,UAAU,4BAA2B;AAC3C,UAAM,EAAE,QAAAA,SAAQ,iBAAiB,IAAI,gBAAgB,OAAO,EAAC,CAAE;AAC/D,SAAK,UAAU;AACf,SAAK,UAAU,KAAK,QAAQ,KAAK,IAAI;AACrC,SAAK,UAAU,KAAK,QAAQ,KAAK,IAAI;AACrC,SAAK,aAAa,KAAK,WAAW,KAAK,IAAI;EACnD;EACI,MAAM,gBAAgB,SAAS;AAC3B,UAAM,EAAE,YAAW,IAAK,WAAW,CAAA;AACnC,UAAM,OAAO,CAAA;AACb,aAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,QAAQ,KAAK;AAC1C,YAAM,MAAM,KAAK,QAAQ,IAAI,CAAC;AAC9B,UAAI,eAAe,QAAQ,kBAAkB,KAAK,OAAO,SAAS,GAAG;AACjE;MAChB;AACY,UAAI,KAAK,WAAW,KAAK,OAAO,SAAS,GAAG;AACxC,aAAK,KAAK,IAAI,UAAU,KAAK,OAAO,UAAU,MAAM,CAAC;MACrE;IACA;AACQ,WAAO;EACf;;;;;;EAMI,eAAeA,SAAQ;AACnB,QAAI,CAACA,QAAO,aAAaA,QAAO,cAAcC,eAAc,WAAW;AACnE,MAAAF,QAAO,MAAM,qDAAqD;AAClE,MAAAC,QAAO,YAAY,eAAe,SAAQ;IACtD;AACQ,WAAO,IAAI,cAAaA,OAAM;EACtC;AACA;;;AChDY,IAAC,QAAQ,IAAI,aAAY;;;ACArC,IAAME,UAAS,IAAI,cAAc,MAAM;aAIhC,MAAM,KAAK;EACd,cAAc;AAIV,SAAK,WAAW;AAIhB,SAAK,QAAQ;AAIb,SAAK,QAAQ,CAAA;EACrB;;;;EAII,qBAAqB;AAEjB,QAAI,CAAC,KAAK,SACN,OAAO,WAAW,eAClB,UACA,OAAO,WAAW;AAClB,WAAK,QAAQ,OAAO,UAAU;IAC1C;AACQ,IAAAA,QAAO,MAAM,KAAK,KAAK;EAC/B;;;;;;EAMI,YAAY,MAAM;AACd,SAAK,QAAQ;EACrB;;;;;;;EAOI,IAAI,KAAK,SAAS,QAAW;AACzB,SAAK,mBAAkB;AACvB,QAAI,CAAC,KAAK,OAAO;AACb,aAAO,OAAO,WAAW,cAAc,SAAS;IAC5D;AACQ,UAAM,OAAO,KAAK;AAClB,QAAI,MAAM,KAAK,cAAc,KAAK,IAAI;AACtC,QAAI,KAAK;AACL,aAAO;IACnB;AACQ,QAAI,KAAK,QAAQ,GAAG,IAAI,GAAG;AACvB,YAAM,KAAK,cAAc,KAAK,KAAK,MAAM,GAAG,EAAE,CAAC,CAAC;IAC5D;AACQ,QAAI,KAAK;AACL,aAAO;IACnB;AACQ,WAAO,OAAO,WAAW,cAAc,SAAS;EACxD;;;;;;;;EAQI,cAAc,KAAK,UAAU,SAAS,MAAM;AACxC,QAAI,CAAC,UAAU;AACX,aAAO;IACnB;AACQ,UAAM,WAAW,KAAK,MAAM,QAAQ;AACpC,QAAI,CAAC,UAAU;AACX,aAAO;IACnB;AACQ,WAAO,SAAS,GAAG;EAC3B;;;;;;;EAOI,2BAA2B,UAAU,cAAc;AAC/C,QAAI,WAAW,KAAK,MAAM,QAAQ;AAClC,QAAI,CAAC,UAAU;AACX,iBAAW,KAAK,MAAM,QAAQ,IAAI,CAAA;IAC9C;AACQ,SAAK,MAAM,QAAQ,IAAI,EAAE,GAAG,UAAU,GAAG,aAAY;EAC7D;;;;;;;EAOI,gBAAgB,cAAc;AAC1B,WAAO,KAAK,YAAY,EAAE,QAAQ,SAAO;AACrC,WAAK,2BAA2B,KAAK,aAAa,GAAG,CAAC;IAClE,CAAS;EACT;AACA;;;ACzGU,IAAC;CACV,SAAUC,gBAAe;AACtB,EAAAA,eAAc,eAAe,IAAI;AACrC,GAAG,kBAAkB,gBAAgB,CAAA,EAAG;AACxC,IAAM,eAAe;EACjB,CAAC,cAAc,aAAa,GAAG;IAC3B,SAAS;EACjB;AACA;AACY,IAACC,UAAS,wBAAwB,YAAY;;;ACP1D,IAAMC,UAAS,IAAI,cAAc,MAAM;AACvC,IAAI,UAAU,EAAE,UAAU,KAAI;AAC9B,IAAI,QAAQ;AAIL,IAAMC,QAAN,MAAM,MAAK;;;;;;;EAOd,OAAO,UAAUC,SAAQ;AACrB,IAAAF,QAAO,MAAM,gBAAgB;AAC7B,QAAI,CAACE,SAAQ;AACT,aAAO;IACnB;AACQ,cAAU,OAAO,OAAO,CAAA,GAAI,SAASA,QAAO,QAAQA,OAAM;AAC1D,UAAK,eAAc;AACnB,WAAO;EACf;EACI,OAAO,gBAAgB;AACnB,WAAO;EACf;;;;;;EAMI,OAAO,iBAAiB;AACpB,IAAAF,QAAO,MAAM,sBAAsB;AACnC,QAAI,OAAO;AACP;IACZ;AACQ,YAAQ,IAAIG,OAAS;EAC7B;;;;;;EAMI,OAAO,YAAY,MAAM;AACrB,UAAK,YAAW;AAChB,IAAAC,QAAO,CAAC,CAAC,OAAO,cAAc,aAAa;AAC3C,UAAM,YAAY,IAAI;EAC9B;;;;;;;EAOI,OAAO,IAAI,KAAK,QAAQ;AACpB,QAAI,CAAC,MAAK,YAAW,GAAI;AACrB,aAAO,OAAO,WAAW,cAAc,MAAM;IACzD;AACQ,IAAAA,QAAO,CAAC,CAAC,OAAO,cAAc,aAAa;AAC3C,WAAO,MAAM,IAAI,KAAK,MAAM;EACpC;;;;;;;;EAQI,OAAO,2BAA2B,UAAU,cAAc;AACtD,UAAK,YAAW;AAChB,IAAAA,QAAO,CAAC,CAAC,OAAO,cAAc,aAAa;AAC3C,UAAM,2BAA2B,UAAU,YAAY;EAC/D;;;;;;;;EAQI,OAAO,gBAAgB,cAAc;AACjC,UAAK,YAAW;AAChB,IAAAA,QAAO,CAAC,CAAC,OAAO,cAAc,aAAa;AAC3C,UAAM,gBAAgB,YAAY;EAC1C;EACI,OAAO,cAAc;AACjB,QAAI,CAAC,OAAO;AACR,YAAK,eAAc;IAC/B;AACQ,WAAO;EACf;AACA;AAEAH,MAAK,eAAc;;;ACtFP,IAAC,uBAAuB,CAAC,sBAAsB,IAAI,KAAK,KAAK,IAAG,IAAK,iBAAiB;;;ACPlG,IAAM,cAAc,IAAI,KAAK;AAWjB,IAAC,gBAAgB,CAAC,yBAAyB,8BAA8B,KAAK,IAAI,qBAAqB,yBAAyB,EAAE,QAAO,IACjJ,uBAAuB,KAAK;;;ACLpB,IAAC,8BAA8B,CAAC,yBAAyB,6BAA6B;AAC9F,MAAI,cAAc,yBAAyB,wBAAwB,GAAG;AAClE,WAAO,0BAA0B,KAAK,IAAG;EACjD;AACI,SAAO;AACX;;;ACPY,IAAC,2BAA2B,CAAC,EAAE,aAAa,QAAQ,SAAS,gBAAgB,KAAI,MAAQ;AACjG,MAAI;AACJ,SAAO,CAAC,MAAMI,aAAY,eAAe,kBAAkB,SAAS;AAChE,+BAA2B,4BAA4B;AACvD,UAAM,qBAAqB;MACvB,aAAa,OAAO,gBAAgB,aAC9B,MAAM,YAAY;QAChB,cAAc,CAAC,CAACA,UAAS;MAC7C,CAAiB,IACC;MACN,aAAa,qBAAqB,wBAAwB;MAC1D,eAAe;MACf,gBAAgB;MAChB;IACZ;AACQ,UAAM,gBAAgB,MAAM,YAAY,SAAS,kBAAkB;AACnE,UAAM,WAAW,MAAM,KAAK,aAAa;AAIzC,UAAM,aAAa,cAAc,QAAQ;AACzC,QAAI,YAAY;AACZ,iCAA2B,4BAA4B,KAAK,MAAM,UAAU,GAAG,wBAAwB;IACnH;AACQ,WAAO;EACf;AACA;AACA,IAAM,gBAAgB,CAAC,EAAE,QAAO,IAAK,CAAA,MAAO,SAAS,QAAQ,SAAS,QAAQ,UAAU,YAAY;;;AClC1F,IAAC;CACV,SAAUC,6BAA4B;AACnC,EAAAA,4BAA2B,gBAAgB,IAAI;AACnD,GAAG,+BAA+B,6BAA6B,CAAA,EAAG;AACtD,IAAC,qBAAqB;EAC9B,CAAC,2BAA2B,cAAc,GAAG;IACzC,SAAS;IACT,oBAAoB;EAC5B;AACA;;;ACAY,IAAC,2BAA2B,OAAO,aAAa;AACxD,MAAI,CAAC,UAAU;AAEX;EACR;AACI,QAAM,iBAAiB,MAAMC,eAAkB,kBAAkB,QAAQ,CAAC;AAC1E,MAAI,CAAC,eAAgB;OAGhB;AACD,UAAM,WAAW,MAAM,SAAS,MAAM,KAAI;AAC1C,WAAO,kBAAkB,gBAAgB;MACrC,YAAY,SAAS;MACrB,SAAS,SAAS;MAClB,MAAM;IAClB,CAAS;EACT;AACA;AAOA,IAAM,oBAAoB,CAAC,aAAa;AACpC,MAAI;AACJ,QAAM,YAAY,IAAI,MAAM,SAAS,MAAM;IACvC,IAAI,QAAQ,MAAM,UAAU;AACxB,UAAI,SAAS,QAAQ;AAEjB,eAAO,YAAY;AACf,cAAI,CAAC,iBAAiB;AAClB,8BAAkB,OAAO,KAAI;UACrD;AACoB,cAAI;AACA,mBAAO,KAAK,MAAM,MAAM,eAAe;UAC/D,SAC2B,OAAO;AAGV,mBAAO,CAAA;UAC/B;QACA;MACA,WACqB,SAAS,QAAQ;AAEtB,eAAO,YAAY;AACf,cAAI,CAAC,iBAAiB;AAClB,8BAAkB,OAAO,KAAI;UACrD;AACoB,iBAAO;QAC3B;MACA,OACiB;AACD,eAAO,QAAQ,IAAI,QAAQ,MAAM,QAAQ;MACzD;IACA;EACA,CAAK;AACD,QAAM,gBAAgB,IAAI,MAAM,UAAU;IACtC,IAAI,QAAQ,MAAM,UAAU;AACxB,UAAI,SAAS,QAAQ;AACjB,eAAO;MACvB,OACiB;AACD,eAAO,QAAQ,IAAI,QAAQ,MAAM,QAAQ;MACzD;IACA;EACA,CAAK;AACD,SAAO;AACX;AAIA,IAAM,oBAAoB,CAAC,OAAO,aAAa;AAC3C,QAAM,eAAe,IAAI,aAAa;IAClC,MAAM,OAAO;IACb,SAAS,MAAM;IACf,iBAAiB;IACjB;EACR,CAAK;AAED,SAAO,OAAO,OAAO,cAAc,EAAE,WAAW,MAAM,UAAS,CAAE;AACrE;;;AC1FY,IAACC,UAAS,IAAI,cAAc,UAAU;;;ACK3C,SAAS,2BAA2B,SAAS,iBAAiB;AACjE,QAAM,iBAAiB,CAAC,kBAAkB,CAAC,CAAC;AAI5C,QAAM,4BAA4B,IAAI,gBAAe;AACrD,QAAM,wBAAwB,0BAA0B;AACxD,QAAM,0BAA0B,iBAAiB;AACjD,MAAI;AACJ,QAAM,MAAM,YAAY;AACpB,QAAI;AACA,YAAM,WAAW,OAAO,eAAe,OAAO,IACxC,QAAO,IACP,QAAQ,qBAAqB;AACnC,UAAI,SAAS,cAAc,KAAK;AAC5B,cAAM,MAAM,yBAAyB,QAAQ;MAC7D;AACY,aAAO;IACnB,SACe,OAAO;AACV,YAAM,cAAc,2BAA2B;AAC/C,YAAM,UAAU,eAAe,YAAY;AAC3C,UAAI,MAAM,SAAS,gBAAgB,aAAa,YAAY,MAAM;AAC9D,cAAM,gBAAgB,IAAI,cAAc;UACpC,GAAI,WAAW,EAAE,QAAO;UACxB,iBAAiB;UACjB,oBAAoB;QACxC,CAAiB;AACD,QAAAC,QAAO,MAAM,KAAK;AAClB,cAAM;MACtB;AACY,MAAAA,QAAO,MAAM,KAAK;AAClB,YAAM;IAClB;EACA;AACI,MAAI,eAAsB,GAAG;AACzB,WAAO,IAAG;EAClB,OACS;AACD,UAAMC,UAAS,CAAC,iBAAiB;AAC7B,UAAI,sBAAsB,YAAY,MAAM;AACxC;MAChB;AACY,gCAA0B,MAAM,YAAY;AAG5C,UAAI,gBAAgB,sBAAsB,WAAW,cAAc;AAC/D,sBAAc;MAC9B;IACA;AACQ,WAAO,EAAE,UAAU,IAAG,GAAI,QAAAA,QAAM;EACxC;AACA;;;AC1DY,IAAC,mCAAmC;AAEpC,IAAC,6BAA6B;AAK9B,IAAC,wBAAwB;;;ACAzB,IAAC,mBAAmB,CAAC,KAAK,mBAAmB;AACrD,QAAM,EAAE,SAAS,iBAAiB,kCAAkC,QAAQ,gBAAgB,2BAA0B,IAAM,gBAAgB,QAAQ,UAAS,GAAI,KAAK,OAAO,gBAAgB,OAAO,KAChM,CAAA;AACJ,QAAM,EAAE,SAAQ,IAAK;AACrB,QAAM,CAAA,EAAG,SAAS,MAAM,IAAI,sBAAsB,KAAK,QAAQ,KAAK,CAAA;AACpE,MAAI,YAAY,kCAAkC;AAG9C,WAAO;MACH;MACA,QAAQ,UAAU;IAC9B;EACA,WACa,YAAY,eAAe;AAGhC,WAAO;MACH,SAAS;MACT,QAAQ,UAAU;IAC9B;EACA,OACS;AACD,WAAO;MACH,SAAS;MACT,QAAQ;IACpB;EACA;AACA;;;ACpBY,IAAC,gCAAgC,CAAC,EAAE,QAAO,GAAI,uBAAuB,CAAC,QAAQ,iBAAiB,CAAC,QAAQ,WAAW,KAAK,CAAC,CAAC;;;ACd3H,IAAC,iBAAiB,CAAC,SAAS,SAAS;AAC7C,QAAM,oBAAoB,CAAA;AAC1B,aAAW,OAAO,SAAS;AACvB,sBAAkB,IAAI,YAAW,CAAE,IAAI,QAAQ,GAAG;EAC1D;AACI,MAAI,MAAM;AACN,sBAAkB,cAAc,IAAI;AACpC,QAAI,gBAAgB,UAAU;AAO1B,aAAO,kBAAkB,cAAc;IACnD;EACA;AACI,SAAO;AACX;;;ACbY,IAAC,uBAAuB,uBAAuB,sBAAsB;EAC7E;EACA;EACA;AACJ,CAAC;;;ACJW,IAACC,0BAAyB,uBAAuB,sBAAsB,CAAC,4BAA4B,sBAAsB,CAAC;;;ACS3H,IAAC,kBAAkB,OAAO,SAAS,SAAS,mBAAmB,uBAAuB;AAC9F,QAAM,EAAE,KAAK,QAAQ,SAAS,MAAM,iBAAiB,aAAa,cAAa,IAAM;AACrF,QAAM,eAAe,OACf,gBAAgB,WACZ,OACA,KAAK,UAAU,QAAQ,EAAE,IAC7B;AACN,QAAM,kBAAkB,eAAe,SAAS,IAAI;AACpD,QAAM,UAAU;IACZ;IACA,SAAS;IACT;IACA,MAAM;EACd;AACI,QAAM,cAAc;IAChB,cAAc,4BAA4B,iBAAiB,SAAS,gBAAgB,KAAK,MAAM,aAAa;IAC5G,cAAcC;IACd,4BAA4B;IAC5B;EACR;AACI,QAAM,sBAAsB,kBAAkB,SAAS,kBAAkB;AACzE,MAAI;AACJ,QAAM,cAAc,MAAM,mBAAmB,OAAO;AACpD,MAAI,uBAAuB,aAAa;AACpC,UAAM,qBAAqB,iBAAiB,GAAG;AAC/C,UAAM,iBAAiB,oBAAoB,WAAW,mBAAmB;AACzE,UAAM,gBAAgB,oBAAoB,UAAU,mBAAmB;AACvE,eAAW,MAAM,qBAAqB,SAAS;MAC3C,GAAG;MACH;MACA,QAAQ;MACR,SAAS;IACrB,CAAS;EACT,OACS;AACD,eAAW,MAAMC,wBAAuB,SAAS;MAC7C,GAAG;IACf,CAAS;EACT;AAEI,SAAO;IACH,YAAY,SAAS;IACrB,SAAS,SAAS;IAClB,MAAM,SAAS;EACvB;AACA;AACA,IAAM,8BAA8B,CAAC,kBAAkB;AACnD,QAAM,WAAW,eAAe;AAChC,MAAI,aAAa,YAAY;AACzB,WAAO,MAAM,QAAQ,QAAQ,EAAE,WAAW,MAAK,CAAE;EACzD;AACI,SAAO,gBAAgB,wBAAwB;AACnD;AACA,IAAM,qBAAqB,OAAO,YAAY;AAC1C,MAAI;AACA,UAAM,EAAE,YAAW,IAAK,MAAM,QAAQ,KAAK,iBAAgB;AAC3D,QAAI,aAAa;AACb,aAAO;IACnB;EACA,SACW,GAAG;AACN,IAAAC,QAAO,MAAM,yDAAyD;EAC9E;AACI,SAAO;AACX;;;AChEA,IAAM,iBAAiB,oBAAI,QAAO;AA+BtB,IAACC,QAAO,CAAC,SAAS,EAAE,KAAK,SAAS,gBAAe,MAAO;AAChE,QAAM,aAAa,mBAAmB,IAAI,gBAAe;AACzD,QAAM,kBAAkB,2BAA2B,YAAY;AAC3D,UAAM,WAAW,gBAAgB,SAAS;MACtC;MACA,QAAQ;MACR,GAAG;MACH,aAAa,WAAW;MACxB,eAAe;QACX,UAAU;MAC1B;IACA,GAAW,+BAA+B,SAAS,kBAAkB;AAC7D,WAAO;EACf,GAAO,UAAU;AACb,QAAM,sBAAsB,gBAAgB,QAAQ,MAAM;AACtD,mBAAe,OAAO,mBAAmB;EACjD,CAAK;AACD,SAAO;AACX;AAMY,IAAC,SAAS,CAAC,SAAS,YAAY;AACxC,QAAM,aAAa,eAAe,IAAI,OAAO;AAC7C,MAAI,YAAY;AACZ,eAAW,MAAM,OAAO;AACxB,QAAI,WAAW,WAAW,OAAO,WAAW,SAAS;AAGjD,iBAAW,OAAO,SAAS;IACvC;AACQ,WAAO;EACf;AACI,SAAO;AACX;AAIY,IAAC,+BAA+B,CAAC,SAAS,eAAe;AACjE,iBAAe,IAAI,SAAS,UAAU;AAC1C;;;ACtFY,IAACC,gBAAe;AAChB,IAAC,sBAAsB,CAAC,KAAK,KAAK,GAAG;AACrC,IAAC,4BAA4B;EACrC;EACA;AACJ;AACY,IAAC,0BAA0B;AAC7B,IAAC;CACV,SAAUC,gBAAe;AAKtB,EAAAA,eAAc,qBAAqB,IAAI;AAKvC,EAAAA,eAAc,sBAAsB,IAAI;AAKxC,EAAAA,eAAc,oBAAoB,IAAI;AAKtC,EAAAA,eAAc,WAAW,IAAI;AAK7B,EAAAA,eAAc,eAAe,IAAI;AAKjC,EAAAA,eAAc,MAAM,IAAI;AAKxB,EAAAA,eAAc,2BAA2B,IAAI;AAK7C,EAAAA,eAAc,UAAU,IAAI;AAK5B,EAAAA,eAAc,cAAc,IAAI;AAKhC,EAAAA,eAAc,WAAW,IAAI;AAK7B,EAAAA,eAAc,iBAAiB,IAAI;AAKnC,EAAAA,eAAc,eAAe,IAAI;AAKjC,EAAAA,eAAc,qBAAqB,IAAI;AAKvC,EAAAA,eAAc,mBAAmB,IAAI;AAKrC,EAAAA,eAAc,YAAY,IAAI;AAK9B,EAAAA,eAAc,gBAAgB,IAAI;AACtC,GAAG,kBAAkB,gBAAgB,CAAA,EAAG;AAC9B,IAAC;CACV,SAAUC,sBAAqB;AAC5B,EAAAA,qBAAoBA,qBAAoB,SAAS,IAAI,CAAC,IAAI;AAC1D,EAAAA,qBAAoBA,qBAAoB,WAAW,IAAI,CAAC,IAAI;AAC5D,EAAAA,qBAAoBA,qBAAoB,QAAQ,IAAI,CAAC,IAAI;AAC7D,GAAG,wBAAwB,sBAAsB,CAAA,EAAG;AAC1C,IAAC;CACV,SAAUC,gBAAe;AACtB,EAAAA,eAAcA,eAAc,QAAQ,IAAI,CAAC,IAAI;AAC7C,EAAAA,eAAcA,eAAc,OAAO,IAAI,CAAC,IAAI;AAC5C,EAAAA,eAAcA,eAAc,YAAY,IAAI,CAAC,IAAI;AACrD,GAAG,kBAAkB,gBAAgB,CAAA,EAAG;AAC5B,IAAC,+BAA+B;EACxC,QAAQ;EACR,oBAAoB;EACpB,gBAAgB;AACpB;AAIY,IAAC,0BAA0B;AAI3B,IAAC,oBAAoB;AAIrB,IAAC,6BAA6B,IAAI,KAAK;AAIvC,IAAC,uCAAuC,IAAI;AAI5C,IAAC,mCAAmC,KAAK;AAIzC,IAAC,kBAAkB,IAAI;AAIvB,IAAC,qBAAqB,KAAK;;;ACzI7B,IAAC;CACV,SAAUC,cAAa;AACpB,EAAAA,aAAY,mBAAmB,IAAI;AACnC,EAAAA,aAAY,mBAAmB,IAAI;AACnC,EAAAA,aAAY,kCAAkC,IAAI;AAClD,EAAAA,aAAY,kBAAkB,IAAI;AAClC,EAAAA,aAAY,oBAAoB,IAAI;AACxC,GAAG,gBAAgB,cAAc,CAAA,EAAG;AAE1B,IAAC;CACV,SAAUC,kBAAiB;AAIxB,EAAAA,iBAAgB,WAAW,IAAI;AAI/B,EAAAA,iBAAgB,yBAAyB,IAAI;AAI7C,EAAAA,iBAAgB,qBAAqB,IAAI;AAIzC,EAAAA,iBAAgB,mCAAmC,IAAI;AAIvD,EAAAA,iBAAgB,YAAY,IAAI;AAIhC,EAAAA,iBAAgB,4BAA4B,IAAI;AAIhD,EAAAA,iBAAgB,cAAc,IAAI;AAIlC,EAAAA,iBAAgB,2BAA2B,IAAI;AACnD,GAAG,oBAAoB,kBAAkB,CAAA,EAAG;;;ACxChC,IAAC,sBAAsB,MAAM,IAAI,aAAY,EAAG,eAAc;;;ACE9D,IAAC,oBAAoB;EAC7B,mBAAmB,EAAE,gBAAgB,YAAW;EAChD,YAAY,EAAE,gBAAgB,UAAS;EACvC,wBAAwB,EAAE,iBAAiB,YAAW;EACtD,mBAAmB;IACf,yBAAyB;IACzB,iBAAiB;EACzB;EACI,oBAAoB,EAAE,yBAAyB,eAAc;EAC7D,oBAAoB;IAChB,yBAAyB;IACzB,iBAAiB;EACzB;EACI,QAAQ,EAAE,iBAAiB,eAAc;EACzC,QAAQ,EAAE,cAAc,YAAW;EACnC,SAAS,EAAE,cAAc,eAAc;AAC3C;AACO,IAAM,yBAAN,MAA6B;EAChC,cAAc;AACV,SAAK,iCAAiC;AACtC,SAAK,yBAAyB;MAC1B,cAAc;MACd,iBAAiB;MACjB,yBAAyB;MACzB,gBAAgB;IAC5B;AAEQ,SAAK,mCAAmC,oBAAmB,EAAG,UAAU,CAAC,EAAE,OAAM,MAAO;AACpF,WAAK,OAAO,SAAS,kBAAkB,SAAS,kBAAkB,OAAO;AACzE,WAAK,kCAAkC,YAAW;IAC9D,CAAS;AACD,SAAK,mCACD,IAAI,WAAW,6BAA2B;AACtC,8BAAwB,KAAK,KAAK,sBAAsB;AACxD,WAAK,iCAAiC;IACtD,CAAa;EACb;;;;EAII,0BAA0B;AAEtB,SAAK,kCAAkC,YAAW;AAElD,QAAI,KAAK,mCAAmC,QAAW;AACnD,WAAK,iCAAiC,oBAAmB,EAAG,UAAU,CAAC,EAAE,OAAM,MAAO;AAClF,aAAK,OAAO,SAAS,kBAAkB,SAAS,kBAAkB,OAAO;MACzF,CAAa;IACb;EACA;;;;EAII,2BAA2B;AACvB,SAAK,gCAAgC,YAAW;AAChD,SAAK,iCAAiC;EAC9C;;;;;;EAMI,IAAI,4BAA4B;AAC5B,QAAI;AAKJ,WAAO,KAAK,iCACP,KAAK,IAAI,WAAS;AACnB,aAAO,KAAK,2BAA2B,KAAK;IACxD,CAAS,CAAC,EACG,KAAK,OAAO,aAAW;AACxB,YAAM,YAAY,YAAY;AAC9B,iBAAW;AACX,aAAO;IACnB,CAAS,CAAC;EACV;;;;EAII,OAAO,eAAe;AAElB,QAAI,cAAc,4BAA4B,aAAa;AACvD,WAAK,wBAAuB;IACxC,WACiB,cAAc,4BAA4B,gBAAgB;AAC/D,WAAK,yBAAwB;IACzC;AAEQ,UAAM,kBAAkB;MACpB,GAAG,KAAK;MACR,GAAG;IACf;AACQ,SAAK,yBAAyB,EAAE,GAAG,gBAAe;AAClD,SAAK,gCAAgC,KAAK,KAAK,sBAAsB;EAC7E;;;;EAII,2BAA2B,EAAE,iBAAiB,cAAc,yBAAyB,eAAc,GAAK;AACpG,QAAI,oBAAoB,eAAe,iBAAiB;AACpD,aAAO,gBAAgB;AAC3B,QAAI,oBAAoB,eACpB,4BAA4B;AAC5B,aAAO,gBAAgB;AAC3B,QAAI,oBAAoB,kBACpB,4BAA4B,eAC5B,iBAAiB;AACjB,aAAO,gBAAgB;AAC3B,QAAI,oBAAoB,kBACpB,4BAA4B;AAC5B,aAAO,gBAAgB;AAC3B,QAAI,oBAAoB,eAAe,mBAAmB;AACtD,aAAO,gBAAgB;AAE3B,QAAI,oBAAoB;AACpB,aAAO,gBAAgB;AAC3B,QAAI,oBAAoB;AACpB,aAAO,gBAAgB;AAC3B,WAAO,gBAAgB;EAC/B;AACA;;;AC9HU,IAAC;CACV,SAAUC,iBAAgB;AACvB,EAAAA,gBAAe,iBAAiB,IAAI;AACpC,EAAAA,gBAAe,gBAAgB,IAAI;AACvC,GAAG,mBAAmB,iBAAiB,CAAA,EAAG;AAOnC,IAAM,sBAAN,MAA0B;EAC7B,cAAc;AACV,SAAK,qBAAqB,CAAA;EAClC;;;;EAII,YAAY,mBAAmB;AAC3B,SAAK,mBAAmB,KAAK,iBAAiB;EACtD;;;;EAII,OAAO,OAAO;AACV,QAAI,UAAU,eAAe,iBAAiB;AAE1C,UAAI,KAAK,0BAA0B,UAC/B,KAAK,wBAAwB,QAAW;AACxC,aAAK,wBAAwB,WAAW,MAAM;AAE1C,eAAK,kBAAiB;AAEtB,eAAK,sBAAsB,YAAY,MAAM;AACzC,iBAAK,kBAAiB;UAC9C,GAAuB,kBAAkB;QACzC,GAAmB,eAAe;MAClC;IACA;AACQ,QAAI,UAAU,eAAe,gBAAgB;AACzC,UAAI,KAAK,qBAAqB;AAC1B,sBAAc,KAAK,mBAAmB;AACtC,aAAK,sBAAsB;MAC3C;AACY,UAAI,KAAK,uBAAuB;AAC5B,qBAAa,KAAK,qBAAqB;AACvC,aAAK,wBAAwB;MAC7C;IACA;EACA;;;;EAII,QAAQ;AACJ,SAAK,mBAAmB,QAAQ,uBAAqB;AACjD,wBAAkB,WAAQ;IACtC,CAAS;EACT;EACI,oBAAoB;AAChB,SAAK,mBAAmB,QAAQ,uBAAqB;AACjD,wBAAkB,OAAI;IAClC,CAAS;EACT;AACA;;;AC7DA,IAAM,WAAW;AACjB,IAAM,wBAAwB;AAC9B,IAAM,qBAAqB;AAC3B,IAAM,mBAAmB;AACb,IAAC,iBAAiB,CAAC,QAAQ;AACnC,SAAO,IAAI,MAAM,qBAAqB,MAAM;AAChD;AACA,IAAM,gBAAgB,CAAC,QAAQ,IAAI,MAAM,kBAAkB,MAAM;AACrD,IAAC,yBAAyB,CAAC,2BAA2B;AAC9D,MAAI,mBAAmB,0BAA0B;AACjD,MAAI,cAAc,gBAAgB,GAAG;AACjC,uBAAmB,iBACd,OAAO,gBAAgB,EACvB,QAAQ,YAAY,WAAW,EAC/B,QAAQ,eAAe,sBAAsB;EAC1D,WACa,eAAe,gBAAgB,GAAG;AACvC,uBAAmB,iBAAiB,OAAO,gBAAgB;EACnE,OACS;AACD,uBAAmB,iBACd,QAAQ,eAAe,sBAAsB,EAC7C,QAAQ,aAAa,UAAU,EAC/B,QAAQ,YAAY,WAAW;EAC5C;AACI,qBAAmB,iBACd,QAAQ,YAAY,QAAQ,EAC5B,QAAQ,WAAW,QAAQ;AAChC,SAAO,IAAI,WAAW,gBAAgB;AAC1C;AAIA,IAAM,wBAAwB,CAAC,YAAY;AACvC,MAAI,CAAC,SAAS;AACV,WAAO,CAAA;EACf;AACI,MAAI,mBAAmB,SAAS;AAC5B,UAAM,EAAE,eAAe,GAAG,GAAG,eAAc,IAAK;AAChD,WAAO;EACf;AACI,SAAO;AACX;AAMY,IAAC,+BAA+B,CAAC,YAAY;AACrD,QAAM,iBAAiB,sBAAsB,OAAO;AACpD,QAAM,SAAS,IAAI,uBAAsB;AACzC,SAAO,QAAQ,cAAc,EAAE,QAAQ,CAAC,CAAC,GAAG,CAAC,MAAM;AAC/C,WAAO,OAAO,GAAG,CAAC;EAC1B,CAAK;AACD,SAAO;AACX;AAQY,IAAC,6BAA6B,CAAC,wBAAwB,cAAc;AAC7E,QAAM,sBAAsB,uBAAuB,sBAAsB;AAEzE,QAAM,iBAAiB,IAAI,uBAAuB,oBAAoB,MAAM;AAC5E,aAAW,CAAC,GAAG,CAAC,KAAK,UAAU,QAAO,GAAI;AACtC,mBAAe,OAAO,GAAG,CAAC;EAClC;AACI,sBAAoB,SAAS,eAAe,SAAQ;AACpD,SAAO,oBAAoB,SAAQ;AACvC;AAEY,IAAC,+BAA+B,OAAO,YAAY;AAC3D,QAAM,EAAE,wBAAwB,OAAO,uBAAuB,OAAO,CAAA,IAAK,oBAAoB,CAAA,GAAI,UAAS,IAAM;AACjH,MAAI,0BAA0B,CAAA;AAC9B,QAAM,wBAAwB,MAAM,qBAAoB;AACxD,MAAI,OAAO,sBAAsB,YAAY;AACzC,UAAM,iBAAiB;MACnB,KAAK,0BAA0B;MAC/B,aAAa,SAAS;IAClC;AACQ,8BAA0B,MAAM,kBAAkB,cAAc;EACxE,OACS;AACD,8BAA0B;EAClC;AAEI,MAAI,WAAW;AACX,8BAA0B;MACtB,GAAG;MACH,eAAe;IAC3B;EACA;AACI,SAAO;IACH;IACA,sBAAsB;EAC9B;AACA;;;AChGA,IAAMC,WAAS,IAAI,cAAc,iCAAiC;AAClE,IAAM,qBAAqB,OAAO,EAAE,KAAI,MAAO;AAC3C,QAAM,UAAU,MAAMC,kBAAgB;AACtC,SAAO;IACH,eAAe,SAAS,QAAQ,aAAa,SAAQ;IACrD;EACR;AACA;AACA,IAAM,0BAA0B,OAAO,EAAE,QAAQ,KAAI,MAAQ;AACzD,QAAM,KAAK,oBAAI,KAAI;AACnB,QAAM,QAAQ,GAAG,YAAW,EAAG,QAAQ,iBAAiB,EAAE;AAC1D,SAAO;IACH;IACA,cAAc;IACd,aAAa;EACrB;AACA;AACA,IAAM,uBAAuB,OAAO,EAAE,SAAS,cAAc,wBAAwB,OAAM,MAAQ;AAC/F,QAAM,eAAe;IACjB;IACA,SAAS;EACjB;AACI,QAAM,SAAS,MAAMA,kBAAgB,GAAI;AACzC,QAAM,UAAU;IACZ,KAAK,GAAG,sBAAsB,GAAG,YAAY;IAC7C,MAAM;IACN,QAAQ;IACR,SAAS,EAAE,GAAG,6BAA4B;EAClD;AACI,QAAM,eAAe,YAAY;IAC7B,SAAS,QAAQ;IACjB,QAAQ,QAAQ;IAChB,KAAK,IAAI,WAAW,QAAQ,GAAG;IAC/B,MAAM,QAAQ;EACtB,GAAO;IACC,aAAa;IACb,eAAe,aAAa;IAC5B,gBAAgB,aAAa;EACrC,CAAK;AACD,SAAO,aAAa;AACxB;AACA,IAAM,mBAAmB,OAAO,EAAE,MAAM,wBAAuB,MAAQ;AAMnE,MAAI,CAAC,yBAAyB,eAAe;AACzC,UAAM,IAAI,MAAM,yBAAyB;EACjD;AACI,SAAO;IACH,eAAe,wBAAwB;IACvC;EACR;AACA;AACY,IAAC,6BAA6B,OAAO,EAAE,QAAQ,oBAAoB,cAAc,wBAAwB,QAAQ,yBAAyB,QAAO,MAAQ;AACjK,QAAM,gBAAgB;IAClB,QAAQ;IACR,KAAK;IACL,MAAM;IACN,UAAU;IACV,QAAQ;IACR,MAAM;EACd;AACI,MAAI,CAAC,sBAAsB,CAAC,cAAc,kBAAkB,GAAG;AAC3D,IAAAD,SAAO,MAAM,uBAAuB,kBAAkB,gBAAgB;AACtE,WAAO;EACf,OACS;AACD,UAAM,UAAU,cAAc,kBAAkB;AAChD,UAAM,OAAO,yBACP,IAAI,WAAW,sBAAsB,EAAE,OACvC;AACN,UAAM,iBAAiB,uBAAuB,WAAW,SAAS;AAClE,IAAAA,SAAO,MAAM,uBAAuB,KAAK,UAAU,kBAAkB,CAAC,EAAE;AACxE,UAAM,SAAS,MAAM,QAAQ;MACzB;MACA;MACA;MACA,QAAQ;MACR;MACA;MACA;IACZ,CAAS;AACD,WAAO;EACf;AACA;;;AChFA,IAAM,mBAAmB,CAAC,YAAY;AAClC,MAAI,SAAS,OAAO,SAAS,UAAU,cAAc;AACzD;AACO,IAAM,uBAAN,MAA2B;EAC9B,YAAY,MAAM;AACd,SAAK,0BAA0B,oBAAI,IAAG;AACtC,SAAK,uBAAuB;AAC5B,SAAK,eAAe,cAAc;AAClC,SAAK,qBAAqB,KAAK,IAAG;AAClC,SAAK,eAAe,CAAA;AACpB,SAAK,yBAAyB,IAAI,uBAAsB;AACxD,SAAK,sBAAsB,IAAI,oBAAmB;AAOlD,SAAK,uBAAuB,OAAO,gBAAgB,gBAAgB;AAC/D,WAAK,OAAO,MAAM,wCAAwC,cAAc,EAAE;AAC1E,UAAI;AACA,cAAM,KAAK,gBAAgB,gBAAgB,WAAW;AACtD,cAAM,KAAK,mBAAkB;MAC7C,SACmB,KAAK;AACR,cAAM,EAAE,WAAW,UAAS,IAAK;AACjC,YAAI,oBAAoB,SAAS,SAAS;;QAGtC,0BAA0B,SAAS,SAAS,GAAG;AAC/C,gBAAM,IAAI,kBAAkB,SAAS;QACzD,WACyB,WAAW;AAChB,gBAAM,IAAI,MAAM,SAAS;QAC7C,OACqB;AACD,gBAAM;QAC1B;MACA;IACA;AACQ,SAAK,SAAS,IAAI,cAAc,KAAK,YAAY;AACjD,SAAK,iBAAiB,KAAK;AAC3B,SAAK,eAAe,KAAK;AACzB,SAAK,qCACD,KAAK,gCAA+B;EAChD;;;;EAII,QAAQ;AAEJ,SAAK,eAAe,cAAc;AAClC,SAAK,uBAAuB,OAAO,kBAAkB,iBAAiB;AAEtE,SAAK,mCAAmC,YAAW;AAEnD,SAAK,oBAAoB,MAAK;AAC9B,WAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACpC,UAAI,KAAK,mBAAmB;AACxB,aAAK,kBAAkB,UAAU,CAAC,MAAM;AACpC,eAAK,aAAY;AACjB,eAAK,0BAA0B,oBAAI,IAAG;AACtC,eAAK,oBAAoB;AACzB,kBAAO;QAC3B;AACgB,aAAK,kBAAkB,UAAU,CAAC,QAAQ;AACtC,iBAAO,GAAG;QAC9B;AACgB,aAAK,kBAAkB,MAAK;MAC5C,OACiB;AACD,gBAAO;MACvB;IACA,CAAS;EACT;EACI,UAAU,SAAS,wBAAwB;AACvC,WAAO,IAAI,WAAW,cAAY;AAC9B,UAAI,CAAC,SAAS,wBAAwB;AAClC,iBAAS,MAAM;UACX,QAAQ;YACJ;cACI,GAAG,IAAI,aAAa,mDAAmD;YACnG;UACA;QACA,CAAiB;AACD,iBAAS,SAAQ;AACjB;MAChB;AACY,UAAI,8BAA8B;AAClC,YAAM,iBAAiB,YAAW;AAClC,YAAM,oBAAoB,MAAM;AAC5B,YAAI,CAAC,6BAA6B;AAC9B,wCAA8B;AAC9B,eAAK,yCAAyC;YAC1C;YACA;YACA;YACA;UACxB,CAAqB,EACI,MAAM,SAAO;AACd,iBAAK,OAAO,MAAM,GAAG,YAAY,gCAAgC,KAAK,GAAG,EAAE;AAC3E,iBAAK,aAAY;UACzC,CAAqB,EACI,QAAQ,MAAM;AACf,0CAA8B;UACtD,CAAqB;QACrB;MACA;AAEY,YAAM,wBAAwB,IAAI,WAAW,mCAAiC;AAC1E,aAAK,oBAAoB,YAAY,6BAA6B;MAClF,CAAa,EAAE,UAAU,MAAM;AACf,0BAAiB;MACjC,CAAa;AACD,wBAAiB;AACjB,aAAO,YAAY;AACf,cAAM,KAAK,qBAAqB,gBAAgB,qBAAqB;MACrF;IACA,CAAS;EACT;EACI,MAAM,QAAQ,SAAS;AACnB,QAAI,KAAK,iBAAiB,cAAc,OAAO;AAC3C;IACZ;AACQ,UAAM,KAAK,kBAAkB,OAAO;EAC5C;EACI,MAAM,QAAQ,SAAS,wBAAwB;AAC3C,QAAI,KAAK,iBAAiB,cAAc,OAAO;AAC3C,YAAM,IAAI,MAAM,uCAAuC;IACnE;AACQ,WAAO,KAAK,gBAAgB,SAAS,sBAAsB;EACnE;EACI,MAAM,kBAAkB,SAAS;AAC7B,UAAM,EAAE,QAAQ,wBAAwB,oBAAoB,OAAM,IAAK;AACvE,UAAM,EAAE,wBAAuB,IAAK,MAAM,6BAA6B,OAAO;AAC9E,SAAK,uBAAuB,OAAO,kBAAkB,kBAAkB;AACvE,UAAM,KAAK,+BAA+B;MACtC;MACA;MACA;MACA;MACA;IACZ,CAAS;EACT;EACI,MAAM,gBAAgB,SAAS,wBAAwB;AACnD,UAAM,iBAAiB,YAAW;AAClC,UAAM,EAAE,yBAAyB,qBAAoB,IAAK,MAAM,6BAA6B,OAAO;AACpG,UAAM,gCAAgC,MAAM,KAAK,4BAA4B;MACzE;MACA;MACA;MACA;MACA;MACA,SAAS;IACrB,CAAS;AACD,WAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACpC,UAAI,KAAK,mBAAmB;AACxB,cAAM,kBAAkB,CAAC,UAAU;AAC/B,gBAAM,OAAO,KAAK,MAAM,MAAM,IAAI;AAClC,cAAI,KAAK,OAAO,kBAAkB,KAAK,SAAS,mBAAmB;AAC/D,iBAAK,qBACD,KAAK,kBAAkB,oBAAoB,WAAW,eAAe;AACzE,oBAAO;AACP,oBAAO;UAC/B;AACoB,cAAI,KAAK,UAAU,KAAK,OAAO,SAAS,GAAG;AACvC,kBAAM,aAAa,KAAK,OAAO,IAAI,CAAC,UAAU,MAAM,SAAS;AAC7D,oBAAO;AACP,mBAAO,IAAI,MAAM,mBAAmB,WAAW,KAAK,IAAI,CAAC,EAAE,CAAC;UACpF;QACA;AACgB,cAAM,gBAAgB,CAAC,UAAU;AAC7B,kBAAO;AACP,iBAAO,IAAI,MAAM,oBAAoB,KAAK,EAAE,CAAC;QACjE;AACgB,cAAM,gBAAgB,MAAM;AACxB,kBAAO;AACP,iBAAO,IAAI,MAAM,qBAAqB,CAAC;QAC3D;AACgB,cAAM,UAAU,MAAM;AAClB,eAAK,mBAAmB,oBAAoB,WAAW,eAAe;AACtE,eAAK,mBAAmB,oBAAoB,SAAS,aAAa;AAClE,eAAK,mBAAmB,oBAAoB,SAAS,aAAa;QACtF;AACgB,aAAK,kBAAkB,iBAAiB,WAAW,eAAe;AAClE,aAAK,kBAAkB,iBAAiB,SAAS,aAAa;AAC9D,aAAK,kBAAkB,iBAAiB,SAAS,aAAa;AAC9D,aAAK,kBAAkB,KAAK,6BAA6B;MACzE,OACiB;AACD,eAAO,IAAI,MAAM,4BAA4B,CAAC;MAC9D;IACA,CAAS;EACT;EACI,MAAM,qBAAqB,gBAAgB,uBAAuB;AAE9D,2BAAuB,YAAW;AAElC,QAAI;AAEA,YAAM,KAAK,kCAAkC,cAAc;AAC3D,YAAM,EAAE,kBAAiB,IAAK,KAAK,wBAAwB,IAAI,cAAc,KAAK,CAAA;AAClF,UAAI,CAAC,mBAAmB;AAEpB;MAChB;AACY,UAAI,sBAAsB,oBAAoB,WAAW;AACrD,aAAK,2BAA2B,cAAc;MAC9D,OACiB;AACD,cAAM,IAAI,MAAM,8BAA8B;MAC9D;IACA,SACe,KAAK;AACR,WAAK,OAAO,MAAM,6BAA6B,GAAG,EAAE;IAChE,UACA;AACY,WAAK,4BAA4B,cAAc;IAC3D;EACA;;EAEI,kCAAkC;AAC9B,WAAO,KAAK,uBAAuB,0BAA0B,UAAU,qBAAmB;AACtF,uBAAiB;QACb,OAAO;QACP,MAAM;UACF,UAAU;UACV;QACpB;QACgB,SAAS,uBAAuB,eAAe;MAC/D,CAAa;AACD,WAAK,kBAAkB;AAEvB,UAAI,oBAAoB,gBAAgB,qBAAqB;AACzD,aAAK,oBAAoB,OAAO,eAAe,eAAe;MAC9E;AAGY,UAAI;QACA,gBAAgB;QAChB,gBAAgB;QAChB,gBAAgB;QAChB,gBAAgB;QAChB,gBAAgB;QAChB,gBAAgB;MAChC,EAAc,SAAS,eAAe,GAAG;AACzB,aAAK,oBAAoB,OAAO,eAAe,cAAc;MAC7E;IACA,CAAS;EACT;EACI,MAAM,yCAAyC,EAAE,SAAS,UAAU,gBAAgB,uBAAsB,GAAK;AAC3G,UAAM,EAAE,OAAO,UAAS,IAAK;AAC7B,SAAK,wBAAwB,IAAI,gBAAgB;MAC7C;MACA,OAAO,SAAS;MAChB,WAAW,aAAa,CAAA;MACxB,mBAAmB,oBAAoB;MACvC,mBAAmB;IAC/B,CAAS;AACD,UAAM,EAAE,yBAAyB,qBAAoB,IAAK,MAAM,6BAA6B,OAAO;AACpG,UAAM,gCAAgC,MAAM,KAAK,4BAA4B;MACzE;MACA;MACA;MACA;MACA;IACZ,CAAS;AACD,QAAI;AACA,YAAM,KAAK,kBAAkB,OAAO;IAChD,SACe,KAAK;AACR,WAAK,2BAA2B,gBAAgB,UAAU,GAAG;AAC7D;IACZ;AAIQ,UAAM,EAAE,4BAA4B,0BAAyB,IAAK,KAAK,wBAAwB,IAAI,cAAc,KAAK,CAAA;AAEtH,SAAK,wBAAwB,IAAI,gBAAgB;MAC7C;MACA,mBAAmB,oBAAoB;MACvC,OAAO,SAAS;MAChB,WAAW,aAAa,CAAA;MACxB;MACA;MACA,mBAAmB,WAAW,MAAM;AAChC,aAAK,6BAA6B,cAAc;MAChE,GAAe,iBAAiB;IAChC,CAAS;AACD,QAAI,KAAK,mBAAmB;AACxB,WAAK,kBAAkB,KAAK,6BAA6B;IACrE;EACA;;EAEI,2BAA2B,gBAAgB,UAAU,KAAK;AACtD,SAAK,OAAO,MAAM,EAAE,IAAG,CAAE;AACzB,UAAM,UAAU,OAAO,IAAI,WAAW,EAAE;AAExC,SAAK,aAAY;AAEjB,QAAI,KAAK,oBAAoB,gBAAgB,mCAAmC;AAE5E,UAAI,oBAAoB,GAAG,GAAG;AAC1B,iBAAS,MAAM;UACX,QAAQ;YACJ;cACI,GAAG,IAAI,aAAa,GAAG,YAAY,iBAAiB,KAAK,OAAO,EAAE;YAC9F;UACA;QACA,CAAiB;MACjB,OACiB;AACD,aAAK,OAAO,MAAM,GAAG,YAAY,iBAAiB,KAAK,OAAO,EAAE;MAChF;AACY,YAAM,EAAE,2BAA0B,IAAK,KAAK,wBAAwB,IAAI,cAAc,KAAK,CAAA;AAE3F,UAAI,OAAO,+BAA+B,YAAY;AAClD,mCAA0B;MAC1C;IACA;EACA;;EAEI,MAAM,kCAAkC,gBAAgB;AACpD,UAAM,uBAAuB,KAAK,wBAAwB,IAAI,cAAc;AAC5E,QAAI,sBAAsB;AACtB,YAAM,EAAE,kBAAiB,IAAK;AAE9B,UAAI,sBAAsB,oBAAoB,SAAS;AACnD,eAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACpC,gBAAM,EAAE,UAAU,mBAAmB,2BAA2B,WAAW,MAAK,IAAM;AACtF,eAAK,wBAAwB,IAAI,gBAAgB;YAC7C;YACA,mBAAmB;YACnB;YACA;YACA,2BAA2B;YAC3B,4BAA4B;UACpD,CAAqB;QACrB,CAAiB;MACjB;IACA;EACA;EACI,2BAA2B,gBAAgB;AACvC,QAAI;AACA,UAAI,KAAK,qBACL,KAAK,kBAAkB,eAAe,UAAU,QAChD,KAAK,iBAAiB,cAAc,OAAO;AAE3C,cAAM,qBAAqB,KAAK,oBAAoB,cAAc;AAClE,cAAM,sBAAsB,KAAK,UAAU,kBAAkB;AAC7D,aAAK,kBAAkB,KAAK,mBAAmB;MAC/D;IACA,SACe,KAAK;AAER,WAAK,OAAO,MAAM,EAAE,IAAG,CAAE;IACrC;EACA;EACI,4BAA4B,gBAAgB;AACxC,SAAK,wBAAwB,OAAO,cAAc;AAElD,QAAI,CAAC,KAAK,sBAAsB;AAC5B,iBAAW,KAAK,uBAAuB,KAAK,IAAI,GAAG,GAAI;IACnE;EACA;EACI,yBAAyB;AACrB,QAAI,KAAK,wBAAwB,OAAO,GAAG;AAEvC;IACZ;AACQ,QAAI,CAAC,KAAK,mBAAmB;AACzB,WAAK,eAAe,cAAc;AAClC;IACZ;AACQ,SAAK,uBAAuB,OAAO,kBAAkB,kBAAkB;AACvE,QAAI,KAAK,kBAAkB,iBAAiB,GAAG;AAE3C,iBAAW,KAAK,uBAAuB,KAAK,IAAI,GAAG,GAAI;IACnE,OACa;AACD,WAAK,OAAO,MAAM,sBAAsB;AACxC,YAAM,aAAa,KAAK;AAExB,iBAAW,UAAU;AACrB,iBAAW,UAAU;AACrB,iBAAW,MAAM,GAAI;AACrB,WAAK,oBAAoB;AACzB,WAAK,eAAe,cAAc;AAClC,WAAK,aAAY;IAC7B;EACA;EACI,oBAAoB;AAChB,SAAK,qBAAqB,KAAK,IAAG;EAC1C;EACI,mBAAmB,qBAAqB;AACpC,UAAM,cAAc,KAAK,IAAG;AAE5B,QAAI,cAAc,KAAK,qBACnB,kCAAkC;AAClC,WAAK,uBAAuB,OAAO,kBAAkB,iBAAiB;IAClF,OACa;AACD,WAAK,uBAAuB,OAAO,kBAAkB,UAAU;IAC3E;AAEQ,QAAI,cAAc,KAAK,qBAAqB,qBAAqB;AAC7D,WAAK,iBAAiB,YAAY,kBAAkB;IAChE;EACA;EACI,mCAAmC,SAAS;AACxC,QAAI,OAAO,QAAQ,SAAS,UAAU;AAClC;IACZ;AACQ,UAAM,CAAC,QAAQ,IAAI,IAAI,KAAK,wBAAwB,OAAO;AAC3D,QAAI,QAAQ;AACR,WAAK,kBAAiB;AACtB;IACZ;AACQ,UAAM,EAAE,MAAM,IAAI,QAAO,IAAK;AAC9B,UAAM,EAAE,WAAW,MAAM,QAAQ,IAAI,YAAY,CAAA,GAAI,mBAAmB,2BAA2B,2BAA0B,IAAM,KAAK,wBAAwB,IAAI,EAAE,KAAK,CAAA;AAC3K,QAAI,SAAS,cAAc,iBACvB,SAAS,cAAc,qBAAqB;AAC5C,WAAK,OAAO,MAAM,0BAA0B,KAAK,UAAU,EAAE,OAAO,UAAS,CAAE,CAAC,EAAE;AAClF,UAAI,OAAO,8BAA8B,YAAY;AACjD,kCAAyB;MACzC;AACY,UAAI;AACA,qBAAa,iBAAiB;AAClC,uBAAiB;QACb,OAAO,YAAY;QACnB,MAAM,EAAE,OAAO,UAAS;QACxB,SAAS;MACzB,CAAa;AACD,YAAM,oBAAoB,oBAAoB;AAC9C,UAAI,UAAU;AACV,aAAK,wBAAwB,IAAI,IAAI;UACjC;UACA;UACA;UACA,mBAAmB;UACnB;UACA;UACA;QACpB,CAAiB;MACjB;AACY,WAAK,uBAAuB,OAAO,kBAAkB,sBAAsB;AAC3E;IACZ;AACQ,QAAI,SAAS,cAAc,2BAA2B;AAClD,WAAK,kBAAiB;AACtB;IACZ;AACQ,QAAI,SAAS,cAAc,WAAW;AAClC,YAAM,oBAAoB,oBAAoB;AAC9C,UAAI,UAAU;AACV,aAAK,wBAAwB,IAAI,IAAI;UACjC;UACA;UACA;UACA;UACA;UACA;UACA;QACpB,CAAiB;AACD,aAAK,OAAO,MAAM,GAAG,YAAY,iBAAiB,KAAK,KAAK,UAAU,WAAW,IAAI,CAAC,EAAE;AACxF,iBAAS,MAAM;UACX,QAAQ;YACJ;cACI,GAAG,IAAI,aAAa,GAAG,YAAY,iBAAiB,KAAK,KAAK,UAAU,WAAW,IAAI,CAAC,EAAE;YACtH;UACA;QACA,CAAiB;AACD,YAAI;AACA,uBAAa,iBAAiB;AAClC,YAAI,OAAO,+BAA+B,YAAY;AAClD,qCAA0B;QAC9C;MACA;IACA;EACA;EACI,iBAAiB,KAAK;AAClB,SAAK,OAAO,MAAM,qBAAqB,GAAG,EAAE;AAC5C,QAAI,KAAK,mBAAmB;AACxB,WAAK,aAAY;AACjB,WAAK,kBAAkB,MAAK;IACxC;AACQ,SAAK,eAAe,cAAc;EAC1C;EACI,eAAe;AACX,QAAI,KAAK,8BAA8B;AACnC,oBAAc,KAAK,4BAA4B;AAC/C,WAAK,+BAA+B;IAChD;AACQ,SAAK,uBAAuB,OAAO,kBAAkB,MAAM;EACnE;EACI,6BAA6B,gBAAgB;AACzC,UAAM,uBAAuB,KAAK,wBAAwB,IAAI,cAAc;AAC5E,QAAI,sBAAsB;AACtB,YAAM,EAAE,UAAU,OAAO,UAAS,IAAK;AACvC,UAAI,CAAC,UAAU;AACX;MAChB;AACY,WAAK,wBAAwB,IAAI,gBAAgB;QAC7C;QACA;QACA;QACA,mBAAmB,oBAAoB;MACvD,CAAa;AACD,WAAK,aAAY;AACjB,WAAK,OAAO,MAAM,4BAA4B,KAAK,UAAU,EAAE,OAAO,UAAS,CAAE,CAAC;IAC9F;EACA;EACI,+BAA+B,EAAE,wBAAwB,oBAAoB,QAAQ,QAAQ,wBAAuB,GAAK;AACrH,QAAI,KAAK,iBAAiB,cAAc,OAAO;AAC3C;IACZ;AAGQ,WAAO,IAAI,QAAQ,OAAO,SAAS,WAAW;AAC1C,WAAK,aAAa,KAAK,EAAE,KAAK,SAAS,KAAK,OAAM,CAAE;AACpD,UAAI,KAAK,iBAAiB,cAAc,QAAQ;AAC5C,YAAI;AACA,eAAK,eAAe,cAAc;AAElC,gBAAM,gBAAgB;AACtB,gBAAM,aAAa,MAAM,2BAA2B;YAChD;YACA,SAAS;YACT,cAAc,KAAK;YACnB;YACA;YACA;YACA;UACxB,CAAqB;AACD,gBAAM,eAAe,aAAa,KAAK,UAAU,UAAU,IAAI;AAE/D,gBAAM,gBAAgB,cAAc,QAAQ,cAAc;YACtD,SAAS;YACT,aAAa;UACrC,CAAqB;AACD,gBAAM,uBAAuB,UAAU,aAAa;AACpD,gBAAM,cAAc,6BAA6B,uBAAuB;AACxE,gBAAM,iBAAiB,2BAA2B,wBAAwB,WAAW;AACrF,gBAAM,KAAK,8BAA8B,gBAAgB,oBAAoB;AAC7E,eAAK,aAAa,QAAQ,CAAC,EAAE,IAAG,MAAO;AACnC,iBAAK,OAAO,MAAM,iCAAiC;AACnD,gBAAG;UAC3B,CAAqB;AACD,eAAK,eAAe,cAAc;AAClC,eAAK,eAAe,CAAA;QACxC,SACuB,KAAK;AACR,eAAK,OAAO,MAAM,0BAA0B,GAAG;AAC/C,eAAK,aAAa,QAAQ,CAAC,EAAE,IAAG,MAAO;AACnC,gBAAI,GAAG;UAC/B,CAAqB;AACD,eAAK,eAAe,CAAA;AACpB,cAAI,KAAK,qBACL,KAAK,kBAAkB,eAAe,UAAU,MAAM;AACtD,iBAAK,kBAAkB,MAAM,IAAI;UACzD;AACoB,eAAK,oBAAoB;AACzB,eAAK,eAAe,cAAc;QACtD;MACA;IACA,CAAS;EACT;EACI,MAAM,8BAA8B,gBAAgB,aAAa;AAC7D,SAAK,OAAO,MAAM,mCAAmC;AACrD,UAAM,yBAAyB,KAAK,qBAAqB,KAAK,IAAI,GAAG,CAAC,gBAAgB,WAAW,GAAGE,aAAY;EACxH;EACI,MAAM,gBAAgB,gBAAgB,aAAa;AAC/C,WAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACpC,YAAM,YAAY,KAAK,iBAAiB,gBAAgB;QACpD,KAAK;QACL;MAChB,CAAa;AACD,gBAAU,UAAU,MAAM;AACtB,aAAK,OAAO,MAAM,4BAA4B;MAC9D;AACY,gBAAU,UAAU,MAAM;AACtB,aAAK,aAAY;AACjB,eAAO,IAAI,MAAM,4BAA4B,CAAC;MAC9D;AACY,gBAAU,SAAS,MAAM;AACrB,aAAK,oBAAoB;AACzB,gBAAO;MACvB;IACA,CAAS;EACT;EACI,iBAAiB,KAAKC,WAAU;AAC5B,WAAO,IAAI,UAAU,KAAKA,SAAQ;EAC1C;EACI,MAAM,qBAAqB;AACvB,WAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACpC,UAAI,CAAC,KAAK,mBAAmB;AACzB,eAAO,IAAI,MAAM,6BAA6B,CAAC;AAC/C;MAChB;AACY,UAAI,QAAQ;AACZ,WAAK,kBAAkB,UAAU,WAAS;AACtC,aAAK,OAAO,MAAM,mBAAmB,KAAK,UAAU,KAAK,CAAC,EAAE;MAC5E;AACY,WAAK,kBAAkB,UAAU,WAAS;AACtC,aAAK,OAAO,MAAM,oBAAoB,MAAM,MAAM,EAAE;AACpD,aAAK,aAAY;AACjB,eAAO,IAAI,MAAM,KAAK,UAAU,KAAK,CAAC,CAAC;MACvD;AACY,WAAK,kBAAkB,YAAY,CAAC,YAAY;AAC5C,YAAI,OAAO,QAAQ,SAAS,UAAU;AAClC;QACpB;AACgB,aAAK,OAAO,MAAM,kDAAkD,QAAQ,IAAI,GAAG;AACnF,cAAM,OAAO,KAAK,MAAM,QAAQ,IAAI;AACpC,cAAM,EAAE,KAAI,IAAK;AACjB,cAAM,sBAAsB,KAAK,0BAA0B,IAAI;AAC/D,YAAI,SAAS,cAAc,oBAAoB;AAC3C,kBAAQ;AACR,eAAK,2BAA2B,mBAAmB;AACnD,kBAAQ,kCAAkC;AAC1C;QACpB;AACgB,YAAI,SAAS,cAAc,sBAAsB;AAC7C,gBAAM,EAAE,WAAW,UAAS,IAAK,KAAK,yBAAyB,IAAI;AAGnE,iBAAO,EAAE,WAAW,UAAS,CAAE;QACnD;MACA;AACY,YAAM,UAAU;QACZ,MAAM,cAAc;MACpC;AACY,WAAK,kBAAkB,KAAK,KAAK,UAAU,OAAO,CAAC;AACnD,YAAM,aAAa,CAAC,gBAAgB;AAChC,YAAI,CAAC,aAAa;AACd,eAAK,uBAAuB,OAAO,kBAAkB,iBAAiB;AACtE,iBAAO,IAAI,MAAM,0EAA0E,uBAAuB,KAAK,CAAC;QAC5I;MACA;AACY,iBAAW,MAAM;AACb,mBAAW,KAAK;MAChC,GAAe,uBAAuB;IACtC,CAAS;EACT;EACI,2BAA2B,qBAAqB;AAC5C,QAAI,CAAC,KAAK,mBAAmB;AACzB;IACZ;AAEQ,SAAK,+BAA+B,YAAY,MAAM;AAClD,WAAK,mBAAmB,mBAAmB;IACvD,GAAW,oCAAoC;AACvC,SAAK,kBAAkB,YACnB,KAAK,mCAAmC,KAAK,IAAI;AACrD,SAAK,kBAAkB,UAAU,SAAO;AACpC,WAAK,OAAO,MAAM,GAAG;AACrB,WAAK,iBAAiB,YAAY,iBAAiB;IAC/D;AACQ,SAAK,kBAAkB,UAAU,WAAS;AACtC,WAAK,OAAO,MAAM,oBAAoB,MAAM,MAAM,EAAE;AACpD,WAAK,aAAY;AACjB,WAAK,iBAAiB,YAAY,iBAAiB;IAC/D;EACA;AACA;;;AC/pBA,IAAM,gBAAgB;AACtB,IAAM,mBAAmB;AACzB,IAAM,cAAc;AACb,IAAM,6BAAN,cAAyC,qBAAqB;EACjE,cAAc;AACV,UAAM;MACF,cAAc;MACd,gBAAgB;MAChB,YAAY;IACxB,CAAS;EACT;EACI,kBAAkB;AACd,WAAO;EACf;EACI,UAAU,SAAS,wBAAwB;AACvC,WAAO,MAAM,UAAU,SAAS,sBAAsB;EAC9D;EACI,MAAM,4BAA4B,EAAE,SAAS,gBAAgB,wBAAwB,yBAAyB,qBAAoB,GAAK;AACnI,UAAM,EAAE,wBAAwB,oBAAoB,OAAO,WAAW,QAAQ,OAAM,IAAM;AAC1F,UAAM,OAAO;MACT;MACA;IACZ;AACQ,UAAM,iBAAiB,KAAK,UAAU,IAAI;AAC1C,UAAM,UAAU;MACZ,GAAI,MAAM,2BAA2B;QACjC;QACA;QACA;QACA,SAAS;QACT,cAAc;QACd;QACA;MAChB,CAAa;MACD,GAAG;MACH,GAAG;MACH,CAAC,iBAAiB,GAAG,oBAAoB,sBAAsB;IAC3E;AACQ,UAAM,sBAAsB;MACxB,IAAI;MACJ,SAAS;QACL,MAAM;QACN,YAAY;UACR,eAAe;YACX,GAAG;UAC3B;QACA;MACA;MACY,MAAM,cAAc;IAChC;AACQ,UAAM,gCAAgC,KAAK,UAAU,mBAAmB;AACxE,WAAO;EACf;EACI,wBAAwB,SAAS;AAC7B,SAAK,OAAO,MAAM,mDAAmD,QAAQ,IAAI,EAAE;AACnF,UAAM,EAAE,KAAK,IAAI,SAAS,KAAI,IAAK,KAAK,MAAM,OAAO,QAAQ,IAAI,CAAC;AAClE,UAAM,EAAE,WAAW,MAAM,QAAQ,IAAI,YAAY,CAAA,EAAE,IAAM,KAAK,wBAAwB,IAAI,EAAE,KAAK,CAAA;AACjG,SAAK,OAAO,MAAM,EAAE,IAAI,UAAU,OAAO,UAAS,CAAE;AACpD,QAAI,SAAS,cAAc,QAAQ,WAAW,QAAQ,MAAM;AACxD,UAAI,UAAU;AACV,iBAAS,KAAK,OAAO;MACrC,OACiB;AACD,aAAK,OAAO,MAAM,8BAA8B,EAAE,EAAE;MACpE;AACY,aAAO,CAAC,MAAM,EAAE,IAAI,MAAM,QAAO,CAAE;IAC/C;AACQ,WAAO,CAAC,OAAO,EAAE,IAAI,MAAM,QAAO,CAAE;EAC5C;EACI,oBAAoB,gBAAgB;AAChC,WAAO;MACH,IAAI;MACJ,MAAM,cAAc;IAChC;EACA;EACI,0BAA0B,MAAM;AAC5B,UAAM,EAAE,SAAS,EAAE,sBAAsB,2BAA0B,IAAK,CAAA,EAAE,IAAM;AAChF,WAAO;EACf;EACI,yBAAyB,MAAM;AAC3B,UAAM,EAAE,SAAS,EAAE,QAAQ,CAAC,EAAE,YAAY,IAAI,YAAY,EAAC,IAAK,CAAA,CAAE,IAAI,CAAA,EAAE,IAAK,CAAA,EAAE,IAAM;AACrF,WAAO,EAAE,WAAW,UAAS;EACrC;AACA;;;ACnFO,IAAM,kBAAN,MAAM,yBAAwB,aAAa;EAC9C,YAAY,QAAQ;AAChB,UAAM,MAAM;AAGZ,SAAK,cAAc;AACnB,WAAO,eAAe,MAAM,iBAAgB,SAAS;EAC7D;AACA;;;ACZU,IAAC;CACV,SAAUC,yBAAwB;AAC/B,EAAAA,wBAAuB,eAAe,IAAI;AAC1C,EAAAA,wBAAuB,UAAU,IAAI;AACrC,EAAAA,wBAAuB,kBAAkB,IAAI;AACjD,GAAG,2BAA2B,yBAAyB,CAAA,EAAG;AAC9C,IAACC,sBAAqB;EAC9B,CAAC,uBAAuB,aAAa,GAAG;IACpC,SAAS;EACjB;;;;;EAKI,CAAC,uBAAuB,QAAQ,GAAG;IAC/B,SAAS;EACjB;EACI,CAAC,uBAAuB,gBAAgB,GAAG;IACvC,SAAS;EACjB;AACA;;;ACfO,SAASC,uBAAsB,WAAWC,OAAM;AACnD,QAAM,EAAE,SAAS,mBAAkB,IAAKC,oBAAmBD,KAAI;AAC/D,MAAI,CAAC,WAAW;AACZ,UAAM,IAAI,gBAAgB,EAAE,MAAAA,OAAM,SAAS,mBAAkB,CAAE;EACvE;AACA;;;ACRA,IAAME,WAAS,IAAI,cAAc,0BAA0B;AAI/C,IAAC,gBAAgB,CAAC,YAAY;AACtC,QAAMC,UAAS,QAAQ,UAAS;AAChC,MAAI,CAACA,QAAO,KAAK,SAAS;AACtB,IAAAD,SAAO,KAAK,yHAAyH;EAC7I;AACI,QAAM,EAAE,QAAQ,gBAAgB,sBAAsB,iBAAiB,UAAU,OAAM,IAAMC,QAAO,KAAK,WAAW,CAAA;AAGpH,EAAAC,uBAAsB,EAAE,CAAC,kBAAkB,uBAAuB,uBAAuB,gBAAgB;AACzG,SAAO;IACH;IACA;IACA;IACA;IACA;IACA;EACR;AACA;;;ACpBY,IAAC,wBAAwB,CAAC,YAAY;AAC9C,QAAM,UAAU,QAAQ,gBAAgB,KAAK,SAAS;AACtD,QAAM,kBAAkB,QAAQ,gBAAgB,KAAK,SAAS;AAC9D,SAAO,EAAE,SAAS,gBAAe;AACrC;;;ACFO,SAAS,2BAA2B,SAAS;AAChD,MAAI,QAAQ,UAAU,MAAM,QAAQ,QAAQ,MAAM,GAAG;AACjD,YAAQ,OAAO,QAAQ,OAAK;AACxB,UAAI,oBAAoB,CAAC,GAAG;AACxB,UAAE,UAAU;AACZ,UAAE,qBACE;MAGpB;IACA,CAAS;EACT;AACI,SAAO;AACX;AACA,SAAS,oBAAoB,OAAO;AAEhC,MAAI,OAAO,eAAe,MAAM,WAAW,uBAAuB,GAAG;AACjE,WAAO;EACf;AAEI,MAAI,MAAM,SAAS,WAAW,oBAAoB,KAC9C,MAAM,SAAS,SAAS,mBAAmB,GAAG;AAC9C,WAAO;EACf;AACI,SAAO;AACX;;;AC/BU,IAAC;CACV,SAAUC,mBAAkB;AACzB,EAAAA,kBAAiB,YAAY,IAAI;AACjC,EAAAA,kBAAiB,iBAAiB,IAAI;AACtC,EAAAA,kBAAiB,gBAAgB,IAAI;AACrC,EAAAA,kBAAiB,kBAAkB,IAAI;AACvC,EAAAA,kBAAiB,eAAe,IAAI;AACxC,GAAG,qBAAqB,mBAAmB,CAAA,EAAG;AAClC,IAAC,YAAY,OAAO,SAAS;AAC7B,IAAC,aAAa,OAAO,UAAU;AAC/B,IAAC,cAAc,OAAO,WAAW;AACjC,IAAC,WAAW,OAAO,QAAQ;AAC3B,IAAC,YAAY,OAAO,SAAS;AAC7B,IAAC,aAAa,OAAO,UAAU;AACpC,SAAS,aAAa,QAAQ;AACjC,QAAM,IAAI;AACV,SAAO;IACH,SAAS,EAAE,SAAS;IACpB,QAAQ,EAAE,QAAQ;IAClB,UAAU,EAAE,UAAU;IACtB,WAAW,EAAE,WAAW;IACxB,UAAU,EAAE,UAAU;IACtB,SAAS,EAAE,SAAS;EAC5B;AACA;;;ACtBY,IAAC,aAAa;EACtB,MAAM;;EAEN,SAAS,iBAAiB;EAC1B,oBAAoB;AACxB;AACY,IAAC,uBAAuB;EAChC,MAAM;;EAEN,SAAS,iBAAiB;EAC1B,oBAAoB;;;;;AAKxB;AACY,IAAC,sBAAsB;EAC/B,MAAM;;EAEN,SAAS,iBAAiB;EAC1B,oBAAoB;AACxB;AACY,IAAC,oBAAoB;EAC7B,MAAM;;EAEN,SAAS,iBAAiB;EAC1B,oBAAoB;AACxB;AACY,IAAC,uBAAuB;EAChC,MAAM;;EAEN,SAAS,iBAAiB;EAC1B,oBAAoB;AACxB;AACY,IAAC,cAAc;EACvB,MAAM;EACN,SAAS;EACT,oBAAoB;AACxB;;;ACtCY,IAAC,+BAA+B,CAAC,UAAU;AACnD,SAAO;IACH,MAAM,CAAA;IACN,QAAQ,CAAC,IAAI,aAAa,MAAM,SAAS,MAAM,MAAM,MAAM,MAAM,KAAK,CAAC;EAC/E;AACA;;;ACNO,SAAS,4BAA4B,UAAU;AAClD,MAAI,CAAC,UAAU;AACX,WAAO;EACf;AACI,QAAM,IAAI;AACV,SAAO,MAAM,QAAQ,EAAE,MAAM,KAAK,EAAE,OAAO,SAAS;AACxD;;;ACJO,eAAe,gBAAgB,SAAS,UAAU,QAAQ,oBAAoB,CAAA,GAAI;AACrF,MAAI,UAAU,CAAA;AACd,UAAQ,UAAQ;IACZ,KAAK;AACD,UAAI,CAAC,QAAQ;AACT,cAAM,IAAI,gBAAgB,UAAU;MACpD;AACY,gBAAU;QACN,aAAa;MAC7B;AACY;IACJ,KAAK,OAAO;AACR,YAAM,UAAU,MAAM,QAAQ,KAAK,iBAAgB;AACnD,UAAI,QAAQ,gBAAgB,QAAW;AACnC,cAAM,IAAI,gBAAgB,oBAAoB;MAC9D;AACY;IACZ;IACQ,KAAK;IACL,KAAK,YAAY;AACb,UAAI;AACJ,UAAI;AACA,iBAAS,MAAM,QAAQ,KAAK,iBAAgB,GAAI,QAAQ,YAAY,SAAQ;MAC5F,SACmB,GAAG;AAEN,cAAM,IAAI,gBAAgB;UACtB,GAAG;UACH,iBAAiB;QACrC,CAAiB;MACjB;AAIY,UAAI,CAAC,OAAO;AACR,cAAM,IAAI,gBAAgB,mBAAmB;MAC7D;AACY,gBAAU;QACN,eAAe;MAC/B;AACY;IACZ;IACQ,KAAK;AACD,UAAI,OAAO,sBAAsB,YAC7B,CAAC,kBAAkB,eAAe;AAClC,cAAM,IAAI,gBAAgB,oBAAoB;MAC9D;AACY,gBAAU;QACN,eAAe,kBAAkB;MACjD;AACY;EAKZ;AACI,SAAO;AACX;;;AC/CA,IAAMC,qBAAoB;AAC1B,IAAM,oBAAoB,CAAC,YAAY;AACnC,SAAO,OAAO,YAAY;AAC9B;AAIO,IAAM,0BAAN,MAA8B;EACjC,cAAc;AAIV,SAAK,kBAAkB,oBAAI,IAAG;AAC9B,SAAK,OAAO;MACR,MAAAC;MACZ,YAAYC;MACZ,mBAAYC;MACA;IACZ;EACA;EACI,gBAAgB;AACZ,WAAO;EACf;;;;;EAKI,wBAAwB,WAAW;AAC/B,UAAM,MAAM,MAAM,SAAS;AAC3B,UAAM,cAAc,IAAI;AACxB,UAAM,CAAC,EAAE,WAAW,cAAa,CAAE,IAAI;AACvC,WAAO;EACf;;;;;;;;EAQI,QAAQ,SAAS,EAAE,OAAO,YAAY,YAAY,CAAA,GAAI,UAAU,WAAW,UAAU,OAAM,GAAK,mBAAmB,wBAAwB;AACvI,UAAM,QAAQ,OAAO,eAAe,WAC9B,MAAM,UAAU,IAChB,MAAM,MAAM,UAAU,CAAC;AAC7B,UAAM,CAAC,eAAe,CAAA,CAAE,IAAI,MAAM,YAAY,OAAO,SAAO,IAAI,SAAS,qBAAqB;AAC9F,UAAM,EAAE,WAAW,cAAa,IAAK;AACrC,UAAM,UAAU,qBAAqB,CAAA;AACrC,YAAQ,eAAa;MACjB,KAAK;MACL,KAAK,YAAY;AACb,cAAM,kBAAkB,IAAI,gBAAe;AAC3C,YAAI;AACJ,YAAI,kBAAkB,OAAO,GAAG;AAC5B,4BAAkB,KAAK,SAAS,SAAS,EAAE,OAAO,WAAW,UAAU,QAAQ,SAAQ,GAAI,SAAS,iBAAiB,wBAAwB,SAAS;QAC1K,OACqB;AAGD,gBAAM,UAAU,OAAO,oBAAoB;AACvC,kBAAM,SAAS,MAAM,KAAK,SAAS,iBAAiB,EAAE,OAAO,WAAW,UAAU,QAAQ,SAAQ,GAAI,SAAS,iBAAiB,wBAAwB,SAAS;AACjK,mBAAO;UAC/B;AACoB,4BAAkB,QAAQ,OAAO;QACrD;AACgB,aAAK,KAAK,6BAA6B,iBAAiB,eAAe;AACvE,eAAO;MACvB;MACY,KAAK;AACD,eAAO,KAAK,kBAAkB,SAAS,EAAE,OAAO,WAAW,UAAU,QAAQ,SAAQ,GAAI,SAAS,wBAAwB,SAAS;MACvI;AACI,cAAM,IAAI,MAAM,2BAA2B,aAAa,EAAE;IAC1E;EACA;EACI,MAAM,SAAS,SAAS,EAAE,OAAO,WAAW,UAAU,kBAAkB,UAAU,kBAAkB,QAAQ,eAAc,GAAK,oBAAoB,CAAA,GAAI,iBAAiB,wBAAwB,WAAW;AACvM,UAAM,EAAE,QAAQ,QAAQ,UAAU,wBAAwB,gBAAgB,sBAAsB,gBAAe,IAAM,cAAc,OAAO;AAC1I,UAAM,kBAAkB,oBAAoB,mBAAmB;AAE/D,UAAM,WAAW,oBAAoB,iBAAiB,QAAQ;AAS9D,UAAM,EAAE,SAAS,eAAe,gBAAe,IAAK,sBAAsB,OAAO;AAKjF,QAAI;AACJ,QAAI,OAAO,sBAAsB,YAAY;AACzC,YAAM,iBAAiB;QACnB,QAAQ;QACR,KAAK,IAAI,WAAW,oBAAoB,kBAAkB,0BAA0B,EAAE,EAAE,SAAQ;QAChG,aAAa,MAAM,KAAK;MACxC;AACY,gCAA0B,MAAM,kBAAkB,cAAc;IAC5E,OACa;AACD,gCAA0B;IACtC;AAEQ,QAAI,WAAW;AACX,gCAA0B;QACtB,GAAG;QACH,eAAe;MAC/B;IACA;AACQ,UAAM,cAAc,MAAM,gBAAgB,SAAS,UAAU,kBAAkB,QAAQ,uBAAuB;AAC9G,UAAM,UAAU;MACZ,GAAI,CAAC,kBAAkB;;;;;;;MAOvB,GAAK,mBAAmB,uBAAuB,cAAc,CAAA,MAAQ,CAAA;;MAErE,GAAI,iBACC,MAAM,cAAc;QACjB,OAAO,MAAM,KAAK;QAClB;MACpB,CAAiB;;MAEL,GAAG;;MAEH,GAAI,CAAC,kBAAkB;QACnB,CAACH,kBAAiB,GAAG,oBAAoB,sBAAsB;MAC/E;IACA;AACQ,UAAM,OAAO;MACT,OAAO,MAAM,KAAK;MAClB,WAAW,aAAa;IACpC;AACQ,QAAI;AAQJ,QAAK,kBAAkB,CAAC,wBACnB,aAAa,UACV,aAAa,cACb,aAAa,SACb,aAAa,UAAW;AAC5B,2BAAqB;IACjC,OACa;AACD,2BAAqB;QACjB,SAAS,CAAC,uBAAuB,YAAY;QAC7C,QAAQ,CAAC,uBAAuB,SAAS;MACzD;IACA;AACQ,UAAM,WAAW,oBAAoB,kBAAkB;AACvD,QAAI,CAAC,UAAU;AACX,YAAM,6BAA6B,IAAI,gBAAgB,WAAW,CAAC;IAC/E;AACQ,QAAI;AACJ,QAAI;AAIA,YAAM,EAAE,MAAM,aAAY,IAAK,MAAM,KAAK,KAAK,KAAK,SAAS;QACzD,KAAK,IAAI,WAAW,QAAQ;QAC5B,SAAS;UACL;UACA;UACA;UACA;QACpB;QACgB;MAChB,CAAa;AACD,iBAAW,MAAM,aAAa,KAAI;IAC9C,SACe,OAAO;AACV,UAAI,KAAK,cAAc,KAAK,GAAG;AAC3B,cAAM;MACtB;AACY,iBAAW,6BAA6B,KAAK;IACzD;AACQ,QAAI,4BAA4B,QAAQ,GAAG;AACvC,YAAM,2BAA2B,QAAQ;IACrD;AACQ,WAAO;EACf;;;;;;EAMI,cAAc,OAAO;AACjB,WAAO,KAAK,KAAK,kBAAkB,KAAK;EAChD;;;;;;EAMI,OAAO,SAAS,SAAS;AACrB,WAAO,KAAK,KAAK,WAAW,SAAS,OAAO;EACpD;EACI,kBAAkB,SAAS,EAAE,OAAO,WAAW,UAAU,kBAAkB,QAAQ,gBAAgB,SAAQ,GAAK,oBAAoB,CAAA,GAAI,wBAAwB,WAAW;AACvK,UAAMI,UAAS,cAAc,OAAO;AACpC,UAAM,kBAAkB,oBAAoBA,SAAQ,mBAAmB;AAEvE,UAAM,WAAW,oBAAoB,iBAAiB,QAAQ;AAS9D,UAAM,EAAE,SAAS,qBAAoB,IAAK,sBAAsB,OAAO;AACvE,UAAM,yBAAyB,YAAYA,SAAQ;AAKnD,UAAM,UAAU,0BAA0B;AAC1C,UAAM,mBAAmB,KAAK,gBAAgB,IAAI,OAAO,KAAK,IAAI,2BAA0B;AAC5F,SAAK,gBAAgB,IAAI,SAAS,gBAAgB;AAClD,WAAO,iBACF,UAAU;MACX,OAAO,MAAM,KAAK;MAClB;MACA;MACA,QAAQA,SAAQ;MAChB,oBAAoB;MACpB,QAAQ,kBAAkBA,SAAQ;MAClC;MACA;MACA;IACZ,GAAW,sBAAsB,EACpB,KAAK,WAAW,OAAK;AACtB,UAAI,EAAE,QAAQ;AACV,cAAM,2BAA2B,CAAC;MAClD;AACY,YAAM;IAClB,CAAS,CAAC;EACV;AACA;AACY,IAAC,qBAAqB,IAAI,wBAAuB;;;ACtQjD,IAAC,gBAAgB,OAAM;;;ACM5B,SAAS,mBAAmB,OAAO;AACtC,QAAM,cAAc,oBAAI,IAAG;AAC3B,aAAW,QAAQ,MAAM,cAAc,CAAA,GAAI;AACvC,QAAI,gBAAgB,IAAI,GAAG;AACvB,iBAAW,QAAQ,KAAK,WAAW,OAAO;AACtC,YAAI,KAAK,UAAU,SAAS;AACxB,sBAAY,IAAI,KAAK,cAAc,OAAO;QAC9D,WACyB,KAAK,UAAU,YAAY,KAAK,gBAAgB,QAAW;AAIhE,sBAAY,IAAI,KAAK,WAAW;QACpD;MACA;IACA;EACA;AACI,SAAO,MAAM,KAAK,WAAW;AACjC;AAQA,SAAS,gBAAgB,WAAW;AAChC,MAAI,WAAW,SAAS,QAAQ;AAC5B,QAAI,OAAO,WAAW,eAAe,UAAU;AAC3C,UAAI,MAAM,QAAQ,WAAW,YAAY,KAAK,GAAG;AAC7C,gBAAQ,WAAW,YAAY,OAAO,MAAM,CAAC,SAAS,CAAC,CAAC,KAAK,KAAK;MAClF;IACA;EACA;AACI,SAAO;AACX;;;ACrCO,SAAS,WAAW,GAAG;AAC1B,SAAO,GAAG,EAAE,CAAC,EAAE,YAAW,CAAE,GAAG,EAAE,MAAM,CAAC,CAAC;AAC7C;;;ACYO,SAAS,eAAe,UAAU;AACrC,MAAI;AACJ,MAAI;AACJ,QAAM,gBAAgB,IAAI,QAAQ,CAAC,KAAK,QAAQ;AAC5C,cAAU;AACV,aAAS;EACjB,CAAK;AACD,WAAS,aAAa,EACjB,KAAK,CAAC,WAAW;AAClB,YAAQ,MAAM;EACtB,CAAK,EACI,MAAM,CAAC,UAAU;AAClB,WAAO,KAAK;EACpB,CAAK;AACD,SAAO;AACX;;;ACtBA,IAAM,aAAa,oBAAI,QAAO;AACvB,SAAS,qBAAqB,4BAA4B,sBAAsB;AACnF,aAAW,IAAI,sBAAsB,0BAA0B;AAC/D,SAAO,2BAA2B,QAAQ,MAAM;AAC5C,eAAW,OAAO,oBAAoB;EAC9C,CAAK;AACL;AAQO,SAAS,0BAA0B,QAAQ;AAC9C,QAAM,cAAc,OAAO,OAAO,KAAK,MAAM;AAC7C,SAAO,SAAS,SAAU,SAAS,SAAS;AACxC,UAAM,UAAU,oBAAI,IAAG;AACvB,QAAI,gBAAgB;AACpB,WAAO,iBAAiB,WAAW,IAAI,aAAa,GAAG;AACnD,UAAI,QAAQ,IAAI,aAAa;AACzB,cAAM,IAAI,MAAM,kGAAkG;AACtH,cAAQ,IAAI,aAAa;AACzB,sBAAgB,WAAW,IAAI,aAAa;IACxD;AAGQ,WAAO,YAAY,eAAe,OAAO;EACjD;AACA;;;ACrCA,IAAM,iBAAiB;EACnB,SAAS;EACT,UAAU;EACV,YAAY;AAChB;AAEA,IAAM,wBAAwB;EAC1B,IAAI;EACJ,QAAQ;EACR,SAAS;EACT,SAAS;EACT,aAAa;EACb,cAAc;EACd,UAAU;EACV,UAAU;EACV,QAAQ;EACR,cAAc;EACd,SAAS;EACT,SAAS;EACT,KAAK;EACL,OAAO;AACX;AAEA,IAAM,iBAAiB,CAAC,OAAO;AAC3B,MAAI,GAAG,WAAW,GAAG;AACjB,WAAO,GAAG,CAAC;EACnB,OACS;AACD,WAAO,GAAG,OAAO,CAAC,KAAK,MAAM,QAAQ;AACjC,UAAI,QAAQ,GAAG;AACX,eAAO;MACvB,OACiB;AACD,eAAO,MAAM,WAAW,IAAI;MAC5C;IACA,GAAW,EAAE;EACb;AACA;AA4CY,IAAC,eAAe,CAAC,oBAAoB,WAAW,gBAAgB;AACxE,MAAI,CAAC;AACD,WAAO;AACX,QAAM,SAAS,CAAA;AACf,aAAW,CAAC,WAAW,KAAK,KAAK,OAAO,QAAQ,WAAW,GAAG;AAC1D,UAAM,WAAW,YACX,mBAAmB,OAAO,SAAS,GAAG,OAAO,SAAS,IACtD;AACN,UAAM,SAAS,EAAE,UAAU,MAAK;AAChC,QAAI,6BAA6B,MAAM,GAAG;AACtC,aAAO,SAAS,IAAI,OAAO,MAAM,MAAM,IAAI,CAAC,cAAc,aAAa,oBAAoB,OAAO,SAAS,KAAK,OAAO,SAAS,CAAC;IAC7I,WACiB,uBAAuB,QAAQ,GAAG;AACvC,aAAO,SAAS,IAAI,aAAa,oBAAoB,SAAS,KAAK,OAAO,KAAK;IAC3F,OACa;AACD,aAAO,SAAS,IAAI;IAChC;EACA;AACI,SAAO;AACX;AAQA,SAAS,6BAA6B,IAAI;AACtC,SAAQ,OAAO,GAAG,UAAU,SAAS,YACjC,WAAW,GAAG,SAAS,QACvB,OAAO,GAAG,SAAS,KAAK,UAAU,YAClC,GAAG,SAAS,WACZ,MAAM,QAAQ,GAAG,OAAO,KAAK;AACrC;AAQA,SAAS,uBAAuB,UAAU;AACtC,SAAQ,OAAO,UAAU,SAAS,YAC9B,WAAW,SAAS,QACpB,OAAO,SAAS,KAAK,UAAU;AACvC;AAEO,SAAS,gBAAgB,QAAQ,WAAW,QAAQ,oBAAoB,UAAU,WAAWC,WAAU,OAAO;AACjH,QAAM,aAAa,mBAAmB,OAAO,SAAS;AACtD,QAAM,mBAAmB,WAAW;AACpC,QAAM,cAAc,OAAO,QAAQ,gBAAgB,EAC9C,OAAO,CAAC,CAAC,GAAG,KAAK,MAAM,OAAO,MAAM,UAAU,MAAS,EACvD,IAAI,CAAC,CAAC,SAAS,MAAM,SAAS;AACnC,SAAO,OAAO,IAAI,CAAC,WAAW;AAC1B,QAAI,WAAW,QAAQ,WAAW,QAAW;AACzC,aAAO;IACnB;AACQ,UAAM,gCAAgC,CAAA;AACtC,eAAW,aAAa,aAAa;AACjC,YAAM,aAAa,iBAAiB,SAAS;AAC7C,YAAM,iBAAiB,YAAY;AACnC,YAAM,mBAAmB,eAAe;AACxC,YAAM,eAAe,mBAAmB,OAAO,gBAAgB;AAC/D,YAAM,0BAA0B,aAAa,eAAe;AAC5D,YAAM,2BAA2B,aAAa,eAAe;AAC7D,YAAM,eAAe,WAAW,aAAa;AAC7C,UAAI,mBAAmB,CAAA;AACvB,UAAI,WAAW,eACX,oBAAoB,WAAW,aAAa;AAC5C,2BAAmB,WAAW,YAAY;MAC1D;AACY,YAAM,cAAc,CAAA;AACpB,UAAI,WAAW,eAAe,iBAAiB,WAAW,aAAa;AACnE,oBAAY,KAAK,GAAG,WAAW,YAAY,WAAW;MACtE;AACY,cAAQ,cAAY;QAChB,KAAK,eAAe,YAAY;AAC5B,gBAAM,gBAAgB,yBAAyB;;;YAG/C,CAAC,KAAK,WAAW;AACb,kBAAI,OAAO,MAAM,GAAG;AAChB,oBAAI,MAAM,IAAI,OAAO,MAAM;cACvD;AACwB,qBAAO;YAC/B;YAAuB,CAAA;UAAE;AAEL,cAAI,OAAO,OAAO,gBAAgB,GAAG,QAAQ,QAAW;AACpD;UACxB;AACoB,cAAIA,UAAS;AACT,0CAA8B,SAAS,IAAI,CAAC,aAAa,YAAY;AACjE,kBAAI,OAAO,YAAY,CAAC,CAAC,GAAG;AACxB,uBAAO,OAAO,OAAO,gBAAgB,EAAE,IAAI,aAAa;kBACpD,CAAC,uBAAuB,GAAG,OAAO,YAAY,CAAC,CAAC;kBAChD,GAAG;gBACvC,GAAmC;kBACC,UAAU,SAAS,YAAY;kBAC/B,WAAW,SAAS,aAAa;gBACrE,CAAiC;cACjC;AAC4B,qBAAO,EAAE,MAAM,KAAI;YAC/C;UACA,OACyB;AACD,0CAA8B,SAAS,IAAI,CAAC,YAAY;AACpD,kBAAI,OAAO,YAAY,CAAC,CAAC,GAAG;AACxB,uBAAO,OAAO,OAAO,gBAAgB,EAAE,IAAI;kBACvC,CAAC,uBAAuB,GAAG,OAAO,YAAY,CAAC,CAAC;kBAChD,GAAG;gBACvC,GAAmC;kBACC,UAAU,SAAS,YAAY;kBAC/B,WAAW,SAAS,aAAa;gBACrE,CAAiC;cACjC;AAC4B,qBAAO,EAAE,MAAM,KAAI;YAC/C;UACA;AACoB;QACpB;QACgB,KAAK,eAAe;QACpB,KAAK,eAAe,UAAU;AAK1B,gBAAM,YAAY,iBAAiB,eAAe,UAC5C,CAACC,YAAW;AACV,mBAAO;cACH,MAAMA,SAAQ,KAAK,MAAK,KAAM;cAC9B,QAAQA,QAAO;cACf,YAAYA,QAAO;YACnD;UACA,IAC0B,CAACA,YAAWA;AAClB,gBAAM,WAAW,WAAW,eAAe;AAC3C,gBAAM,WAAW,WAAW,eAAe;AAE3C,gBAAM,oBAAoB,aAAa,OAAO,iBAAiB,CAAC,CAAC;AACjE,gBAAM,wBAAwB,kBAAkB;AAChD,cAAI,sBAAsB,OAAO;AAC7B,gBAAI,qBAAqB,CAAA;AACzB,gBAAI,kBAAkB,eAClB,iBAAiB,kBAAkB,aAAa;AAChD,mCAAqB,kBAAkB,aAAa;YAChF;AACwB,kBAAMC,iBAAgB,mBAAmB,IAAI,CAAC,OAAO,QAAQ;AACzD,kBAAI,QAAQ,GAAG;AACX,uBAAO,EAAE,CAAC,KAAK,GAAG,EAAE,IAAI,OAAO,QAAQ,EAAC,EAAE;cAC1E;AAC4B,qBAAO,EAAE,CAAC,KAAK,GAAG,EAAE,IAAI,OAAO,SAAS,MAAM,CAAC,CAAC,EAAC,EAAE;YAC/E,CAAyB;AAED,gBAAI,OAAO,OAAO,gBAAgB,GAAG,SAAS,QAAW;AACrD;YAC5B;AACwB,gBAAIF,UAAS;AACT,4CAA8B,SAAS,IAAI,CAAC,aAAa,YAAY;AACjE,oBAAI,OAAO,QAAQ,GAAG;AAClB,yBAAO,eAAe,OAAO,kBAAkB;AAC3C,0BAAM,cAAc,OAAO,OAAO,gBAAgB,EAAE,KAAK,aAAa;sBAClE,QAAQ,EAAE,KAAKE,eAAa;sBAC5B,OAAO,SAAS;sBAChB,WAAW,SAAS;sBACpB,UAAU,SAAS,YAAY;sBAC/B,WAAW,SAAS,aAAa;oBAC7E,CAAyC;AACD,0BAAM,eAAe,qBAAqB,aAAa,aAAa;AACpE,2BAAO,UAAW,MAAM,YAAY;kBAC5E,CAAqC;gBACrC;AACgC,uBAAO,CAAA;cACvC;YACA,OAC6B;AACD,4CAA8B,SAAS,IAAI,CAAC,YAAY;AACpD,oBAAI,OAAO,QAAQ,GAAG;AAClB,yBAAO,eAAe,OAAO,kBAAkB;AAC3C,0BAAM,cAAc,OAAO,OAAO,gBAAgB,EAAE,KAAK;sBACrD,QAAQ,EAAE,KAAKA,eAAa;sBAC5B,OAAO,SAAS;sBAChB,WAAW,SAAS;sBACpB,UAAU,SAAS,YAAY;sBAC/B,WAAW,SAAS,aAAa;oBAC7E,CAAyC;AACD,0BAAM,eAAe,qBAAqB,aAAa,aAAa;AACpE,2BAAO,UAAW,MAAM,YAAY;kBAC5E,CAAqC;gBACrC;AACgC,uBAAO,CAAA;cACvC;YACA;AACwB;UACxB;AACoB,gBAAM,gBAAgB,iBAAiB,IAAI,CAAC,OAAO,QAAQ;AACvD,gBAAI,QAAQ,GAAG;AACX,qBAAO,EAAE,CAAC,KAAK,GAAG,EAAE,IAAI,OAAO,QAAQ,EAAC,EAAE;YACtE;AACwB,mBAAO,EAAE,CAAC,KAAK,GAAG,EAAE,IAAI,OAAO,SAAS,MAAM,CAAC,CAAC,EAAC,EAAE;UAC3E,CAAqB;AAED,cAAI,OAAO,OAAO,gBAAgB,GAAG,SAAS,QAAW;AACrD;UACxB;AACoB,cAAIF,UAAS;AACT,0CAA8B,SAAS,IAAI,CAAC,aAAa,YAAY;AACjE,kBAAI,OAAO,QAAQ,GAAG;AAClB,uBAAO,eAAe,OAAO,kBAAkB;AAC3C,wBAAM,cAAc,OAAO,OAAO,gBAAgB,EAAE,KAAK,aAAa;oBAClE,QAAQ,EAAE,KAAK,cAAa;oBAC5B,OAAO,SAAS;oBAChB,WAAW,SAAS;oBACpB,UAAU,SAAS,YAAY;oBAC/B,WAAW,SAAS,aAAa;kBACzE,CAAqC;AACD,wBAAM,eAAe,qBAAqB,aAAa,aAAa;AACpE,yBAAO,UAAW,MAAM,YAAY;gBACxE,CAAiC;cACjC;AAC4B,qBAAO,CAAA;YACnC;UACA,OACyB;AACD,0CAA8B,SAAS,IAAI,CAAC,YAAY;AACpD,kBAAI,OAAO,QAAQ,GAAG;AAClB,uBAAO,eAAe,OAAO,kBAAkB;AAC3C,wBAAM,cAAc,OAAO,OAAO,gBAAgB,EAAE,KAAK;oBACrD,QAAQ,EAAE,KAAK,cAAa;oBAC5B,OAAO,SAAS;oBAChB,WAAW,SAAS;oBACpB,UAAU,SAAS,YAAY;oBAC/B,WAAW,SAAS,aAAa;kBACzE,CAAqC;AACD,wBAAM,eAAe,qBAAqB,aAAa,aAAa;AACpE,yBAAO,UAAW,MAAM,YAAY;gBACxE,CAAiC;cACjC;AAC4B,qBAAO,CAAA;YACnC;UACA;AACoB;QACpB;MAGA;IACA;AACQ,WAAO,EAAE,GAAG,QAAQ,GAAG,8BAA6B;EAC5D,CAAK;AACL;AACY,IAAC,wBAAwB;EACjC,QAAQ,EAAE,iBAAiB,UAAU,WAAW,MAAK;EACrD,KAAK,EAAE,iBAAiB,OAAO,WAAW,MAAK;EAC/C,QAAQ,EAAE,iBAAiB,UAAU,WAAW,MAAK;EACrD,QAAQ,EAAE,iBAAiB,UAAU,WAAW,MAAK;EACrD,MAAM,EAAE,iBAAiB,QAAQ,WAAW,KAAI;EAChD,aAAa,EAAE,iBAAiB,IAAI,WAAW,MAAK;EACpD,UAAU,EAAE,iBAAiB,YAAY,WAAW,MAAK;EACzD,UAAU,EAAE,iBAAiB,YAAY,WAAW,MAAK;EACzD,UAAU,EAAE,iBAAiB,YAAY,WAAW,MAAK;EACzD,cAAc,EAAE,iBAAiB,gBAAgB,WAAW,MAAK;AACrE;AACA,IAAM,yBAAyB;AACnB,IAAC,0CAA0C,CAAC,oBAAoB,uBAAuB;AAC/F,QAAM,EAAE,OAAM,IAAK;AACnB,QAAM,eAAe,OAAO,OAAO,MAAM,EACpC,IAAI,CAAC,EAAE,MAAM,MAAAG,MAAI,MAAO;AACzB,QAAI,OAAO,KAAK,SAAS,UAAU;AAC/B,aAAO,CAACA,OAAM,QAAQ;IAClC;AACQ,QAAI,OAAO,KAAK,aAAa,UAAU;AACnC,aAAO;QACHA;QACA,wCAAwC,mBAAmB,UAAU,KAAK,QAAQ,GAAG,kBAAkB;MACvH;IACA;AACQ,QAAI,OAAO,SAAS,UAAU;AAC1B,aAAO,CAACA,OAAM,QAAQ;IAClC;AACQ,WAAO;EACf,CAAK,EACI,OAAO,CAAC,SAAS,SAAS,MAAS;AACxC,SAAO,OAAO,YAAY,YAAY;AAC1C;AACA,IAAM,uCAAuC,CAAC,iBAAiB,uBAAuB;AAClF,QAAM,EAAE,OAAM,IAAK;AACnB,QAAM,eAAe,OAAO,OAAO,MAAM,EACpC,IAAI,CAAC,EAAE,MAAM,MAAAA,MAAI,MAAO;AACzB,QAAI,OAAO,KAAK,SAAS,YACrB,OAAO,SAAS,UAAU;AAC1B,aAAO,CAACA,OAAM,QAAQ;IAClC;AACQ,QAAI,OAAO,KAAK,aAAa,UAAU;AACnC,aAAO;QACHA;QACA,wCAAwC,mBAAmB,UAAU,KAAK,QAAQ,GAAG,kBAAkB;MACvH;IACA;AACQ,WAAO;EACf,CAAK,EACI,OAAO,CAAC,SAAS,SAAS,MAAS;AACxC,QAAM,cAAc,mBAAmB,eAAe,EAAE,IAAI,CAAC,UAAU;IACnE;IACA;EACR,CAAK;AACD,SAAO,OAAO,YAAY,aAAa,OAAO,WAAW,CAAC;AAC9D;AACA,SAAS,4BAA4B,iBAAiB;AAGlD,QAAM,EAAE,OAAM,IAAK;AACnB,QAAM,iBAAiB,OAAO,OAAO,MAAM,EAEtC,IAAI,CAAC,EAAE,MAAM,MAAAA,MAAI,MAAO;AACzB,QAAI,OAAO,SAAS;AAChB,aAAOA;AACX,QAAI,OAAO,SAAS,UAAU;AAC1B,UAAI,OAAO,MAAM,SAAS,UAAU;AAChC,eAAOA;MACvB,WACqB,OAAO,MAAM,aAAa,UAAU;AACzC,eAAO,GAAGA,KAAI,IAAI,sBAAsB;MACxD;IACA;AACQ,WAAO;EACf,CAAK,EACI,OAAO,OAAO;AAGnB,QAAM,cAAc,mBAAmB,eAAe;AACtD,SAAO,MAAM,KAAK,IAAI,IAAI,eAAe,OAAO,WAAW,CAAC,CAAC;AACjE;AACA,IAAM,WAAW;AAoBV,SAAS,uBAAuB,oBAAoB,WAAW,cAAc;AAChF,QAAM,sBAAsB,CAAC,MAAM,wBAAwB;AACvD,UAAM,CAAC,WAAW,GAAG,IAAI,IAAI,KAAK,MAAM,GAAG;AAC3C,UAAM,SAAS,KAAK,CAAC;AACrB,UAAM,4BAA4B,mBAAmB,OAAO,mBAAmB,KAC3E,mBAAmB,UAAU,mBAAmB;AACpD,UAAM,wBAAwB,2BAA2B;AACzD,UAAM,eAAe,wBAAwB,SAAS,GAAG,MAAM;AAC/D,UAAM,yBAAyB,mBAAmB,OAAO,YAAY;AACrE,UAAM,kBAAkB,wBAAwB,SAAS,GAAG,MAAM;AAClE,UAAM,4BAA4B,mBAAmB,UAAU,eAAe;AAC9E,UAAM,+BAA+B,yBAC/B,UACA,4BACI,aACA;AACV,QAAI,iCAAiC,YAAY;AAC7C,UAAI,SAAS,CAAA;AACb,UAAI,CAAC,QAAQ;AACT,cAAM,MAAM,GAAG,SAAS,0DAA0D,eAAe,EAAE;MACnH;AACY,UAAI,WAAW,wBAAwB;AACnC,iBAAS;UACL,CAAC,SAAS,GAAG,wCAAwC,2BAA2B,kBAAkB;QACtH;MACA,OACiB;AACD,iBAAS;UACL,CAAC,SAAS,GAAG,oBAAoB,KAAK,KAAK,GAAG,GAAG,eAAe;QACpF;MACA;AACY,aAAO;IACnB,WACiB,iCAAiC,SAAS;AAC/C,UAAI,SAAS,CAAA;AACb,UAAI,CAAC,QAAQ;AACT,cAAM,MAAM,GAAG,SAAS,oDAAoD,YAAY,EAAE;MAC1G;AACY,UAAI,WAAW,wBAAwB;AACnC,cAAM,+BAA+B,mBAAmB,OAAO,YAAY;AAC3E,iBAAS;UACL,CAAC,SAAS,GAAG,qCAAqC,8BAA8B,kBAAkB;QACtH;MACA,OACiB;AACD,iBAAS;UACL,CAAC,SAAS,GAAG,oBAAoB,KAAK,KAAK,GAAG,GAAG,YAAY;QACjF;MACA;AACY,UAAI,sBAAsB,SAAS,GAAG,SAAS;AAC3C,iBAAS;UACL,CAAC,SAAS,GAAG;YACT,OAAO,OAAO,SAAS;UAC/C;QACA;MACA;AACY,aAAO;IACnB,OACa;AACD,YAAM,aAAa,wBAAwB,SAAS;AACpD,YAAM,qBAAqB,mBAAmB,UAAU,mBAAmB;AAC3E,YAAM,gBAAgB,oBAAoB,SAAS,SAAS;AAC5D,UAAI,CAAC,oBAAoB;AACrB,cAAM,eAAe,mBAAmB,yBAAyB,EAAE,SAAS,SAAS;AACrF,YAAI,CAAC,cAAc,CAAC,cAAc;AAC9B,gBAAM,MAAM,GAAG,SAAS,4BAA4B,mBAAmB,EAAE;QAC7F;MACA,OACiB;AACD,YAAI,CAAC,eAAe;AAChB,gBAAM,MAAM,GAAG,SAAS,kCAAkC,mBAAmB,EAAE;QACnG;MACA;AACY,aAAO,EAAE,CAAC,SAAS,GAAG,SAAQ;IAC1C;EACA;AACI,SAAO,aAAa,OAAO,CAAC,WAAW,SAAS,6BAA6B,oBAAoB,MAAM,SAAS,GAAG,SAAS,GAAG,CAAA,CAAE;AACrI;AAgBO,SAAS,uBAAuB,KAAK;AACxC,QAAM,MAAM,CAAA;AACZ,SAAO,QAAQ,GAAG,EAAE,QAAQ,CAAC,CAAC,WAAW,KAAK,MAAM;AAChD,QAAI,UAAU,UAAU;AACpB,UAAI,KAAK,SAAS;IAC9B,WACiB,OAAO,UAAU,YAAY,UAAU,MAAM;AAClD,UAAI,OAAO,OAAO;AACd,YAAI,KAAK,WAAW,KAAK,SAAS,KAAK,uBAAuB,MAAM,KAAK,GAAG,KAAK,GAAG;MACpG,OACiB;AACD,YAAI,KAAK,WAAW,KAAK,uBAAuB,KAAK,GAAG,GAAG;MAC3E;IACA;EACA,CAAK;AACD,SAAO,IAAI,KAAK,GAAG;AACvB;AASA,SAAS,6BAA6B,QAAQ,QAAQ;AAClD,QAAM,WAAW,CAAC,QAAQ,OAAO,OAAO,QAAQ;AAChD,aAAW,OAAO,QAAQ;AAEtB,QAAI,CAAC,OAAO,UAAU,eAAe,KAAK,QAAQ,GAAG;AACjD;AACJ,QAAI,OAAO,UAAU,eAAe,KAAK,QAAQ,GAAG,KAChD,SAAS,OAAO,GAAG,CAAC,GAAG;AACvB,mCAA6B,OAAO,GAAG,GAAG,OAAO,GAAG,CAAC;IACjE,OACa;AACD,aAAO,GAAG,IAAI,OAAO,GAAG;IACpC;EACA;AACI,SAAO;AACX;AACO,SAAS,qBAAqB,oBAAoB,WAAW,cAAc;AAC9E,QAAM,kBAAkB,mBAAmB,OAAO,SAAS;AAC3D,QAAM,WAAW,uBAAuB,oBAAoB,WAAW,gBAAgB,4BAA4B,eAAe,CAAC;AACnI,QAAM,eAAe,uBAAuB,QAAQ;AACpD,SAAO;AACX;AACO,SAAS,wBAAwB,oBAAoB,iBAAiB,gBAAgB,UAAU,WAAW;AAC9G,QAAM,EAAE,MAAAA,OAAM,YAAY,QAAQ,gBAAgB,EAAE,oBAAoB,qBAAqB,kBAAiB,GAAK,WAAU,IAAM;AAGnI,QAAM,iBAAiBA,MAAK,OAAO,CAAC,EAAE,YAAW,IAAKA,MAAK,MAAM,CAAC;AAClE,QAAM,uBAAuB,WAAW,OAAO,CAAC,EAAE,YAAW,IAAK,WAAW,MAAM,CAAC;AACpF,QAAM,EAAE,iBAAiB,UAAS,IAAK,sBAAsB,cAAc;AAC3E,QAAM,EAAE,aAAY,IAAK,YAAY,CAAA;AACrC,MAAI;AACJ,MAAI;AACJ,MAAI,iBAAiB;AACjB,uBAAmB,GAAG,eAAe,GAAG,YAAY,uBAAuB,cAAc;EACjG,WACa,WAAW;AAChB,UAAM,EAAE,YAAY,IAAI,KAAK,CAAA,EAAE,IAAK;AACpC,uBAAmB;AAenB,QAAI,cAAc,CAAA;AAClB,QAAI,GAAG,WAAW,GAAG;AACjB,YAAM,CAAC,OAAO,IAAI;AAClB,YAAM,OAAQ,OAAO,OAAO,OAAO,EAAE,SAAS,WACxC,OAAO,OAAO,EAAE,OAChB;AACN,YAAM,iBAAiB,sBAAsB,IAAI;AACjD,oBAAc;QACV,CAAC,OAAO,GAAG,QAAQ,cAAc;MACjD;IACA,WACiB,GAAG,SAAS,GAAG;AACpB,YAAM,qBAAqB,eAAe,EAAE;AAC5C,YAAM,UAAU,YAAY,KAAK,CAAC,SAAS,MAAM,YAAY,eAAe,UAAU,GAAG,YAAY;AACrG,oBAAc;QACV,CAAC,kBAAkB,GAAG,QAAQ,WAAWA,KAAI,CAAC,GAAG,WAAW,OAAO,CAAC;MACpF;IACA;AACQ,qBAAiB;MACb,CAAC,EAAE,GAAG,GAAG,OAAO,UAAU,eAAe,KAAK,OAAO,EAAE,EAAE,MAAM,MAAM,IAC/D,OAAO,EAAE,EAAE,KAAK,OAChB,OAAO,EAAE,EAAE,IAAI;MACrB,GAAG;IACf;EACA,OACS;AACD,UAAM,IAAI,MAAM,4DAA4D;EACpF;AACI,MAAI;AACJ,MAAI;AACJ,MAAI;AACJ,QAAM,qBAAqB,qBAAqB,oBAAoBA,OAAM,YAAY;AAGtF,QAAM,YAAY;IACd,CAAC,mBAAmB,GAAG,GAAG,OAAO,mBAAmB,EAAE,IAAI;EAClE;AACI,QAAM,aAAa,CAAA;AA0BnB,QAAM,iBAAiB,CAAC,OAAO;AAC3B,QAAI,kBAAkB,WAAW;AAC7B,aAAO,CAAA;AACX,QAAI,OAAO,OAAO;AACd,aAAO,kBAAkB,OAAO,CAAC,KAAK,cAAc;AAChD,cAAM,YAAY,OAAO,SAAS,EAAE;AACpC,YAAI,OAAO,OAAO;AACd,cAAI,SAAS,IAAI,GAAG,SAAS;QACjD;AACgB,eAAO;MACvB,GAAe,CAAA,CAAE;IACjB,OACa;AAED,UAAI,kBAAkB,WAAW,GAAG;AAEhC,cAAM,CAAC,EAAE,IAAI;AACb,cAAM,OAAQ,OAAO,OAAO,EAAE,EAAE,SAAS,WAAW,OAAO,EAAE,EAAE,OAAO;AACtE,cAAM,iBAAiB,sBAAsB,IAAI;AACjD,eAAO;UACH,CAAC,EAAE,GAAG,QAAQ,cAAc;QAChD;MACA,OACiB;AAED,cAAM,qBAAqB,eAAe,iBAAiB;AAC3D,eAAO;UACH,CAAC,kBAAkB,GAAG,QAAQ,WAAWA,KAAI,CAAC;QAClE;MACA;IACA;EACA;AACI,MAAI,oBAAoB;AACpB,WAAO,OAAO,WAAW,eAAe,KAAK,CAAC;AAC9C,WAAO,OAAO,YAAY;;;MAGtB,CAAC,mBAAmB,GAAG,GAAG,OAAO,mBAAmB,EAAE,IAAI;;MAC1D,eAAe;IAC3B,GAAW,eAAe,MAAM,CAAC;EACjC;AACI,UAAQ,gBAAc;IAClB,KAAK;IACL,KAAK;IACL,KAAK;AACD,2BACK,mBAAmB;QAChB,OAAO,GAAG,gBAAgB,OAAO,CAAC,EAAE,kBAAiB,IACjD,gBAAgB,MAAM,CAAC,CAAC,GAAG,cAAc;MACjE;AACY,+BAAyB,uBAAuB;;;IAGpD,KAAK;AACD,2BAAqB,mBAAmB;AACxC,8BAAwB,sBAAsB;;;IAGlD,KAAK;AACD,2BACK,mBAAmB;QAChB,GAAG;;;;;;;QAOH,QAAQ,QAAQ,cAAc;QAC9B,OAAO;QACP,WAAW;MAC/B;AACY,+BAAyB,uBAAuB;AAChD,8BACK,sBAAsB,WAAW,kBAAkB;;;IAG5D,KAAK;AACD,2BACK,mBAAmB;QAChB,GAAG;QACH,QAAQ,QAAQ,cAAc;QAC9B,eAAe;QACf,OAAO;QACP,WAAW;MAC/B;AACY,+BAAyB,uBAAuB;AAChD,8BACK,sBAAsB,WAAW,kBAAkB;;;IAG5D,KAAK;IACL,KAAK;IACL,KAAK;AACD,2BACK,mBAAmB;QAChB,QAAQ,oBAAoB,cAAc;MAC9D;AACY,+BAAyB,uBAAuB;AAChD,8BAAwB,sBAAsB;AAC9C;IACJ,KAAK;IACL;AACI,YAAM,IAAI,MAAM,oGAAoG;EAChI;AACI,QAAM,kBAAkB,GAAG,oBAAoB,GAAG,mBAC5C,IAAI,OAAO,QAAQ,gBAAgB,EAAE,IAAI,CAAC,CAAC,WAAW,IAAI,MAAM,IAAI,SAAS,KAAK,IAAI,EAAE,CAAC,MACzF,EAAE,MAAM,gBAAgB,GAAG,mBAC3B,IAAI,OAAO,KAAK,gBAAgB,EAAE,IAAI,CAAC,cAAc,GAAG,SAAS,MAAM,SAAS,EAAE,CAAC,MACnF,EAAE,MAAM,mBAAmB;AACjC,SAAO;AACX;AACO,SAAS,sBAAsB,iBAAiB,WAAW,KAAK,oBAAoB,WAAW;AAClG,QAAM,EAAE,QAAQ,gBAAgB,EAAE,oBAAoB,qBAAqB,kBAAiB,EAAG,IAAM;AACrG,QAAM,SAAS,mBAAmB,UAAU,eAAe,iBAAiB;AAC5E,MAAI,YAAY,CAAA;AAEhB,UAAQ,WAAS;IACb,KAAK;AACD,kBAAY;QACR,OAAO,MACD,uBAAuB,KAAK,iBAAiB,kBAAkB,IAC/D,CAAA;MACtB;AACY;IACJ,KAAK;AAED,kBAAY;QACR,OAAO,MACD,OAAO,YAAY,OAAO,QAAQ,uBAAuB,KAAK,iBAAiB,kBAAkB,CAAC,EAAE,OAAO,CAAC,CAAC,SAAS,MAAM;AAI1H,iBAAO,OAAO,SAAS,IACjB,CAAC,OAAO,SAAS,EAAE,aACnB,CAAC,mBAAmB,eAAe,EAAE,SAAS,SAAS;QACrF,CAAqB,CAAC,IACA,CAAA;MACtB;AACY;IACJ,KAAK;IACL,KAAK;AAED,UAAI,KAAK;AACL,oBAAY,qBACN,CAAC,qBAAqB,GAAG,iBAAiB,EAAE,OAAO,CAAC,KAAK,cAAc;AACrE,cAAI,SAAS,IAAI,IAAI,SAAS;AAC9B,iBAAO;QAC/B,GAAuB,CAAA,CAAE,IACH,EAAE,CAAC,mBAAmB,GAAG,IAAI,mBAAmB,EAAC;MACvE;AACY,UAAI,cAAc,UAAU;AACxB,oBAAY,EAAE,OAAO,UAAS;MAC9C;AACY;IACJ,KAAK;AACD,UAAI,KAAK,QAAQ;AACb,kBAAU,SAAS,IAAI;MACvC;AACY,UAAI,KAAK,eAAe;AACpB,kBAAU,gBAAgB,IAAI;MAC9C;AACY,UAAI,OAAO,IAAI,mBAAmB,GAAG;AACjC,kBAAU,mBAAmB,IAAI,IAAI,mBAAmB;MACxE;AACY,UAAI,UAAU,OAAO,IAAI,MAAM,GAAG;AAC9B,kBAAU,MAAM,IAAI,IAAI,MAAM;MAC9C;AACY,UAAI,KAAK,WAAW;AAChB,kBAAU,YAAY,IAAI;MAC1C;AACY,UAAI,KAAK,OAAO;AACZ,kBAAU,QAAQ,IAAI;MACtC;AACY;IACJ,KAAK,eAAe;AAChB,YAAM,EAAE,IAAI,KAAK,CAAA,EAAE,IAAK;AACxB,YAAM,mBAAmB,IAAI,UAAU,eAAe,EAAE;AACxD,gBAAU,EAAE,IAAI,IAAI,EAAE;AACtB,UAAI,oBAAoB,OAAO,IAAI,gBAAgB,GAAG;AAClD,kBAAU,gBAAgB,IAAI,IAAI,gBAAgB;MAClE;AACY,UAAI,KAAK,QAAQ;AACb,kBAAU,SAAS,IAAI;MACvC;AACY,UAAI,KAAK,eAAe;AACpB,kBAAU,gBAAgB,IAAI;MAC9C;AACY,UAAI,KAAK,WAAW;AAChB,kBAAU,YAAY,IAAI;MAC1C;AACY,UAAI,KAAK,OAAO;AACZ,kBAAU,QAAQ,IAAI;MACtC;AACY;IACZ;IACQ,KAAK;IACL,KAAK;IACL,KAAK;AACD,UAAI,KAAK,QAAQ;AACb,oBAAY,EAAE,QAAQ,IAAI,OAAM;MAChD;AACY;IACJ,KAAK;AACD,YAAM,IAAI,MAAM,0FAA0F;IAC9G,SAAS;AACL,YAAM,kBAAkB;AACxB,YAAM,IAAI,MAAM,6BAA6B,eAAe,EAAE;IAC1E;EACA;AACI,SAAO;AACX;AAeO,SAAS,uBAAuB,eAAe,OAAO,oBAAoB;AAC7E,QAAM,EAAE,OAAM,IAAK;AACnB,QAAM,aAAa,CAAA;AACnB,SAAO,QAAQ,aAAa,EAAE,QAAQ,CAAC,CAAC,gBAAgB,UAAU,MAAM;AACpE,UAAM,YAAY,OAAO,cAAc,GAAG;AAC1C,UAAM,mBAAmB,WAAW;AACpC,QAAI,kBAAkB;AAClB,YAAM,cAAc,OAAO,cAAc,GAAG;AAC5C,YAAM,kBAAkB,mBAAmB,OAAO,gBAAgB;AAClE,YAAM,qBAAqB,gBAAgB;AAC3C,UAAI,aAAa,mBAAmB,eAAe,SAAS;AACxD,cAAM,oBAAoB;AAC1B,0BAAkB,YAAY,QAAQ,CAAC,YAAY,QAAQ;AACvD,gBAAM,sBAAsB,kBAAkB,eAAe,GAAG;AAChE,qBAAW,UAAU,IAAI,WAAW,mBAAmB;QAC3E,CAAiB;MACjB;AACY,UAAI,aAAa,mBAAmB,eAAe,YAAY;AAC3D,cAAM,uBAAuB;AAC7B,6BAAqB,YAAY,QAAQ,CAAC,YAAY,QAAQ;AAC1D,cAAI,QAAQ,GAAG;AACX,kBAAM,sBAAsB,mBAAmB;AAC/C,uBAAW,UAAU,IAAI,WAAW,mBAAmB;UAC/E,OACyB;AACD,kBAAM,sBAAsB,mBAAmB,kBAAkB,MAAM,CAAC;AACxE,uBAAW,UAAU,IAAI,WAAW,mBAAmB;UAC/E;QACA,CAAiB;MACjB;IACA,OACa;AACD,iBAAW,cAAc,IAAI;IACzC;EACA,CAAK;AACD,SAAO;AACX;AAUO,SAAS,eAAe,QAAQC,eAAc,UAAU,CAAA,GAAI;AAC/D,QAAM,YAAYA,cAAa,MAAM;AACrC,SAAO;IACH,UAAU,QAAQ,YAAY,UAAU;IACxC,WAAW,QAAQ,aAAa,UAAU;EAClD;AACA;AAOO,SAAS,iBAAiB,QAAQA,eAAc,gBAAgB;AACnE,MAAI,UAAUA,cAAa,MAAM,EAAE,WAAW,CAAA;AAG9C,MAAI,gBAAgB;AAChB,cAAU;EAClB;AACI,SAAO;AACX;;;AC57BO,SAAS,uBAAuB,OAAO;AAC1C,MAAI,OAAO,QAAQ;AAEf,WAAO;MACH,GAAG;MACH,MAAM,CAAA;IAClB;EACA,OACS;AAED,UAAM;EACd;AACA;AAIO,SAAS,2BAA2B,OAAO;AAC9C,MAAI,MAAM,QAAQ;AAEd,WAAO;MACH,GAAG;MACH,MAAM;IAClB;EACA,OACS;AAED,UAAM;EACd;AACA;;;ACxBY,IAAC,+BAA+B,OAAO,8BAA8B;AACvE,IAACC;CACV,SAAUA,WAAU;AACjB,EAAAA,UAAS,oBAAoB,IAAI;AACjC,EAAAA,UAAS,iBAAiB,IAAI;AAC9B,EAAAA,UAAS,mBAAmB,IAAI;AAChC,EAAAA,UAAS,oBAAoB,IAAI;AACjC,EAAAA,UAAS,aAAa,IAAI;AAC1B,EAAAA,UAAS,cAAc,IAAI;AAC3B,EAAAA,UAAS,eAAe,IAAI;AAC5B,EAAAA,UAAS,YAAY,IAAI;AACzB,EAAAA,UAAS,oBAAoB,IAAI;AACrC,GAAGA,cAAaA,YAAW,CAAA,EAAG;AAClB,IAAC,4BAA4B,CAAC,YAAY;EAClD,UAAU;EACV;AACJ;AAWO,SAAS,wBAAwB,wBAAwB;AAC5D,SAAO,yBACD,EAAE,CAAC,4BAA4B,GAAG,uBAAsB,IACxD;AACV;;;AChCA,IAAM,mBAAmB,CAAC,QAAQ;AAC9B,SAAO,OAAO,KAAK,OAAO,UAAU;AACxC;AAyDO,SAAS,gBAAgB,QAAQ,oBAAoB,eAAe,WAAW,YAAYC,eAAc,wBAAwB;AAGpI,QAAM,cAAc,UAAU,cAAc;AAC5C,QAAM,KAAK,IAAI,SAAS;AAEpB,UAAM,UAAU,KAAK,KAAK,SAAS,CAAC;AACpC,QAAI;AACJ,QAAI;AACJ,QAAI,YAAY;AACZ,UAAI,iBAAiB,KAAK,CAAC,CAAC,GAAG;AAC3B,sBAAc,KAAK,CAAC;MACpC,OACiB;AACD,cAAM,IAAI,MAAM,oCAAoC,UAAU,IAAI,wBAAwB;MAC1G;IACA;AACQ,QAAI,aAAa;AACb,UAAI,YAAY;AACZ,cAAM,KAAK,CAAC;MAC5B,OACiB;AACD,cAAM,KAAK,CAAC;MAC5B;IACA;AACQ,QAAI,kBAAkB,gBAAgB;AAClC,aAAO;;QAEP;QAAQ;QAAoB;QAAWA;QAAc;QAAK;QAAS;MAAsB;IACrG;AACQ,WAAO,IAAI,QAAQ,oBAAoB,eAAe,WAAWA,eAAc,KAAK,SAAS,aAAa,sBAAsB;EACxI;AACI,SAAO;AACX;AAeA,SAAS,eAAe,GAAG,OAAO;AAC9B,SAAO,OAAO,EAAE,KAAK,MAAM;AAC/B;AACA,SAAS,WAAW,MAAM;AACtB,SAAO,gBAAgB,UAAU,UAAU;AAC/C;AACA,SAAS,YAAY,MAAM;AACvB,SAAO,gBAAgB,UAAU,WAAW;AAChD;AAKA,SAAS,uBAAuB,EAAE,MAAM,WAAU,GAAI;AAClD,QAAM,eAAe,aAAa,MAAM;AACxC,MAAI,WAAW,IAAI,GAAG;AAClB,WAAO,GAAG,KAAK,IAAI,GAAG,YAAY;EAC1C;AACI,MAAI,YAAY,IAAI,GAAG;AACnB,WAAO,GAAG,KAAK,KAAK,GAAG,YAAY;EAC3C;AACI,SAAO,GAAG,IAAI,GAAG,YAAY;AACjC;AAoBA,SAAS,eAAe,WAAW;AAC/B,MAAI,UAAU,cAAc,QAAW;AACnC,WAAO;EACf;AACI,QAAM,OAAO,OAAO,QAAQ,UAAU,SAAS,EAC1C,IAAI,CAAC,CAAC,GAAG,QAAQ,MAAM;AACxB,UAAM,WAAW,uBAAuB,QAAQ;AAChD,UAAM,YAAY,SAAS,UACrB,IAAI,QAAQ,IAAI,SAAS,kBAAkB,KAAK,GAAG,KACnD;AACN,WAAO,IAAI,CAAC,KAAK,SAAS;EAClC,CAAK,EACI,KAAK,IAAI;AACd,SAAO,KAAK,SAAS,IAAI,IAAI,IAAI,MAAM;AAC3C;AAoBA,SAAS,eAAe,WAAW;AAC/B,MAAI,UAAU,cAAc,QAAW;AACnC,WAAO;EACf;AACI,QAAM,OAAO,OAAO,KAAK,UAAU,SAAS,EACvC,IAAI,CAAC,MAAM,GAAG,CAAC,MAAM,CAAC,EAAE,EACxB,KAAK,IAAI;AACd,SAAO,KAAK,SAAS,IAAI,IAAI,IAAI,MAAM;AAC3C;AAwBA,SAAS,sBAAsB,oBAAoB,WAAW;AAC1D,MAAI,eAAe,WAAW,MAAM,KAChC,eAAe,UAAU,MAAM,MAAM,GAAG;AACxC,WAAO;EACf,WACa,eAAe,UAAU,MAAM,UAAU,GAAG;AACjD,UAAM,WAAW,mBAAmB,UAAU,UAAU,KAAK,QAAQ;AACrE,WAAO,IAAI,uBAAuB,wCAAwC,UAAU,kBAAkB,CAAC,CAAC;EAChH,WACa,eAAe,UAAU,MAAM,OAAO,GAAG;AAC9C,WAAO,IAAI,qBAAqB,oBAAoB,UAAU,KAAK,KAAK,CAAC;EACjF,OACS;AACD,WAAO;EACf;AACA;AASA,SAAS,mBAAmB,WAAW,OAAO,CAAA,GAAI;AAC9C,QAAM,YAAY,CAAA;AAClB,MAAI,UAAU,cAAc,QAAW;AACnC,WAAO;EACf;AACI,aAAW,UAAU,OAAO,OAAO,UAAU,SAAS,GAAG;AACrD,QAAI,OAAO,KAAK,OAAO,IAAI,MAAM,aAAa;AAC1C,gBAAU,OAAO,IAAI,IAAI,KAAK,OAAO,IAAI;IACrD,WACiB,OAAO,YAAY;AAGxB,YAAM,IAAI,MAAM,GAAG,UAAU,IAAI,wBAAwB,OAAO,IAAI,GAAG;IACnF;EACA;AACI,SAAO;AACX;AAcA,SAAS,IAAI,QAAQ,oBAAoB,eAAe,WAAWA,eAAc,MAAM,SAASC,UAAS,wBAAwB;AAC7H,SAAO,eAAe,OAAO,kBAAkB;AAC3C,UAAM,EAAE,MAAM,cAAa,IAAK;AAChC,UAAM,OAAO,eAAe,QAAQD,eAAc,OAAO;AACzD,UAAM,UAAU,iBAAiB,QAAQA,eAAc,SAAS,OAAO;AACvE,UAAM,kBAAkB,eAAe,SAAS;AAChD,UAAM,kBAAkB,eAAe,SAAS;AAChD,UAAM,eAAe,sBAAsB,oBAAoB,SAAS;AACxE,UAAM,sBAAsB,eAAe,UAAU,MAAM,OAAO,IAC5D,UAAU,KAAK,QACf;AACN,UAAM,QAAQ;MAChB,cAAc,kBAAiB,CAAE,GAAG,eAAe;QACjD,aAAa,GAAG,eAAe,IAAI,YAAY;;;AAG/C,UAAM,YAAY,mBAAmB,WAAW,IAAI;AACpD,UAAM,oBAAoB,wBAAwB,sBAAsB;AACxE,QAAI;AACA,YAAM,cAAcC,WACd,OAAO,QAAQA,UAAS;QACtB,GAAG;QACH;QACA;MACpB,GAAmB,OAAO,IACR,OAAO,QAAQ;QACb,GAAG;QACH;QACA;QACA,GAAG;MACvB,GAAmB,OAAO;AACd,YAAM,kBAAkB,qBAAqB,aAAa,aAAa;AACvE,YAAM,EAAE,MAAM,WAAU,IAAK,MAAM;AAEnC,UAAI,MAAM;AACN,cAAM,CAAC,GAAG,IAAI,OAAO,KAAK,IAAI;AAC9B,cAAM,gBAAgB,MAAM,QAAQ,KAAK,GAAG,CAAC;AAK7C,cAAM,kBAAkB,gBAClB,KAAK,GAAG,EAAE,OAAO,CAAC,MAAM,CAAC,IACzB,KAAK,GAAG;AAGd,cAAM,cAAc,sBACd,gBAAgB,QAAQ,qBAAqB,gBAAgB,kBAAkB,CAAC,eAAe,GAAG,oBAAoB,KAAK,UAAU,KAAK,WAAW,CAAC,CAACA,QAAO,IAC9J;AACN,eAAO;UACH,MAAM,CAAC,iBAAiB,MAAM,QAAQ,WAAW,IAC3C,YAAY,MAAK,IACjB;UACN;QACpB;MACA,OACiB;AACD,eAAO,EAAE,MAAM,MAAM,WAAU;MAC/C;IACA,SACe,OAAO;AAQV,YAAM,EAAE,MAAM,OAAM,IAAK;AAIzB,UAAI,QAAQ,OAAO,KAAK,IAAI,EAAE,WAAW,KAAK,QAAQ;AAClD,cAAM,CAAC,GAAG,IAAI,OAAO,KAAK,IAAI;AAC9B,cAAM,gBAAgB,MAAM,QAAQ,KAAK,GAAG,CAAC;AAK7C,cAAM,kBAAkB,gBAClB,KAAK,GAAG,EAAE,OAAO,CAAC,MAAM,CAAC,IACzB,KAAK,GAAG;AAKd,YAAI,iBAAiB;AAGjB,gBAAM,cAAc,sBACd,gBAAgB,QAAQ,qBAAqB,gBAAgB,kBAAkB,CAAC,eAAe,GAAG,oBAAoB,KAAK,UAAU,KAAK,WAAW,CAAC,CAACA,QAAO,IAC9J;AACN,iBAAO;YACH,MAAM,CAAC,iBAAiB,MAAM,QAAQ,WAAW,IAC3C,YAAY,MAAK,IACjB;YACN;UACxB;QACA,OACqB;AAED,iBAAO,2BAA2B,KAAK;QAC3D;MACA,OACiB;AAED,eAAO,2BAA2B,KAAK;MACvD;IACA;EACA,CAAK;AACL;AAYA,SAAS,gBAAgB,QAAQ,oBAAoB,WAAWD,eAAc,MAAM,SAAS,wBAAwB;AACjH,QAAM,gBAAgB;AACtB,QAAM,EAAE,MAAM,cAAa,IAAK;AAChC,QAAM,OAAO,eAAe,QAAQA,eAAc,OAAO;AACzD,QAAM,UAAU,iBAAiB,QAAQA,eAAc,SAAS,OAAO;AACvE,QAAM,kBAAkB,eAAe,SAAS;AAChD,QAAM,kBAAkB,eAAe,SAAS;AAChD,QAAM,eAAe,sBAAsB,oBAAoB,SAAS;AACxE,QAAM,sBAAsB,eAAe,UAAU,MAAM,OAAO,IAC5D,UAAU,KAAK,QACf;AACN,QAAM,QAAQ;MACZ,cAAc,kBAAiB,CAAE,GAAG,eAAe;QACjD,aAAa,GAAG,eAAe,IAAI,YAAY;;;AAGnD,QAAM,YAAY,mBAAmB,WAAW,IAAI;AACpD,QAAM,oBAAoB,wBAAwB,sBAAsB;AACxE,QAAME,cAAa,OAAO,QAAQ;IAC9B,GAAG;IACH;IACA;IACA,GAAG;EACX,GAAO,OAAO;AACV,SAAOA,YAAW,KAAK,IAAI,CAAC,UAAU;AAClC,UAAM,CAAC,GAAG,IAAI,OAAO,KAAK,MAAM,IAAI;AACpC,UAAM,OAAO,MAAM,KAAK,GAAG;AAC3B,UAAM,CAAC,WAAW,IAAI,sBAChB,gBAAgB,QAAQ,qBAAqB,CAAC,IAAI,GAAG,oBAAoB,KAAK,UAAU,KAAK,SAAS,IACtG,CAAC,IAAI;AACX,WAAO;EACf,CAAK,CAAC;AACN;;;AC/aA,IAAM,mBAAmB;EACrB,SAAS;EACT,WAAW;EACX,eAAe;AACnB;AACO,SAAS,iCAAiC,QAAQC,SAAQ,gBAAgBC,eAAc;AAI3F,MAAI,CAACD,SAAQ;AACT,WAAO,CAAA;EACf;AACI,QAAM,qBAAqBA,QAAO;AAElC,MAAI,CAAC,oBAAoB;AACrB,WAAO,CAAA;EACf;AAGI,QAAM,aAAa,mBAAmB,cAAc;AACpD,MAAI,CAAC,YAAY;AACb,WAAO,CAAA;EACf;AACI,QAAM,MAAM,CAAA;AACZ,QAAM,aAAaC,cAAa,MAAM,EAAE,YAAY;AACpD,aAAW,aAAa,OAAO,OAAO,UAAU,GAAG;AAC/C,QAAI,UAAU,IAAI,IAAI,gBAAgB,QAAQ,oBAAoB,iBAAiB,cAAc,GAAG,WAAW,YAAYA,aAAY;EAC/I;AACI,SAAO;AACX;AACO,SAAS,gCAAgC,QAAQD,SAAQC,eAAc;AAC1E,SAAO,iCAAiC,QAAQD,SAAQ,aAAaC,aAAY;AACrF;AACO,SAAS,8BAA8B,QAAQD,SAAQC,eAAc;AACxE,SAAO,iCAAiC,QAAQD,SAAQ,WAAWC,aAAY;AACnF;AACO,SAAS,oCAAoC,QAAQD,SAAQC,eAAc;AAC9E,SAAO,iCAAiC,QAAQD,SAAQ,iBAAiBC,aAAY;AACzF;;;AClCO,SAAS,WAAW,QAAQ,oBAAoB,OAAO,WAAWC,eAAc,aAAa,OAAO,wBAAwB;AAC/H,QAAM,iBAAiB,CAAC,aAAa,KAAK,YAAY;AAClD,WAAO,KAAK,QAAQ,oBAAoB,OAAO,KAAK,SAAS,WAAWA,eAAc,aAAa,sBAAsB;EACjI;AACI,QAAMC,OAAM,CAAC,KAAK,YAAY;AAC1B,WAAO,KAAK,QAAQ,oBAAoB,OAAO,KAAK,SAAS,WAAWD,eAAc,QAAW,sBAAsB;EAC/H;AACI,SAAO,aAAa,iBAAiBC;AACzC;AACA,SAAS,KAAK,QAAQ,oBAAoB,OAAO,KAAK,SAAS,WAAWD,eAAcE,UAAS,wBAAwB;AACrH,SAAO,eAAe,OAAO,kBAAkB;AAC3C,UAAM,EAAE,MAAAC,MAAI,IAAK;AACjB,UAAM,QAAQ,wBAAwB,oBAAoB,OAAO,WAAW,OAAO;AACnF,UAAM,YAAY,sBAAsB,OAAO,WAAW,KAAK,kBAAkB;AACjF,UAAM,OAAO,eAAe,QAAQH,eAAc,OAAO;AACzD,UAAM,UAAU,iBAAiB,QAAQA,eAAc,SAAS,OAAO;AACvE,UAAM,oBAAoB,wBAAwB,sBAAsB;AACxE,QAAI;AACA,YAAM,cAAcE,WACd,OAAO,QAAQA,UAAS;QACtB,GAAG;QACH;QACA;MACpB,GAAmB,OAAO,IACR,OAAO,QAAQ;QACb,GAAG;QACH;QACA;QACA,GAAG;MACvB,GAAmB,OAAO;AACd,YAAM,kBAAkB,qBAAqB,aAAa,aAAa;AACvE,YAAM,EAAE,MAAM,WAAU,IAAK,MAAM;AAEnC,UAAI,MAAM;AACN,cAAM,CAAC,GAAG,IAAI,OAAO,KAAK,IAAI;AAC9B,cAAM,kBAAkB,aAAa,oBAAoBC,OAAM,KAAK,GAAG,CAAC;AACxE,YAAI,oBAAoB,MAAM;AAC1B,iBAAO,EAAE,MAAM,MAAM,WAAU;QACnD,WACyB,SAAS,cAAc;AAC5B,iBAAO,EAAE,MAAM,iBAAiB,WAAU;QAC9D,OACqB;AAED,gBAAM,CAAC,WAAW,IAAI,gBAAgB,QAAQA,OAAM,CAAC,eAAe,GAAG,oBAAoB,KAAK,UAAU,KAAK,WAAW,CAAC,CAACD,QAAO;AACnI,iBAAO,EAAE,MAAM,aAAa,WAAU;QAC1D;MACA,OACiB;AACD,eAAO,EAAE,MAAM,MAAM,WAAU;MAC/C;IACA,SACe,OAAO;AAQV,YAAM,EAAE,MAAM,OAAM,IAAK;AAIzB,UAAI,QAAQ,OAAO,KAAK,IAAI,EAAE,WAAW,KAAK,QAAQ;AAClD,cAAM,CAAC,GAAG,IAAI,OAAO,KAAK,IAAI;AAC9B,cAAM,kBAAkB,aAAa,oBAAoBC,OAAM,KAAK,GAAG,CAAC;AAKxE,YAAI,iBAAiB;AACjB,cAAI,SAAS,cAAc;AACvB,mBAAO,EAAE,MAAM,iBAAiB,OAAM;UAC9D,OACyB;AAED,kBAAM,CAAC,WAAW,IAAI,gBAAgB,QAAQA,OAAM,CAAC,eAAe,GAAG,oBAAoB,KAAK,UAAU,KAAK,WAAW,CAAC,CAACD,QAAO;AACnI,mBAAO,EAAE,MAAM,aAAa,OAAM;UAC1D;QACA,OACqB;AAED,iBAAO,2BAA2B,KAAK;QAC3D;MACA,OACiB;AAED,eAAO,2BAA2B,KAAK;MACvD;IACA;EACA,CAAK;AACL;;;AC5FO,SAAS,YAAY,QAAQ,oBAAoB,OAAOE,eAAcC,WAAU,OAAO,wBAAwB;AAClH,QAAM,kBAAkB,CAAC,aAAa,SAAS;AAC3C,WAAO,MAAM,QAAQ,oBAAoB,OAAOD,eAAc,MAAM,aAAa,sBAAsB;EAC/G;AACI,QAAM,OAAO,CAAC,SAAS;AACnB,WAAO,MAAM,QAAQ,oBAAoB,OAAOA,eAAc,MAAM,QAAW,sBAAsB;EAC7G;AACI,SAAOC,WAAU,kBAAkB;AACvC;AACA,SAAS,MAAM,QAAQ,oBAAoB,OAAOD,eAAc,MAAM,aAAa,wBAAwB;AACvG,SAAO,eAAe,OAAO,kBAAkB;AAC3C,UAAM,EAAE,MAAAE,MAAI,IAAK;AACjB,UAAM,QAAQ,wBAAwB,oBAAoB,OAAO,QAAQ,IAAI;AAC7E,UAAM,YAAY,sBAAsB,OAAO,QAAQ,MAAM,kBAAkB;AAC/E,UAAM,OAAO,eAAe,QAAQF,eAAc,IAAI;AACtD,UAAM,UAAU,iBAAiB,QAAQA,eAAc,MAAM,OAAO;AACpE,UAAM,oBAAoB,wBAAwB,sBAAsB;AACxE,QAAI;AACA,YAAM,cAAc,cACd,OAAO,QAAQ,aAAa;QAC1B,GAAG;QACH;QACA;MACpB,GAAmB,OAAO,IACR,OAAO,QAAQ;QACb,GAAG;QACH;QACA;QACA,GAAG;MACvB,GAAmB,OAAO;AACd,YAAM,kBAAkB,qBAAqB,aAAa,aAAa;AACvE,YAAM,EAAE,MAAM,WAAU,IAAK,MAAM;AAEnC,UAAI,SAAS,QAAW;AACpB,cAAM,CAAC,GAAG,IAAI,OAAO,KAAK,IAAI;AAC9B,YAAI,KAAK,GAAG,EAAE,OAAO;AACjB,gBAAM,kBAAkB,KAAK,GAAG,EAAE,MAAM,IAAI,CAAC,UAAU,aAAa,oBAAoBE,OAAM,KAAK,CAAC;AAEpG,cAAI,MAAM,cAAc;AACpB,mBAAO;cACH,MAAM;cACN,WAAW,KAAK,GAAG,EAAE;cACrB;YAC5B;UACA,OACyB;AACD,kBAAM,cAAc,gBAAgB,QAAQA,OAAM,iBAAiB,oBAAoB,KAAK,UAAU,KAAK,WAAW,CAAC,CAAC,WAAW;AACnI,mBAAO;cACH,MAAM;cACN,WAAW,KAAK,GAAG,EAAE;cACrB;YAC5B;UACA;QACA;AACgB,eAAO;UACH,MAAM,KAAK,GAAG;UACd,WAAW,KAAK,GAAG,EAAE;UACrB;QACpB;MACA;IACA,SACe,OAAO;AAQV,YAAM,EAAE,MAAM,OAAM,IAAK;AAEzB,UAAI,SAAS,UACT,SAAS,QACT,OAAO,KAAK,IAAI,EAAE,WAAW,KAC7B,QAAQ;AACR,cAAM,CAAC,GAAG,IAAI,OAAO,KAAK,IAAI;AAC9B,YAAI,KAAK,GAAG,GAAG,OAAO;AAClB,gBAAM,kBAAkB,KAAK,GAAG,EAAE,MAAM,IAAI,CAAC,UAAU,aAAa,oBAAoBA,OAAM,KAAK,CAAC;AAKpG,cAAI,iBAAiB;AAEjB,gBAAI,MAAM,cAAc;AACpB,qBAAO;gBACH,MAAM;gBACN,WAAW,KAAK,GAAG,GAAG;gBACtB;cAChC;YACA,OAC6B;AACD,oBAAM,cAAc,gBAAgB,QAAQA,OAAM,iBAAiB,oBAAoB,KAAK,UAAU,KAAK,WAAW,CAAC,CAAC,WAAW;AAEnI,qBAAO;gBACH,MAAM;gBACN,WAAW,KAAK,GAAG,GAAG;gBACtB;cAChC;YACA;UACA;AACoB,iBAAO;YACH,MAAM,KAAK,GAAG;YACd,WAAW,KAAK,GAAG,GAAG;YACtB;UACxB;QACA,OACqB;AAED,iBAAO,uBAAuB,KAAK;QACvD;MACA,OACiB;AAED,eAAO,uBAAuB,KAAK;MACnD;IACA;EACA,CAAK;AACL;;;AC3HA,IAAM,qBAAqB,CAAC;AAC5B,IAAM,kBAAkB,IAAI,MAAM,EAAE;AACpC,SAAS,IAAI,GAAG,QAAQ,IAAI,WAAW,CAAC,GAAG,QAAQ,IAAI,WAAW,CAAC,GAAG,IAAI,SAAS,OAAO,KAAK;AAC3F,QAAM,OAAO,OAAO,aAAa,IAAI,KAAK;AAC1C,qBAAmB,IAAI,IAAI;AAC3B,kBAAgB,CAAC,IAAI;AACzB;AACA,SAAS,IAAI,GAAG,QAAQ,IAAI,WAAW,CAAC,GAAG,QAAQ,IAAI,WAAW,CAAC,GAAG,IAAI,SAAS,OAAO,KAAK;AAC3F,QAAM,OAAO,OAAO,aAAa,IAAI,KAAK;AAC1C,QAAM,QAAQ,IAAI;AAClB,qBAAmB,IAAI,IAAI;AAC3B,kBAAgB,KAAK,IAAI;AAC7B;AACA,SAAS,IAAI,GAAG,IAAI,IAAI,KAAK;AACzB,qBAAmB,EAAE,SAAS,EAAE,CAAC,IAAI,IAAI;AACzC,QAAM,OAAO,EAAE,SAAS,EAAE;AAC1B,QAAM,QAAQ,IAAI;AAClB,qBAAmB,IAAI,IAAI;AAC3B,kBAAgB,KAAK,IAAI;AAC7B;AACA,mBAAmB,GAAG,IAAI;AAC1B,gBAAgB,EAAE,IAAI;AACtB,mBAAmB,GAAG,IAAI;AAC1B,gBAAgB,EAAE,IAAI;AACtB,IAAM,gBAAgB;AACtB,IAAM,cAAc;AACpB,IAAM,iBAAiB;;;ACzBhB,IAAM,aAAa,CAAC,UAAU;AACjC,MAAI,kBAAmB,MAAM,SAAS,IAAK;AAC3C,MAAI,MAAM,MAAM,EAAE,MAAM,MAAM;AAC1B,uBAAmB;AAAA,EACvB,WACS,MAAM,MAAM,EAAE,MAAM,KAAK;AAC9B;AAAA,EACJ;AACA,QAAM,MAAM,IAAI,YAAY,eAAe;AAC3C,QAAM,WAAW,IAAI,SAAS,GAAG;AACjC,WAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK,GAAG;AACtC,QAAI,OAAO;AACX,QAAI,YAAY;AAChB,aAAS,IAAI,GAAG,QAAQ,IAAI,GAAG,KAAK,OAAO,KAAK;AAC5C,UAAI,MAAM,CAAC,MAAM,KAAK;AAClB,YAAI,EAAE,MAAM,CAAC,KAAK,qBAAqB;AACnC,gBAAM,IAAI,UAAU,qBAAqB,MAAM,CAAC,CAAC,oBAAoB;AAAA,QACzE;AACA,gBAAQ,mBAAmB,MAAM,CAAC,CAAC,MAAO,QAAQ,KAAK;AACvD,qBAAa;AAAA,MACjB,OACK;AACD,iBAAS;AAAA,MACb;AAAA,IACJ;AACA,UAAM,cAAe,IAAI,IAAK;AAC9B,aAAS,YAAY;AACrB,UAAM,aAAa,KAAK,MAAM,YAAY,WAAW;AACrD,aAAS,IAAI,GAAG,IAAI,YAAY,KAAK;AACjC,YAAM,UAAU,aAAa,IAAI,KAAK;AACtC,eAAS,SAAS,cAAc,IAAI,OAAQ,OAAO,WAAY,MAAM;AAAA,IACzE;AAAA,EACJ;AACA,SAAO,IAAI,WAAW,GAAG;AAC7B;;;ACnCO,IAAMC,YAAW,CAAC,UAAU,IAAI,YAAY,EAAE,OAAO,KAAK;;;ACE1D,SAAS,SAAS,QAAQ;AAC7B,MAAI;AACJ,MAAI,OAAO,WAAW,UAAU;AAC5B,YAAQC,UAAS,MAAM;AAAA,EAC3B,OACK;AACD,YAAQ;AAAA,EACZ;AACA,QAAMC,eAAc,OAAO,UAAU,YAAY,OAAO,MAAM,WAAW;AACzE,QAAM,eAAe,OAAO,UAAU,YAClC,OAAO,MAAM,eAAe,YAC5B,OAAO,MAAM,eAAe;AAChC,MAAI,CAACA,gBAAe,CAAC,cAAc;AAC/B,UAAM,IAAI,MAAM,kFAAkF;AAAA,EACtG;AACA,MAAI,MAAM;AACV,WAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK,GAAG;AACtC,QAAI,OAAO;AACX,QAAI,YAAY;AAChB,aAAS,IAAI,GAAG,QAAQ,KAAK,IAAI,IAAI,GAAG,MAAM,MAAM,GAAG,IAAI,OAAO,KAAK;AACnE,cAAQ,MAAM,CAAC,MAAO,QAAQ,IAAI,KAAK;AACvC,mBAAa;AAAA,IACjB;AACA,UAAM,kBAAkB,KAAK,KAAK,YAAY,aAAa;AAC3D,aAAS,kBAAkB,gBAAgB;AAC3C,aAAS,IAAI,GAAG,KAAK,iBAAiB,KAAK;AACvC,YAAM,UAAU,kBAAkB,KAAK;AACvC,aAAO,iBAAiB,OAAQ,kBAAkB,WAAY,MAAM;AAAA,IACxE;AACA,WAAO,KAAK,MAAM,GAAG,IAAI,eAAe;AAAA,EAC5C;AACA,SAAO;AACX;;;AC/BY,IAAC,qBAAqB,CAAC,YAAY,QAAQ,IAAI,CAACC,WAAU;AAClE,MAAIA,OAAM,OAAO;AACb,WAAO,sBAAsBA,MAAK;EAC1C;AACI,MAAIA,OAAM,UAAU;AAChB,WAAO,yBAAyBA,MAAK;EAC7C;AACI,MAAIA,OAAM,SAAS;AACf,WAAO,wBAAwBA,MAAK;EAC5C;AACI,MAAIA,OAAM,YAAY;AAClB,WAAO,2BAA2BA,MAAK;EAC/C;AACI,SAAO,qBAAqBA,MAAK;AACrC,CAAC;AACD,IAAM,wBAAwB,CAAC,EAAE,MAAK,OAAQ;EAC1C,OAAO;IACH,GAAG;IACH,QAAQ;MACJ,GAAG,MAAM;MACT,OAAO,WAAW,MAAM,OAAO,KAAK;IAChD;EACA;AACA;AACA,IAAM,2BAA2B,CAAC,EAAE,UAAAC,UAAQ,OAAQ;EAChD,UAAU;IACN,GAAGA;IACH,QAAQ;MACJ,GAAGA,UAAS;MACZ,OAAO,WAAWA,UAAS,OAAO,KAAK;IACnD;EACA;AACA;AACA,IAAM,uBAAuB,CAAC,EAAE,KAAI,OAAQ;EACxC,MAAM,KAAK,MAAM,IAAI;AACzB;AACA,IAAM,0BAA0B,CAAC,EAAE,QAAO,OAAQ;EAC9C,SAAS;IACL,GAAG;IACH,OAAO,KAAK,MAAM,QAAQ,KAAK;EACvC;AACA;AACA,IAAM,6BAA6B,CAAC,EAAE,WAAU,OAAS;EACrD,YAAY;IACR,WAAW,WAAW;IACtB,SAAS,WAAW,QAAQ,IAAI,CAAC,oBAAoB;AACjD,UAAI,gBAAgB,OAAO;AACvB,eAAO,sBAAsB,eAAe;MAC5D;AACY,UAAI,gBAAgB,MAAM;AACtB,eAAO,qBAAqB,eAAe;MAC3D;AACY,aAAO,qBAAqB,eAAe;IACvD,CAAS;EACT;AACA;AACA,IAAM,uBAAuB,CAACD,WAAU,OAAO,YAAY,OAAO,QAAQA,MAAK,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,MAAM,IAAI,CAAC;;;ACxDnG,IAAC,mCAAmC,CAAC,EAAE,SAAS,WAAW,IAAI,gBAAgB,KAAI,OAAS;EACpG,SAAS,mBAAmB,WAAW,CAAA,CAAE;EACzC;EACA;EACA;EACA;AACJ;;;ACJY,IAAC,6BAA6B,CAAC,QAAQ,oBAAoB,gBAAgB,0BAA0BE,kBAAiB,OAAO,UAAU;AAC/I,QAAM,OAAO,YAAY,QAAQ,oBAAoB,0BAA0BA,eAAc,OAAO,0BAA0BC,UAAS,YAAY,CAAC;AACpJ,QAAM,EAAE,MAAM,WAAW,OAAM,IAAK,MAAM,KAAK;IAC3C,GAAG;IACH,QAAQ,EAAE,gBAAgB,EAAE,IAAI,eAAc,EAAE;EACxD,CAAK;AACD,SAAO;IACH,MAAM,KAAK,IAAI,CAAC,SAAS,iCAAiC,IAAI,CAAC;IAC/D;IACA;EACR;AACA;;;ACdY,IAAC,uCAAuC,CAAC,EAAE,IAAI,gBAAgB,yBAAyB,mBAAmB,yBAAyB,wBAAwB,kBAAkB,qBAAqB,YAAY,OAAM,MAAQ;AACrO,MAAI,QAAQ;AACR,UAAM,QAAQ;MACV;MACA;MACA;MACA;IACZ;AACQ,WAAO,EAAE,MAAK;EACtB;AACI,QAAM,OAAO,uCAAuC;IAChD;IACA;IACA;IACA;IACA;IACA;IACA,MAAM;IACN,SAASC,yBAAwB,mBAAmB;IACpD;EACR,CAAK;AACD,SAAO,EAAE,KAAI;AACjB;AACA,IAAMA,2BAA0B,CAAC,wBAAwB;AACrD,MAAI,qBAAqB;AACrB,UAAM,eAAe;MACjB,GAAG;MACH,OAAO,KAAK,MAAM,oBAAoB,KAAK;IACvD;AACQ,WAAO;EACf;AACA;AACA,IAAM,yCAAyC,CAACC,WAAU,OAAO,YAAY,OAAO,QAAQA,MAAK,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,MAAM,IAAI,CAAC;;;AC7BrH,IAAC,8BAA8B,CAAC,QAAQ,oBAAoB,gBAAgB,uBAAuBC,kBAAiB,CAAC,YAAY;AACzI,QAAM,EAAE,cAAa,IAAK;AAE1B,MAAI,CAAC,eAAe;AAChB,WAAO,CAAA;EACf;AACI,QAAM,kBAAkB,cAAc,qBAAqB,EAAE,QAAQ;AACrE,QAAM,qBAAqB,gBAAgB,QAAQ,oBAAoB,gBAAgB,iBAAiB,OAAOA,eAAc,0BAA0BC,UAAS,aAAa,CAAC;AAC9K,SAAO,mBAAmB,EAAE,eAAc,CAAE,EAAE,UAAU,CAAC,SAAS;AAC9D,UAAM,EAAE,MAAM,MAAK,IAAK,qCAAqC,IAAI;AACjE,QAAI;AACA,cAAQ,MAAM,KAAK;AACvB,QAAI;AACA,cAAQ,KAAK,IAAI;EAC7B,CAAK;AACL;;;ACjBY,IAAC,qBAAqB,CAAC,cAAc,KAAK,UAAU,SAAS;AAC7D,IAAC,mBAAmB,CAAC,YAAY,QAAQ,IAAI,CAACC,WAAU;AAChE,MAAIA,OAAM,OAAO;AACb,WAAO,oBAAoBA,MAAK;EACxC;AACI,MAAIA,OAAM,UAAU;AAChB,WAAO,uBAAuBA,MAAK;EAC3C;AACI,MAAIA,OAAM,YAAY;AAClB,WAAO,yBAAyBA,MAAK;EAC7C;AACI,SAAOA;AACX,CAAC;AACW,IAAC,6BAA6B,CAAC,EAAE,MAAK,OAAQ;EACtD,OAAO,OAAO,QAAQ,KAAK,EAAE,IAAI,CAAC,CAACC,OAAM,IAAI,OAAO;IAChD,UAAU;MACN,MAAAA;MACA,aAAa,KAAK;MAClB,aAAa;QACT,MAAM,KAAK,UAAU,KAAK,YAAY,IAAI;MAC1D;IACA;EACA,EAAM;AACN;AACA,IAAM,sBAAsB,CAAC,EAAE,MAAK,OAAQ;EACxC,OAAO;IACH,GAAG;IACH,QAAQ;MACJ,GAAG,MAAM;MACT,OAAO,SAAS,MAAM,OAAO,KAAK;IAC9C;EACA;AACA;AACA,IAAM,yBAAyB,CAAC,EAAE,UAAAC,UAAQ,OAAS;EAC/C,UAAU;IACN,GAAGA;IACH,QAAQ;MACJ,GAAGA,UAAS;MACZ,OAAO,SAASA,UAAS,OAAO,KAAK;IACjD;EACA;AACA;AACA,IAAM,qBAAqB,CAAC,EAAE,KAAI,OAAQ;EACtC,MAAM,KAAK,UAAU,IAAI;AAC7B;AACA,IAAM,2BAA2B,CAAC,EAAE,WAAU,OAAS;EACnD,YAAY;IACR,GAAG;IACH,SAAS,WAAW,QAAQ,IAAI,CAAC,oBAAoB;AACjD,UAAI,gBAAgB,OAAO;AACvB,eAAO,oBAAoB,eAAe;MAC1D;AACY,UAAI,gBAAgB,MAAM;AACtB,eAAO,mBAAmB,eAAe;MACzD;AACY,aAAO;IACnB,CAAS;EACT;AACA;;;ACvDY,IAAC,4BAA4B,CAAC,QAAQ,oBAAoB,gBAAgB,uBAAuBC,kBAAiB,OAAO,UAAU;AAC3I,QAAM,EAAE,cAAa,IAAK;AAE1B,MAAI,CAAC,eAAe;AAChB,WAAO,CAAA;EACf;AACI,QAAM,iBAAiB,OAAO,UAAU,WAAW,EAAE,SAAS,CAAC,EAAE,MAAM,MAAK,CAAE,EAAC,IAAK;AACpF,QAAM,EAAE,SAAS,WAAW,kBAAiB,IAAK;AAClD,QAAM,aAAa,cAAc,qBAAqB,EAAE,QAAQ;AAChE,QAAM,gBAAgB,gBAAgB,QAAQ,oBAAoB,YAAY,YAAY,OAAOA,eAAc,0BAA0BC,UAAS,WAAW,CAAC;AAC9J,QAAM,EAAE,MAAM,OAAM,IAAK,MAAM,cAAc;IACzC;IACA,SAAS,iBAAiB,OAAO;IACjC,GAAI,aAAa,EAAE,WAAW,mBAAmB,SAAS,EAAC;IAC3D,GAAI,qBAAqB;MACrB,mBAAmB,2BAA2B,iBAAiB;IAC3E;EACA,CAAK;AACD,SAAO;IACH,MAAM,OAAO,iCAAiC,IAAI,IAAI;IACtD;EACR;AACA;;;ACvBY,IAAC,4BAA4B,CAAC,QAAQ,oBAAoB,gBAAgB,uBAAuB,uBAAuB,uBAAuB,0BAA0BC,eAAc,sBAAsB,qBAAqB;AAC1O,MAAI,CAAC,gBAAgB;AACjB,UAAM,IAAI,MAAM,kCAAkC,qBAAqB,2BAA2B;EAC1G;AACI,SAAO;IACH,IAAI;IACJ,WAAW;IACX,WAAW;IACX,UAAU;IACV,MAAM;IACN,eAAe,4BAA4B,QAAQ,oBAAoB,gBAAgB,uBAAuBA,aAAY;IAC1H,aAAa,0BAA0B,QAAQ,oBAAoB,gBAAgB,uBAAuBA,aAAY;IACtH,cAAc,2BAA2B,QAAQ,oBAAoB,gBAAgB,0BAA0BA,aAAY;EACnI;AACA;;;ACdY,IAAC,mCAAmC,CAAC,QAAQ,oBAAoB,uBAAuB,mBAAmB,0BAA0BC,kBAAiB,OAAO,UAAU;AAC/K,QAAM,EAAE,MAAAC,OAAM,UAAU,eAAc,IAAK,SAAS,CAAA;AACpD,QAAM,WAAW,KAAK,UAAU,cAAc;AAC9C,QAAM,kBAAkB,WAAW,QAAQ,oBAAoB,mBAAmB,UAAUD,eAAc,OAAO,0BAA0BE,UAAS,kBAAkB,CAAC;AACvK,QAAM,EAAE,MAAM,OAAM,IAAK,MAAM,gBAAgB,EAAE,MAAAD,OAAM,SAAQ,CAAE;AACjE,SAAO;IACH,MAAM,0BAA0B,QAAQ,oBAAoB,MAAM,IAAI,MAAM,WAAW,MAAM,WAAW,uBAAuB,0BAA0BD,eAAc,MAAM,UAAU,MAAM,IAAI;IACjM;EACR;AACA;;;ACTY,IAAC,gCAAgC,CAAC,QAAQ,oBAAoB,uBAAuB,mBAAmB,0BAA0BG,kBAAiB,OAAO,EAAE,GAAE,MAAO;AAC7K,QAAMC,OAAM,WAAW,QAAQ,oBAAoB,mBAAmB,OAAOD,eAAc,OAAO,0BAA0BE,UAAS,eAAe,CAAC;AACrJ,QAAM,EAAE,MAAM,OAAM,IAAK,MAAMD,KAAI,EAAE,GAAE,CAAE;AACzC,SAAO;IACH,MAAM,OACA,0BAA0B,QAAQ,oBAAoB,KAAK,IAAI,KAAK,WAAW,KAAK,WAAW,uBAAuB,0BAA0BD,eAAc,MAAM,UAAU,MAAM,IAAI,IACxL;IACN;EACR;AACA;;;ACTY,IAAC,kCAAkC,CAAC,QAAQ,oBAAoB,uBAAuB,mBAAmB,0BAA0BG,kBAAiB,OAAO,UAAU;AAC9K,QAAM,OAAO,YAAY,QAAQ,oBAAoB,mBAAmBA,eAAc,OAAO,0BAA0BC,UAAS,iBAAiB,CAAC;AAClJ,QAAM,EAAE,MAAM,WAAW,OAAM,IAAK,MAAM,KAAK,KAAK;AACpD,SAAO;IACH,MAAM,KAAK,IAAI,CAAC,UAAU;AACtB,aAAO,0BAA0B,QAAQ,oBAAoB,MAAM,IAAI,MAAM,WAAW,MAAM,WAAW,uBAAuB,0BAA0BD,eAAc,OAAO,UAAU,OAAO,IAAI;IAChN,CAAS;IACD;IACA;EACR;AACA;;;ACVY,IAAC,mCAAmC,CAAC,QAAQ,oBAAoB,uBAAuB,mBAAmB,0BAA0BE,kBAAiB,OAAO,EAAE,GAAE,MAAO;AAChL,QAAM,kBAAkB,WAAW,QAAQ,oBAAoB,mBAAmB,UAAUA,eAAc,OAAO,0BAA0BC,UAAS,kBAAkB,CAAC;AACvK,QAAM,EAAE,MAAM,OAAM,IAAK,MAAM,gBAAgB,EAAE,GAAE,CAAE;AACrD,SAAO;IACH,MAAM,OACA,0BAA0B,QAAQ,oBAAoB,MAAM,IAAI,MAAM,WAAW,MAAM,WAAW,uBAAuB,0BAA0BD,eAAc,MAAM,UAAU,MAAM,IAAI,IAC3L;IACN;EACR;AACA;;;ACTY,IAAC,mCAAmC,CAAC,QAAQ,oBAAoB,uBAAuB,mBAAmB,0BAA0BE,kBAAiB,OAAO,EAAE,IAAI,UAAU,gBAAgB,MAAAC,MAAI,MAAO;AAChN,QAAM,WAAW,KAAK,UAAU,cAAc;AAC9C,QAAM,kBAAkB,WAAW,QAAQ,oBAAoB,mBAAmB,UAAUD,eAAc,OAAO,0BAA0BE,UAAS,kBAAkB,CAAC;AACvK,QAAM,EAAE,MAAM,OAAM,IAAK,MAAM,gBAAgB,EAAE,IAAI,UAAU,MAAAD,MAAI,CAAE;AACrE,SAAO;IACH,MAAM,OACA,0BAA0B,QAAQ,oBAAoB,MAAM,IAAI,MAAM,WAAW,MAAM,WAAW,uBAAuB,0BAA0BD,eAAc,MAAM,UAAU,MAAM,IAAI,IAC3L;IACN;EACR;AACA;;;ACRO,SAAS,8BAA8B,QAAQ,kBAAkBG,eAAc;AAClF,QAAM,qBAAqB,kBAAkB;AAG7C,MAAI,CAAC,oBAAoB,eAAe;AACpC,WAAO,CAAA;EACf;AACI,QAAM,gBAAgB,CAAA;AACtB,aAAW,EAAE,MAAAC,OAAM,cAAc,SAAS,QAAQ,WAAW,MAAK,KAAO,OAAO,OAAO,mBAAmB,aAAa,GAAG;AACtH,UAAM,oBAAoB,OAAO,aAAa,SAAS;AACvD,UAAM,2BAA2B,OAAO,QAAQ,SAAS;AACzD,QAAI,CAAC,qBAAqB,CAAC,0BAA0B;AACjD,aAAO,CAAA;IACnB;AACQ,UAAM,iCAAiC;MACnC,GAAG;MACH,QAAQ;QACJ,GAAG,mBAAmB;QACtB,GAAG;MACnB;MACY,WAAW;QACP,GAAG,mBAAmB;QACtB,GAAG;MACnB;MACY,OAAO;QACH,GAAG,mBAAmB;QACtB,GAAG;MACnB;IACA;AACQ,kBAAcA,KAAI,IAAI;MAClB,QAAQ,iCAAiC,QAAQ,gCAAgCA,OAAM,mBAAmB,0BAA0BD,aAAY;MAChJ,QAAQ,iCAAiC,QAAQ,gCAAgCC,OAAM,mBAAmB,0BAA0BD,aAAY;MAChJ,KAAK,8BAA8B,QAAQ,gCAAgCC,OAAM,mBAAmB,0BAA0BD,aAAY;MAC1I,QAAQ,iCAAiC,QAAQ,gCAAgCC,OAAM,mBAAmB,0BAA0BD,aAAY;MAChJ,MAAM,gCAAgC,QAAQ,gCAAgCC,OAAM,mBAAmB,0BAA0BD,aAAY;IACzJ;EACA;AACI,SAAO;AACX;;;ACzCO,SAAS,4BAA4B,QAAQ,kBAAkBE,eAAc;AAChF,QAAM,qBAAqB,kBAAkB;AAG7C,MAAI,CAAC,oBAAoB,aAAa;AAClC,WAAO,CAAA;EACf;AACI,QAAM,cAAc,CAAA;AACpB,aAAW,cAAc,OAAO,OAAO,mBAAmB,WAAW,GAAG;AACpE,gBAAY,WAAW,IAAI,IAAI,gBAAgB,QAAQ,oBAAoB,SAAS,YAAY,OAAOA,eAAc,0BAA0BC,UAAS,UAAU,CAAC;EAC3K;AACI,SAAO;AACX;;;ACdY,IAAC,wBAAwB,CAAC,kBAAkB;AACpD,QAAM,qBAAqB,cAAc;AACzC,MAAI,CAAC,oBAAoB;AACrB,WAAO,CAAA;EACf;AACI,QAAM,QAAQ,CAAA;AACd,aAAW,CAAC,GAAG,QAAQ,KAAK,OAAO,QAAQ,mBAAmB,KAAK,GAAG;AAClE,UAAM,SAAS,IAAI,IAAI;MACnB,QAAQ,MAAM,SAAS;IACnC;EACA;AACI,SAAO;AACX;;;ACVO,SAAS,kBAAkB,QAAQ,oBAAoB,OAAO,WAAWC,eAAcC,WAAU,OAAO;AAC3G,QAAM,wBAAwB,CAAC,aAAa,MAAM,YAAY;AAC1D,WAAO,YAAY,QAAQ,oBAAoB,OAAO,WAAWD,eAAc;MAC3E,GAAG;MACH,GAAG;IACf,GAAW,WAAW;EACtB;AACI,QAAM,aAAa,CAAC,MAAM,YAAY;AAClC,WAAO,YAAY,QAAQ,oBAAoB,OAAO,WAAWA,eAAc;MAC3E,GAAG;MACH,GAAG;IACf,CAAS;EACT;AACI,SAAOC,WAAU,wBAAwB;AAC7C;AACA,SAAS,uBAAuB,kBAAkB,WAAW,QAAQ,cAAc,kBAAkB;AACjG,QAAM,EAAE,MAAM,WAAU,IAAK;AAC7B,QAAM,CAAC,GAAG,IAAI,OAAO,KAAK,IAAI;AAC9B,MAAI,KAAK,GAAG,EAAE,OAAO;AACjB,UAAM,kBAAkB,KAAK,GAAG,EAAE,MAAM,IAAI,CAAC,UAAU,aAAa,kBAAkB,WAAW,KAAK,CAAC;AACvG,WAAO;MACH,MAAM,eAAe,kBAAkB,iBAAiB,eAAe;MACvE,WAAW,KAAK,GAAG,EAAE;MACrB;IACZ;EACA;AAEI,SAAO;IACH,MAAM,KAAK,GAAG;IACd,WAAW,KAAK,GAAG,EAAE;IACrB;EACR;AACA;AACA,SAAS,YAAY,QAAQ,oBAAoB,OAAO,WAAWD,eAAc,MAAM,aAAa;AAChG,SAAO,eAAe,OAAO,kBAAkB;AAC3C,UAAM,EAAE,MAAAE,MAAI,IAAK;AACjB,UAAM,QAAQ,wBAAwB,oBAAoB,OAAO,eAAe,MAAM,SAAS;AAC/F,UAAM,YAAY,sBAAsB,OAAO,eAAe,MAAM,oBAAoB,SAAS;AACjG,UAAM,OAAO,eAAe,QAAQF,eAAc,IAAI;AACtD,UAAM,mBAAmB,CAAC,oBAAoB,gBAAgB,QAAQE,OAAM,iBAAiB,oBAAoB,KAAK,UAAU,KAAK,WAAW,CAAC,CAAC,WAAW;AAC7J,QAAI;AACA,YAAM,UAAU,iBAAiB,QAAQF,eAAc,MAAM,OAAO;AACpE,YAAM,gBAAgB;QAClB,GAAG;QACH;QACA;MAChB;AACY,YAAM,cAAc,CAAC,eAAe,OAAO;AAC3C,UAAI,gBAAgB,QAAW;AAC3B,oBAAY,QAAQ,WAAW;MAC/C;AACY,YAAM,cAAc,OAAO,QAAQ,GAAG,WAAW;AACjD,YAAM,kBAAkB,qBAAqB,aAAa,aAAa;AACvE,YAAM,WAAW,MAAM;AACvB,UAAI,SAAS,SAAS,QAAW;AAC7B,eAAO,uBAAuB,oBAAoBE,OAAM,UAAU,MAAM,cAAc,gBAAgB;MACtH;IACA,SACe,OAAO;AAUV,YAAM,EAAE,MAAM,OAAM,IAAK;AAEzB,UAAI,SAAS,UACT,SAAS,QACT,OAAO,KAAK,IAAI,EAAE,WAAW,KAC7B,QAAQ;AACR,cAAM,CAAC,GAAG,IAAI,OAAO,KAAK,IAAI;AAC9B,YAAI,KAAK,GAAG,GAAG,OAAO;AAClB,gBAAM,kBAAkB,KAAK,GAAG,GAAG,MAAM,IAAI,CAAC,UAAU,aAAa,oBAAoBA,OAAM,KAAK,CAAC;AAKrG,cAAI,iBAAiB;AACjB,mBAAO;cACH,MAAM,MAAM,eACN,kBACA,iBAAiB,eAAe;cACtC,WAAW,KAAK,GAAG,GAAG;YAClD;UACA;QACA;AAEgB,eAAO;UACH,MAAM,KAAK,GAAG;UACd,WAAW,KAAK,GAAG,GAAG;QAC1C;MACA,OACiB;AAED,eAAO,uBAAuB,KAAK;MACnD;IACA;EACA,CAAK;AACL;;;ACtGO,SAAS,oBAAoB,QAAQ,oBAAoB,OAAO,WAAWC,eAAc;AAC5F,QAAM,EAAE,MAAAC,MAAI,IAAK;AACjB,QAAMC,gBAAe,CAAC,SAAS;AAC3B,UAAM,QAAQ,wBAAwB,oBAAoB,OAAO,WAAW,IAAI;AAChF,UAAM,YAAY,sBAAsB,OAAO,WAAW,MAAM,kBAAkB;AAClF,UAAM,OAAO,eAAe,QAAQF,eAAc,IAAI;AACtD,UAAM,UAAU,iBAAiB,QAAQA,eAAc,MAAM,OAAO;AACpE,UAAMG,cAAa,OAAO,QAAQ;MAC9B,GAAG;MACH;MACA;IACZ,GAAW,OAAO;AACV,WAAOA,YAAW,KAAK,IAAI,CAAC,UAAU;AAClC,YAAM,CAAC,GAAG,IAAI,OAAO,KAAK,MAAM,IAAI;AACpC,YAAM,OAAO,MAAM,KAAK,GAAG;AAC3B,YAAM,kBAAkB,aAAa,oBAAoBF,OAAM,IAAI;AACnE,UAAI,oBAAoB,MAAM;AAC1B,eAAO;MACvB,WACqB,MAAM,cAAc;AACzB,eAAO;MACvB,OACiB;AACD,cAAM,CAAC,WAAW,IAAI,gBAAgB,QAAQA,OAAM,CAAC,eAAe,GAAG,oBAAoB,KAAK,UAAU,KAAK,SAAS;AACxH,eAAO;MACvB;IACA,CAAS,CAAC;EACV;AACI,SAAOC;AACX;;;AC1BO,SAAS,gBAAgB,OAAO;AACnC,QAAM,EAAE,qBAAqB,kBAAiB,IAAK,MAAM;AACzD,SAAO,CAAC,qBAAqB,GAAG,iBAAiB;AACrD;;;ACAO,SAAS,kBAAkB,QAAQ,UAAU,WAAW;AAC3D,QAAM,eAAe,OAAO,YAAY,UAAU,IAAI,CAAC,cAAc,CAAC,WAAW,OAAO,SAAS,CAAC,CAAC,CAAC;AACpG,WAAS,IAAI,GAAG,IAAI,SAAS,QAAQ,KAAK;AACtC,QAAI,OAAO,KAAK,YAAY,EAAE,MAAM,CAAC,MAAM,aAAa,CAAC,MAAM,SAAS,CAAC,EAAE,CAAC,CAAC,GAAG;AAC5E,aAAO;IACnB;EACA;AACI,SAAO;AACX;;;ACdO,SAAS,oBAAoB,QAAQ,OAAO;AAC/C,QAAM,EAAE,MAAAE,MAAI,IAAK;AACjB,QAAM,eAAe,CAAC,QAAQ,IAAI,WAAW,CAAC,eAAe;AAEzD,UAAM,QAAQ,CAAA;AAGd,UAAM,eAAe,CAAA;AAIrB,QAAI,kBAAkB,IAAI,aAAa;AACnC,aAAO,aAAa,KAAK,GAAG,QAAQ;IAChD;AAEQ,UAAM,cAAc,OAAOA,KAAI,EAAE,SAAS,GAAG,EAAE,UAAU;MACrD,KAAK,MAAM;AACP,wBAAgB,EAAE,MAAM,MAAM,SAAQ,CAAE;MACxD;MACY,MAAM,OAAO;AACT,mBAAW,MAAM,EAAE,MAAM,YAAY,MAAK,CAAE;MAC5D;IACA,CAAS;AACD,UAAM,cAAc,OAAOA,KAAI,EAAE,SAAS,GAAG,EAAE,UAAU;MACrD,KAAK,MAAM;AACP,wBAAgB,EAAE,MAAM,MAAM,SAAQ,CAAE;MACxD;MACY,MAAM,OAAO;AACT,mBAAW,MAAM,EAAE,MAAM,YAAY,MAAK,CAAE;MAC5D;IACA,CAAS;AACD,UAAM,cAAc,OAAOA,KAAI,EAAE,SAAS,GAAG,EAAE,UAAU;MACrD,KAAK,MAAM;AACP,wBAAgB,EAAE,MAAM,MAAM,SAAQ,CAAE;MACxD;MACY,MAAM,OAAO;AACT,mBAAW,MAAM,EAAE,MAAM,YAAY,MAAK,CAAE;MAC5D;IACA,CAAS;AAED,aAAS,eAAe,UAAU;AAC9B,iBAAW,WAAW,UAAU;AAC5B,cAAM,MAAM,kBAAkB,QAAQ,MAAM,OAAO,QAAQ;AAC3D,gBAAQ,QAAQ,MAAI;UAChB,KAAK;AACD,gBAAI,MAAM;AACN,oBAAM,KAAK,QAAQ,IAAI;AAC3B;UACJ,KAAK;AACD,gBAAI,OAAO;AACP,oBAAM,GAAG,IAAI,QAAQ;AACzB;UACJ,KAAK;AACD,gBAAI,OAAO;AACP,oBAAM,OAAO,KAAK,CAAC;AACvB;UACJ;AACI,oBAAQ,MAAM,yCAAyC,OAAO;QACtF;MACA;AACY,iBAAW,KAAK;QACZ;QACA,UAAU;MAC1B,CAAa;IACb;AACQ,UAAM,WAAW,gBAAgB,KAAK;AAEtC,KAAC,YAAY;AACT,UAAI,YAAY;AAChB,UAAI,YAAY;AAChB,aAAO,CAAC,WAAW,WAAW,aAAa,YAAY;AACnD,oBAAY;AACZ,cAAM,EAAE,MAAM,MAAM,QAAQ,WAAW,WAAU,IAAM,MAAM,OAAOA,KAAI,EAAE,KAAK,EAAE,GAAG,KAAK,UAAS,CAAE;AACpG,oBAAY;AACZ,cAAM,KAAK,GAAG,IAAI;AAGlB,cAAM,WAAW,aAAa,WAAW,MACpC,cAAc,QAAQ,cAAc;AACzC,mBAAW,KAAK;UACZ;UACA;QACpB,CAAiB;AACD,YAAI,MAAM,QAAQ,MAAM,GAAG;AACvB,qBAAW,SAAS,QAAQ;AACxB,uBAAW,MAAM,KAAK;UAC9C;QACA;MACA;AAEY,UAAI,aAAa,SAAS,GAAG;AACzB,uBAAe,YAAY;MAC3C;AAEY,wBAAkB,IAAI,aAAa;AAC/B,uBAAe,QAAQ;AACvB,eAAO,MAAM;MAC7B;IACA,GAAS;AAED,WAAO,MAAM;AAET,kBAAY,YAAW;AACvB,kBAAY,YAAW;AACvB,kBAAY,YAAW;IAGnC;EACA,CAAK;AACD,SAAO;AACX;;;ACjHA,IAAM,4BAA4B,CAAC,SAAS;AACxC,SAAQ,KAAK,SAAS;EAElB,KAAK,YAAY,QACjB,KAAK,YAAY,cACjB,KAAK,YAAY,OAAO,SAAS;AACzC;AACY,IAAC,qCAAqC,CAAC,UAAU;AACzD,QAAM,OAAO,MAAM,YACb,OAAO,yBAAyB,EACjC,IAAI,CAAC,SAAS;AACf,UAAM,aAAa,KAAK,WAAW;AACnC,UAAM,CAAC,IAAI,GAAG,EAAE,IAAI,KAAK,WAAW;AACpC,WAAO;MACH;MACA;MACA;IACZ;EACA,CAAK;AACD,SAAO,QAAQ,CAAA;AACnB;AAIY,IAAC,qBAAqB,CAAC,KAAK,cAAc;AAQlD,QAAM,aAAa,IAAI,OAAO,SAAS,EAAE,YAAY,KAAK,CAAC,SAAS,KAAK,SAAS,OAAO;AACzF,QAAM,mBAAmB;IACrB,SAAS,CAAC,QAAQ,OAAO,cAAc;IACvC,WAAW,CAAC,UAAU,UAAU,QAAQ;IACxC,eAAe,CAAC,YAAY,YAAY,UAAU;EAC1D;AACI,QAAM,cAAc,CAAA;AACpB,MAAI,CAAC,YAAY;AACb,WAAO;EACf;AACI,MAAI,WAAW,YAAY;AACvB,eAAW,CAAC,KAAK,KAAK,KAAK,OAAO,QAAQ,WAAW,UAAU,GAAG;AAE9D,UAAI,EAAE,OAAO,mBAAmB;AAC5B;MAChB;AACY,UAAI,UAAU,MAAM;AAEhB,oBAAY,KAAK,GAAG,iBAAiB,GAAG,CAAC;MACzD,WACqB,iBAAiB,QAAQ;AAE9B,oBAAY,KAAK,GAAG,OAAO,KAAK,KAAK,CAAC;MACtD;IACA;EACA;AAGI,MAAI,YAAY,SAAS,MAAM,GAAG;AAC9B,gBAAY,KAAK,cAAc;EACvC;AAEI,QAAM,mBAAmB,YAAY,IAAI,CAAC,OAAO,GAAG,YAAW,CAAE;AACjE,QAAM,4BAA4B,OAAO,YAAY,OAAO,QAAQ,qBAAqB,EAAE,OAAO,CAAC,CAAC,GAAG,MAAM,CAAC,iBAAiB,SAAS,GAAG,CAAC,CAAC;AAC7I,SAAO;AACX;;;AC9DO,SAAS,uBAAuB,QAAQ,kBAAkBC,eAAc;AAC3E,QAAM,SAAS,CAAA;AACf,QAAM,qBAAqB,iBAAiB;AAC5C,MAAI,CAAC,oBAAoB;AACrB,WAAO,CAAA;EACf;AACI,QAAM,mBAAmB,CAAC,YAAY,YAAY,UAAU;AAC5D,aAAW,SAAS,OAAO,OAAO,mBAAmB,MAAM,GAAG;AAC1D,UAAM,EAAE,MAAAC,MAAI,IAAK;AACjB,WAAOA,KAAI,IAAI,CAAA;AACf,UAAM,kBAAkB,mBAAmB,oBAAoBA,KAAI;AACnE,WAAO,QAAQ,eAAe,EAAE,QAAQ,CAAC,CAAC,KAAK,EAAE,gBAAe,CAAE,MAAM;AACpE,YAAM,YAAY;AAClB,UAAI,cAAc,QAAQ;AACtB,eAAOA,KAAI,EAAE,eAAe,IAAI,YAAY,QAAQ,oBAAoB,OAAOD,aAAY;MAC3G,WACqB,iBAAiB,SAAS,SAAS,GAAG;AAC3C,eAAOC,KAAI,EAAE,eAAe,IAAI,oBAAoB,QAAQ,oBAAoB,OAAO,WAAWD,aAAY;MAC9H,WACqB,cAAc,gBAAgB;AACnC,eAAOC,KAAI,EAAE,eAAe,IAAI,oBAAoB,QAAQ,KAAK;MACjF,OACiB;AACD,eAAOA,KAAI,EAAE,eAAe,IAAI,WAAW,QAAQ,oBAAoB,OAAO,WAAWD,aAAY;MACrH;IACA,CAAS;AACD,UAAM,gBAAgB,mCAAmC,KAAK;AAC9D,eAAW,OAAO,eAAe;AAC7B,aAAOC,KAAI,EAAE,IAAI,UAAU,IAAI,kBAAkB,QAAQ,oBAAoB,OAAO,KAAKD,aAAY;IACjH;EACA;AACI,SAAO;AACX;;;ACnCO,SAAS,kBAAkB,QAAQ,kBAAkBE,eAAc;AACtE,4BAA0B,MAAM;AAChC,SAAO,SAAS,uBAAuB,QAAQ,kBAAkBA,aAAY;AAC7E,SAAO,QAAQ,sBAAsB,gBAAgB;AACrD,SAAO,UAAU,8BAA8B,QAAQ,kBAAkBA,aAAY;AACrF,SAAO,YAAY,gCAAgC,QAAQ,kBAAkBA,aAAY;AACzF,SAAO,gBAAgB,oCAAoC,QAAQ,kBAAkBA,aAAY;AACjG,SAAO,gBAAgB,8BAA8B,QAAQ,kBAAkBA,aAAY;AAC3F,SAAO,cAAc,4BAA4B,QAAQ,kBAAkBA,aAAY;AACvF,SAAO;AACX;;;ACVA,SAAS,6BAA6B,SAAS;AAC3C,SAAO,gCAAgC;AAC3C;AASO,IAAM,kBAAN,cAA8B,wBAAwB;EACzD,gBAAgB;AACZ,WAAO;EACf;;;;;;;;EAQI,QAAQ,SAAS,SAAS,mBAAmB;AACzC,UAAM,mBAAmB;MACrB,UAAU,SAAS;MACnB,QAAQ,UAAU;IAC9B;AACQ,QAAI,6BAA6B,OAAO,GAAG;AACvC,YAAM,EAAE,CAAC,4BAA4B,GAAG,2BAA2B,GAAG,aAAY,IAAK;AACvF,aAAO,MAAM,QAAQ,SAAS,cAAc,mBAAmB;QAC3D,GAAG;QACH,GAAG;MACnB,CAAa;IACb;AACQ,WAAO,MAAM,QAAQ,SAAS,SAAS,mBAAmB;MACtD,GAAG;IACf,CAAS;EACT;;;;;;EAMI,cAAc,OAAO;AACjB,WAAO,MAAM,cAAc,KAAK;EACxC;;;;;;EAMI,OAAO,SAAS,SAAS;AACrB,WAAO,MAAM,OAAO,SAAS,OAAO;EAC5C;AACA;AACY,IAAC,aAAa,IAAI,gBAAe;;;AC4BtC,SAAS,QAAQ,SAAS,mBAAmB;AAEhD,QAAM,YAAY,aAAa,IAAI;AAInC,QAAM,iBAAiB,UAAU;AAIjC,QAAM,iBAAiB,UAAU;AAIjC,QAAM,eAAe,UAAU;AAY/B,UAAQ,WAAW,QAAQ,YAAY;AACvC,UAAQ,SAAS,QAAQ,UAAU;AACnC,UAAQ,YAAY,QAAQ,aAAa,UAAU;AACnD,MAAI,kBAAkB,QAAQ,aAAa,YAAY,CAAC,QAAQ,QAAQ;AACpE,UAAM,IAAI,MAAM,6FAA6F;EACrH;AACI,QAAM,UAAU,qBAAqB,UAAU;AAM/C,QAAM,SAAS,WAAW;;IAE1B,UAAU;IAAS;MACf,GAAG;MACH,UAAU;IAClB;IAAO;EAAO;AACV,SAAO;AACX;AAMO,SAASC,QAAO,SAAS,SAAS;AACrC,SAAO,WAAW,OAAO,SAAS,OAAO;AAC7C;AAMO,SAASC,eAAc,OAAO;AACjC,SAAO,WAAW,cAAc,KAAK;AACzC;;;ACjJO,SAASC,oBAAmB,kBAAkB;AACjD,SAAO,qBAAqB;AAChC;;;ACFO,SAAS,mCAAmC,SAAS;AACxD,SAAO,QAAQ,UAAU;AAC7B;;;ACaO,SAAS,eAAe,QAAQ;AACnC,QAAM,SAAS;IACX,CAAC,SAAS,GAAG,OAAO;IACpB,CAAC,UAAU,GAAG,OAAO;IACrB,CAAC,WAAW,GAAG,OAAO;IACtB,CAAC,QAAQ,GAAG,YAAY,SAAS,OAAO,SAAS;IACjD,CAAC,UAAU,GAAG,cAAc,SAAS,OAAO,WAAW;IACvD,CAAC,SAAS,GAAG,OAAO;IACpB;IACA,QAAAC;IACA,eAAAC;IACA,QAAQ;IACR,OAAO;IACP,SAAS;IACT,WAAW;IACX,eAAe;EACvB;AACI,QAAM,mBAAmB,OAAO,QAAQ,UAAS,EAAG,KAAK;AACzD,MAAI,OAAO,UAAU,GAAG;AACpB,QAAI,CAAC,OAAO,UAAU,GAAG;AACrB,YAAM,IAAI,MAAM,+EAA+E;IAC3G;AACQ,QAAI,OAAO,UAAU,MAAM,YAAY,CAAC,OAAO,QAAQ,GAAG;AACtD,YAAM,IAAI,MAAM,uGAAuG;IACnI;EACA;AACI,MAAI,CAAC,OAAO,UAAU,GAAG;AACrB,QAAIC,oBAAmB,gBAAgB,GAAG;AACtC,wBAAkB,QAAQ,kBAAkB,YAAY;IACpE,OACa;AAaD,+CAAyC,MAAM;IAC3D;EACA;AACI,SAAO;AACX;AACA,IAAM,2CAA2C,CAAC,cAAc;AAC5D,MAAI,OAAO,QAAQ,eAAa;AAC5B,QAAI,CAAC,mCAAmC,UAAU,OAAO,GAAG;AACxD;IACZ;AACQ,UAAM,mBAAmB,UAAU,QAAQ,KAAK,KAAK;AACrD,QAAIA,oBAAmB,gBAAgB,GAAG;AACtC,wBAAkB,WAAW,kBAAkB,YAAY;IACvE;EACA,CAAK;AACL;AACA,IAAM,gBAAgB,IAAI,MAAM,CAAA,GAAI;EAChC,MAAM;AACF,UAAM,IAAI,MAAM,iOAAiO;EACzP;AACA,CAAC;;;ACxEM,SAASC,gBAAe,SAAS;AACpC,SAAOC,eAAuB;IAC1B,GAAI,WAAW,CAAA;IACf,SAAS;EACjB,CAAK;AACL;;;ACXA,IAAMC,UAAU;AAAA,EACZ,KAAK;AAAA,IACD,SAAS;AAAA,MACP,UAAU;AAAA,MACV,QAAQ;AAAA,MACR,iBAAiB;AAAA,MACjB,QAAQ;AAAA,IACV;AAAA,EACJ;AACJ;AAEA,IAAO,sBAAQA;;;ACXL,IAAC;CACV,SAAUC,0BAAyB;AAChC,EAAAA,yBAAwB,qBAAqB,IAAI;AACjD,EAAAA,yBAAwB,qBAAqB,IAAI;AACjD,EAAAA,yBAAwB,0BAA0B,IAAI;AACtD,EAAAA,yBAAwB,qBAAqB,IAAI;AACjD,EAAAA,yBAAwB,qBAAqB,IAAI;AACjD,EAAAA,yBAAwB,4BAA4B,IAAI;AACxD,EAAAA,yBAAwB,wBAAwB,IAAI;AACpD,EAAAA,yBAAwB,+BAA+B,IAAI;AAC3D,EAAAA,yBAAwB,wBAAwB,IAAI;AACpD,EAAAA,yBAAwB,mCAAmC,IAAI;AAC/D,EAAAA,yBAAwB,sCAAsC,IAAI;AAClE,EAAAA,yBAAwB,2CAA2C,IAAI;AACvE,EAAAA,yBAAwB,4BAA4B,IAAI;AACxD,EAAAA,yBAAwB,0BAA0B,IAAI;AACtD,EAAAA,yBAAwB,+BAA+B,IAAI;AAC3D,EAAAA,yBAAwB,oBAAoB,IAAI;AAChD,EAAAA,yBAAwB,qBAAqB,IAAI;AACrD,GAAG,4BAA4B,0BAA0B,CAAA,EAAG;;;AClBhD,IAACC,sBAAqB;EAC9B,CAAC,wBAAwB,sBAAsB,GAAG;IAC9C,SAAS;EACjB;EACI,CAAC,wBAAwB,iCAAiC,GAAG;IACzD,SAAS;EACjB;EACI,CAAC,wBAAwB,sBAAsB,GAAG;IAC9C,SAAS;EACjB;EACI,CAAC,wBAAwB,0BAA0B,GAAG;IAClD,SAAS;EACjB;EACI,CAAC,wBAAwB,yCAAyC,GAAG;IACjE,SAAS;EACjB;EACI,CAAC,wBAAwB,oCAAoC,GAAG;IAC5D,SAAS;EACjB;EACI,CAAC,wBAAwB,6BAA6B,GAAG;IACrD,SAAS;EACjB;EACI,CAAC,wBAAwB,0BAA0B,GAAG;IAClD,SAAS;EACjB;EACI,CAAC,wBAAwB,mBAAmB,GAAG;IAC3C,SAAS;EACjB;EACI,CAAC,wBAAwB,mBAAmB,GAAG;IAC3C,SAAS;EACjB;EACI,CAAC,wBAAwB,mBAAmB,GAAG;IAC3C,SAAS;EACjB;EACI,CAAC,wBAAwB,mBAAmB,GAAG;IAC3C,SAAS;EACjB;EACI,CAAC,wBAAwB,wBAAwB,GAAG;IAChD,SAAS;IACT,oBAAoB;EAC5B;EACI,CAAC,wBAAwB,kBAAkB,GAAG;IAC1C,SAAS;IACT,oBAAoB;EAC5B;EACI,CAAC,wBAAwB,wBAAwB,GAAG;IAChD,SAAS;EACjB;EACI,CAAC,wBAAwB,mBAAmB,GAAG;IAC3C,SAAS;EACjB;EACI,CAAC,wBAAwB,6BAA6B,GAAG;IACrD,SAAS;EACjB;AACA;AAEU,IAAC;CACV,SAAUC,mBAAkB;AACzB,EAAAA,kBAAiB,aAAa,IAAI;AAClC,EAAAA,kBAAiB,aAAa,IAAI;AAClC,EAAAA,kBAAiB,aAAa,IAAI;AAClC,EAAAA,kBAAiB,gBAAgB,IAAI;AACrC,EAAAA,kBAAiB,kBAAkB,IAAI;AACvC,EAAAA,kBAAiB,gBAAgB,IAAI;AACrC,EAAAA,kBAAiB,YAAY,IAAI;AACjC,EAAAA,kBAAiB,eAAe,IAAI;AACpC,EAAAA,kBAAiB,QAAQ,IAAI;AAC7B,EAAAA,kBAAiB,aAAa,IAAI;AAClC,EAAAA,kBAAiB,iBAAiB,IAAI;AACtC,EAAAA,kBAAiB,iBAAiB,IAAI;AACtC,EAAAA,kBAAiB,eAAe,IAAI;AACpC,EAAAA,kBAAiB,eAAe,IAAI;AACpC,EAAAA,kBAAiB,kBAAkB,IAAI;AACvC,EAAAA,kBAAiB,aAAa,IAAI;AACtC,GAAG,qBAAqB,mBAAmB,CAAA,EAAG;AACpC,IAAC;CACV,SAAUC,iBAAgB;AACvB,EAAAA,gBAAe,iBAAiB,IAAI;AACpC,EAAAA,gBAAe,kBAAkB,IAAI;AACzC,GAAG,mBAAmB,iBAAiB,CAAA,EAAG;;;AC/EnC,IAAM,YAAN,MAAM,mBAAkB,aAAa;EACxC,YAAY,QAAQ;AAChB,UAAM,MAAM;AAGZ,SAAK,cAAc;AACnB,WAAO,eAAe,MAAM,WAAU,SAAS;EACvD;AACA;;;ACRO,SAAS,wBAAwB,YAAY;AAChD,QAAM,SAAS,YAAY,MAAM,GAAG,EAAE,CAAC;AACvC,MAAI,CAAC,cACD,WAAW,QAAQ,GAAG,IAAI,KAC1B,CAAC,UACD,OAAO,WAAW;AAClB,UAAM,IAAI,UAAU;MAChB,MAAM;MACN,SAAS;IACrB,CAAS;AACL,SAAO;AACX;AACO,SAAS,4BAA4B,gBAAgB;AACxD,MAAI,CAAC,kBAAkB,CAAC,eAAe,SAAS,GAAG,GAAG;AAClD,UAAM,IAAI,UAAU;MAChB,MAAM;MACN,SAAS;MACT,oBAAoB;IAChC,CAAS;EACT;AACI,SAAO,eAAe,MAAM,GAAG,EAAE,CAAC;AACtC;;;ACrBY,IAAC,iCAAiC;AAIlC,IAAC,6BAA6B;AAC9B,IAAC,+BAA+B;AAChC,IAAC,uCAAuC;AACxC,IAAC,2BAA2B,IAAI,UAAU;EAClD,MAAM;EACN,SAAS;EACT,oBAAoB;AACxB,CAAC;AACW,IAAC,4BAA4B,IAAI,UAAU;EACnD,MAAM;EACN,SAAS;EACT,oBAAoB;AACxB,CAAC;AACW,IAAC,uCAAuC,IAAI,UAAU;EAC9D,MAAM;EACN,SAAS;EACT,oBAAoB;AACxB,CAAC;AACW,IAAC,2BAA2B;AAC5B,IAAC,yBAAyB,IAAI,UAAU;EAChD,MAAM;EACN,SAAS;EACT,oBAAoB;AACxB,CAAC;AAEW,IAAC,0BAA0B;AAC3B,IAAC,4CAA4C;;;ACrBlD,SAAS,iBAAiB,QAAQ;AACrC,MAAI,CAAC,UAAU,CAAC,OAAO,aAAa;AAChC,UAAM,IAAI,UAAU;MAChB,MAAM;MACN,SAAS;MACT,oBAAoB;IAChC,CAAS;EACT;AACA;AACO,SAAS,0BAA0B,QAAQ;AAC9C,MAAI,CAAC,UAAU,CAAC,OAAO,SAAS;AAC5B,UAAM,IAAI,UAAU;MAChB,MAAM;MACN,SAAS;MACT,oBAAoB;IAChC,CAAS;EACT;AACA;AACY,IAAC,6BAA6B,IAAI,UAAU;EACpD,MAAM;EACN,SAAS;;EAET,oBAAoB;;AAExB,CAAC;AACW,IAAC,wBAAwB,IAAI,UAAU;EAC/C,MAAM;EACN,SAAS;EACT,oBAAoB;AACxB,CAAC;AACM,SAAS,iCAAiC,QAAQ;AACrD,MAAI,qCAAqC,MAAM,GAAG;AAC9C,UAAM;EACd;AACI,MAAI,CAAC,gCAAgC,MAAM,GAAG;AAC1C,UAAM;EACd;AACA;AAaY,IAAC,mBAAmB;EAC5B,eAAe;EACf,aAAa;EACb,WAAW;EACX,YAAY;AAChB;AACA,SAAS,gBAAgB,QAAQ;AAC7B,SAAO,QAAQ,eAAe,QAAQ;AAC1C;AACA,SAAS,gCAAgC,QAAQ;AAC7C,SAAO,gBAAgB,MAAM,KAAK,QAAQ;AAC9C;AACA,SAAS,qCAAqC,QAAQ;AAClD,SAAO,gBAAgB,MAAM,KAAK,CAAC,QAAQ;AAC/C;;;ACxEY,IAAC,iBAAiB,OAAO,YAAY;AAC7C,QAAM,aAAa,QAAQ,UAAS,EAAG,MAAM;AAC7C,4BAA0B,UAAU;AACpC,QAAM,SAAS,MAAM,QAAQ,KAAK,UAAU,EAAE,cAAc,MAAK,CAAE;AACnE,mBAAiB,MAAM;AACvB,QAAM,EAAE,oBAAoB,UAAU,IAAG,IAAK,OAAO,SAAS,WAAW,CAAA;AACzE,QAAM,WAAW;IACb;IACA,QAAQ;EAChB;AACI,QAAM,gBAAgB,2BAA2B,MAAM;AACvD,MAAI,eAAe;AACf,aAAS,gBAAgB;EACjC;AACI,SAAO;AACX;AACA,SAAS,2BAA2B,QAAQ;AACxC,SAAO,QAAQ;AACnB;;;ACVY,IAACC,kBAAiB,YAAY;AACtC,SAAOC,eAAuB,OAAO;AACzC;;;ACXY,IAAC,wBAAwB,CAAC,QAAQ,2BAA2B,oBAAoB;EACzF,UAAU,SAAS;EACnB;EACA,GAAG;AACP,CAAC;;;ACLW,IAAC,2BAA2B,CAAC,cAAc,CAAC,OAAO,aAAa;AACxE,QAAM,UAAUC,kBAAiB,SAAS;AAC1C,QAAM,OAAO,KAAK,UAAU,KAAK;AACjC,SAAOC,qBAAoB,UAAU,SAAS,IAAI;AACtD;AACA,IAAMD,oBAAmB,CAAC,eAAe;EACrC,gBAAgB;EAChB,gBAAgB,qCAAqC,SAAS;AAClE;AACA,IAAMC,uBAAsB,CAAC,EAAE,IAAG,GAAI,SAAS,UAAU;EACrD;EACA;EACA;EACA,QAAQ;AACZ;;;ACZO,SAAS,mBAAmB,OAAO;AACtC,MAAI,CAAC,SACD,MAAM,SAAS,WACf,iBAAiB,WAAW;AAC5B,UAAM,IAAI,UAAU;MAChB,MAAM,iBAAiB;MACvB,SAAS;MACT,iBAAiB;IAC7B,CAAS;EACT;AACA;;;ACTY,IAAC,6BAA6B,MAAM,OAAO,aAAa;AAChE,MAAI,SAAS,cAAc,KAAK;AAC5B,UAAM,QAAQ,MAAM,eAAe,QAAQ;AAC3C,uBAAmB,KAAK;AACxB,UAAM,IAAI,UAAU;MAChB,MAAM,MAAM;MACZ,SAAS,MAAM;MACf,UAAU,MAAM;IAC5B,CAAS;EACT;AACI,SAAO,cAAc,QAAQ;AACjC;;;ACTA,IAAMC,iCAAgC,MAAM,CAAC,MAAM,MAAM,eAAe,uBAAuB,SAAS;AACpG,UAAQ,QAAQ,eAAe,IAAI;AACnC,SAAO,KAAK,OAAO;AACvB;AAOY,IAAC,iCAAiC,uBAAuB,wBAAwB,CAACA,8BAA6B,CAAC;;;ACZhH,IAAC,2BAA2B;;;ACA5B,IAAC,oCAAoC;EAC7C,SAAS;EACT,cAAc,gBAAgB,cAAc;EAC5C,cAAcC;EACd,gBAAgB,oBAAmB;EACnC,OAAO;AACX;;;ACLY,IAAC,2BAA2B,CAACC,YAAW,kBAAkB,gCAAgC,yBAAyB,cAAc,GAAG,2BAA0B,GAAI;EAC1K,GAAG;EACH,GAAGA;AACP,CAAC;;;ACJW,IAAC,kCAAkC,CAAC,EAAE,OAAM,OAAS;EAC7D,KAAK,IAAI,WAAW,WAAW,wBAAwB,IAAI,MAAM,IAAI,aAAa,MAAM,CAAC,EAAE;AAC/F;;;ACLY,IAAC,wCAAwC,CAAC,EAAE,iBAAgB,MAAO,CAAC,UAAU;AACtF,MAAI,kBAAkB;AAClB,WAAO,EAAE,KAAK,IAAI,WAAW,gBAAgB,EAAC;EACtD;AACI,SAAO,gCAAgC,KAAK;AAChD;;;ACLO,SAAS,mBAAmB,EAAE,UAAU,YAAY,iBAAgB,GAAK;AAC5E,MAAI,OAAO,WAAW,aAAa;AAC/B,WAAO;EACf;AACI,QAAM,oCAAoC,OACrC;AACL,MAAI,OAAO,sCAAsC,aAAa;AAC1D,WAAO;EACf;AACI,QAAM,uBAAuB,kCAAkC,QAAQ,UAAU,YAAY,gBAAgB;AAC7G,MAAI,sBAAsB;AACtB,UAAM,kBAAkB;MACpB,aAAa;IACzB;AACQ,WAAO;EACf;AACI,SAAO,CAAA;AACX;;;ACVA,IAAM,4BAA4B,OAAO,EAAE,QAAQ,YAAY,SAAQ,MAAQ;AAC3E,4BAA0B,YAAY,OAAO;AAC7C,QAAM,EAAE,YAAY,kBAAkB,iBAAgB,IAAK,WAAW;AACtE,QAAM,SAAS,wBAAwB,UAAU;AACjD,mCAAiC,MAAM;AACvC,QAAM,qBAAqB,OAAO;AAClC,QAAM,iBAAiB;IACnB,eAAe;EACvB;AACI,MAAI,OAAO,gBAAgB,WAAW;AAClC,mBAAe,aAAa,OAAO,eAAe;EAC1D;AACI,QAAM,kBAAkB,mBAAmB;IACvC;IACA;IACA;EACR,CAAK;AACD,QAAM,eAAe,yBAAyB;IAC1C,kBAAkB,sCAAsC;MACpD,kBAAkB;IAC9B,CAAS;EACT,CAAK;AACD,QAAM,EAAE,qBAAoB,IAAK,MAAM,aAAa,EAAE,OAAM,GAAI;IAC5D,UAAU;IACV,UAAU;IACV;IACA;EACR,CAAK;AACD,QAAM,cAAc,UAAU,sBAAsB,eAAe,EAAE;AACrE,QAAM,UAAU,sBAAsB,UAChC,UAAU,qBAAqB,OAAO,IACtC;AACN,QAAM,EAAE,IAAG,IAAK,YAAY;AAE5B,MAAI,CAAC,KAAK;AACN,UAAM,IAAI,UAAU;MAChB,MAAM;MACN,SAAS;IACrB,CAAS;EACT;AACI,QAAM,aAAa,MAAM,OAAO,oBAAI,KAAI,GAAG,QAAO;AAClD,SAAO;IACH;IACA;IACA;IACA,cAAc;IACd;EACR;AACA;AACY,IAAC,oBAAoB,oBAAoB,yBAAyB;;;AC1DlE,IAAC,uBAAuB;EAChC,aAAa;EACb,SAAS;EACT,cAAc;EACd,YAAY;EACZ,cAAc;EACd,WAAW;EACX,mBAAmB;EACnB,gBAAgB;EAChB,eAAe;EACf,eAAe;AACnB;;;ACRU,IAAC;CACV,SAAUC,yBAAwB;AAC/B,EAAAA,wBAAuB,mBAAmB,IAAI;AAClD,GAAG,2BAA2B,yBAAyB,CAAA,EAAG;AAC1D,IAAM,0BAA0B;EAC5B,CAAC,uBAAuB,iBAAiB,GAAG;IACxC,SAAS;IACT,oBAAoB;EAC5B;AACA;AACY,IAACC,UAAS,wBAAwB,uBAAuB;;;ACXzD,IAAC,kBAAkB;;;ACGxB,IAAM,oBAAN,MAAwB;EAC3B,qBAAqB;AACjB,QAAI,CAAC,KAAK,iBAAiB;AACvB,YAAM,IAAI,UAAU;QAChB,MAAM;QACN,SAAS;MACzB,CAAa;IACb;AACQ,WAAO,KAAK;EACpB;EACI,mBAAmB,iBAAiB;AAChC,SAAK,kBAAkB;EAC/B;EACI,cAAc,YAAY;AACtB,SAAK,aAAa;EAC1B;EACI,MAAM,aAAa;AAGf,QAAI;AACA,YAAM,WAAW,MAAM,KAAK,YAAW;AACvC,YAAM,oBAAoB,MAAM,KAAK,mBAAkB,EAAG,QAAQ,SAAS,WAAW;AACtF,UAAI,CAAC,mBAAmB;AACpB,cAAM,IAAI,UAAU;UAChB,MAAM;UACN,SAAS;QAC7B,CAAiB;MACjB;AACY,YAAM,cAAc,UAAU,iBAAiB;AAC/C,YAAM,WAAW,MAAM,KAAK,mBAAkB,EAAG,QAAQ,SAAS,OAAO;AACzE,YAAM,UAAU,WAAW,UAAU,QAAQ,IAAI;AACjD,YAAM,eAAgB,MAAM,KAAK,mBAAkB,EAAG,QAAQ,SAAS,YAAY,KAC/E;AACJ,YAAM,mBAAoB,MAAM,KAAK,mBAAkB,EAAG,QAAQ,SAAS,UAAU,KAAM;AAC3F,YAAM,aAAa,OAAO,SAAS,gBAAgB;AACnD,YAAM,gBAAgB,MAAM,KAAK,mBAAkB,EAAG,QAAQ,SAAS,aAAa;AACpF,YAAM,SAAS;QACX;QACA;QACA;QACA,gBAAiB,MAAM,KAAK,kBAAiB,KAAO;QACpD;QACA,UAAU,MAAM,KAAK,gBAAe;MACpD;AACY,UAAI,eAAe;AACf,eAAO,gBAAgB,KAAK,MAAM,aAAa;MAC/D;AACY,aAAO;IACnB,SACe,KAAK;AACR,aAAO;IACnB;EACA;EACI,MAAM,YAAY,QAAQ;AACtB,IAAAC,QAAO,WAAW,QAAW,uBAAuB,iBAAiB;AACrE,UAAM,eAAe,OAAO;AAC5B,UAAM,KAAK,mBAAkB,EAAG,QAAQ,KAAK,mBAAkB,GAAI,YAAY;AAC/E,UAAM,WAAW,MAAM,KAAK,YAAW;AACvC,UAAM,KAAK,mBAAkB,EAAG,QAAQ,SAAS,aAAa,OAAO,YAAY,SAAQ,CAAE;AAC3F,QAAI,OAAO,SAAS;AAChB,YAAM,KAAK,mBAAkB,EAAG,QAAQ,SAAS,SAAS,OAAO,QAAQ,SAAQ,CAAE;IAC/F,OACa;AACD,YAAM,KAAK,mBAAkB,EAAG,WAAW,SAAS,OAAO;IACvE;AACQ,QAAI,OAAO,cAAc;AACrB,YAAM,KAAK,mBAAkB,EAAG,QAAQ,SAAS,cAAc,OAAO,YAAY;IAC9F,OACa;AACD,YAAM,KAAK,mBAAkB,EAAG,WAAW,SAAS,YAAY;IAC5E;AACQ,QAAI,OAAO,gBAAgB;AACvB,UAAI,OAAO,eAAe,WAAW;AACjC,cAAM,KAAK,mBAAkB,EAAG,QAAQ,SAAS,WAAW,OAAO,eAAe,SAAS;MAC3G;AACY,UAAI,OAAO,eAAe,gBAAgB;AACtC,cAAM,KAAK,mBAAkB,EAAG,QAAQ,SAAS,gBAAgB,OAAO,eAAe,cAAc;MACrH;AACY,YAAM,KAAK,mBAAkB,EAAG,QAAQ,SAAS,mBAAmB,OAAO,eAAe,cAAc;IACpH;AACQ,QAAI,OAAO,eAAe;AACtB,YAAM,KAAK,mBAAkB,EAAG,QAAQ,SAAS,eAAe,KAAK,UAAU,OAAO,aAAa,CAAC;IAChH,OACa;AACD,YAAM,KAAK,mBAAkB,EAAG,WAAW,SAAS,aAAa;IAC7E;AACQ,UAAM,KAAK,mBAAkB,EAAG,QAAQ,SAAS,YAAY,GAAG,OAAO,UAAU,EAAE;EAC3F;EACI,MAAM,cAAc;AAChB,UAAM,WAAW,MAAM,KAAK,YAAW;AAEvC,UAAM,QAAQ,IAAI;MACd,KAAK,mBAAkB,EAAG,WAAW,SAAS,WAAW;MACzD,KAAK,mBAAkB,EAAG,WAAW,SAAS,OAAO;MACrD,KAAK,mBAAkB,EAAG,WAAW,SAAS,UAAU;MACxD,KAAK,mBAAkB,EAAG,WAAW,SAAS,YAAY;MAC1D,KAAK,mBAAkB,EAAG,WAAW,SAAS,aAAa;MAC3D,KAAK,mBAAkB,EAAG,WAAW,KAAK,mBAAkB,CAAE;MAC9D,KAAK,mBAAkB,EAAG,WAAW,SAAS,aAAa;IACvE,CAAS;EACT;EACI,MAAM,kBAAkB,UAAU;AAC9B,UAAM,WAAW,MAAM,KAAK,YAAY,QAAQ;AAChD,UAAM,YAAY,MAAM,KAAK,mBAAkB,EAAG,QAAQ,SAAS,SAAS;AAC5E,UAAM,iBAAiB,MAAM,KAAK,mBAAkB,EAAG,QAAQ,SAAS,cAAc;AACtF,UAAM,iBAAiB,MAAM,KAAK,mBAAkB,EAAG,QAAQ,SAAS,iBAAiB;AACzF,WAAO,kBAAkB,kBAAkB,YACrC;MACE;MACA;MACA;IAChB,IACc;EACd;EACI,MAAM,oBAAoB,UAAU;AAChC,UAAM,WAAW,MAAM,KAAK,YAAY,QAAQ;AAChD,UAAM,QAAQ,IAAI;MACd,KAAK,mBAAkB,EAAG,WAAW,SAAS,SAAS;MACvD,KAAK,mBAAkB,EAAG,WAAW,SAAS,cAAc;MAC5D,KAAK,mBAAkB,EAAG,WAAW,SAAS,iBAAiB;IAC3E,CAAS;EACT;EACI,MAAM,YAAY,UAAU;AACxB,8BAA0B,KAAK,YAAY,OAAO;AAClD,UAAM,eAAe,YAAa,MAAM,KAAK,gBAAe;AAC5D,WAAO,yBAAyB,iBAAiB,GAAG,KAAK,WAAW,QAAQ,gBAAgB,IAAI,YAAY,EAAE;EACtH;EACI,qBAAqB;AACjB,8BAA0B,KAAK,YAAY,OAAO;AAClD,UAAM,aAAa,KAAK,WAAW,QAAQ;AAC3C,WAAO,GAAG,eAAe,IAAI,UAAU;EAC/C;EACI,MAAM,kBAAkB;AACpB,UAAM,eAAgB,MAAM,KAAK,mBAAkB,EAAG,QAAQ,KAAK,mBAAkB,CAAE,KACnF;AACJ,WAAO;EACf;EACI,MAAM,iBAAiB,UAAU;AAC7B,UAAM,EAAE,eAAe,iBAAgB,IAAK,MAAM,KAAK,YAAW;AAClE,UAAM,KAAK,mBAAkB,EAAG,QAAQ,kBAAkB,KAAK,UAAU,QAAQ,CAAC;EAC1F;EACI,MAAM,mBAAmB;AACrB,UAAM,EAAE,eAAe,iBAAgB,IAAK,MAAM,KAAK,YAAW;AAClE,UAAM,gBAAgB,MAAM,KAAK,mBAAkB,EAAG,QAAQ,gBAAgB;AAC9E,WAAO,iBAAiB,KAAK,MAAM,aAAa;EACxD;AACA;AACY,IAAC,2BAA2B,CAAC,UAAU,eAAe;AAC9D,SAAO,mBAAmB,oBAAoB,EAAE,GAAG,QAAQ,IAAI,UAAU;AAC7E;AACO,SAAS,mBAAmB,UAAU;AACzC,QAAM,OAAO,OAAO,OAAO,EAAE,GAAG,SAAQ,CAAE;AAC1C,SAAO,CAAC,QAAQ,eAAe,KAAK,OAAO,CAAC,KAAK,aAAa;IAC1D,GAAG;IACH,CAAC,OAAO,GAAG,GAAG,MAAM,IAAI,UAAU,IAAI,OAAO;EACrD,IAAQ,CAAA,CAAE;AACV;;;AC5JA,IAAM,mBAAmB;AACzB,IAAM,OAAO;AACN,IAAM,oBAAN,MAAwB;EAC3B,YAAY,iBAAiB;AACzB,SAAK,kBAAkB;EAC/B;EACI,MAAM,yBAAyB;AAC3B,8BAA0B,KAAK,aAAa;AAC5C,UAAM,WAAWC,0BAAyB,MAAM,KAAK,cAAc,gBAAgB;AACnF,UAAM,QAAQ,IAAI;MACd,KAAK,gBAAgB,WAAW,SAAS,aAAa;MACtD,KAAK,gBAAgB,WAAW,SAAS,SAAS;MAClD,KAAK,gBAAgB,WAAW,SAAS,UAAU;IAC/D,CAAS;EACT;EACI,MAAM,iBAAiB;AACnB,8BAA0B,KAAK,aAAa;AAC5C,UAAM,WAAWA,0BAAyB,MAAM,KAAK,cAAc,gBAAgB;AACnF,UAAM,KAAK,uBAAsB;AACjC,UAAM,KAAK,gBAAgB,WAAW,gBAAgB;AACtD,WAAO,KAAK,gBAAgB,WAAW,SAAS,WAAW;EACnE;EACI,iBAAiB;AACb,8BAA0B,KAAK,aAAa;AAC5C,UAAM,WAAWA,0BAAyB,MAAM,KAAK,cAAc,gBAAgB;AACnF,WAAO,KAAK,gBAAgB,QAAQ,SAAS,UAAU;EAC/D;EACI,gBAAgB,OAAO;AACnB,8BAA0B,KAAK,aAAa;AAC5C,UAAM,WAAWA,0BAAyB,MAAM,KAAK,cAAc,gBAAgB;AACnF,WAAO,KAAK,gBAAgB,QAAQ,SAAS,YAAY,KAAK;EACtE;EACI,WAAW;AACP,8BAA0B,KAAK,aAAa;AAC5C,UAAM,WAAWA,0BAAyB,MAAM,KAAK,cAAc,gBAAgB;AACnF,WAAO,KAAK,gBAAgB,QAAQ,SAAS,SAAS;EAC9D;EACI,UAAU,MAAM;AACZ,8BAA0B,KAAK,aAAa;AAC5C,UAAM,WAAWA,0BAAyB,MAAM,KAAK,cAAc,gBAAgB;AACnF,WAAO,KAAK,gBAAgB,QAAQ,SAAS,WAAW,IAAI;EACpE;EACI,cAAc,iBAAiB;AAC3B,SAAK,gBAAgB;EAC7B;EACI,MAAM,oBAAoB;AACtB,8BAA0B,KAAK,aAAa;AAC5C,UAAM,WAAWA,0BAAyB,MAAM,KAAK,cAAc,gBAAgB;AACnF,WAAS,MAAM,KAAK,gBAAgB,QAAQ,SAAS,aAAa,MAAO;EACjF;EACI,MAAM,mBAAmB,UAAU;AAC/B,8BAA0B,KAAK,aAAa;AAC5C,UAAM,WAAWA,0BAAyB,MAAM,KAAK,cAAc,gBAAgB;AACnF,UAAM,KAAK,gBAAgB,QAAQ,SAAS,eAAe,GAAG,QAAQ,EAAE;EAChF;EACI,MAAM,kBAAkB;AACpB,8BAA0B,KAAK,aAAa;AAC5C,UAAM,WAAWA,0BAAyB,MAAM,KAAK,cAAc,gBAAgB;AACnF,UAAM,yBAAyB,MAAM,KAAK,gBAAgB,QAAQ,gBAAgB;AAClF,UAAM,CAAC,eAAe,oBAAoB,KAAK,MAAM,KAAK,gBAAgB,QAAQ,SAAS,WAAW,IAAI,MAAM,GAAG,KAC/G,CAAA;AACJ,WAAO;MACH,eAAe,kBAAkB,UAAU,2BAA2B;MACtE,sBAAsB,yBAAyB;IAC3D;EACA;EACI,MAAM,iBAAiB,aAAa,uBAAuB,OAAO;AAC9D,8BAA0B,KAAK,aAAa;AAC5C,UAAM,WAAWA,0BAAyB,MAAM,KAAK,cAAc,gBAAgB;AACnF,UAAM,KAAK,gBAAgB,QAAQ,SAAS,aAAa,GAAG,WAAW,IAAI,oBAAoB,EAAE;EACzG;AACA;AACA,IAAMA,4BAA2B,CAAC,UAAU,eAAe;AACvD,SAAO,mBAAmB,gBAAgB,EAAE,UAAU,UAAU;AACpE;;;AC3EY,IAAC,aAAa,IAAI,kBAAkB,cAAc;;;ACF9D,IAAM,mBAAmB,CAAA;AACb,IAAC,qBAAqB,CAAC,aAAa;AAC5C,mBAAiB,KAAK,QAAQ;AAClC;AACY,IAAC,kCAAkC,MAAM;AACjD,SAAO,iBAAiB,QAAQ;AAC5B,qBAAiB,IAAG,IAAE;EAC9B;AACA;;;ACFO,IAAM,oBAAN,MAAwB;EAC3B,cAAc;AACV,SAAK,uBAAuB,UAAS,IAC/B,YAAY;AACV,UAAI,CAAE,MAAM,WAAW,kBAAiB,GAAK;AACzC;MACpB;AACgB,UAAI,KAAK,iBAAiB;AACtB,eAAO,KAAK;MAChC;AAIgB,WAAK,kBAAkB,IAAI,QAAQ,CAAC,SAAS,YAAY;AACrD,2BAAmB,OAAO;MAC9C,CAAiB;AACD,aAAO,KAAK;IAC5B,IACc,YAAY;IAE1B;EACA;EACI,cAAc,YAAY;AACtB,eAAW,cAAc,WAAW,OAAO;AAC3C,SAAK,aAAa;EAC1B;EACI,kBAAkB,gBAAgB;AAC9B,SAAK,iBAAiB;EAC9B;EACI,kBAAkB,YAAY;AAC1B,SAAK,aAAa;EAC1B;EACI,gBAAgB;AACZ,QAAI,CAAC,KAAK,YAAY;AAClB,YAAM,IAAI,UAAU;QAChB,MAAM;QACN,SAAS;MACzB,CAAa;IACb;AACQ,WAAO,KAAK;EACpB;EACI,oBAAoB;AAChB,QAAI,CAAC,KAAK,gBAAgB;AACtB,YAAM,IAAI,UAAU;QAChB,MAAM;QACN,SAAS;MACzB,CAAa;IACb;AACQ,WAAO,KAAK;EACpB;EACI,MAAM,UAAU,SAAS;AACrB,QAAI;AACJ,QAAI;AACA,gCAA0B,KAAK,YAAY,OAAO;IAC9D,SACe,MAAM;AAET,aAAO;IACnB;AACQ,UAAM,KAAK,qBAAoB;AAC/B,SAAK,kBAAkB;AACvB,aAAS,MAAM,KAAK,cAAa,EAAG,WAAU;AAC9C,UAAM,WAAW,MAAM,KAAK,cAAa,EAAG,gBAAe;AAC3D,QAAI,WAAW,MAAM;AACjB,aAAO;IACnB;AACQ,UAAM,iBAAiB,CAAC,CAAC,QAAQ,WAC7B,eAAe;MACX,YAAY,OAAO,SAAS,SAAS,OAAO,KAAK;MACjD,YAAY,OAAO,cAAc;IACjD,CAAa;AACL,UAAM,qBAAqB,eAAe;MACtC,YAAY,OAAO,aAAa,SAAS,OAAO,KAAK;MACrD,YAAY,OAAO,cAAc;IAC7C,CAAS;AACD,QAAI,SAAS,gBAAgB,kBAAkB,oBAAoB;AAC/D,eAAS,MAAM,KAAK,cAAc;QAC9B;QACA;MAChB,CAAa;AACD,UAAI,WAAW,MAAM;AACjB,eAAO;MACvB;IACA;AACQ,WAAO;MACH,aAAa,QAAQ;MACrB,SAAS,QAAQ;MACjB,eAAe,QAAQ;IACnC;EACA;EACI,MAAM,cAAc,EAAE,QAAQ,SAAQ,GAAK;AACvC,QAAI;AACA,YAAM,EAAE,cAAa,IAAK;AAC1B,YAAM,YAAY,MAAM,KAAK,kBAAiB,EAAG;QAC7C;QACA,YAAY,KAAK;QACjB;MAChB,CAAa;AACD,gBAAU,gBAAgB;AAC1B,YAAM,KAAK,UAAU,EAAE,QAAQ,UAAS,CAAE;AAC1C,UAAI,SAAS,QAAQ,EAAE,OAAO,eAAc,GAAI,QAAQ,cAAc;AACtE,aAAO;IACnB,SACe,KAAK;AACR,aAAO,KAAK,aAAa,GAAG;IACxC;EACA;EACI,aAAa,KAAK;AACd,uBAAmB,GAAG;AACtB,QAAI,IAAI,SAAS,iBAAiB,cAAc;AAE5C,WAAK,YAAW;IAC5B;AACQ,QAAI,SAAS,QAAQ;MACjB,OAAO;MACP,MAAM,EAAE,OAAO,IAAG;IAC9B,GAAW,QAAQ,cAAc;AACzB,QAAI,IAAI,KAAK,WAAW,wBAAwB,GAAG;AAC/C,aAAO;IACnB;AACQ,UAAM;EACd;EACI,MAAM,UAAU,EAAE,OAAM,GAAI;AACxB,WAAO,KAAK,cAAa,EAAG,YAAY,MAAM;EACtD;EACI,MAAM,cAAc;AAChB,WAAO,KAAK,cAAa,EAAG,YAAW;EAC/C;EACI,kBAAkB,UAAU;AACxB,WAAO,KAAK,cAAa,EAAG,kBAAkB,QAAQ;EAC9D;EACI,oBAAoB,UAAU;AAC1B,WAAO,KAAK,cAAa,EAAG,oBAAoB,QAAQ;EAChE;EACI,iBAAiB,UAAU;AACvB,WAAO,KAAK,cAAa,EAAG,iBAAiB,QAAQ;EAC7D;EACI,mBAAmB;AACf,WAAO,KAAK,cAAa,EAAG,iBAAgB;EACpD;AACA;;;AC9IO,IAAM,gCAAN,MAAoC;EACvC,cAAc;AACV,SAAK,iBAAiB,IAAI,kBAAiB;AAC3C,SAAK,eAAe,mBAAmB,cAAc;AACrD,SAAK,oBAAoB,IAAI,kBAAiB;AAC9C,SAAK,kBAAkB,kBAAkB,KAAK,cAAc;AAC5D,SAAK,kBAAkB,kBAAkB,iBAAiB;EAClE;EACI,UAAU,EAAE,aAAY,IAAK,EAAE,cAAc,MAAK,GAAI;AAClD,WAAO,KAAK,kBAAkB,UAAU,EAAE,aAAY,CAAE;EAChE;EACI,mBAAmB,iBAAiB;AAChC,SAAK,eAAe,mBAAmB,eAAe;EAC9D;EACI,cAAc,YAAY;AACtB,SAAK,eAAe,cAAc,UAAU;AAC5C,SAAK,kBAAkB,cAAc,UAAU;EACvD;AACA;;;AChBY,IAAC,gCAAgC,IAAI,8BAA6B;AAClE,IAAC,EAAE,kBAAiB,IAAK;;;ACL9B,eAAe,mBAAmB,sBAAsB;AAC3D,MAAI,qBAAqB,aAAa;AAClC,UAAM,cAAc,UAAU,qBAAqB,WAAW;AAC9D,UAAM,+BAA+B,YAAY,QAAQ,OAAO,KAAK;AACrE,UAAM,eAAc,oBAAI,KAAI,GAAG,QAAO;AACtC,UAAM,aAAa,8BAA8B,IAC3C,8BAA8B,cAC9B;AACN,QAAI;AACJ,QAAI;AACJ,QAAI;AACJ,QAAI,qBAAqB,cAAc;AACnC,qBAAe,qBAAqB;IAChD;AACQ,QAAI,qBAAqB,SAAS;AAC9B,gBAAU,UAAU,qBAAqB,OAAO;IAC5D;AACQ,QAAI,sBAAsB,mBAAmB;AACzC,uBAAiB,qBAAqB;IAClD;AACQ,UAAM,SAAS;MACX;MACA;MACA;MACA;MACA;MACA,UAAU,qBAAqB;IAC3C;AACQ,QAAI,sBAAsB,eAAe;AACrC,aAAO,gBAAgB,qBAAqB;IACxD;AACQ,UAAM,kBAAkB,UAAU;MAC9B;IACZ,CAAS;EACT,OACS;AAED,UAAM,IAAI,aAAa;MACnB,SAAS;MACT,MAAM;MACN,oBAAoB;IAChC,CAAS;EACT;AACA;;;ACxCY,IAAC,gBAAgB;AACjB,IAAC,2BAA2B,YAAY;AAChD,MAAI;AACA,QAAI,SAAS,QAAQ;MACjB,OAAO;MACP,MAAM,MAAMC,gBAAc;IACtC,GAAW,QAAQ,cAAc;EACjC,SACW,OAAO;AACV,QAAI,MAAM,SAAS,gCAAgC;AAC/C,YAAM,IAAI,UAAU;QAChB,MAAM;QACN,SAAS;QACT,oBAAoB;MACpC,CAAa;IACb;AACQ,UAAM;EACd;AACA;;;ACpBA,IAAMC,WAAS,IAAI,cAAc,WAAW;AAwBhC,IAAC,oBAAoB;EAC7B,kBAAkB;IACd,SAAS,iBAAiB;IAC1B,KAAK;EACb;EACI,UAAU;IACN,SAAS,iBAAiB;IAC1B,KAAK;;;;;;;;;;EAUb;EACI,mBAAmB;IACf,SAAS,iBAAiB;IAC1B,KAAK;;;;;;;;;;EAUb;EACI,eAAe;IACX,SAAS,iBAAiB;EAClC;;EAEI,iBAAiB;IACb,SAAS,iBAAiB;EAClC;EACI,eAAe;IACX,SAAS,iBAAiB;EAClC;EACI,WAAW;IACP,SAAS,iBAAiB;EAClC;EACI,aAAa;IACT,SAAS,iBAAiB;IAC1B,KAAK;EACb;EACI,OAAO;IACH,SAAS,iBAAiB;EAClC;EACI,YAAY;IACR,SAAS,iBAAiB;EAClC;EACI,wBAAwB;IACpB,SAAS,iBAAiB;EAClC;EACI,eAAe;IACX,SAAS,iBAAiB;EAClC;EACI,cAAc;IACV,SAAS,iBAAiB;EAClC;EACI,cAAc;IACV,SAAS,iBAAiB;EAClC;EACI,iBAAiB;IACb,SAAS,iBAAiB;EAClC;EACI,SAAS;IACL,SAAS,iBAAiB;EAClC;AACA;;;AChGY,IAAC,mBAAmB,CAAC,SAAS,uBAAuB,IAAI,UAAU;EAC3E,SAAS,WAAW;EACpB,MAAM,eAAe;EACrB,oBAAoB,sBAAsB,kBAAkB,iBAAiB;AACjF,CAAC;;;ACPS,IAAC;CACV,SAAUC,iBAAgB;AACvB,EAAAA,gBAAe,UAAU,IAAI;AAC7B,EAAAA,gBAAe,mBAAmB,IAAI;AACtC,EAAAA,gBAAe,eAAe,IAAI;AAClC,EAAAA,gBAAe,iBAAiB,IAAI;AACpC,EAAAA,gBAAe,eAAe,IAAI;AAClC,EAAAA,gBAAe,WAAW,IAAI;AAC9B,EAAAA,gBAAe,aAAa,IAAI;AAChC,EAAAA,gBAAe,OAAO,IAAI;AAC1B,EAAAA,gBAAe,YAAY,IAAI;AAC/B,EAAAA,gBAAe,wBAAwB,IAAI;AAC3C,EAAAA,gBAAe,eAAe,IAAI;AAClC,EAAAA,gBAAe,SAAS,IAAI;AAC5B,EAAAA,gBAAe,cAAc,IAAI;AACjC,EAAAA,gBAAe,cAAc,IAAI;AACjC,EAAAA,gBAAe,iBAAiB,IAAI;AACpC,EAAAA,gBAAe,kBAAkB,IAAI;AACzC,GAAG,mBAAmB,iBAAiB,CAAA,EAAG;;;ACf9B,IAAC,uBAAuB;AACxB,IAAC,0BAA0B;AAC3B,IAAC,+BAA+B;AAChC,IAAC,gBAAgB,OAAO,UAAU;AAC1C,QAAM,aAAa,MAAM,WAAW,eAAc;AAElD,QAAM,iBAAiB,UAAU,aAAa,aAAa;AAC3D,MAAI,CAAC,gBAAgB;AACjB,UAAM,IAAI,UAAU;MAChB,MAAM,eAAe;MACrB,SAAS,UAAU,OAAO,uBAAuB;MACjD,oBAAoB,UAAU,OAAO,SAAY;IAC7D,CAAS;EACT;AACI,SAAO;AACX;;;ACTY,IAAC,oBAAoB,OAAO,EAAE,YAAY,gBAAgB,UAAU,aAAa,cAAc,QAAQ,qBAAoB,MAAQ;AAC3I,QAAM,YAAY,IAAI,WAAW,UAAU;AAC3C,QAAM,QAAQ,UAAU,aAAa,IAAI,OAAO;AAChD,QAAM,eAAe,UAAU,aAAa,IAAI,mBAAmB;AACnE,MAAI,OAAO;AACP,UAAM,iBAAiB,gBAAgB,KAAK;EACpD;AACI,MAAI,iBAAiB,QAAQ;AACzB,WAAO,eAAe;MAClB;MACA;MACA;MACA;MACA;MACA;IACZ,CAAS;EACT;AACI,SAAO,mBAAmB;IACtB;IACA;IACA;EACR,CAAK;AACL;AACA,IAAM,iBAAiB,OAAO,EAAE,YAAY,gBAAgB,UAAU,aAAa,QAAQ,qBAAoB,MAAQ;AAGnH,QAAM,MAAM,IAAI,WAAW,UAAU;AACrC,QAAM,OAAO,IAAI,aAAa,IAAI,MAAM;AACxC,QAAM,QAAQ,IAAI,aAAa,IAAI,OAAO;AAK1C,MAAI,CAAC,QAAQ,CAAC,OAAO;AACjB,UAAM,iBAAiB,4BAA4B;EAC3D;AAEI,QAAM,iBAAiB,MAAM,cAAc,KAAK;AAChD,QAAM,qBAAqB,aAAa,SAAS;AAOjD,QAAM,eAAe,MAAM,WAAW,SAAQ;AAC9C,QAAM,iBAAiB;IACnB,YAAY;IACZ;IACA,WAAW;IACX,cAAc;IACd,GAAI,eAAe,EAAE,eAAe,aAAY,IAAK,CAAA;EAC7D;AACI,QAAM,OAAO,OAAO,QAAQ,cAAc,EACrC,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,GAAG,mBAAmB,CAAC,CAAC,IAAI,mBAAmB,CAAC,CAAC,EAAE,EACnE,KAAK,GAAG;AACb,QAAM,EAAE,cAAc,eAAe,cAAc,UAAU,OAAO,eAAe,cAAc,YAAY,WAAU,IAAM,OAAO,MAAM,MAAM,oBAAoB;IAChK,QAAQ;IACR,SAAS;MACL,gBAAgB;MAChB,CAAC,iBAAiB,GAAG;IACjC;IACQ;EACR,CAAK,GAAG,KAAI;AACR,MAAI,OAAO;AAEP,UAAM,iBAAiB,gBAAgB,KAAK;EACpD;AACI,QAAM,YAAY,gBAAgB,UAAU,YAAY,EAAE,QAAQ,aAAa;AAC/E,QAAM,mBAAmB;IACrB;IACA,aAAa;IACb,SAAS;IACT,cAAc;EAGlB,CAAC;AACD,SAAO,aAAa;IAChB;IACA,OAAO;IACP;EACR,CAAK;AACL;AACA,IAAM,qBAAqB,OAAO,EAAE,YAAY,aAAa,qBAAoB,MAAQ;AAErF,QAAM,MAAM,IAAI,WAAW,UAAU;AACrC,QAAM,EAAE,UAAU,cAAc,OAAO,YAAY,YAAY,mBAAmB,MAAK,KAAO,IAAI,QAAQ,KACrG,UAAU,CAAC,EACX,MAAM,GAAG,EACT,IAAI,cAAY,SAAS,MAAM,GAAG,CAAC,EACnC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,OAAO,CAAC,CAAC,GAAG,EAAC,IAAK;IACnD,UAAU;IACV,cAAc;IACd,OAAO;IACP,YAAY;IACZ,YAAY;IACZ,mBAAmB;IACnB,OAAO;EACf,CAAK;AACD,MAAI,OAAO;AACP,UAAM,iBAAiB,qBAAqB,KAAK;EACzD;AACI,MAAI,CAAC,cAAc;AAEf,UAAM,iBAAiB,2CAA2C;EAC1E;AACI,QAAM,iBAAiB,MAAM,cAAc,KAAK;AAChD,QAAM,YAAY,gBAAgB,UAAU,YAAY,EAAE,QAAQ,aAAa;AAC/E,QAAM,mBAAmB;IACrB;IACA,aAAa;IACb,SAAS;EAGb,CAAC;AACD,SAAO,aAAa;IAChB;IACA,OAAO;IACP;EACR,CAAK;AACL;AACA,IAAM,eAAe,OAAO,EAAE,aAAa,OAAO,qBAAoB,MAAQ;AAC1E,QAAM,kBAAkB,iBAAiB;IACrC,aAAa;EACrB,CAAK;AACD,QAAM,WAAW,eAAc;AAC/B,QAAM,WAAW,iBAAiB,MAAM,oBAAoB;AAI5D,kCAA+B;AAE/B,eAAa,WAAW;AACxB,MAAI,cAAc,KAAK,GAAG;AACtB,QAAI,SAAS,QAAQ;MACjB,OAAO;MACP,MAAM,cAAc,eAAe,KAAK,CAAC;IACrD,GAAW,QAAQ,cAAc;EACjC;AACI,MAAI,SAAS,QAAQ,EAAE,OAAO,qBAAoB,GAAI,QAAQ,cAAc;AAC5E,QAAM,yBAAwB;AAClC;AACA,IAAM,gBAAgB,CAAC,UAAU;AAC7B,SAAO,IAAI,KAAK,KAAK;AACzB;AACA,IAAM,iBAAiB,CAAC,UAAU;AAC9B,SAAO,MAAM,MAAM,GAAG,EAAE,OAAO,CAAC,EAAE,KAAK,GAAG;AAC9C;AACA,IAAM,eAAe,CAAC,gBAAgB;AAClC,MAAI,OAAO,WAAW,eAAe,OAAO,OAAO,YAAY,aAAa;AACxE,WAAO,QAAQ,aAAa,OAAO,QAAQ,OAAO,IAAI,WAAW;EACzE;AACA;;;AC/JO,SAASC,gBAAe,WAAW,sBAAsB;AAC5D,MAAI,sBAAsB;AACtB,UAAM,cAAc,WAAW,KAAK,cAAY,aAAa,oBAAoB;AACjF,QAAI,CAAC,aAAa;AACd,YAAM;IAClB;AACQ,WAAO;EACf,OACS;AACD,UAAM,+BAA+B,WAAW,KAAK,uBAAuB,KACxE,WAAW,KAAK,eAAe;AACnC,UAAM,iCAAiC,WAAW,KAAK,OAAO,KAAK,WAAW,KAAK,MAAM;AACzF,QAAI,8BAA8B;AAC9B,aAAO;IACnB,WACiB,gCAAgC;AACrC,YAAM;IAClB;AACQ,UAAM;EACd;AACA;AAEA,IAAM,0BAA0B,CAAC,aAAa,SAAS;;EAEvD,OAAO,OAAO,SAAS,SAAS,OAAO,SAAS,QAAe;AAAC;AAEhE,IAAM,kBAAkB,CAAC,aAAa,SAAS,SAAS,OAAO,OAAO,SAAS,QAAQ,CAAC;AACxF,IAAM,SAAS,CAAC,aAAa,SAAS,WAAW,SAAS;AAC1D,IAAM,UAAU,CAAC,aAAa,SAAS,WAAW,UAAU;;;AC1BhD,IAAC,gBAAgB,OAAO,UAAU;AAC1C,kCAA+B;AAC/B,QAAM,WAAW,uBAAsB;AACvC,MAAI,SAAS,QAAQ,EAAE,OAAO,8BAA8B,MAAM,EAAE,MAAK,EAAE,GAAI,QAAQ,cAAc;AACzG;;;ACFY,IAAC,2BAA2B,OAAO,eAAe;AAC1D,MAAI;AACA,8BAA0B,UAAU;AACpC,sBAAkB,UAAU;AAC5B,eAAW,cAAc,UAAU;EAC3C,SACW,GAAG;AAIN;EACR;AAEI,MAAI,CAAE,MAAM,WAAW,kBAAiB,GAAK;AACzC;EACR;AACI,MAAI;AACA,UAAM,aAAa,OAAO,SAAS;AACnC,UAAM,EAAE,WAAW,iBAAgB,IAAK;AACxC,UAAM,EAAE,QAAQ,gBAAgB,aAAY,IAAK,UAAU;AAC3D,UAAM,cAAcC,gBAAe,cAAc;AACjD,UAAM,kBAAkB;MACpB;MACA,UAAU;MACV;MACA;MACA;MACA,gBAAgB,sBAAsB,WAAW,kBAAkB;IAC/E,CAAS;EACT,SACW,KAAK;AACR,UAAM,cAAc,GAAG;EAC/B;AACA;;;AClCA,UAAS,MACJ,MAAM;AAEH,UAAQ,kBAAkB,EAAE,wBAAwB;AAC5D,GAAK;;;ACTO,IAAC,wBAAwB;EACjC,YAAY;AAChB;;;ACEA,IAAMC,WAAS,IAAI,cAAc,wBAAwB;AAClD,IAAM,yBAAN,MAA6B;EAChC,cAAc,iBAAiB;AAC3B,+BAA2B,gBAAgB,OAAO;AAClD,SAAK,aAAa;AAClB,SAAK,YAAYC,0BAAyB,WAAW,gBAAgB,QAAQ,cAAc;EACnG;EACI,YAAY,iBAAiB;AACzB,SAAK,YAAY,CAAA;AACjB,SAAK,sBAAsB;AAC3B,SAAK,kBAAkB;EAC/B;EACI,MAAM,iBAAiB;AACnB,+BAA2B,KAAK,YAAY,OAAO;AACnD,QAAI;AACA,UAAI,KAAK,oBAAoB;AACzB,eAAO;UACH,IAAI,KAAK;UACT,MAAM;QAC1B;MACA,OACiB;AACD,cAAM,mBAAmB,MAAM,KAAK,gBAAgB,QAAQ,KAAK,UAAU,UAAU;AACrF,YAAI,kBAAkB;AAClB,eAAK,sBAAsB;AAC3B,iBAAO;YACH,IAAI;YACJ,MAAM;UAC9B;QACA;AACgB,eAAO;MACvB;IACA,SACe,KAAK;AACR,MAAAD,SAAO,IAAI,oCAAoC,GAAG;AAClD,aAAO;IACnB;EACA;EACI,MAAM,gBAAgBE,WAAU;AAC5B,+BAA2B,KAAK,YAAY,OAAO;AACnD,QAAIA,UAAS,SAAS,SAAS;AAC3B,WAAK,gBAAgB,QAAQ,KAAK,UAAU,YAAYA,UAAS,EAAE;AAEnE,WAAK,qBAAqB;AAC1B,WAAK,sBAAsB;IACvC,OACa;AACD,WAAK,qBAAqBA,UAAS;AAEnC,UAAI,KAAK,qBAAqB;AAC1B,aAAK,gBAAgB,WAAW,KAAK,UAAU,UAAU;AACzD,aAAK,sBAAsB;MAC3C;IACA;EACA;EACI,MAAM,kBAAkB;AACpB,SAAK,qBAAqB;AAC1B,UAAM,KAAK,gBAAgB,WAAW,KAAK,UAAU,UAAU;EACvE;AACA;AACA,IAAMD,4BAA2B,CAAC,UAAU,eAAe;AACvD,SAAO,mBAAmB,qBAAqB,EAAE,eAAe,QAAQ,IAAI,UAAU;AAC1F;;;AChEO,SAAS,cAAc,SAAS;AACnC,QAAM,SAAS,UAAU,OAAO,EAAE,QAAQ;AAC1C,QAAM,MAAM,CAAA;AACZ,MAAI,CAAC,QAAQ;AACT,UAAM,IAAI,UAAU;MAChB,MAAM;MACN,SAAS;IACrB,CAAS;EACT;AACI,QAAM,aAAa,OAAO,QAAQ,iBAAiB,EAAE;AACrD,MAAI,UAAU,IAAI;AAClB,SAAO;AACX;;;ACAO,eAAe,0BAA0B,EAAE,QAAQ,YAAY,gBAAe,GAAK;AACtF,kBAAgB,cAAc,EAAE,SAAS,WAAU,CAAE;AAErD,QAAM,aAAa,MAAM,gBAAgB,eAAc;AACvD,MAAI,YAAY;AACZ,WAAO,WAAW;EAC1B;AACI,QAAM,SAAS,QAAQ,UACjB,cAAc,OAAO,QAAQ,SAAQ,CAAE,IACvC,CAAA;AACN,QAAM,sBAAsB,MAAM,mBAAmB,QAAQ,UAAU;AAEvE,kBAAgB,gBAAgB;IAC5B,IAAI;IACJ,MAAM,SAAS,YAAY;EACnC,CAAK;AACD,SAAO;AACX;AACA,eAAe,mBAAmB,QAAQ,YAAY;AAClD,QAAM,iBAAiB,YAAY;AACnC,QAAM,SAAS,4BAA4B,cAAc;AAEzD,MAAI;AAGJ,MAAI;AACA,gBAAY,MAAM,MAAM;MACpB;IACZ,GAAW;MACC,gBAAgB;MAChB,QAAQ;IACpB,CAAS,GAAG;EACZ,SACW,GAAG;AACN,uBAAmB,CAAC;AACpB,UAAM,IAAI,UAAU,CAAC;EAC7B;AACI,MAAI,CAAC,UAAU;AACX,UAAM,IAAI,UAAU;MAChB,MAAM;MACN,SAAS;MACT,oBAAoB;IAChC,CAAS;EACT;AACI,SAAO;AACX;;;ACnDA,IAAME,WAAS,IAAI,cAAc,4BAA4B;AAC7D,IAAM,kBAAkB,KAAK,KAAK;AAC3B,IAAM,6CAAN,MAAiD;EACpD,YAAY,iBAAiB;AACzB,SAAK,0BAA0B;AAC/B,SAAK,mBAAmB;EAChC;EACI,MAAM,gCAAgC;AAClC,IAAAA,SAAO,MAAM,yCAAyC;AACtD,SAAK,4BAA4B;AACjC,UAAM,KAAK,iBAAiB,gBAAe;EACnD;EACI,MAAM,mBAAmB;AACrB,IAAAA,SAAO,MAAM,oCAAoC;AACjD,SAAK,4BAA4B;EACzC;EACI,MAAM,4BAA4B,uBAAuB;AACrD,UAAMC,mBAAkB,sBAAsB;AAC9C,UAAM,EAAE,OAAM,IAAK;AACnB,UAAM,EAAE,WAAU,IAAK;AACvB,QAAI;AACA,iCAA2B,YAAY,OAAO;IAC1D,QACc;AAEF;IACZ;AACQ,QAAI,CAACA,oBAAmB,CAAC,WAAW,QAAQ,kBAAkB;AAE1D;IACZ;AACQ,UAAM,EAAE,aAAY,IAAK;AACzB,UAAM,kBAAkB,KAAK,gBAAgB,MAAM;AACnD,UAAM,aAAa,MAAM,0BAA0B;MAC/C;MACA,YAAY,WAAW;MACvB,iBAAiB,KAAK;IAClC,CAAS;AAED,QAAI,gBAAgB,iBAAiB;AACjC,WAAK,iBAAgB;IACjC;AACQ,QAAI,CAACA,kBAAiB;AAClB,aAAO,KAAK,oBAAoB,YAAY,WAAW,OAAO;IAC1E,OACa;AACD,gCAA0B,MAAM;AAChC,aAAO,KAAK,mBAAmB,WAAW,SAAS,QAAQ,UAAU;IACjF;EACA;EACI,MAAM,oBAAoB,YAAY,YAAY;AAE9C,QAAI,KAAK,6BACL,CAAC,KAAK,UAAS,KACf,KAAK,0BAA0B,yBAAyB,OAAO;AAC/D,MAAAD,SAAO,KAAK,oEAAoE;AAChF,aAAO,KAAK;IACxB;AAEQ,SAAK,iBAAgB;AACrB,UAAM,SAAS,4BAA4B,WAAW,cAAc;AAKpE,QAAI;AACJ,QAAI;AACA,qBAAe,MAAM,0BAA0B,EAAE,OAAM,GAAI;QACvD,YAAY;MAC5B,CAAa;IACb,SACe,GAAG;AACN,yBAAmB,CAAC;AACpB,YAAM,IAAI,UAAU,CAAC;IACjC;AACQ,QAAI,cAAc,aAAa,eAC3B,cAAc,aAAa,WAAW;AACtC,WAAK,2BAA0B,oBAAI,KAAI,GAAG,QAAO,IAAK;AACtD,YAAM,MAAM;QACR,aAAa;UACT,aAAa,aAAa,YAAY;UACtC,iBAAiB,aAAa,YAAY;UAC1C,cAAc,aAAa,YAAY;UACvC,YAAY,aAAa,YAAY;QACzD;QACgB;MAChB;AACY,UAAI,aAAa,YAAY;AACzB,YAAI,aAAa,aAAa;AAC9B,aAAK,iBAAiB,gBAAgB;UAClC,IAAI,aAAa;UACjB,MAAM;QAC1B,CAAiB;MACjB;AACY,WAAK,4BAA4B;QAC7B,GAAG;QACH,sBAAsB;MACtC;AACY,aAAO;IACnB,OACa;AACD,YAAM,IAAI,UAAU;QAChB,MAAM;QACN,SAAS;MACzB,CAAa;IACb;EACA;EACI,MAAM,mBAAmB,YAAY,YAAY,YAAY;AACzD,QAAI,KAAK,6BACL,CAAC,KAAK,UAAS,KACf,KAAK,0BAA0B,yBAAyB,MAAM;AAC9D,MAAAA,SAAO,MAAM,oEAAoE;AACjF,aAAO,KAAK;IACxB;AAEQ,SAAK,iBAAgB;AACrB,UAAM,SAAS,WAAW,UACpB,cAAc,WAAW,QAAQ,SAAQ,CAAE,IAC3C,CAAA;AACN,UAAM,SAAS,4BAA4B,WAAW,cAAc;AACpE,QAAI;AACJ,QAAI;AACA,qBAAe,MAAM,0BAA0B,EAAE,OAAM,GAAI;QACvD,YAAY;QACZ,QAAQ;MACxB,CAAa;IACb,SACe,GAAG;AACN,yBAAmB,CAAC;AACpB,YAAM,IAAI,UAAU,CAAC;IACjC;AACQ,QAAI,cAAc,aAAa,eAC3B,cAAc,aAAa,WAAW;AACtC,WAAK,2BAA0B,oBAAI,KAAI,GAAG,QAAO,IAAK;AACtD,YAAM,MAAM;QACR,aAAa;UACT,aAAa,aAAa,YAAY;UACtC,iBAAiB,aAAa,YAAY;UAC1C,cAAc,aAAa,YAAY;UACvC,YAAY,aAAa,YAAY;QACzD;QACgB;MAChB;AACY,UAAI,aAAa,YAAY;AACzB,YAAI,aAAa,aAAa;AAE9B,aAAK,iBAAiB,gBAAgB;UAClC,IAAI,aAAa;UACjB,MAAM;QAC1B,CAAiB;MACjB;AAEY,WAAK,4BAA4B;QAC7B,GAAG;QACH,sBAAsB;QACtB,mBAAmB,WAAW,SAAS,SAAQ;MAC/D;AACY,aAAO;IACnB,OACa;AACD,YAAM,IAAI,UAAU;QAChB,MAAM;QACN,SAAS;MACzB,CAAa;IACb;EACA;EACI,YAAY;AACR,WAAO,KAAK,4BAA4B,SAClC,OACA,KAAK,2BAA2B,KAAK,IAAG;EACtD;EACI,gBAAgB,QAAQ;AACpB,WAAQ,CAAC,CAAC,UACN,CAAC,CAAC,KAAK,2BAA2B,qBAClC,OAAO,SAAS,SAAQ,MACpB,KAAK,0BAA0B;EAC/C;AACA;;;AC7KY,IAAC,6BAA6B,IAAI,2CAA2C,IAAI,uBAAuB,cAAc,CAAC;;;ACTvH,IAAC,iBAAiB;;;;;;;;;;;;;EAa1B,UAAU,gBAAgB,gBAAgB;AACtC,UAAM,yBAAyB,mBAAmB,cAAc;AAChE,UAAM,6BAA6B,IAAI,cAAc,EAAE,UAAU,MAAK,CAAE;AACxE,UAAM,0BAA0B,gBAAgB,MAC1C,6BACA;AACN,UAAM,8BAA8B,gBAAgB,MAC9C,IAAI,2CAA2C,IAAI,uBAAuB,0BAA0B,CAAC,IACrG;AAGN,QAAI,CAAC,uBAAuB,MAAM;AAC9B,cAAQ,UAAU,wBAAwB,cAAc;AACxD;IACZ;AAGQ,QAAI,gBAAgB,MAAM;AACtB,cAAQ,UAAU,wBAAwB,cAAc;AACxD;IACZ;AAEQ,QAAI,CAAC,QAAQ,eAAe,MAAM;AAC9B,oCAA8B,cAAc,uBAAuB,IAAI;AACvE,oCAA8B;;QAE9B;MAAuB;AACvB,cAAQ,UAAU,wBAAwB;QACtC,GAAG;QACH,MAAM;UACF,eAAe;UACf,qBAAqB;QACzC;MACA,CAAa;AACD;IACZ;AAGQ,QAAI,gBAAgB;AAChB,YAAM,qBAAqB,QAAQ,eAAe;AAElD,UAAI,eAAe,QAAQ,QAAW;AAClC,sCAA8B;;UAE9B;QAAuB;AACvB,2BAAmB,sBAAsB;MACzD;AACY,cAAQ,UAAU,wBAAwB;QACtC,MAAM;QACN,GAAG;MACnB,CAAa;AACD;IACZ;AAGQ,YAAQ,UAAU,sBAAsB;EAChD;;;;;;;EAOI,YAAY;AACR,WAAO,QAAQ,UAAS;EAChC;AACA;;;AC5EO,SAAS,gBAAgB;AAC5B,iBAAQ,UAAU,mBAAM;AAExB,SAAOE,gBAAe;AAC1B;AAEO,SAAS,eAAe,QAAQ;AACnC,yBAAuB,MAAM;AACjC;AAEO,SAAS,aAAa,QAAQ,UAAU,YAAY,MAAM;AAC7D,YAAU,QAAQ,UAAU,YAAY,IAAI;AAChD;AAEO,SAAS,OAAO;AACnB,SAAO,WAAG;AACd;",
  "names": ["name", "_typeof", "obj", "_typeof", "obj", "self", "_wrapNativeSuper", "Class", "_construct", "Parent", "args", "_setPrototypeOf", "o", "p", "_getPrototypeOf", "GraphQLError", "loc", "get", "Location", "Token", "_typeof", "obj", "name", "_typeof", "obj", "instanceOf", "_defineProperties", "_createClass", "Source", "name", "get", "indent", "Lexer", "Parser", "name", "item", "name", "d", "b", "from", "v", "Subscription", "Subscriber", "ConsumerObserver", "SafeSubscriber", "Observable", "observable", "init", "OperatorSubscriber", "err", "process", "iterator", "iterator", "name", "AmplifyErrorCode", "name", "LogType", "name", "config", "logger", "config", "api", "name", "config", "version", "name", "AuthConfigurationErrorCode", "RawSha256", "fromUtf8", "Sha256", "Framework", "Category", "AiAction", "AnalyticsAction", "ApiAction", "AuthAction", "DataStoreAction", "GeoAction", "InAppMessagingAction", "InteractionsAction", "PredictionsAction", "PubSubAction", "PushNotificationAction", "StorageAction", "api", "logger", "name", "name", "fetchAuthSession", "fetchAuthSessionInternal", "transferHandler", "defaultConfig", "config", "context", "context", "context", "jitteredBackoff", "jitteredBackoffUtil", "jitteredBackoff", "logger", "name", "get", "converter", "defaultConfig", "CacheErrorCode", "assert", "logger", "config", "defaultConfig", "assert", "logger", "config", "defaultConfig", "logger", "I18nErrorCode", "assert", "logger", "I18n", "config", "I18nClass", "assert", "context", "RestApiValidationErrorCode", "parseAwsJsonError", "logger", "logger", "cancel", "unauthenticatedHandler", "jitteredBackoff", "unauthenticatedHandler", "logger", "post", "MAX_DELAY_MS", "MESSAGE_TYPES", "SUBSCRIPTION_STATUS", "SOCKET_STATUS", "CONTROL_MSG", "ConnectionState", "ReconnectEvent", "logger", "fetchAuthSession", "MAX_DELAY_MS", "protocol", "APIValidationErrorCode", "validationErrorMap", "assertValidationError", "name", "validationErrorMap", "logger", "config", "assertValidationError", "GraphQLAuthError", "USER_AGENT_HEADER", "post", "cancelREST", "isCancelErrorREST", "config", "context", "result", "hasManyFilter", "name", "getInternals", "AiAction", "getInternals", "context", "observable", "config", "getInternals", "getInternals", "get", "context", "name", "getInternals", "context", "name", "fromUtf8", "fromUtf8", "isArrayLike", "block", "document", "getInternals", "AiAction", "deserializeToolUseBlock", "block", "getInternals", "AiAction", "block", "name", "document", "getInternals", "AiAction", "getInternals", "getInternals", "name", "AiAction", "getInternals", "get", "AiAction", "getInternals", "AiAction", "getInternals", "AiAction", "getInternals", "name", "AiAction", "getInternals", "name", "getInternals", "AiAction", "getInternals", "context", "name", "getInternals", "name", "subscription", "observable", "name", "getInternals", "name", "getInternals", "cancel", "isCancelError", "isApiGraphQLConfig", "cancel", "isCancelError", "isApiGraphQLConfig", "generateClient", "internalGenerateClient", "config", "AuthValidationErrorCode", "validationErrorMap", "AuthErrorStrings", "AuthErrorCodes", "getCurrentUser", "getCurrentUserInternal", "getSharedHeaders", "buildHttpRpcRequest", "disableCacheMiddlewareFactory", "jitteredBackoff", "config", "TokenProviderErrorCode", "assert", "assert", "createKeysForAuthStorage", "getCurrentUser", "logger", "AuthErrorTypes", "getRedirectUrl", "getRedirectUrl", "logger", "createKeysForAuthStorage", "identity", "logger", "isAuthenticated", "generateClient"]
}
